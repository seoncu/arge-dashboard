(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();function eg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ih={exports:{}},Kl={},ah={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf;function cv(){if(Mf)return vt;Mf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),M=Symbol.iterator;function V(w){return w===null||typeof w!="object"?null:(w=M&&w[M]||w["@@iterator"],typeof w=="function"?w:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oe=Object.assign,F={};function z(w,R,K){this.props=w,this.context=R,this.refs=F,this.updater=K||X}z.prototype.isReactComponent={},z.prototype.setState=function(w,R){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,R,"setState")},z.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function ne(){}ne.prototype=z.prototype;function Z(w,R,K){this.props=w,this.context=R,this.refs=F,this.updater=K||X}var ee=Z.prototype=new ne;ee.constructor=Z,oe(ee,z.prototype),ee.isPureReactComponent=!0;var Q=Array.isArray,ye=Object.prototype.hasOwnProperty,je={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function x(w,R,K){var q,j={},S=null,$=null;if(R!=null)for(q in R.ref!==void 0&&($=R.ref),R.key!==void 0&&(S=""+R.key),R)ye.call(R,q)&&!O.hasOwnProperty(q)&&(j[q]=R[q]);var J=arguments.length-2;if(J===1)j.children=K;else if(1<J){for(var xe=Array(J),me=0;me<J;me++)xe[me]=arguments[me+2];j.children=xe}if(w&&w.defaultProps)for(q in J=w.defaultProps,J)j[q]===void 0&&(j[q]=J[q]);return{$$typeof:i,type:w,key:S,ref:$,props:j,_owner:je.current}}function A(w,R){return{$$typeof:i,type:w.type,key:R,ref:w.ref,props:w.props,_owner:w._owner}}function k(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function E(w){var R={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(K){return R[K]})}var _=/\/+/g;function P(w,R){return typeof w=="object"&&w!==null&&w.key!=null?E(""+w.key):R.toString(36)}function ge(w,R,K,q,j){var S=typeof w;(S==="undefined"||S==="boolean")&&(w=null);var $=!1;if(w===null)$=!0;else switch(S){case"string":case"number":$=!0;break;case"object":switch(w.$$typeof){case i:case e:$=!0}}if($)return $=w,j=j($),w=q===""?"."+P($,0):q,Q(j)?(K="",w!=null&&(K=w.replace(_,"$&/")+"/"),ge(j,R,K,"",function(me){return me})):j!=null&&(k(j)&&(j=A(j,K+(!j.key||$&&$.key===j.key?"":(""+j.key).replace(_,"$&/")+"/")+w)),R.push(j)),1;if($=0,q=q===""?".":q+":",Q(w))for(var J=0;J<w.length;J++){S=w[J];var xe=q+P(S,J);$+=ge(S,R,K,xe,j)}else if(xe=V(w),typeof xe=="function")for(w=xe.call(w),J=0;!(S=w.next()).done;)S=S.value,xe=q+P(S,J++),$+=ge(S,R,K,xe,j);else if(S==="object")throw R=String(w),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return $}function Ve(w,R,K){if(w==null)return w;var q=[],j=0;return ge(w,q,"","",function(S){return R.call(K,S,j++)}),q}function Ne(w){if(w._status===-1){var R=w._result;R=R(),R.then(function(K){(w._status===0||w._status===-1)&&(w._status=1,w._result=K)},function(K){(w._status===0||w._status===-1)&&(w._status=2,w._result=K)}),w._status===-1&&(w._status=0,w._result=R)}if(w._status===1)return w._result.default;throw w._result}var we={current:null},H={transition:null},Y={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:H,ReactCurrentOwner:je};function ue(){throw Error("act(...) is not supported in production builds of React.")}return vt.Children={map:Ve,forEach:function(w,R,K){Ve(w,function(){R.apply(this,arguments)},K)},count:function(w){var R=0;return Ve(w,function(){R++}),R},toArray:function(w){return Ve(w,function(R){return R})||[]},only:function(w){if(!k(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},vt.Component=z,vt.Fragment=n,vt.Profiler=o,vt.PureComponent=Z,vt.StrictMode=a,vt.Suspense=v,vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,vt.act=ue,vt.cloneElement=function(w,R,K){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var q=oe({},w.props),j=w.key,S=w.ref,$=w._owner;if(R!=null){if(R.ref!==void 0&&(S=R.ref,$=je.current),R.key!==void 0&&(j=""+R.key),w.type&&w.type.defaultProps)var J=w.type.defaultProps;for(xe in R)ye.call(R,xe)&&!O.hasOwnProperty(xe)&&(q[xe]=R[xe]===void 0&&J!==void 0?J[xe]:R[xe])}var xe=arguments.length-2;if(xe===1)q.children=K;else if(1<xe){J=Array(xe);for(var me=0;me<xe;me++)J[me]=arguments[me+2];q.children=J}return{$$typeof:i,type:w.type,key:j,ref:S,props:q,_owner:$}},vt.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:d,_context:w},w.Consumer=w},vt.createElement=x,vt.createFactory=function(w){var R=x.bind(null,w);return R.type=w,R},vt.createRef=function(){return{current:null}},vt.forwardRef=function(w){return{$$typeof:p,render:w}},vt.isValidElement=k,vt.lazy=function(w){return{$$typeof:T,_payload:{_status:-1,_result:w},_init:Ne}},vt.memo=function(w,R){return{$$typeof:b,type:w,compare:R===void 0?null:R}},vt.startTransition=function(w){var R=H.transition;H.transition={};try{w()}finally{H.transition=R}},vt.unstable_act=ue,vt.useCallback=function(w,R){return we.current.useCallback(w,R)},vt.useContext=function(w){return we.current.useContext(w)},vt.useDebugValue=function(){},vt.useDeferredValue=function(w){return we.current.useDeferredValue(w)},vt.useEffect=function(w,R){return we.current.useEffect(w,R)},vt.useId=function(){return we.current.useId()},vt.useImperativeHandle=function(w,R,K){return we.current.useImperativeHandle(w,R,K)},vt.useInsertionEffect=function(w,R){return we.current.useInsertionEffect(w,R)},vt.useLayoutEffect=function(w,R){return we.current.useLayoutEffect(w,R)},vt.useMemo=function(w,R){return we.current.useMemo(w,R)},vt.useReducer=function(w,R,K){return we.current.useReducer(w,R,K)},vt.useRef=function(w){return we.current.useRef(w)},vt.useState=function(w){return we.current.useState(w)},vt.useSyncExternalStore=function(w,R,K){return we.current.useSyncExternalStore(w,R,K)},vt.useTransition=function(){return we.current.useTransition()},vt.version="18.3.1",vt}var Vf;function qh(){return Vf||(Vf=1,ah.exports=cv()),ah.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of;function uv(){if(Of)return Kl;Of=1;var i=qh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(p,v,b){var T,M={},V=null,X=null;b!==void 0&&(V=""+b),v.key!==void 0&&(V=""+v.key),v.ref!==void 0&&(X=v.ref);for(T in v)a.call(v,T)&&!d.hasOwnProperty(T)&&(M[T]=v[T]);if(p&&p.defaultProps)for(T in v=p.defaultProps,v)M[T]===void 0&&(M[T]=v[T]);return{$$typeof:e,type:p,key:V,ref:X,props:M,_owner:o.current}}return Kl.Fragment=n,Kl.jsx=h,Kl.jsxs=h,Kl}var Lf;function dv(){return Lf||(Lf=1,ih.exports=uv()),ih.exports}var t=dv(),B=qh();const hv=eg(B);var Vc={},lh={exports:{}},wn={},oh={exports:{}},ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function mv(){return Ff||(Ff=1,(function(i){function e(H,Y){var ue=H.length;H.push(Y);e:for(;0<ue;){var w=ue-1>>>1,R=H[w];if(0<o(R,Y))H[w]=Y,H[ue]=R,ue=w;else break e}}function n(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var Y=H[0],ue=H.pop();if(ue!==Y){H[0]=ue;e:for(var w=0,R=H.length,K=R>>>1;w<K;){var q=2*(w+1)-1,j=H[q],S=q+1,$=H[S];if(0>o(j,ue))S<R&&0>o($,j)?(H[w]=$,H[S]=ue,w=S):(H[w]=j,H[q]=ue,w=q);else if(S<R&&0>o($,ue))H[w]=$,H[S]=ue,w=S;else break e}}return Y}function o(H,Y){var ue=H.sortIndex-Y.sortIndex;return ue!==0?ue:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var v=[],b=[],T=1,M=null,V=3,X=!1,oe=!1,F=!1,z=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(H){for(var Y=n(b);Y!==null;){if(Y.callback===null)a(b);else if(Y.startTime<=H)a(b),Y.sortIndex=Y.expirationTime,e(v,Y);else break;Y=n(b)}}function Q(H){if(F=!1,ee(H),!oe)if(n(v)!==null)oe=!0,Ne(ye);else{var Y=n(b);Y!==null&&we(Q,Y.startTime-H)}}function ye(H,Y){oe=!1,F&&(F=!1,ne(x),x=-1),X=!0;var ue=V;try{for(ee(Y),M=n(v);M!==null&&(!(M.expirationTime>Y)||H&&!E());){var w=M.callback;if(typeof w=="function"){M.callback=null,V=M.priorityLevel;var R=w(M.expirationTime<=Y);Y=i.unstable_now(),typeof R=="function"?M.callback=R:M===n(v)&&a(v),ee(Y)}else a(v);M=n(v)}if(M!==null)var K=!0;else{var q=n(b);q!==null&&we(Q,q.startTime-Y),K=!1}return K}finally{M=null,V=ue,X=!1}}var je=!1,O=null,x=-1,A=5,k=-1;function E(){return!(i.unstable_now()-k<A)}function _(){if(O!==null){var H=i.unstable_now();k=H;var Y=!0;try{Y=O(!0,H)}finally{Y?P():(je=!1,O=null)}}else je=!1}var P;if(typeof Z=="function")P=function(){Z(_)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Ve=ge.port2;ge.port1.onmessage=_,P=function(){Ve.postMessage(null)}}else P=function(){z(_,0)};function Ne(H){O=H,je||(je=!0,P())}function we(H,Y){x=z(function(){H(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){oe||X||(oe=!0,Ne(ye))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return V},i.unstable_getFirstCallbackNode=function(){return n(v)},i.unstable_next=function(H){switch(V){case 1:case 2:case 3:var Y=3;break;default:Y=V}var ue=V;V=Y;try{return H()}finally{V=ue}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=V;V=H;try{return Y()}finally{V=ue}},i.unstable_scheduleCallback=function(H,Y,ue){var w=i.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?w+ue:w):ue=w,H){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ue+R,H={id:T++,callback:Y,priorityLevel:H,startTime:ue,expirationTime:R,sortIndex:-1},ue>w?(H.sortIndex=ue,e(b,H),n(v)===null&&H===n(b)&&(F?(ne(x),x=-1):F=!0,we(Q,ue-w))):(H.sortIndex=R,e(v,H),oe||X||(oe=!0,Ne(ye))),H},i.unstable_shouldYield=E,i.unstable_wrapCallback=function(H){var Y=V;return function(){var ue=V;V=Y;try{return H.apply(this,arguments)}finally{V=ue}}}})(ch)),ch}var $f;function pv(){return $f||($f=1,oh.exports=mv()),oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function fv(){if(Bf)return wn;Bf=1;var i=qh(),e=pv();function n(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function d(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)a.add(s[r])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},M={};function V(r){return v.call(M,r)?!0:v.call(T,r)?!1:b.test(r)?M[r]=!0:(T[r]=!0,!1)}function X(r,s,l,u){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function oe(r,s,l,u){if(s===null||typeof s>"u"||X(r,s,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(r,s,l,u,m,g,N){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=N}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){z[r]=new F(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];z[s]=new F(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){z[r]=new F(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){z[r]=new F(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){z[r]=new F(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){z[r]=new F(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){z[r]=new F(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){z[r]=new F(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){z[r]=new F(r,5,!1,r.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(ne,Z);z[s]=new F(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(ne,Z);z[s]=new F(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(ne,Z);z[s]=new F(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){z[r]=new F(r,1,!1,r.toLowerCase(),null,!1,!1)}),z.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){z[r]=new F(r,1,!1,r.toLowerCase(),null,!0,!0)});function ee(r,s,l,u){var m=z.hasOwnProperty(s)?z[s]:null;(m!==null?m.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(oe(s,l,m,u)&&(l=null),u||m===null?V(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):m.mustUseProperty?r[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,u=m.attributeNamespace,l===null?r.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,u?r.setAttributeNS(u,s,l):r.setAttribute(s,l))))}var Q=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ye=Symbol.for("react.element"),je=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),H=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var ue=Object.assign,w;function R(r){if(w===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);w=s&&s[1]||""}return`
`+w+r}var K=!1;function q(r,s){if(!r||K)return"";K=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ce){var u=ce}Reflect.construct(r,[],s)}else{try{s.call()}catch(ce){u=ce}r.call(s.prototype)}else{try{throw Error()}catch(ce){u=ce}r()}}catch(ce){if(ce&&u&&typeof ce.stack=="string"){for(var m=ce.stack.split(`
`),g=u.stack.split(`
`),N=m.length-1,L=g.length-1;1<=N&&0<=L&&m[N]!==g[L];)L--;for(;1<=N&&0<=L;N--,L--)if(m[N]!==g[L]){if(N!==1||L!==1)do if(N--,L--,0>L||m[N]!==g[L]){var U=`
`+m[N].replace(" at new "," at ");return r.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",r.displayName)),U}while(1<=N&&0<=L);break}}}finally{K=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?R(r):""}function j(r){switch(r.tag){case 5:return R(r.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return r=q(r.type,!1),r;case 11:return r=q(r.type.render,!1),r;case 1:return r=q(r.type,!0),r;default:return""}}function S(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case O:return"Fragment";case je:return"Portal";case A:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case E:return(r.displayName||"Context")+".Consumer";case k:return(r._context.displayName||"Context")+".Provider";case _:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ve:return s=r.displayName||null,s!==null?s:S(r.type)||"Memo";case Ne:s=r._payload,r=r._init;try{return S(r(s))}catch{}}return null}function $(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(s);case 8:return s===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function J(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function me(r){var s=xe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(N){u=""+N,g.call(this,N)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function re(r){r._valueTracker||(r._valueTracker=me(r))}function _e(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return r&&(u=xe(r)?r.checked?"true":"false":r.value),r=u,r!==l?(s.setValue(r),!0):!1}function ve(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function qe(r,s){var l=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Be(r,s){var l=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;l=J(s.value!=null?s.value:l),r._wrapperState={initialChecked:u,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function C(r,s){s=s.checked,s!=null&&ee(r,"checked",s,!1)}function ie(r,s){C(r,s);var l=J(s.value),u=s.type;if(l!=null)u==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ke(r,s.type,l):s.hasOwnProperty("defaultValue")&&Ke(r,s.type,J(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function fe(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ke(r,s,l){(s!=="number"||ve(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var ze=Array.isArray;function be(r,s,l,u){if(r=r.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=s.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&u&&(r[l].defaultSelected=!0)}else{for(l=""+J(l),s=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function Pe(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ue(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(n(92));if(ze(l)){if(1<l.length)throw Error(n(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:J(l)}}function De(r,s){var l=J(s.value),u=J(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),u!=null&&(r.defaultValue=""+u)}function pe(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function $e(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ee(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?$e(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var xt,_t=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,u,m){MSApp.execUnsafeLocalFunction(function(){return r(s,l,u,m)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(xt=xt||document.createElement("div"),xt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=xt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Te(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(r){gt.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),rt[s]=rt[r]})});function ht(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||rt.hasOwnProperty(r)&&rt[r]?(""+s).trim():s+"px"}function tr(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var u=l.indexOf("--")===0,m=ht(l,s[l],u);l==="float"&&(l="cssFloat"),u?r.setProperty(l,m):r[l]=m}}var Ht=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function es(r,s){if(s){if(Ht[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function An(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function jt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Lt=null,qt=null,$r=null;function Ds(r){if(r=Al(r)){if(typeof Lt!="function")throw Error(n(280));var s=r.stateNode;s&&(s=Jo(s),Lt(r.stateNode,r.type,s))}}function On(r){qt?$r?$r.push(r):$r=[r]:qt=r}function li(){if(qt){var r=qt,s=$r;if($r=qt=null,Ds(r),s)for(r=0;r<s.length;r++)Ds(s[r])}}function gs(r,s){return r(s)}function Rs(){}var or=!1;function hn(r,s,l){if(or)return r(s,l);or=!0;try{return gs(r,s,l)}finally{or=!1,(qt!==null||$r!==null)&&(Rs(),li())}}function Ct(r,s){var l=r.stateNode;if(l===null)return null;var u=Jo(l);if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,s,typeof l));return l}var Jr=!1;if(p)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Jr=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Jr=!1}function Br(r,s,l,u,m,g,N,L,U){var ce=Array.prototype.slice.call(arguments,3);try{s.apply(l,ce)}catch(Ie){this.onError(Ie)}}var Er=!1,Zr=null,nr=!1,mn=null,pn={onError:function(r){Er=!0,Zr=r}};function en(r,s,l,u,m,g,N,L,U){Er=!1,Zr=null,Br.apply(pn,arguments)}function tn(r,s,l,u,m,g,N,L,U){if(en.apply(this,arguments),Er){if(Er){var ce=Zr;Er=!1,Zr=null}else throw Error(n(198));nr||(nr=!0,mn=ce)}}function mr(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Sr(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function pr(r){if(mr(r)!==r)throw Error(n(188))}function ts(r){var s=r.alternate;if(!s){if(s=mr(r),s===null)throw Error(n(188));return s!==r?null:r}for(var l=r,u=s;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return pr(m),r;if(g===u)return pr(m),s;g=g.sibling}throw Error(n(188))}if(l.return!==u.return)l=m,u=g;else{for(var N=!1,L=m.child;L;){if(L===l){N=!0,l=m,u=g;break}if(L===u){N=!0,u=m,l=g;break}L=L.sibling}if(!N){for(L=g.child;L;){if(L===l){N=!0,l=g,u=m;break}if(L===u){N=!0,u=g,l=m;break}L=L.sibling}if(!N)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:s}function Ln(r){return r=ts(r),r!==null?Cn(r):null}function Cn(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Cn(r);if(s!==null)return s;r=r.sibling}return null}var In=e.unstable_scheduleCallback,Fi=e.unstable_cancelCallback,$i=e.unstable_shouldYield,zs=e.unstable_requestPaint,wt=e.unstable_now,oi=e.unstable_getCurrentPriorityLevel,Fn=e.unstable_ImmediatePriority,fn=e.unstable_UserBlockingPriority,Gt=e.unstable_NormalPriority,gn=e.unstable_LowPriority,Bi=e.unstable_IdlePriority,Ms=null,rn=null;function Vs(r){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ms,r,void 0,(r.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:Ui,ci=Math.log,va=Math.LN2;function Ui(r){return r>>>=0,r===0?32:31-(ci(r)/va|0)|0}var Os=64,$n=4194304;function nn(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function sr(r,s){var l=r.pendingLanes;if(l===0)return 0;var u=0,m=r.suspendedLanes,g=r.pingedLanes,N=l&268435455;if(N!==0){var L=N&~m;L!==0?u=nn(L):(g&=N,g!==0&&(u=nn(g)))}else N=l&~m,N!==0?u=nn(N):g!==0&&(u=nn(g));if(u===0)return 0;if(s!==0&&s!==u&&(s&m)===0&&(m=u&-u,g=s&-s,m>=g||m===16&&(g&4194240)!==0))return s;if((u&4)!==0&&(u|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=u;0<s;)l=31-vr(s),m=1<<l,u|=r[l],s&=~m;return u}function fl(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(r,s){for(var l=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes;0<g;){var N=31-vr(g),L=1<<N,U=m[N];U===-1?((L&l)===0||(L&u)!==0)&&(m[N]=fl(L,s)):U<=s&&(r.expiredLanes|=L),g&=~L}}function sn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ls(){var r=Os;return Os<<=1,(Os&4194240)===0&&(Os=64),r}function ns(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function xs(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-vr(s),r[s]=l}function Rt(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<l;){var m=31-vr(l),g=1<<m;s[m]=0,u[m]=-1,r[m]=-1,l&=~g}}function ss(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var u=31-vr(l),m=1<<u;m&s|r[u]&s&&(r[u]|=s),l&=~m}}var kt=0;function ys(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ba,ui,Fs,xn,$s,Bn=!1,an=[],cr=null,ln=null,ur=null,is=new Map,D=new Map,G=[],ae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(r,s){switch(r){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":is.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":D.delete(s.pointerId)}}function Se(r,s,l,u,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},s!==null&&(s=Al(s),s!==null&&ui(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function He(r,s,l,u,m){switch(s){case"focusin":return cr=Se(cr,r,s,l,u,m),!0;case"dragenter":return ln=Se(ln,r,s,l,u,m),!0;case"mouseover":return ur=Se(ur,r,s,l,u,m),!0;case"pointerover":var g=m.pointerId;return is.set(g,Se(is.get(g)||null,r,s,l,u,m)),!0;case"gotpointercapture":return g=m.pointerId,D.set(g,Se(D.get(g)||null,r,s,l,u,m)),!0}return!1}function Fe(r){var s=Gi(r.target);if(s!==null){var l=mr(s);if(l!==null){if(s=l.tag,s===13){if(s=Sr(l),s!==null){r.blockedOn=s,$s(r.priority,function(){Fs(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Le(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Bs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Ze=u,l.target.dispatchEvent(u),Ze=null}else return s=Al(l),s!==null&&ui(s),r.blockedOn=l,!1;s.shift()}return!0}function it(r,s,l){Le(r)&&l.delete(s)}function nt(){Bn=!1,cr!==null&&Le(cr)&&(cr=null),ln!==null&&Le(ln)&&(ln=null),ur!==null&&Le(ur)&&(ur=null),is.forEach(it),D.forEach(it)}function st(r,s){r.blockedOn===s&&(r.blockedOn=null,Bn||(Bn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nt)))}function mt(r){function s(m){return st(m,r)}if(0<an.length){st(an[0],r);for(var l=1;l<an.length;l++){var u=an[l];u.blockedOn===r&&(u.blockedOn=null)}}for(cr!==null&&st(cr,r),ln!==null&&st(ln,r),ur!==null&&st(ur,r),is.forEach(s),D.forEach(s),l=0;l<G.length;l++)u=G[l],u.blockedOn===r&&(u.blockedOn=null);for(;0<G.length&&(l=G[0],l.blockedOn===null);)Fe(l),l.blockedOn===null&&G.shift()}var Wt=Q.ReactCurrentBatchConfig,ir=!0;function Ft(r,s,l,u){var m=kt,g=Wt.transition;Wt.transition=null;try{kt=1,on(r,s,l,u)}finally{kt=m,Wt.transition=g}}function as(r,s,l,u){var m=kt,g=Wt.transition;Wt.transition=null;try{kt=4,on(r,s,l,u)}finally{kt=m,Wt.transition=g}}function on(r,s,l,u){if(ir){var m=Bs(r,s,l,u);if(m===null)Wu(r,s,u,Ur,l),de(r,u);else if(He(m,r,s,l,u))u.stopPropagation();else if(de(r,u),s&4&&-1<ae.indexOf(r)){for(;m!==null;){var g=Al(m);if(g!==null&&ba(g),g=Bs(r,s,l,u),g===null&&Wu(r,s,u,Ur,l),g===m)break;m=g}m!==null&&u.stopPropagation()}else Wu(r,s,u,null,l)}}var Ur=null;function Bs(r,s,l,u){if(Ur=null,r=jt(u),r=Gi(r),r!==null)if(s=mr(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Sr(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ur=r,null}function gl(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oi()){case Fn:return 1;case fn:return 4;case Gt:case gn:return 16;case Bi:return 536870912;default:return 16}default:return 16}}var Pn=null,ja=null,yn=null;function xl(){if(yn)return yn;var r,s=ja,l=s.length,u,m="value"in Pn?Pn.value:Pn.textContent,g=m.length;for(r=0;r<l&&s[r]===m[r];r++);var N=l-r;for(u=1;u<=N&&s[l-u]===m[g-u];u++);return yn=m.slice(r,1<u?1-u:void 0)}function ka(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function vs(){return!0}function yl(){return!1}function zr(r){function s(l,u,m,g,N){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=N,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(l=r[L],this[L]=l?l(g):g[L]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?vs:yl,this.isPropagationStopped=yl,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),s}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=zr(ls),bs=ue({},ls,{view:0,detail:0}),Lu=zr(bs),wa,Us,di,Ki=ue({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==di&&(di&&r.type==="mousemove"?(wa=r.screenX-di.screenX,Us=r.screenY-di.screenY):Us=wa=0,di=r),wa)},movementY:function(r){return"movementY"in r?r.movementY:Us}}),_a=zr(Ki),vl=ue({},Ki,{dataTransfer:0}),Oo=zr(vl),Ta=ue({},bs,{relatedTarget:0}),Ea=zr(Ta),Lo=ue({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Ks=zr(Lo),Fo=ue({},ls,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),$o=zr(Fo),Bo=ue({},ls,{data:0}),bl=zr(Bo),Sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ko(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Uo[r])?!!s[r]:!1}function js(){return Ko}var c=ue({},bs,{key:function(r){if(r.key){var s=Sa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ka(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?cn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(r){return r.type==="keypress"?ka(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ka(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),f=zr(c),y=ue({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=zr(y),te=ue({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),he=zr(te),Oe=ue({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),zt=zr(Oe),br=ue({},Ki,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Tt=zr(br),Ar=[9,13,27,32],fr=p&&"CompositionEvent"in window,Un=null;p&&"documentMode"in document&&(Un=document.documentMode);var Dn=p&&"TextEvent"in window&&!Un,Hi=p&&(!fr||Un&&8<Un&&11>=Un),Aa=" ",Am=!1;function Cm(r,s){switch(r){case"keyup":return Ar.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ca=!1;function ay(r,s){switch(r){case"compositionend":return Im(s);case"keypress":return s.which!==32?null:(Am=!0,Aa);case"textInput":return r=s.data,r===Aa&&Am?null:r;default:return null}}function ly(r,s){if(Ca)return r==="compositionend"||!fr&&Cm(r,s)?(r=xl(),yn=ja=Pn=null,Ca=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Hi&&s.locale!=="ko"?null:s.data;default:return null}}var oy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!oy[r.type]:s==="textarea"}function Dm(r,s,l,u){On(u),s=Wo(s,"onChange"),0<s.length&&(l=new Na("onChange","change",null,l,u),r.push({event:l,listeners:s}))}var jl=null,kl=null;function cy(r){Xm(r,0)}function Ho(r){var s=za(r);if(_e(s))return r}function uy(r,s){if(r==="change")return s}var Rm=!1;if(p){var Fu;if(p){var $u="oninput"in document;if(!$u){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),$u=typeof zm.oninput=="function"}Fu=$u}else Fu=!1;Rm=Fu&&(!document.documentMode||9<document.documentMode)}function Mm(){jl&&(jl.detachEvent("onpropertychange",Vm),kl=jl=null)}function Vm(r){if(r.propertyName==="value"&&Ho(kl)){var s=[];Dm(s,kl,r,jt(r)),hn(cy,s)}}function dy(r,s,l){r==="focusin"?(Mm(),jl=s,kl=l,jl.attachEvent("onpropertychange",Vm)):r==="focusout"&&Mm()}function hy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ho(kl)}function my(r,s){if(r==="click")return Ho(s)}function py(r,s){if(r==="input"||r==="change")return Ho(s)}function fy(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var os=typeof Object.is=="function"?Object.is:fy;function Nl(r,s){if(os(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!v.call(s,m)||!os(r[m],s[m]))return!1}return!0}function Om(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Lm(r,s){var l=Om(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=s&&u>=s)return{node:l,offset:s-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Om(l)}}function Fm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Fm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function $m(){for(var r=window,s=ve();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=ve(r.document)}return s}function Bu(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function gy(r){var s=$m(),l=r.focusedElem,u=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Fm(l.ownerDocument.documentElement,l)){if(u!==null&&Bu(l)){if(s=u.start,r=u.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var m=l.textContent.length,g=Math.min(u.start,m);u=u.end===void 0?g:Math.min(u.end,m),!r.extend&&g>u&&(m=u,u=g,g=m),m=Lm(l,g);var N=Lm(l,u);m&&N&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==N.node||r.focusOffset!==N.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),r.removeAllRanges(),g>u?(r.addRange(s),r.extend(N.node,N.offset)):(s.setEnd(N.node,N.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var xy=p&&"documentMode"in document&&11>=document.documentMode,Ia=null,Uu=null,wl=null,Ku=!1;function Bm(r,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ku||Ia==null||Ia!==ve(u)||(u=Ia,"selectionStart"in u&&Bu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wl&&Nl(wl,u)||(wl=u,u=Wo(Uu,"onSelect"),0<u.length&&(s=new Na("onSelect","select",null,s,l),r.push({event:s,listeners:u}),s.target=Ia)))}function Go(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Pa={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},Hu={},Um={};p&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Yo(r){if(Hu[r])return Hu[r];if(!Pa[r])return r;var s=Pa[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Um)return Hu[r]=s[l];return r}var Km=Yo("animationend"),Hm=Yo("animationiteration"),Gm=Yo("animationstart"),Ym=Yo("transitionend"),qm=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(r,s){qm.set(r,s),d(s,[r])}for(var Gu=0;Gu<Wm.length;Gu++){var Yu=Wm[Gu],yy=Yu.toLowerCase(),vy=Yu[0].toUpperCase()+Yu.slice(1);hi(yy,"on"+vy)}hi(Km,"onAnimationEnd"),hi(Hm,"onAnimationIteration"),hi(Gm,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Ym,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),by=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function Qm(r,s,l){var u=r.type||"unknown-event";r.currentTarget=l,tn(u,s,void 0,r),r.currentTarget=null}function Xm(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],m=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var N=u.length-1;0<=N;N--){var L=u[N],U=L.instance,ce=L.currentTarget;if(L=L.listener,U!==g&&m.isPropagationStopped())break e;Qm(m,L,ce),g=U}else for(N=0;N<u.length;N++){if(L=u[N],U=L.instance,ce=L.currentTarget,L=L.listener,U!==g&&m.isPropagationStopped())break e;Qm(m,L,ce),g=U}}}if(nr)throw r=mn,nr=!1,mn=null,r}function Bt(r,s){var l=s[td];l===void 0&&(l=s[td]=new Set);var u=r+"__bubble";l.has(u)||(Jm(s,r,2,!1),l.add(u))}function qu(r,s,l){var u=0;s&&(u|=4),Jm(l,r,u,s)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Tl(r){if(!r[qo]){r[qo]=!0,a.forEach(function(l){l!=="selectionchange"&&(by.has(l)||qu(l,!1,r),qu(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[qo]||(s[qo]=!0,qu("selectionchange",!1,s))}}function Jm(r,s,l,u){switch(gl(s)){case 1:var m=Ft;break;case 4:m=as;break;default:m=on}l=m.bind(null,s,l,r),m=void 0,!Jr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(s,l,{capture:!0,passive:m}):r.addEventListener(s,l,!0):m!==void 0?r.addEventListener(s,l,{passive:m}):r.addEventListener(s,l,!1)}function Wu(r,s,l,u,m){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var N=u.tag;if(N===3||N===4){var L=u.stateNode.containerInfo;if(L===m||L.nodeType===8&&L.parentNode===m)break;if(N===4)for(N=u.return;N!==null;){var U=N.tag;if((U===3||U===4)&&(U=N.stateNode.containerInfo,U===m||U.nodeType===8&&U.parentNode===m))return;N=N.return}for(;L!==null;){if(N=Gi(L),N===null)return;if(U=N.tag,U===5||U===6){u=g=N;continue e}L=L.parentNode}}u=u.return}hn(function(){var ce=g,Ie=jt(l),Re=[];e:{var Ce=qm.get(r);if(Ce!==void 0){var Ge=Na,Qe=r;switch(r){case"keypress":if(ka(l)===0)break e;case"keydown":case"keyup":Ge=f;break;case"focusin":Qe="focus",Ge=Ea;break;case"focusout":Qe="blur",Ge=Ea;break;case"beforeblur":case"afterblur":Ge=Ea;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=Oo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=he;break;case Km:case Hm:case Gm:Ge=Ks;break;case Ym:Ge=zt;break;case"scroll":Ge=Lu;break;case"wheel":Ge=Tt;break;case"copy":case"cut":case"paste":Ge=$o;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=I}var Xe=(s&4)!==0,dr=!Xe&&r==="scroll",se=Xe?Ce!==null?Ce+"Capture":null:Ce;Xe=[];for(var W=ce,le;W!==null;){le=W;var Me=le.stateNode;if(le.tag===5&&Me!==null&&(le=Me,se!==null&&(Me=Ct(W,se),Me!=null&&Xe.push(El(W,Me,le)))),dr)break;W=W.return}0<Xe.length&&(Ce=new Ge(Ce,Qe,null,l,Ie),Re.push({event:Ce,listeners:Xe}))}}if((s&7)===0){e:{if(Ce=r==="mouseover"||r==="pointerover",Ge=r==="mouseout"||r==="pointerout",Ce&&l!==Ze&&(Qe=l.relatedTarget||l.fromElement)&&(Gi(Qe)||Qe[Hs]))break e;if((Ge||Ce)&&(Ce=Ie.window===Ie?Ie:(Ce=Ie.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ge?(Qe=l.relatedTarget||l.toElement,Ge=ce,Qe=Qe?Gi(Qe):null,Qe!==null&&(dr=mr(Qe),Qe!==dr||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(Ge=null,Qe=ce),Ge!==Qe)){if(Xe=_a,Me="onMouseLeave",se="onMouseEnter",W="mouse",(r==="pointerout"||r==="pointerover")&&(Xe=I,Me="onPointerLeave",se="onPointerEnter",W="pointer"),dr=Ge==null?Ce:za(Ge),le=Qe==null?Ce:za(Qe),Ce=new Xe(Me,W+"leave",Ge,l,Ie),Ce.target=dr,Ce.relatedTarget=le,Me=null,Gi(Ie)===ce&&(Xe=new Xe(se,W+"enter",Qe,l,Ie),Xe.target=le,Xe.relatedTarget=dr,Me=Xe),dr=Me,Ge&&Qe)t:{for(Xe=Ge,se=Qe,W=0,le=Xe;le;le=Da(le))W++;for(le=0,Me=se;Me;Me=Da(Me))le++;for(;0<W-le;)Xe=Da(Xe),W--;for(;0<le-W;)se=Da(se),le--;for(;W--;){if(Xe===se||se!==null&&Xe===se.alternate)break t;Xe=Da(Xe),se=Da(se)}Xe=null}else Xe=null;Ge!==null&&Zm(Re,Ce,Ge,Xe,!1),Qe!==null&&dr!==null&&Zm(Re,dr,Qe,Xe,!0)}}e:{if(Ce=ce?za(ce):window,Ge=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ce.type==="file")var et=uy;else if(Pm(Ce))if(Rm)et=py;else{et=hy;var at=dy}else(Ge=Ce.nodeName)&&Ge.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(et=my);if(et&&(et=et(r,ce))){Dm(Re,et,l,Ie);break e}at&&at(r,Ce,ce),r==="focusout"&&(at=Ce._wrapperState)&&at.controlled&&Ce.type==="number"&&Ke(Ce,"number",Ce.value)}switch(at=ce?za(ce):window,r){case"focusin":(Pm(at)||at.contentEditable==="true")&&(Ia=at,Uu=ce,wl=null);break;case"focusout":wl=Uu=Ia=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,Bm(Re,l,Ie);break;case"selectionchange":if(xy)break;case"keydown":case"keyup":Bm(Re,l,Ie)}var lt;if(fr)e:{switch(r){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Ca?Cm(r,l)&&(dt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(dt="onCompositionStart");dt&&(Hi&&l.locale!=="ko"&&(Ca||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Ca&&(lt=xl()):(Pn=Ie,ja="value"in Pn?Pn.value:Pn.textContent,Ca=!0)),at=Wo(ce,dt),0<at.length&&(dt=new bl(dt,r,null,l,Ie),Re.push({event:dt,listeners:at}),lt?dt.data=lt:(lt=Im(l),lt!==null&&(dt.data=lt)))),(lt=Dn?ay(r,l):ly(r,l))&&(ce=Wo(ce,"onBeforeInput"),0<ce.length&&(Ie=new bl("onBeforeInput","beforeinput",null,l,Ie),Re.push({event:Ie,listeners:ce}),Ie.data=lt))}Xm(Re,s)})}function El(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Wo(r,s){for(var l=s+"Capture",u=[];r!==null;){var m=r,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=Ct(r,l),g!=null&&u.unshift(El(r,g,m)),g=Ct(r,s),g!=null&&u.push(El(r,g,m))),r=r.return}return u}function Da(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Zm(r,s,l,u,m){for(var g=s._reactName,N=[];l!==null&&l!==u;){var L=l,U=L.alternate,ce=L.stateNode;if(U!==null&&U===u)break;L.tag===5&&ce!==null&&(L=ce,m?(U=Ct(l,g),U!=null&&N.unshift(El(l,U,L))):m||(U=Ct(l,g),U!=null&&N.push(El(l,U,L)))),l=l.return}N.length!==0&&r.push({event:s,listeners:N})}var jy=/\r\n?/g,ky=/\u0000|\uFFFD/g;function ep(r){return(typeof r=="string"?r:""+r).replace(jy,`
`).replace(ky,"")}function Qo(r,s,l){if(s=ep(s),ep(r)!==s&&l)throw Error(n(425))}function Xo(){}var Qu=null,Xu=null;function Ju(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,Ny=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,wy=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(r){return tp.resolve(null).then(r).catch(_y)}:Zu;function _y(r){setTimeout(function(){throw r})}function ed(r,s){var l=s,u=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(u===0){r.removeChild(m),mt(s);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=m}while(l);mt(s)}function mi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function rp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Ra=Math.random().toString(36).slice(2),ks="__reactFiber$"+Ra,Sl="__reactProps$"+Ra,Hs="__reactContainer$"+Ra,td="__reactEvents$"+Ra,Ty="__reactListeners$"+Ra,Ey="__reactHandles$"+Ra;function Gi(r){var s=r[ks];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Hs]||l[ks]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=rp(r);r!==null;){if(l=r[ks])return l;r=rp(r)}return s}r=l,l=r.parentNode}return null}function Al(r){return r=r[ks]||r[Hs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function za(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Jo(r){return r[Sl]||null}var rd=[],Ma=-1;function pi(r){return{current:r}}function Ut(r){0>Ma||(r.current=rd[Ma],rd[Ma]=null,Ma--)}function $t(r,s){Ma++,rd[Ma]=r.current,r.current=s}var fi={},Kr=pi(fi),vn=pi(!1),Yi=fi;function Va(r,s){var l=r.type.contextTypes;if(!l)return fi;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in l)m[g]=s[g];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=m),m}function bn(r){return r=r.childContextTypes,r!=null}function Zo(){Ut(vn),Ut(Kr)}function np(r,s,l){if(Kr.current!==fi)throw Error(n(168));$t(Kr,s),$t(vn,l)}function sp(r,s,l){var u=r.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var m in u)if(!(m in s))throw Error(n(108,$(r)||"Unknown",m));return ue({},l,u)}function ec(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||fi,Yi=Kr.current,$t(Kr,r),$t(vn,vn.current),!0}function ip(r,s,l){var u=r.stateNode;if(!u)throw Error(n(169));l?(r=sp(r,s,Yi),u.__reactInternalMemoizedMergedChildContext=r,Ut(vn),Ut(Kr),$t(Kr,r)):Ut(vn),$t(vn,l)}var Gs=null,tc=!1,nd=!1;function ap(r){Gs===null?Gs=[r]:Gs.push(r)}function Sy(r){tc=!0,ap(r)}function gi(){if(!nd&&Gs!==null){nd=!0;var r=0,s=kt;try{var l=Gs;for(kt=1;r<l.length;r++){var u=l[r];do u=u(!0);while(u!==null)}Gs=null,tc=!1}catch(m){throw Gs!==null&&(Gs=Gs.slice(r+1)),In(Fn,gi),m}finally{kt=s,nd=!1}}return null}var Oa=[],La=0,rc=null,nc=0,Kn=[],Hn=0,qi=null,Ys=1,qs="";function Wi(r,s){Oa[La++]=nc,Oa[La++]=rc,rc=r,nc=s}function lp(r,s,l){Kn[Hn++]=Ys,Kn[Hn++]=qs,Kn[Hn++]=qi,qi=r;var u=Ys;r=qs;var m=32-vr(u)-1;u&=~(1<<m),l+=1;var g=32-vr(s)+m;if(30<g){var N=m-m%5;g=(u&(1<<N)-1).toString(32),u>>=N,m-=N,Ys=1<<32-vr(s)+m|l<<m|u,qs=g+r}else Ys=1<<g|l<<m|u,qs=r}function sd(r){r.return!==null&&(Wi(r,1),lp(r,1,0))}function id(r){for(;r===rc;)rc=Oa[--La],Oa[La]=null,nc=Oa[--La],Oa[La]=null;for(;r===qi;)qi=Kn[--Hn],Kn[Hn]=null,qs=Kn[--Hn],Kn[Hn]=null,Ys=Kn[--Hn],Kn[Hn]=null}var Rn=null,zn=null,Yt=!1,cs=null;function op(r,s){var l=Wn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function cp(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Rn=r,zn=mi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Rn=r,zn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=qi!==null?{id:Ys,overflow:qs}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Wn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,Rn=r,zn=null,!0):!1;default:return!1}}function ad(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ld(r){if(Yt){var s=zn;if(s){var l=s;if(!cp(r,s)){if(ad(r))throw Error(n(418));s=mi(l.nextSibling);var u=Rn;s&&cp(r,s)?op(u,l):(r.flags=r.flags&-4097|2,Yt=!1,Rn=r)}}else{if(ad(r))throw Error(n(418));r.flags=r.flags&-4097|2,Yt=!1,Rn=r}}}function up(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Rn=r}function sc(r){if(r!==Rn)return!1;if(!Yt)return up(r),Yt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Ju(r.type,r.memoizedProps)),s&&(s=zn)){if(ad(r))throw dp(),Error(n(418));for(;s;)op(r,s),s=mi(s.nextSibling)}if(up(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){zn=mi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}zn=null}}else zn=Rn?mi(r.stateNode.nextSibling):null;return!0}function dp(){for(var r=zn;r;)r=mi(r.nextSibling)}function Fa(){zn=Rn=null,Yt=!1}function od(r){cs===null?cs=[r]:cs.push(r)}var Ay=Q.ReactCurrentBatchConfig;function Cl(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var u=l.stateNode}if(!u)throw Error(n(147,r));var m=u,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(N){var L=m.refs;N===null?delete L[g]:L[g]=N},s._stringRef=g,s)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function ic(r,s){throw r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function hp(r){var s=r._init;return s(r._payload)}function mp(r){function s(se,W){if(r){var le=se.deletions;le===null?(se.deletions=[W],se.flags|=16):le.push(W)}}function l(se,W){if(!r)return null;for(;W!==null;)s(se,W),W=W.sibling;return null}function u(se,W){for(se=new Map;W!==null;)W.key!==null?se.set(W.key,W):se.set(W.index,W),W=W.sibling;return se}function m(se,W){return se=wi(se,W),se.index=0,se.sibling=null,se}function g(se,W,le){return se.index=le,r?(le=se.alternate,le!==null?(le=le.index,le<W?(se.flags|=2,W):le):(se.flags|=2,W)):(se.flags|=1048576,W)}function N(se){return r&&se.alternate===null&&(se.flags|=2),se}function L(se,W,le,Me){return W===null||W.tag!==6?(W=Zd(le,se.mode,Me),W.return=se,W):(W=m(W,le),W.return=se,W)}function U(se,W,le,Me){var et=le.type;return et===O?Ie(se,W,le.props.children,Me,le.key):W!==null&&(W.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Ne&&hp(et)===W.type)?(Me=m(W,le.props),Me.ref=Cl(se,W,le),Me.return=se,Me):(Me=Ac(le.type,le.key,le.props,null,se.mode,Me),Me.ref=Cl(se,W,le),Me.return=se,Me)}function ce(se,W,le,Me){return W===null||W.tag!==4||W.stateNode.containerInfo!==le.containerInfo||W.stateNode.implementation!==le.implementation?(W=eh(le,se.mode,Me),W.return=se,W):(W=m(W,le.children||[]),W.return=se,W)}function Ie(se,W,le,Me,et){return W===null||W.tag!==7?(W=na(le,se.mode,Me,et),W.return=se,W):(W=m(W,le),W.return=se,W)}function Re(se,W,le){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Zd(""+W,se.mode,le),W.return=se,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case ye:return le=Ac(W.type,W.key,W.props,null,se.mode,le),le.ref=Cl(se,null,W),le.return=se,le;case je:return W=eh(W,se.mode,le),W.return=se,W;case Ne:var Me=W._init;return Re(se,Me(W._payload),le)}if(ze(W)||Y(W))return W=na(W,se.mode,le,null),W.return=se,W;ic(se,W)}return null}function Ce(se,W,le,Me){var et=W!==null?W.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return et!==null?null:L(se,W,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case ye:return le.key===et?U(se,W,le,Me):null;case je:return le.key===et?ce(se,W,le,Me):null;case Ne:return et=le._init,Ce(se,W,et(le._payload),Me)}if(ze(le)||Y(le))return et!==null?null:Ie(se,W,le,Me,null);ic(se,le)}return null}function Ge(se,W,le,Me,et){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return se=se.get(le)||null,L(W,se,""+Me,et);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case ye:return se=se.get(Me.key===null?le:Me.key)||null,U(W,se,Me,et);case je:return se=se.get(Me.key===null?le:Me.key)||null,ce(W,se,Me,et);case Ne:var at=Me._init;return Ge(se,W,le,at(Me._payload),et)}if(ze(Me)||Y(Me))return se=se.get(le)||null,Ie(W,se,Me,et,null);ic(W,Me)}return null}function Qe(se,W,le,Me){for(var et=null,at=null,lt=W,dt=W=0,Pr=null;lt!==null&&dt<le.length;dt++){lt.index>dt?(Pr=lt,lt=null):Pr=lt.sibling;var It=Ce(se,lt,le[dt],Me);if(It===null){lt===null&&(lt=Pr);break}r&&lt&&It.alternate===null&&s(se,lt),W=g(It,W,dt),at===null?et=It:at.sibling=It,at=It,lt=Pr}if(dt===le.length)return l(se,lt),Yt&&Wi(se,dt),et;if(lt===null){for(;dt<le.length;dt++)lt=Re(se,le[dt],Me),lt!==null&&(W=g(lt,W,dt),at===null?et=lt:at.sibling=lt,at=lt);return Yt&&Wi(se,dt),et}for(lt=u(se,lt);dt<le.length;dt++)Pr=Ge(lt,se,dt,le[dt],Me),Pr!==null&&(r&&Pr.alternate!==null&&lt.delete(Pr.key===null?dt:Pr.key),W=g(Pr,W,dt),at===null?et=Pr:at.sibling=Pr,at=Pr);return r&&lt.forEach(function(_i){return s(se,_i)}),Yt&&Wi(se,dt),et}function Xe(se,W,le,Me){var et=Y(le);if(typeof et!="function")throw Error(n(150));if(le=et.call(le),le==null)throw Error(n(151));for(var at=et=null,lt=W,dt=W=0,Pr=null,It=le.next();lt!==null&&!It.done;dt++,It=le.next()){lt.index>dt?(Pr=lt,lt=null):Pr=lt.sibling;var _i=Ce(se,lt,It.value,Me);if(_i===null){lt===null&&(lt=Pr);break}r&&lt&&_i.alternate===null&&s(se,lt),W=g(_i,W,dt),at===null?et=_i:at.sibling=_i,at=_i,lt=Pr}if(It.done)return l(se,lt),Yt&&Wi(se,dt),et;if(lt===null){for(;!It.done;dt++,It=le.next())It=Re(se,It.value,Me),It!==null&&(W=g(It,W,dt),at===null?et=It:at.sibling=It,at=It);return Yt&&Wi(se,dt),et}for(lt=u(se,lt);!It.done;dt++,It=le.next())It=Ge(lt,se,dt,It.value,Me),It!==null&&(r&&It.alternate!==null&&lt.delete(It.key===null?dt:It.key),W=g(It,W,dt),at===null?et=It:at.sibling=It,at=It);return r&&lt.forEach(function(ov){return s(se,ov)}),Yt&&Wi(se,dt),et}function dr(se,W,le,Me){if(typeof le=="object"&&le!==null&&le.type===O&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case ye:e:{for(var et=le.key,at=W;at!==null;){if(at.key===et){if(et=le.type,et===O){if(at.tag===7){l(se,at.sibling),W=m(at,le.props.children),W.return=se,se=W;break e}}else if(at.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Ne&&hp(et)===at.type){l(se,at.sibling),W=m(at,le.props),W.ref=Cl(se,at,le),W.return=se,se=W;break e}l(se,at);break}else s(se,at);at=at.sibling}le.type===O?(W=na(le.props.children,se.mode,Me,le.key),W.return=se,se=W):(Me=Ac(le.type,le.key,le.props,null,se.mode,Me),Me.ref=Cl(se,W,le),Me.return=se,se=Me)}return N(se);case je:e:{for(at=le.key;W!==null;){if(W.key===at)if(W.tag===4&&W.stateNode.containerInfo===le.containerInfo&&W.stateNode.implementation===le.implementation){l(se,W.sibling),W=m(W,le.children||[]),W.return=se,se=W;break e}else{l(se,W);break}else s(se,W);W=W.sibling}W=eh(le,se.mode,Me),W.return=se,se=W}return N(se);case Ne:return at=le._init,dr(se,W,at(le._payload),Me)}if(ze(le))return Qe(se,W,le,Me);if(Y(le))return Xe(se,W,le,Me);ic(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,W!==null&&W.tag===6?(l(se,W.sibling),W=m(W,le),W.return=se,se=W):(l(se,W),W=Zd(le,se.mode,Me),W.return=se,se=W),N(se)):l(se,W)}return dr}var $a=mp(!0),pp=mp(!1),ac=pi(null),lc=null,Ba=null,cd=null;function ud(){cd=Ba=lc=null}function dd(r){var s=ac.current;Ut(ac),r._currentValue=s}function hd(r,s,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===l)break;r=r.return}}function Ua(r,s){lc=r,cd=Ba=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(jn=!0),r.firstContext=null)}function Gn(r){var s=r._currentValue;if(cd!==r)if(r={context:r,memoizedValue:s,next:null},Ba===null){if(lc===null)throw Error(n(308));Ba=r,lc.dependencies={lanes:0,firstContext:r}}else Ba=Ba.next=r;return s}var Qi=null;function md(r){Qi===null?Qi=[r]:Qi.push(r)}function fp(r,s,l,u){var m=s.interleaved;return m===null?(l.next=l,md(s)):(l.next=m.next,m.next=l),s.interleaved=l,Ws(r,u)}function Ws(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var xi=!1;function pd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Qs(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function yi(r,s,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(At&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,Ws(r,l)}return m=u.interleaved,m===null?(s.next=s,md(u)):(s.next=m.next,m.next=s),u.interleaved=s,Ws(r,l)}function oc(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,ss(r,l)}}function xp(r,s){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var N={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?m=g=N:g=g.next=N,l=l.next}while(l!==null);g===null?m=g=s:g=g.next=s}else m=g=s;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,effects:u.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function cc(r,s,l,u){var m=r.updateQueue;xi=!1;var g=m.firstBaseUpdate,N=m.lastBaseUpdate,L=m.shared.pending;if(L!==null){m.shared.pending=null;var U=L,ce=U.next;U.next=null,N===null?g=ce:N.next=ce,N=U;var Ie=r.alternate;Ie!==null&&(Ie=Ie.updateQueue,L=Ie.lastBaseUpdate,L!==N&&(L===null?Ie.firstBaseUpdate=ce:L.next=ce,Ie.lastBaseUpdate=U))}if(g!==null){var Re=m.baseState;N=0,Ie=ce=U=null,L=g;do{var Ce=L.lane,Ge=L.eventTime;if((u&Ce)===Ce){Ie!==null&&(Ie=Ie.next={eventTime:Ge,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Qe=r,Xe=L;switch(Ce=s,Ge=l,Xe.tag){case 1:if(Qe=Xe.payload,typeof Qe=="function"){Re=Qe.call(Ge,Re,Ce);break e}Re=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Xe.payload,Ce=typeof Qe=="function"?Qe.call(Ge,Re,Ce):Qe,Ce==null)break e;Re=ue({},Re,Ce);break e;case 2:xi=!0}}L.callback!==null&&L.lane!==0&&(r.flags|=64,Ce=m.effects,Ce===null?m.effects=[L]:Ce.push(L))}else Ge={eventTime:Ge,lane:Ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Ie===null?(ce=Ie=Ge,U=Re):Ie=Ie.next=Ge,N|=Ce;if(L=L.next,L===null){if(L=m.shared.pending,L===null)break;Ce=L,L=Ce.next,Ce.next=null,m.lastBaseUpdate=Ce,m.shared.pending=null}}while(!0);if(Ie===null&&(U=Re),m.baseState=U,m.firstBaseUpdate=ce,m.lastBaseUpdate=Ie,s=m.shared.interleaved,s!==null){m=s;do N|=m.lane,m=m.next;while(m!==s)}else g===null&&(m.shared.lanes=0);Zi|=N,r.lanes=N,r.memoizedState=Re}}function yp(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var u=r[s],m=u.callback;if(m!==null){if(u.callback=null,u=l,typeof m!="function")throw Error(n(191,m));m.call(u)}}}var Il={},Ns=pi(Il),Pl=pi(Il),Dl=pi(Il);function Xi(r){if(r===Il)throw Error(n(174));return r}function fd(r,s){switch($t(Dl,s),$t(Pl,r),$t(Ns,Il),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ee(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Ee(s,r)}Ut(Ns),$t(Ns,s)}function Ka(){Ut(Ns),Ut(Pl),Ut(Dl)}function vp(r){Xi(Dl.current);var s=Xi(Ns.current),l=Ee(s,r.type);s!==l&&($t(Pl,r),$t(Ns,l))}function gd(r){Pl.current===r&&(Ut(Ns),Ut(Pl))}var Qt=pi(0);function uc(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xd=[];function yd(){for(var r=0;r<xd.length;r++)xd[r]._workInProgressVersionPrimary=null;xd.length=0}var dc=Q.ReactCurrentDispatcher,vd=Q.ReactCurrentBatchConfig,Ji=0,Xt=null,jr=null,Cr=null,hc=!1,Rl=!1,zl=0,Cy=0;function Hr(){throw Error(n(321))}function bd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!os(r[l],s[l]))return!1;return!0}function jd(r,s,l,u,m,g){if(Ji=g,Xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,dc.current=r===null||r.memoizedState===null?Ry:zy,r=l(u,m),Rl){g=0;do{if(Rl=!1,zl=0,25<=g)throw Error(n(301));g+=1,Cr=jr=null,s.updateQueue=null,dc.current=My,r=l(u,m)}while(Rl)}if(dc.current=fc,s=jr!==null&&jr.next!==null,Ji=0,Cr=jr=Xt=null,hc=!1,s)throw Error(n(300));return r}function kd(){var r=zl!==0;return zl=0,r}function ws(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?Xt.memoizedState=Cr=r:Cr=Cr.next=r,Cr}function Yn(){if(jr===null){var r=Xt.alternate;r=r!==null?r.memoizedState:null}else r=jr.next;var s=Cr===null?Xt.memoizedState:Cr.next;if(s!==null)Cr=s,jr=r;else{if(r===null)throw Error(n(310));jr=r,r={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Cr===null?Xt.memoizedState=Cr=r:Cr=Cr.next=r}return Cr}function Ml(r,s){return typeof s=="function"?s(r):s}function Nd(r){var s=Yn(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var u=jr,m=u.baseQueue,g=l.pending;if(g!==null){if(m!==null){var N=m.next;m.next=g.next,g.next=N}u.baseQueue=m=g,l.pending=null}if(m!==null){g=m.next,u=u.baseState;var L=N=null,U=null,ce=g;do{var Ie=ce.lane;if((Ji&Ie)===Ie)U!==null&&(U=U.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),u=ce.hasEagerState?ce.eagerState:r(u,ce.action);else{var Re={lane:Ie,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};U===null?(L=U=Re,N=u):U=U.next=Re,Xt.lanes|=Ie,Zi|=Ie}ce=ce.next}while(ce!==null&&ce!==g);U===null?N=u:U.next=L,os(u,s.memoizedState)||(jn=!0),s.memoizedState=u,s.baseState=N,s.baseQueue=U,l.lastRenderedState=u}if(r=l.interleaved,r!==null){m=r;do g=m.lane,Xt.lanes|=g,Zi|=g,m=m.next;while(m!==r)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function wd(r){var s=Yn(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var u=l.dispatch,m=l.pending,g=s.memoizedState;if(m!==null){l.pending=null;var N=m=m.next;do g=r(g,N.action),N=N.next;while(N!==m);os(g,s.memoizedState)||(jn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,u]}function bp(){}function jp(r,s){var l=Xt,u=Yn(),m=s(),g=!os(u.memoizedState,m);if(g&&(u.memoizedState=m,jn=!0),u=u.queue,_d(wp.bind(null,l,u,r),[r]),u.getSnapshot!==s||g||Cr!==null&&Cr.memoizedState.tag&1){if(l.flags|=2048,Vl(9,Np.bind(null,l,u,m,s),void 0,null),Ir===null)throw Error(n(349));(Ji&30)!==0||kp(l,s,m)}return m}function kp(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Xt.updateQueue,s===null?(s={lastEffect:null,stores:null},Xt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Np(r,s,l,u){s.value=l,s.getSnapshot=u,_p(s)&&Tp(r)}function wp(r,s,l){return l(function(){_p(s)&&Tp(r)})}function _p(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!os(r,l)}catch{return!0}}function Tp(r){var s=Ws(r,1);s!==null&&ms(s,r,1,-1)}function Ep(r){var s=ws();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:r},s.queue=r,r=r.dispatch=Dy.bind(null,Xt,r),[s.memoizedState,r]}function Vl(r,s,l,u){return r={tag:r,create:s,destroy:l,deps:u,next:null},s=Xt.updateQueue,s===null?(s={lastEffect:null,stores:null},Xt.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,s.lastEffect=r)),r}function Sp(){return Yn().memoizedState}function mc(r,s,l,u){var m=ws();Xt.flags|=r,m.memoizedState=Vl(1|s,l,void 0,u===void 0?null:u)}function pc(r,s,l,u){var m=Yn();u=u===void 0?null:u;var g=void 0;if(jr!==null){var N=jr.memoizedState;if(g=N.destroy,u!==null&&bd(u,N.deps)){m.memoizedState=Vl(s,l,g,u);return}}Xt.flags|=r,m.memoizedState=Vl(1|s,l,g,u)}function Ap(r,s){return mc(8390656,8,r,s)}function _d(r,s){return pc(2048,8,r,s)}function Cp(r,s){return pc(4,2,r,s)}function Ip(r,s){return pc(4,4,r,s)}function Pp(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Dp(r,s,l){return l=l!=null?l.concat([r]):null,pc(4,4,Pp.bind(null,s,r),l)}function Td(){}function Rp(r,s){var l=Yn();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&bd(s,u[1])?u[0]:(l.memoizedState=[r,s],r)}function zp(r,s){var l=Yn();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&bd(s,u[1])?u[0]:(r=r(),l.memoizedState=[r,s],r)}function Mp(r,s,l){return(Ji&21)===0?(r.baseState&&(r.baseState=!1,jn=!0),r.memoizedState=l):(os(l,s)||(l=Ls(),Xt.lanes|=l,Zi|=l,r.baseState=!0),s)}function Iy(r,s){var l=kt;kt=l!==0&&4>l?l:4,r(!0);var u=vd.transition;vd.transition={};try{r(!1),s()}finally{kt=l,vd.transition=u}}function Vp(){return Yn().memoizedState}function Py(r,s,l){var u=ki(r);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},Op(r))Lp(s,l);else if(l=fp(r,s,l,u),l!==null){var m=dn();ms(l,r,u,m),Fp(l,s,u)}}function Dy(r,s,l){var u=ki(r),m={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(Op(r))Lp(s,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var N=s.lastRenderedState,L=g(N,l);if(m.hasEagerState=!0,m.eagerState=L,os(L,N)){var U=s.interleaved;U===null?(m.next=m,md(s)):(m.next=U.next,U.next=m),s.interleaved=m;return}}catch{}finally{}l=fp(r,s,m,u),l!==null&&(m=dn(),ms(l,r,u,m),Fp(l,s,u))}}function Op(r){var s=r.alternate;return r===Xt||s!==null&&s===Xt}function Lp(r,s){Rl=hc=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Fp(r,s,l){if((l&4194240)!==0){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,ss(r,l)}}var fc={readContext:Gn,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},Ry={readContext:Gn,useCallback:function(r,s){return ws().memoizedState=[r,s===void 0?null:s],r},useContext:Gn,useEffect:Ap,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,mc(4194308,4,Pp.bind(null,s,r),l)},useLayoutEffect:function(r,s){return mc(4194308,4,r,s)},useInsertionEffect:function(r,s){return mc(4,2,r,s)},useMemo:function(r,s){var l=ws();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var u=ws();return s=l!==void 0?l(s):s,u.memoizedState=u.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},u.queue=r,r=r.dispatch=Py.bind(null,Xt,r),[u.memoizedState,r]},useRef:function(r){var s=ws();return r={current:r},s.memoizedState=r},useState:Ep,useDebugValue:Td,useDeferredValue:function(r){return ws().memoizedState=r},useTransition:function(){var r=Ep(!1),s=r[0];return r=Iy.bind(null,r[1]),ws().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var u=Xt,m=ws();if(Yt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=s(),Ir===null)throw Error(n(349));(Ji&30)!==0||kp(u,s,l)}m.memoizedState=l;var g={value:l,getSnapshot:s};return m.queue=g,Ap(wp.bind(null,u,g,r),[r]),u.flags|=2048,Vl(9,Np.bind(null,u,g,l,s),void 0,null),l},useId:function(){var r=ws(),s=Ir.identifierPrefix;if(Yt){var l=qs,u=Ys;l=(u&~(1<<32-vr(u)-1)).toString(32)+l,s=":"+s+"R"+l,l=zl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=Cy++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},zy={readContext:Gn,useCallback:Rp,useContext:Gn,useEffect:_d,useImperativeHandle:Dp,useInsertionEffect:Cp,useLayoutEffect:Ip,useMemo:zp,useReducer:Nd,useRef:Sp,useState:function(){return Nd(Ml)},useDebugValue:Td,useDeferredValue:function(r){var s=Yn();return Mp(s,jr.memoizedState,r)},useTransition:function(){var r=Nd(Ml)[0],s=Yn().memoizedState;return[r,s]},useMutableSource:bp,useSyncExternalStore:jp,useId:Vp,unstable_isNewReconciler:!1},My={readContext:Gn,useCallback:Rp,useContext:Gn,useEffect:_d,useImperativeHandle:Dp,useInsertionEffect:Cp,useLayoutEffect:Ip,useMemo:zp,useReducer:wd,useRef:Sp,useState:function(){return wd(Ml)},useDebugValue:Td,useDeferredValue:function(r){var s=Yn();return jr===null?s.memoizedState=r:Mp(s,jr.memoizedState,r)},useTransition:function(){var r=wd(Ml)[0],s=Yn().memoizedState;return[r,s]},useMutableSource:bp,useSyncExternalStore:jp,useId:Vp,unstable_isNewReconciler:!1};function us(r,s){if(r&&r.defaultProps){s=ue({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Ed(r,s,l,u){s=r.memoizedState,l=l(u,s),l=l==null?s:ue({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var gc={isMounted:function(r){return(r=r._reactInternals)?mr(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var u=dn(),m=ki(r),g=Qs(u,m);g.payload=s,l!=null&&(g.callback=l),s=yi(r,g,m),s!==null&&(ms(s,r,m,u),oc(s,r,m))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var u=dn(),m=ki(r),g=Qs(u,m);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=yi(r,g,m),s!==null&&(ms(s,r,m,u),oc(s,r,m))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=dn(),u=ki(r),m=Qs(l,u);m.tag=2,s!=null&&(m.callback=s),s=yi(r,m,u),s!==null&&(ms(s,r,u,l),oc(s,r,u))}};function $p(r,s,l,u,m,g,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,N):s.prototype&&s.prototype.isPureReactComponent?!Nl(l,u)||!Nl(m,g):!0}function Bp(r,s,l){var u=!1,m=fi,g=s.contextType;return typeof g=="object"&&g!==null?g=Gn(g):(m=bn(s)?Yi:Kr.current,u=s.contextTypes,g=(u=u!=null)?Va(r,m):fi),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=gc,r.stateNode=s,s._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=g),s}function Up(r,s,l,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==r&&gc.enqueueReplaceState(s,s.state,null)}function Sd(r,s,l,u){var m=r.stateNode;m.props=l,m.state=r.memoizedState,m.refs={},pd(r);var g=s.contextType;typeof g=="object"&&g!==null?m.context=Gn(g):(g=bn(s)?Yi:Kr.current,m.context=Va(r,g)),m.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Ed(r,s,g,l),m.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&gc.enqueueReplaceState(m,m.state,null),cc(r,l,m,u),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function Ha(r,s){try{var l="",u=s;do l+=j(u),u=u.return;while(u);var m=l}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:m,digest:null}}function Ad(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Cd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Vy=typeof WeakMap=="function"?WeakMap:Map;function Kp(r,s,l){l=Qs(-1,l),l.tag=3,l.payload={element:null};var u=s.value;return l.callback=function(){Nc||(Nc=!0,Hd=u),Cd(r,s)},l}function Hp(r,s,l){l=Qs(-1,l),l.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var m=s.value;l.payload=function(){return u(m)},l.callback=function(){Cd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Cd(r,s),typeof u!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var N=s.stack;this.componentDidCatch(s.value,{componentStack:N!==null?N:""})}),l}function Gp(r,s,l){var u=r.pingCache;if(u===null){u=r.pingCache=new Vy;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(l)||(m.add(l),r=Xy.bind(null,r,s,l),s.then(r,r))}function Yp(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function qp(r,s,l,u,m){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Qs(-1,1),s.tag=2,yi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=m,r)}var Oy=Q.ReactCurrentOwner,jn=!1;function un(r,s,l,u){s.child=r===null?pp(s,null,l,u):$a(s,r.child,l,u)}function Wp(r,s,l,u,m){l=l.render;var g=s.ref;return Ua(s,m),u=jd(r,s,l,u,g,m),l=kd(),r!==null&&!jn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~m,Xs(r,s,m)):(Yt&&l&&sd(s),s.flags|=1,un(r,s,u,m),s.child)}function Qp(r,s,l,u,m){if(r===null){var g=l.type;return typeof g=="function"&&!Jd(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Xp(r,s,g,u,m)):(r=Ac(l.type,null,u,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&m)===0){var N=g.memoizedProps;if(l=l.compare,l=l!==null?l:Nl,l(N,u)&&r.ref===s.ref)return Xs(r,s,m)}return s.flags|=1,r=wi(g,u),r.ref=s.ref,r.return=s,s.child=r}function Xp(r,s,l,u,m){if(r!==null){var g=r.memoizedProps;if(Nl(g,u)&&r.ref===s.ref)if(jn=!1,s.pendingProps=u=g,(r.lanes&m)!==0)(r.flags&131072)!==0&&(jn=!0);else return s.lanes=r.lanes,Xs(r,s,m)}return Id(r,s,l,u,m)}function Jp(r,s,l){var u=s.pendingProps,m=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Ya,Mn),Mn|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,$t(Ya,Mn),Mn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:l,$t(Ya,Mn),Mn|=u}else g!==null?(u=g.baseLanes|l,s.memoizedState=null):u=l,$t(Ya,Mn),Mn|=u;return un(r,s,m,l),s.child}function Zp(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Id(r,s,l,u,m){var g=bn(l)?Yi:Kr.current;return g=Va(s,g),Ua(s,m),l=jd(r,s,l,u,g,m),u=kd(),r!==null&&!jn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~m,Xs(r,s,m)):(Yt&&u&&sd(s),s.flags|=1,un(r,s,l,m),s.child)}function ef(r,s,l,u,m){if(bn(l)){var g=!0;ec(s)}else g=!1;if(Ua(s,m),s.stateNode===null)yc(r,s),Bp(s,l,u),Sd(s,l,u,m),u=!0;else if(r===null){var N=s.stateNode,L=s.memoizedProps;N.props=L;var U=N.context,ce=l.contextType;typeof ce=="object"&&ce!==null?ce=Gn(ce):(ce=bn(l)?Yi:Kr.current,ce=Va(s,ce));var Ie=l.getDerivedStateFromProps,Re=typeof Ie=="function"||typeof N.getSnapshotBeforeUpdate=="function";Re||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(L!==u||U!==ce)&&Up(s,N,u,ce),xi=!1;var Ce=s.memoizedState;N.state=Ce,cc(s,u,N,m),U=s.memoizedState,L!==u||Ce!==U||vn.current||xi?(typeof Ie=="function"&&(Ed(s,l,Ie,u),U=s.memoizedState),(L=xi||$p(s,l,L,u,Ce,U,ce))?(Re||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(s.flags|=4194308)):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=U),N.props=u,N.state=U,N.context=ce,u=L):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{N=s.stateNode,gp(r,s),L=s.memoizedProps,ce=s.type===s.elementType?L:us(s.type,L),N.props=ce,Re=s.pendingProps,Ce=N.context,U=l.contextType,typeof U=="object"&&U!==null?U=Gn(U):(U=bn(l)?Yi:Kr.current,U=Va(s,U));var Ge=l.getDerivedStateFromProps;(Ie=typeof Ge=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(L!==Re||Ce!==U)&&Up(s,N,u,U),xi=!1,Ce=s.memoizedState,N.state=Ce,cc(s,u,N,m);var Qe=s.memoizedState;L!==Re||Ce!==Qe||vn.current||xi?(typeof Ge=="function"&&(Ed(s,l,Ge,u),Qe=s.memoizedState),(ce=xi||$p(s,l,ce,u,Ce,Qe,U)||!1)?(Ie||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(u,Qe,U),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(u,Qe,U)),typeof N.componentDidUpdate=="function"&&(s.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof N.componentDidUpdate!="function"||L===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Qe),N.props=u,N.state=Qe,N.context=U,u=ce):(typeof N.componentDidUpdate!="function"||L===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=1024),u=!1)}return Pd(r,s,l,u,g,m)}function Pd(r,s,l,u,m,g){Zp(r,s);var N=(s.flags&128)!==0;if(!u&&!N)return m&&ip(s,l,!1),Xs(r,s,g);u=s.stateNode,Oy.current=s;var L=N&&typeof l.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,r!==null&&N?(s.child=$a(s,r.child,null,g),s.child=$a(s,null,L,g)):un(r,s,L,g),s.memoizedState=u.state,m&&ip(s,l,!0),s.child}function tf(r){var s=r.stateNode;s.pendingContext?np(r,s.pendingContext,s.pendingContext!==s.context):s.context&&np(r,s.context,!1),fd(r,s.containerInfo)}function rf(r,s,l,u,m){return Fa(),od(m),s.flags|=256,un(r,s,l,u),s.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Rd(r){return{baseLanes:r,cachePool:null,transitions:null}}function nf(r,s,l){var u=s.pendingProps,m=Qt.current,g=!1,N=(s.flags&128)!==0,L;if((L=N)||(L=r!==null&&r.memoizedState===null?!1:(m&2)!==0),L?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),$t(Qt,m&1),r===null)return ld(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(N=u.children,r=u.fallback,g?(u=s.mode,g=s.child,N={mode:"hidden",children:N},(u&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=N):g=Cc(N,u,0,null),r=na(r,u,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Rd(l),s.memoizedState=Dd,r):zd(s,N));if(m=r.memoizedState,m!==null&&(L=m.dehydrated,L!==null))return Ly(r,s,N,u,L,m,l);if(g){g=u.fallback,N=s.mode,m=r.child,L=m.sibling;var U={mode:"hidden",children:u.children};return(N&1)===0&&s.child!==m?(u=s.child,u.childLanes=0,u.pendingProps=U,s.deletions=null):(u=wi(m,U),u.subtreeFlags=m.subtreeFlags&14680064),L!==null?g=wi(L,g):(g=na(g,N,l,null),g.flags|=2),g.return=s,u.return=s,u.sibling=g,s.child=u,u=g,g=s.child,N=r.child.memoizedState,N=N===null?Rd(l):{baseLanes:N.baseLanes|l,cachePool:null,transitions:N.transitions},g.memoizedState=N,g.childLanes=r.childLanes&~l,s.memoizedState=Dd,u}return g=r.child,r=g.sibling,u=wi(g,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=l),u.return=s,u.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=u,s.memoizedState=null,u}function zd(r,s){return s=Cc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function xc(r,s,l,u){return u!==null&&od(u),$a(s,r.child,null,l),r=zd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Ly(r,s,l,u,m,g,N){if(l)return s.flags&256?(s.flags&=-257,u=Ad(Error(n(422))),xc(r,s,N,u)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=u.fallback,m=s.mode,u=Cc({mode:"visible",children:u.children},m,0,null),g=na(g,m,N,null),g.flags|=2,u.return=s,g.return=s,u.sibling=g,s.child=u,(s.mode&1)!==0&&$a(s,r.child,null,N),s.child.memoizedState=Rd(N),s.memoizedState=Dd,g);if((s.mode&1)===0)return xc(r,s,N,null);if(m.data==="$!"){if(u=m.nextSibling&&m.nextSibling.dataset,u)var L=u.dgst;return u=L,g=Error(n(419)),u=Ad(g,u,void 0),xc(r,s,N,u)}if(L=(N&r.childLanes)!==0,jn||L){if(u=Ir,u!==null){switch(N&-N){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(u.suspendedLanes|N))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,Ws(r,m),ms(u,r,m,-1))}return Xd(),u=Ad(Error(n(421))),xc(r,s,N,u)}return m.data==="$?"?(s.flags|=128,s.child=r.child,s=Jy.bind(null,r),m._reactRetry=s,null):(r=g.treeContext,zn=mi(m.nextSibling),Rn=s,Yt=!0,cs=null,r!==null&&(Kn[Hn++]=Ys,Kn[Hn++]=qs,Kn[Hn++]=qi,Ys=r.id,qs=r.overflow,qi=s),s=zd(s,u.children),s.flags|=4096,s)}function sf(r,s,l){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),hd(r.return,s,l)}function Md(r,s,l,u,m){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=m)}function af(r,s,l){var u=s.pendingProps,m=u.revealOrder,g=u.tail;if(un(r,s,u.children,l),u=Qt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&sf(r,l,s);else if(r.tag===19)sf(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if($t(Qt,u),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)r=l.alternate,r!==null&&uc(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),Md(s,!1,m,l,g);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&uc(r)===null){s.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}Md(s,!0,l,null,g);break;case"together":Md(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function yc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Xs(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Zi|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,l=wi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=wi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function Fy(r,s,l){switch(s.tag){case 3:tf(s),Fa();break;case 5:vp(s);break;case 1:bn(s.type)&&ec(s);break;case 4:fd(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,m=s.memoizedProps.value;$t(ac,u._currentValue),u._currentValue=m;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?($t(Qt,Qt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?nf(r,s,l):($t(Qt,Qt.current&1),r=Xs(r,s,l),r!==null?r.sibling:null);$t(Qt,Qt.current&1);break;case 19:if(u=(l&s.childLanes)!==0,(r.flags&128)!==0){if(u)return af(r,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),$t(Qt,Qt.current),u)break;return null;case 22:case 23:return s.lanes=0,Jp(r,s,l)}return Xs(r,s,l)}var lf,Vd,of,cf;lf=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Vd=function(){},of=function(r,s,l,u){var m=r.memoizedProps;if(m!==u){r=s.stateNode,Xi(Ns.current);var g=null;switch(l){case"input":m=qe(r,m),u=qe(r,u),g=[];break;case"select":m=ue({},m,{value:void 0}),u=ue({},u,{value:void 0}),g=[];break;case"textarea":m=Pe(r,m),u=Pe(r,u),g=[];break;default:typeof m.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=Xo)}es(l,u);var N;l=null;for(ce in m)if(!u.hasOwnProperty(ce)&&m.hasOwnProperty(ce)&&m[ce]!=null)if(ce==="style"){var L=m[ce];for(N in L)L.hasOwnProperty(N)&&(l||(l={}),l[N]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(o.hasOwnProperty(ce)?g||(g=[]):(g=g||[]).push(ce,null));for(ce in u){var U=u[ce];if(L=m!=null?m[ce]:void 0,u.hasOwnProperty(ce)&&U!==L&&(U!=null||L!=null))if(ce==="style")if(L){for(N in L)!L.hasOwnProperty(N)||U&&U.hasOwnProperty(N)||(l||(l={}),l[N]="");for(N in U)U.hasOwnProperty(N)&&L[N]!==U[N]&&(l||(l={}),l[N]=U[N])}else l||(g||(g=[]),g.push(ce,l)),l=U;else ce==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(g=g||[]).push(ce,U)):ce==="children"?typeof U!="string"&&typeof U!="number"||(g=g||[]).push(ce,""+U):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(o.hasOwnProperty(ce)?(U!=null&&ce==="onScroll"&&Bt("scroll",r),g||L===U||(g=[])):(g=g||[]).push(ce,U))}l&&(g=g||[]).push("style",l);var ce=g;(s.updateQueue=ce)&&(s.flags|=4)}},cf=function(r,s,l,u){l!==u&&(s.flags|=4)};function Ol(r,s){if(!Yt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Gr(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(s)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&14680064,u|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=l,s}function $y(r,s,l){var u=s.pendingProps;switch(id(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(s),null;case 1:return bn(s.type)&&Zo(),Gr(s),null;case 3:return u=s.stateNode,Ka(),Ut(vn),Ut(Kr),yd(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(sc(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,cs!==null&&(qd(cs),cs=null))),Vd(r,s),Gr(s),null;case 5:gd(s);var m=Xi(Dl.current);if(l=s.type,r!==null&&s.stateNode!=null)of(r,s,l,u,m),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(n(166));return Gr(s),null}if(r=Xi(Ns.current),sc(s)){u=s.stateNode,l=s.type;var g=s.memoizedProps;switch(u[ks]=s,u[Sl]=g,r=(s.mode&1)!==0,l){case"dialog":Bt("cancel",u),Bt("close",u);break;case"iframe":case"object":case"embed":Bt("load",u);break;case"video":case"audio":for(m=0;m<_l.length;m++)Bt(_l[m],u);break;case"source":Bt("error",u);break;case"img":case"image":case"link":Bt("error",u),Bt("load",u);break;case"details":Bt("toggle",u);break;case"input":Be(u,g),Bt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},Bt("invalid",u);break;case"textarea":Ue(u,g),Bt("invalid",u)}es(l,g),m=null;for(var N in g)if(g.hasOwnProperty(N)){var L=g[N];N==="children"?typeof L=="string"?u.textContent!==L&&(g.suppressHydrationWarning!==!0&&Qo(u.textContent,L,r),m=["children",L]):typeof L=="number"&&u.textContent!==""+L&&(g.suppressHydrationWarning!==!0&&Qo(u.textContent,L,r),m=["children",""+L]):o.hasOwnProperty(N)&&L!=null&&N==="onScroll"&&Bt("scroll",u)}switch(l){case"input":re(u),fe(u,g,!0);break;case"textarea":re(u),pe(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=Xo)}u=m,s.updateQueue=u,u!==null&&(s.flags|=4)}else{N=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=$e(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=N.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=N.createElement(l,{is:u.is}):(r=N.createElement(l),l==="select"&&(N=r,u.multiple?N.multiple=!0:u.size&&(N.size=u.size))):r=N.createElementNS(r,l),r[ks]=s,r[Sl]=u,lf(r,s,!1,!1),s.stateNode=r;e:{switch(N=An(l,u),l){case"dialog":Bt("cancel",r),Bt("close",r),m=u;break;case"iframe":case"object":case"embed":Bt("load",r),m=u;break;case"video":case"audio":for(m=0;m<_l.length;m++)Bt(_l[m],r);m=u;break;case"source":Bt("error",r),m=u;break;case"img":case"image":case"link":Bt("error",r),Bt("load",r),m=u;break;case"details":Bt("toggle",r),m=u;break;case"input":Be(r,u),m=qe(r,u),Bt("invalid",r);break;case"option":m=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},m=ue({},u,{value:void 0}),Bt("invalid",r);break;case"textarea":Ue(r,u),m=Pe(r,u),Bt("invalid",r);break;default:m=u}es(l,m),L=m;for(g in L)if(L.hasOwnProperty(g)){var U=L[g];g==="style"?tr(r,U):g==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&_t(r,U)):g==="children"?typeof U=="string"?(l!=="textarea"||U!=="")&&Te(r,U):typeof U=="number"&&Te(r,""+U):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?U!=null&&g==="onScroll"&&Bt("scroll",r):U!=null&&ee(r,g,U,N))}switch(l){case"input":re(r),fe(r,u,!1);break;case"textarea":re(r),pe(r);break;case"option":u.value!=null&&r.setAttribute("value",""+J(u.value));break;case"select":r.multiple=!!u.multiple,g=u.value,g!=null?be(r,!!u.multiple,g,!1):u.defaultValue!=null&&be(r,!!u.multiple,u.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=Xo)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Gr(s),null;case 6:if(r&&s.stateNode!=null)cf(r,s,r.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(n(166));if(l=Xi(Dl.current),Xi(Ns.current),sc(s)){if(u=s.stateNode,l=s.memoizedProps,u[ks]=s,(g=u.nodeValue!==l)&&(r=Rn,r!==null))switch(r.tag){case 3:Qo(u.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Qo(u.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[ks]=s,s.stateNode=u}return Gr(s),null;case 13:if(Ut(Qt),u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Yt&&zn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)dp(),Fa(),s.flags|=98560,g=!1;else if(g=sc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(n(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[ks]=s}else Fa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gr(s),g=!1}else cs!==null&&(qd(cs),cs=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Qt.current&1)!==0?kr===0&&(kr=3):Xd())),s.updateQueue!==null&&(s.flags|=4),Gr(s),null);case 4:return Ka(),Vd(r,s),r===null&&Tl(s.stateNode.containerInfo),Gr(s),null;case 10:return dd(s.type._context),Gr(s),null;case 17:return bn(s.type)&&Zo(),Gr(s),null;case 19:if(Ut(Qt),g=s.memoizedState,g===null)return Gr(s),null;if(u=(s.flags&128)!==0,N=g.rendering,N===null)if(u)Ol(g,!1);else{if(kr!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(N=uc(r),N!==null){for(s.flags|=128,Ol(g,!1),u=N.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=l,l=s.child;l!==null;)g=l,r=u,g.flags&=14680066,N=g.alternate,N===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=N.childLanes,g.lanes=N.lanes,g.child=N.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=N.memoizedProps,g.memoizedState=N.memoizedState,g.updateQueue=N.updateQueue,g.type=N.type,r=N.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return $t(Qt,Qt.current&1|2),s.child}r=r.sibling}g.tail!==null&&wt()>qa&&(s.flags|=128,u=!0,Ol(g,!1),s.lanes=4194304)}else{if(!u)if(r=uc(N),r!==null){if(s.flags|=128,u=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!N.alternate&&!Yt)return Gr(s),null}else 2*wt()-g.renderingStartTime>qa&&l!==1073741824&&(s.flags|=128,u=!0,Ol(g,!1),s.lanes=4194304);g.isBackwards?(N.sibling=s.child,s.child=N):(l=g.last,l!==null?l.sibling=N:s.child=N,g.last=N)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=wt(),s.sibling=null,l=Qt.current,$t(Qt,u?l&1|2:l&1),s):(Gr(s),null);case 22:case 23:return Qd(),u=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(Mn&1073741824)!==0&&(Gr(s),s.subtreeFlags&6&&(s.flags|=8192)):Gr(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function By(r,s){switch(id(s),s.tag){case 1:return bn(s.type)&&Zo(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ka(),Ut(vn),Ut(Kr),yd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return gd(s),null;case 13:if(Ut(Qt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Fa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ut(Qt),null;case 4:return Ka(),null;case 10:return dd(s.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var vc=!1,Yr=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,We=null;function Ga(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){ar(r,s,u)}else l.current=null}function Od(r,s,l){try{l()}catch(u){ar(r,s,u)}}var uf=!1;function Ky(r,s){if(Qu=ir,r=$m(),Bu(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var N=0,L=-1,U=-1,ce=0,Ie=0,Re=r,Ce=null;t:for(;;){for(var Ge;Re!==l||m!==0&&Re.nodeType!==3||(L=N+m),Re!==g||u!==0&&Re.nodeType!==3||(U=N+u),Re.nodeType===3&&(N+=Re.nodeValue.length),(Ge=Re.firstChild)!==null;)Ce=Re,Re=Ge;for(;;){if(Re===r)break t;if(Ce===l&&++ce===m&&(L=N),Ce===g&&++Ie===u&&(U=N),(Ge=Re.nextSibling)!==null)break;Re=Ce,Ce=Re.parentNode}Re=Ge}l=L===-1||U===-1?null:{start:L,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xu={focusedElem:r,selectionRange:l},ir=!1,We=s;We!==null;)if(s=We,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,We=r;else for(;We!==null;){s=We;try{var Qe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var Xe=Qe.memoizedProps,dr=Qe.memoizedState,se=s.stateNode,W=se.getSnapshotBeforeUpdate(s.elementType===s.type?Xe:us(s.type,Xe),dr);se.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var le=s.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){ar(s,s.return,Me)}if(r=s.sibling,r!==null){r.return=s.return,We=r;break}We=s.return}return Qe=uf,uf=!1,Qe}function Ll(r,s,l){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&r)===r){var g=m.destroy;m.destroy=void 0,g!==void 0&&Od(s,l,g)}m=m.next}while(m!==u)}}function bc(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var u=l.create;l.destroy=u()}l=l.next}while(l!==s)}}function Ld(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function df(r){var s=r.alternate;s!==null&&(r.alternate=null,df(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ks],delete s[Sl],delete s[td],delete s[Ty],delete s[Ey])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function hf(r){return r.tag===5||r.tag===3||r.tag===4}function mf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||hf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Fd(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Xo));else if(u!==4&&(r=r.child,r!==null))for(Fd(r,s,l),r=r.sibling;r!==null;)Fd(r,s,l),r=r.sibling}function $d(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for($d(r,s,l),r=r.sibling;r!==null;)$d(r,s,l),r=r.sibling}var Mr=null,ds=!1;function vi(r,s,l){for(l=l.child;l!==null;)pf(r,s,l),l=l.sibling}function pf(r,s,l){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ms,l)}catch{}switch(l.tag){case 5:Yr||Ga(l,s);case 6:var u=Mr,m=ds;Mr=null,vi(r,s,l),Mr=u,ds=m,Mr!==null&&(ds?(r=Mr,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Mr.removeChild(l.stateNode));break;case 18:Mr!==null&&(ds?(r=Mr,l=l.stateNode,r.nodeType===8?ed(r.parentNode,l):r.nodeType===1&&ed(r,l),mt(r)):ed(Mr,l.stateNode));break;case 4:u=Mr,m=ds,Mr=l.stateNode.containerInfo,ds=!0,vi(r,s,l),Mr=u,ds=m;break;case 0:case 11:case 14:case 15:if(!Yr&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){m=u=u.next;do{var g=m,N=g.destroy;g=g.tag,N!==void 0&&((g&2)!==0||(g&4)!==0)&&Od(l,s,N),m=m.next}while(m!==u)}vi(r,s,l);break;case 1:if(!Yr&&(Ga(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(L){ar(l,s,L)}vi(r,s,l);break;case 21:vi(r,s,l);break;case 22:l.mode&1?(Yr=(u=Yr)||l.memoizedState!==null,vi(r,s,l),Yr=u):vi(r,s,l);break;default:vi(r,s,l)}}function ff(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new Uy),s.forEach(function(u){var m=Zy.bind(null,r,u);l.has(u)||(l.add(u),u.then(m,m))})}}function hs(r,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u];try{var g=r,N=s,L=N;e:for(;L!==null;){switch(L.tag){case 5:Mr=L.stateNode,ds=!1;break e;case 3:Mr=L.stateNode.containerInfo,ds=!0;break e;case 4:Mr=L.stateNode.containerInfo,ds=!0;break e}L=L.return}if(Mr===null)throw Error(n(160));pf(g,N,m),Mr=null,ds=!1;var U=m.alternate;U!==null&&(U.return=null),m.return=null}catch(ce){ar(m,s,ce)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)gf(s,r),s=s.sibling}function gf(r,s){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(hs(s,r),_s(r),u&4){try{Ll(3,r,r.return),bc(3,r)}catch(Xe){ar(r,r.return,Xe)}try{Ll(5,r,r.return)}catch(Xe){ar(r,r.return,Xe)}}break;case 1:hs(s,r),_s(r),u&512&&l!==null&&Ga(l,l.return);break;case 5:if(hs(s,r),_s(r),u&512&&l!==null&&Ga(l,l.return),r.flags&32){var m=r.stateNode;try{Te(m,"")}catch(Xe){ar(r,r.return,Xe)}}if(u&4&&(m=r.stateNode,m!=null)){var g=r.memoizedProps,N=l!==null?l.memoizedProps:g,L=r.type,U=r.updateQueue;if(r.updateQueue=null,U!==null)try{L==="input"&&g.type==="radio"&&g.name!=null&&C(m,g),An(L,N);var ce=An(L,g);for(N=0;N<U.length;N+=2){var Ie=U[N],Re=U[N+1];Ie==="style"?tr(m,Re):Ie==="dangerouslySetInnerHTML"?_t(m,Re):Ie==="children"?Te(m,Re):ee(m,Ie,Re,ce)}switch(L){case"input":ie(m,g);break;case"textarea":De(m,g);break;case"select":var Ce=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var Ge=g.value;Ge!=null?be(m,!!g.multiple,Ge,!1):Ce!==!!g.multiple&&(g.defaultValue!=null?be(m,!!g.multiple,g.defaultValue,!0):be(m,!!g.multiple,g.multiple?[]:"",!1))}m[Sl]=g}catch(Xe){ar(r,r.return,Xe)}}break;case 6:if(hs(s,r),_s(r),u&4){if(r.stateNode===null)throw Error(n(162));m=r.stateNode,g=r.memoizedProps;try{m.nodeValue=g}catch(Xe){ar(r,r.return,Xe)}}break;case 3:if(hs(s,r),_s(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{mt(s.containerInfo)}catch(Xe){ar(r,r.return,Xe)}break;case 4:hs(s,r),_s(r);break;case 13:hs(s,r),_s(r),m=r.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(Kd=wt())),u&4&&ff(r);break;case 22:if(Ie=l!==null&&l.memoizedState!==null,r.mode&1?(Yr=(ce=Yr)||Ie,hs(s,r),Yr=ce):hs(s,r),_s(r),u&8192){if(ce=r.memoizedState!==null,(r.stateNode.isHidden=ce)&&!Ie&&(r.mode&1)!==0)for(We=r,Ie=r.child;Ie!==null;){for(Re=We=Ie;We!==null;){switch(Ce=We,Ge=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:Ll(4,Ce,Ce.return);break;case 1:Ga(Ce,Ce.return);var Qe=Ce.stateNode;if(typeof Qe.componentWillUnmount=="function"){u=Ce,l=Ce.return;try{s=u,Qe.props=s.memoizedProps,Qe.state=s.memoizedState,Qe.componentWillUnmount()}catch(Xe){ar(u,l,Xe)}}break;case 5:Ga(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){vf(Re);continue}}Ge!==null?(Ge.return=Ce,We=Ge):vf(Re)}Ie=Ie.sibling}e:for(Ie=null,Re=r;;){if(Re.tag===5){if(Ie===null){Ie=Re;try{m=Re.stateNode,ce?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(L=Re.stateNode,U=Re.memoizedProps.style,N=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=ht("display",N))}catch(Xe){ar(r,r.return,Xe)}}}else if(Re.tag===6){if(Ie===null)try{Re.stateNode.nodeValue=ce?"":Re.memoizedProps}catch(Xe){ar(r,r.return,Xe)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===r)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===r)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===r)break e;Ie===Re&&(Ie=null),Re=Re.return}Ie===Re&&(Ie=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:hs(s,r),_s(r),u&4&&ff(r);break;case 21:break;default:hs(s,r),_s(r)}}function _s(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(hf(l)){var u=l;break e}l=l.return}throw Error(n(160))}switch(u.tag){case 5:var m=u.stateNode;u.flags&32&&(Te(m,""),u.flags&=-33);var g=mf(r);$d(r,g,m);break;case 3:case 4:var N=u.stateNode.containerInfo,L=mf(r);Fd(r,L,N);break;default:throw Error(n(161))}}catch(U){ar(r,r.return,U)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Hy(r,s,l){We=r,xf(r)}function xf(r,s,l){for(var u=(r.mode&1)!==0;We!==null;){var m=We,g=m.child;if(m.tag===22&&u){var N=m.memoizedState!==null||vc;if(!N){var L=m.alternate,U=L!==null&&L.memoizedState!==null||Yr;L=vc;var ce=Yr;if(vc=N,(Yr=U)&&!ce)for(We=m;We!==null;)N=We,U=N.child,N.tag===22&&N.memoizedState!==null?bf(m):U!==null?(U.return=N,We=U):bf(m);for(;g!==null;)We=g,xf(g),g=g.sibling;We=m,vc=L,Yr=ce}yf(r)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,We=g):yf(r)}}function yf(r){for(;We!==null;){var s=We;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Yr||bc(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!Yr)if(l===null)u.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:us(s.type,l.memoizedProps);u.componentDidUpdate(m,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&yp(s,g,u);break;case 3:var N=s.updateQueue;if(N!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}yp(s,N,l)}break;case 5:var L=s.stateNode;if(l===null&&s.flags&4){l=L;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&l.focus();break;case"img":U.src&&(l.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ce=s.alternate;if(ce!==null){var Ie=ce.memoizedState;if(Ie!==null){var Re=Ie.dehydrated;Re!==null&&mt(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Yr||s.flags&512&&Ld(s)}catch(Ce){ar(s,s.return,Ce)}}if(s===r){We=null;break}if(l=s.sibling,l!==null){l.return=s.return,We=l;break}We=s.return}}function vf(r){for(;We!==null;){var s=We;if(s===r){We=null;break}var l=s.sibling;if(l!==null){l.return=s.return,We=l;break}We=s.return}}function bf(r){for(;We!==null;){var s=We;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{bc(4,s)}catch(U){ar(s,l,U)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var m=s.return;try{u.componentDidMount()}catch(U){ar(s,m,U)}}var g=s.return;try{Ld(s)}catch(U){ar(s,g,U)}break;case 5:var N=s.return;try{Ld(s)}catch(U){ar(s,N,U)}}}catch(U){ar(s,s.return,U)}if(s===r){We=null;break}var L=s.sibling;if(L!==null){L.return=s.return,We=L;break}We=s.return}}var Gy=Math.ceil,jc=Q.ReactCurrentDispatcher,Bd=Q.ReactCurrentOwner,qn=Q.ReactCurrentBatchConfig,At=0,Ir=null,gr=null,Vr=0,Mn=0,Ya=pi(0),kr=0,Fl=null,Zi=0,kc=0,Ud=0,$l=null,kn=null,Kd=0,qa=1/0,Js=null,Nc=!1,Hd=null,bi=null,wc=!1,ji=null,_c=0,Bl=0,Gd=null,Tc=-1,Ec=0;function dn(){return(At&6)!==0?wt():Tc!==-1?Tc:Tc=wt()}function ki(r){return(r.mode&1)===0?1:(At&2)!==0&&Vr!==0?Vr&-Vr:Ay.transition!==null?(Ec===0&&(Ec=Ls()),Ec):(r=kt,r!==0||(r=window.event,r=r===void 0?16:gl(r.type)),r)}function ms(r,s,l,u){if(50<Bl)throw Bl=0,Gd=null,Error(n(185));xs(r,l,u),((At&2)===0||r!==Ir)&&(r===Ir&&((At&2)===0&&(kc|=l),kr===4&&Ni(r,Vr)),Nn(r,u),l===1&&At===0&&(s.mode&1)===0&&(qa=wt()+500,tc&&gi()))}function Nn(r,s){var l=r.callbackNode;rs(r,s);var u=sr(r,r===Ir?Vr:0);if(u===0)l!==null&&Fi(l),r.callbackNode=null,r.callbackPriority=0;else if(s=u&-u,r.callbackPriority!==s){if(l!=null&&Fi(l),s===1)r.tag===0?Sy(kf.bind(null,r)):ap(kf.bind(null,r)),wy(function(){(At&6)===0&&gi()}),l=null;else{switch(ys(u)){case 1:l=Fn;break;case 4:l=fn;break;case 16:l=Gt;break;case 536870912:l=Bi;break;default:l=Gt}l=Cf(l,jf.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function jf(r,s){if(Tc=-1,Ec=0,(At&6)!==0)throw Error(n(327));var l=r.callbackNode;if(Wa()&&r.callbackNode!==l)return null;var u=sr(r,r===Ir?Vr:0);if(u===0)return null;if((u&30)!==0||(u&r.expiredLanes)!==0||s)s=Sc(r,u);else{s=u;var m=At;At|=2;var g=wf();(Ir!==r||Vr!==s)&&(Js=null,qa=wt()+500,ta(r,s));do try{Wy();break}catch(L){Nf(r,L)}while(!0);ud(),jc.current=g,At=m,gr!==null?s=0:(Ir=null,Vr=0,s=kr)}if(s!==0){if(s===2&&(m=sn(r),m!==0&&(u=m,s=Yd(r,m))),s===1)throw l=Fl,ta(r,0),Ni(r,u),Nn(r,wt()),l;if(s===6)Ni(r,u);else{if(m=r.current.alternate,(u&30)===0&&!Yy(m)&&(s=Sc(r,u),s===2&&(g=sn(r),g!==0&&(u=g,s=Yd(r,g))),s===1))throw l=Fl,ta(r,0),Ni(r,u),Nn(r,wt()),l;switch(r.finishedWork=m,r.finishedLanes=u,s){case 0:case 1:throw Error(n(345));case 2:ra(r,kn,Js);break;case 3:if(Ni(r,u),(u&130023424)===u&&(s=Kd+500-wt(),10<s)){if(sr(r,0)!==0)break;if(m=r.suspendedLanes,(m&u)!==u){dn(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=Zu(ra.bind(null,r,kn,Js),s);break}ra(r,kn,Js);break;case 4:if(Ni(r,u),(u&4194240)===u)break;for(s=r.eventTimes,m=-1;0<u;){var N=31-vr(u);g=1<<N,N=s[N],N>m&&(m=N),u&=~g}if(u=m,u=wt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Gy(u/1960))-u,10<u){r.timeoutHandle=Zu(ra.bind(null,r,kn,Js),u);break}ra(r,kn,Js);break;case 5:ra(r,kn,Js);break;default:throw Error(n(329))}}}return Nn(r,wt()),r.callbackNode===l?jf.bind(null,r):null}function Yd(r,s){var l=$l;return r.current.memoizedState.isDehydrated&&(ta(r,s).flags|=256),r=Sc(r,s),r!==2&&(s=kn,kn=l,s!==null&&qd(s)),r}function qd(r){kn===null?kn=r:kn.push.apply(kn,r)}function Yy(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var m=l[u],g=m.getSnapshot;m=m.value;try{if(!os(g(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ni(r,s){for(s&=~Ud,s&=~kc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-vr(s),u=1<<l;r[l]=-1,s&=~u}}function kf(r){if((At&6)!==0)throw Error(n(327));Wa();var s=sr(r,0);if((s&1)===0)return Nn(r,wt()),null;var l=Sc(r,s);if(r.tag!==0&&l===2){var u=sn(r);u!==0&&(s=u,l=Yd(r,u))}if(l===1)throw l=Fl,ta(r,0),Ni(r,s),Nn(r,wt()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ra(r,kn,Js),Nn(r,wt()),null}function Wd(r,s){var l=At;At|=1;try{return r(s)}finally{At=l,At===0&&(qa=wt()+500,tc&&gi())}}function ea(r){ji!==null&&ji.tag===0&&(At&6)===0&&Wa();var s=At;At|=1;var l=qn.transition,u=kt;try{if(qn.transition=null,kt=1,r)return r()}finally{kt=u,qn.transition=l,At=s,(At&6)===0&&gi()}}function Qd(){Mn=Ya.current,Ut(Ya)}function ta(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,Ny(l)),gr!==null)for(l=gr.return;l!==null;){var u=l;switch(id(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Zo();break;case 3:Ka(),Ut(vn),Ut(Kr),yd();break;case 5:gd(u);break;case 4:Ka();break;case 13:Ut(Qt);break;case 19:Ut(Qt);break;case 10:dd(u.type._context);break;case 22:case 23:Qd()}l=l.return}if(Ir=r,gr=r=wi(r.current,null),Vr=Mn=s,kr=0,Fl=null,Ud=kc=Zi=0,kn=$l=null,Qi!==null){for(s=0;s<Qi.length;s++)if(l=Qi[s],u=l.interleaved,u!==null){l.interleaved=null;var m=u.next,g=l.pending;if(g!==null){var N=g.next;g.next=m,u.next=N}l.pending=u}Qi=null}return r}function Nf(r,s){do{var l=gr;try{if(ud(),dc.current=fc,hc){for(var u=Xt.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}hc=!1}if(Ji=0,Cr=jr=Xt=null,Rl=!1,zl=0,Bd.current=null,l===null||l.return===null){kr=1,Fl=s,gr=null;break}e:{var g=r,N=l.return,L=l,U=s;if(s=Vr,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var ce=U,Ie=L,Re=Ie.tag;if((Ie.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ce=Ie.alternate;Ce?(Ie.updateQueue=Ce.updateQueue,Ie.memoizedState=Ce.memoizedState,Ie.lanes=Ce.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var Ge=Yp(N);if(Ge!==null){Ge.flags&=-257,qp(Ge,N,L,g,s),Ge.mode&1&&Gp(g,ce,s),s=Ge,U=ce;var Qe=s.updateQueue;if(Qe===null){var Xe=new Set;Xe.add(U),s.updateQueue=Xe}else Qe.add(U);break e}else{if((s&1)===0){Gp(g,ce,s),Xd();break e}U=Error(n(426))}}else if(Yt&&L.mode&1){var dr=Yp(N);if(dr!==null){(dr.flags&65536)===0&&(dr.flags|=256),qp(dr,N,L,g,s),od(Ha(U,L));break e}}g=U=Ha(U,L),kr!==4&&(kr=2),$l===null?$l=[g]:$l.push(g),g=N;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var se=Kp(g,U,s);xp(g,se);break e;case 1:L=U;var W=g.type,le=g.stateNode;if((g.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(bi===null||!bi.has(le)))){g.flags|=65536,s&=-s,g.lanes|=s;var Me=Hp(g,L,s);xp(g,Me);break e}}g=g.return}while(g!==null)}Tf(l)}catch(et){s=et,gr===l&&l!==null&&(gr=l=l.return);continue}break}while(!0)}function wf(){var r=jc.current;return jc.current=fc,r===null?fc:r}function Xd(){(kr===0||kr===3||kr===2)&&(kr=4),Ir===null||(Zi&268435455)===0&&(kc&268435455)===0||Ni(Ir,Vr)}function Sc(r,s){var l=At;At|=2;var u=wf();(Ir!==r||Vr!==s)&&(Js=null,ta(r,s));do try{qy();break}catch(m){Nf(r,m)}while(!0);if(ud(),At=l,jc.current=u,gr!==null)throw Error(n(261));return Ir=null,Vr=0,kr}function qy(){for(;gr!==null;)_f(gr)}function Wy(){for(;gr!==null&&!$i();)_f(gr)}function _f(r){var s=Af(r.alternate,r,Mn);r.memoizedProps=r.pendingProps,s===null?Tf(r):gr=s,Bd.current=null}function Tf(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=$y(l,s,Mn),l!==null){gr=l;return}}else{if(l=By(l,s),l!==null){l.flags&=32767,gr=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{kr=6,gr=null;return}}if(s=s.sibling,s!==null){gr=s;return}gr=s=r}while(s!==null);kr===0&&(kr=5)}function ra(r,s,l){var u=kt,m=qn.transition;try{qn.transition=null,kt=1,Qy(r,s,l,u)}finally{qn.transition=m,kt=u}return null}function Qy(r,s,l,u){do Wa();while(ji!==null);if((At&6)!==0)throw Error(n(327));l=r.finishedWork;var m=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Rt(r,g),r===Ir&&(gr=Ir=null,Vr=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||wc||(wc=!0,Cf(Gt,function(){return Wa(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=qn.transition,qn.transition=null;var N=kt;kt=1;var L=At;At|=4,Bd.current=null,Ky(r,l),gf(l,r),gy(Xu),ir=!!Qu,Xu=Qu=null,r.current=l,Hy(l),zs(),At=L,kt=N,qn.transition=g}else r.current=l;if(wc&&(wc=!1,ji=r,_c=m),g=r.pendingLanes,g===0&&(bi=null),Vs(l.stateNode),Nn(r,wt()),s!==null)for(u=r.onRecoverableError,l=0;l<s.length;l++)m=s[l],u(m.value,{componentStack:m.stack,digest:m.digest});if(Nc)throw Nc=!1,r=Hd,Hd=null,r;return(_c&1)!==0&&r.tag!==0&&Wa(),g=r.pendingLanes,(g&1)!==0?r===Gd?Bl++:(Bl=0,Gd=r):Bl=0,gi(),null}function Wa(){if(ji!==null){var r=ys(_c),s=qn.transition,l=kt;try{if(qn.transition=null,kt=16>r?16:r,ji===null)var u=!1;else{if(r=ji,ji=null,_c=0,(At&6)!==0)throw Error(n(331));var m=At;for(At|=4,We=r.current;We!==null;){var g=We,N=g.child;if((We.flags&16)!==0){var L=g.deletions;if(L!==null){for(var U=0;U<L.length;U++){var ce=L[U];for(We=ce;We!==null;){var Ie=We;switch(Ie.tag){case 0:case 11:case 15:Ll(8,Ie,g)}var Re=Ie.child;if(Re!==null)Re.return=Ie,We=Re;else for(;We!==null;){Ie=We;var Ce=Ie.sibling,Ge=Ie.return;if(df(Ie),Ie===ce){We=null;break}if(Ce!==null){Ce.return=Ge,We=Ce;break}We=Ge}}}var Qe=g.alternate;if(Qe!==null){var Xe=Qe.child;if(Xe!==null){Qe.child=null;do{var dr=Xe.sibling;Xe.sibling=null,Xe=dr}while(Xe!==null)}}We=g}}if((g.subtreeFlags&2064)!==0&&N!==null)N.return=g,We=N;else e:for(;We!==null;){if(g=We,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ll(9,g,g.return)}var se=g.sibling;if(se!==null){se.return=g.return,We=se;break e}We=g.return}}var W=r.current;for(We=W;We!==null;){N=We;var le=N.child;if((N.subtreeFlags&2064)!==0&&le!==null)le.return=N,We=le;else e:for(N=W;We!==null;){if(L=We,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:bc(9,L)}}catch(et){ar(L,L.return,et)}if(L===N){We=null;break e}var Me=L.sibling;if(Me!==null){Me.return=L.return,We=Me;break e}We=L.return}}if(At=m,gi(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ms,r)}catch{}u=!0}return u}finally{kt=l,qn.transition=s}}return!1}function Ef(r,s,l){s=Ha(l,s),s=Kp(r,s,1),r=yi(r,s,1),s=dn(),r!==null&&(xs(r,1,s),Nn(r,s))}function ar(r,s,l){if(r.tag===3)Ef(r,r,l);else for(;s!==null;){if(s.tag===3){Ef(s,r,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(bi===null||!bi.has(u))){r=Ha(l,r),r=Hp(s,r,1),s=yi(s,r,1),r=dn(),s!==null&&(xs(s,1,r),Nn(s,r));break}}s=s.return}}function Xy(r,s,l){var u=r.pingCache;u!==null&&u.delete(s),s=dn(),r.pingedLanes|=r.suspendedLanes&l,Ir===r&&(Vr&l)===l&&(kr===4||kr===3&&(Vr&130023424)===Vr&&500>wt()-Kd?ta(r,0):Ud|=l),Nn(r,s)}function Sf(r,s){s===0&&((r.mode&1)===0?s=1:(s=$n,$n<<=1,($n&130023424)===0&&($n=4194304)));var l=dn();r=Ws(r,s),r!==null&&(xs(r,s,l),Nn(r,l))}function Jy(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Sf(r,l)}function Zy(r,s){var l=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(s),Sf(r,l)}var Af;Af=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||vn.current)jn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return jn=!1,Fy(r,s,l);jn=(r.flags&131072)!==0}else jn=!1,Yt&&(s.flags&1048576)!==0&&lp(s,nc,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;yc(r,s),r=s.pendingProps;var m=Va(s,Kr.current);Ua(s,l),m=jd(null,s,u,r,m,l);var g=kd();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,bn(u)?(g=!0,ec(s)):g=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,pd(s),m.updater=gc,s.stateNode=m,m._reactInternals=s,Sd(s,u,r,l),s=Pd(null,s,u,!0,g,l)):(s.tag=0,Yt&&g&&sd(s),un(null,s,m,l),s=s.child),s;case 16:u=s.elementType;e:{switch(yc(r,s),r=s.pendingProps,m=u._init,u=m(u._payload),s.type=u,m=s.tag=tv(u),r=us(u,r),m){case 0:s=Id(null,s,u,r,l);break e;case 1:s=ef(null,s,u,r,l);break e;case 11:s=Wp(null,s,u,r,l);break e;case 14:s=Qp(null,s,u,us(u.type,r),l);break e}throw Error(n(306,u,""))}return s;case 0:return u=s.type,m=s.pendingProps,m=s.elementType===u?m:us(u,m),Id(r,s,u,m,l);case 1:return u=s.type,m=s.pendingProps,m=s.elementType===u?m:us(u,m),ef(r,s,u,m,l);case 3:e:{if(tf(s),r===null)throw Error(n(387));u=s.pendingProps,g=s.memoizedState,m=g.element,gp(r,s),cc(s,u,null,l);var N=s.memoizedState;if(u=N.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){m=Ha(Error(n(423)),s),s=rf(r,s,u,l,m);break e}else if(u!==m){m=Ha(Error(n(424)),s),s=rf(r,s,u,l,m);break e}else for(zn=mi(s.stateNode.containerInfo.firstChild),Rn=s,Yt=!0,cs=null,l=pp(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Fa(),u===m){s=Xs(r,s,l);break e}un(r,s,u,l)}s=s.child}return s;case 5:return vp(s),r===null&&ld(s),u=s.type,m=s.pendingProps,g=r!==null?r.memoizedProps:null,N=m.children,Ju(u,m)?N=null:g!==null&&Ju(u,g)&&(s.flags|=32),Zp(r,s),un(r,s,N,l),s.child;case 6:return r===null&&ld(s),null;case 13:return nf(r,s,l);case 4:return fd(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=$a(s,null,u,l):un(r,s,u,l),s.child;case 11:return u=s.type,m=s.pendingProps,m=s.elementType===u?m:us(u,m),Wp(r,s,u,m,l);case 7:return un(r,s,s.pendingProps,l),s.child;case 8:return un(r,s,s.pendingProps.children,l),s.child;case 12:return un(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(u=s.type._context,m=s.pendingProps,g=s.memoizedProps,N=m.value,$t(ac,u._currentValue),u._currentValue=N,g!==null)if(os(g.value,N)){if(g.children===m.children&&!vn.current){s=Xs(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var L=g.dependencies;if(L!==null){N=g.child;for(var U=L.firstContext;U!==null;){if(U.context===u){if(g.tag===1){U=Qs(-1,l&-l),U.tag=2;var ce=g.updateQueue;if(ce!==null){ce=ce.shared;var Ie=ce.pending;Ie===null?U.next=U:(U.next=Ie.next,Ie.next=U),ce.pending=U}}g.lanes|=l,U=g.alternate,U!==null&&(U.lanes|=l),hd(g.return,l,s),L.lanes|=l;break}U=U.next}}else if(g.tag===10)N=g.type===s.type?null:g.child;else if(g.tag===18){if(N=g.return,N===null)throw Error(n(341));N.lanes|=l,L=N.alternate,L!==null&&(L.lanes|=l),hd(N,l,s),N=g.sibling}else N=g.child;if(N!==null)N.return=g;else for(N=g;N!==null;){if(N===s){N=null;break}if(g=N.sibling,g!==null){g.return=N.return,N=g;break}N=N.return}g=N}un(r,s,m.children,l),s=s.child}return s;case 9:return m=s.type,u=s.pendingProps.children,Ua(s,l),m=Gn(m),u=u(m),s.flags|=1,un(r,s,u,l),s.child;case 14:return u=s.type,m=us(u,s.pendingProps),m=us(u.type,m),Qp(r,s,u,m,l);case 15:return Xp(r,s,s.type,s.pendingProps,l);case 17:return u=s.type,m=s.pendingProps,m=s.elementType===u?m:us(u,m),yc(r,s),s.tag=1,bn(u)?(r=!0,ec(s)):r=!1,Ua(s,l),Bp(s,u,m),Sd(s,u,m,l),Pd(null,s,u,!0,r,l);case 19:return af(r,s,l);case 22:return Jp(r,s,l)}throw Error(n(156,s.tag))};function Cf(r,s){return In(r,s)}function ev(r,s,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,l,u){return new ev(r,s,l,u)}function Jd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function tv(r){if(typeof r=="function")return Jd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===_)return 11;if(r===Ve)return 14}return 2}function wi(r,s){var l=r.alternate;return l===null?(l=Wn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Ac(r,s,l,u,m,g){var N=2;if(u=r,typeof r=="function")Jd(r)&&(N=1);else if(typeof r=="string")N=5;else e:switch(r){case O:return na(l.children,m,g,s);case x:N=8,m|=8;break;case A:return r=Wn(12,l,s,m|2),r.elementType=A,r.lanes=g,r;case P:return r=Wn(13,l,s,m),r.elementType=P,r.lanes=g,r;case ge:return r=Wn(19,l,s,m),r.elementType=ge,r.lanes=g,r;case we:return Cc(l,m,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:N=10;break e;case E:N=9;break e;case _:N=11;break e;case Ve:N=14;break e;case Ne:N=16,u=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return s=Wn(N,l,s,m),s.elementType=r,s.type=u,s.lanes=g,s}function na(r,s,l,u){return r=Wn(7,r,u,s),r.lanes=l,r}function Cc(r,s,l,u){return r=Wn(22,r,u,s),r.elementType=we,r.lanes=l,r.stateNode={isHidden:!1},r}function Zd(r,s,l){return r=Wn(6,r,null,s),r.lanes=l,r}function eh(r,s,l){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function rv(r,s,l,u,m){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ns(0),this.expirationTimes=ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.identifierPrefix=u,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function th(r,s,l,u,m,g,N,L,U){return r=new rv(r,s,l,L,U),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Wn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(g),r}function nv(r,s,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:je,key:u==null?null:""+u,children:r,containerInfo:s,implementation:l}}function If(r){if(!r)return fi;r=r._reactInternals;e:{if(mr(r)!==r||r.tag!==1)throw Error(n(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(bn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(bn(l))return sp(r,l,s)}return s}function Pf(r,s,l,u,m,g,N,L,U){return r=th(l,u,!0,r,m,g,N,L,U),r.context=If(null),l=r.current,u=dn(),m=ki(l),g=Qs(u,m),g.callback=s??null,yi(l,g,m),r.current.lanes=m,xs(r,m,u),Nn(r,u),r}function Ic(r,s,l,u){var m=s.current,g=dn(),N=ki(m);return l=If(l),s.context===null?s.context=l:s.pendingContext=l,s=Qs(g,N),s.payload={element:r},u=u===void 0?null:u,u!==null&&(s.callback=u),r=yi(m,s,N),r!==null&&(ms(r,m,N,g),oc(r,m,N)),N}function Pc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Df(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function rh(r,s){Df(r,s),(r=r.alternate)&&Df(r,s)}function sv(){return null}var Rf=typeof reportError=="function"?reportError:function(r){console.error(r)};function nh(r){this._internalRoot=r}Dc.prototype.render=nh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));Ic(r,s,null,null)},Dc.prototype.unmount=nh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ea(function(){Ic(null,r,null,null)}),s[Hs]=null}};function Dc(r){this._internalRoot=r}Dc.prototype.unstable_scheduleHydration=function(r){if(r){var s=xn();r={blockedOn:null,target:r,priority:s};for(var l=0;l<G.length&&s!==0&&s<G[l].priority;l++);G.splice(l,0,r),l===0&&Fe(r)}};function sh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Rc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function zf(){}function iv(r,s,l,u,m){if(m){if(typeof u=="function"){var g=u;u=function(){var ce=Pc(N);g.call(ce)}}var N=Pf(s,u,r,0,null,!1,!1,"",zf);return r._reactRootContainer=N,r[Hs]=N.current,Tl(r.nodeType===8?r.parentNode:r),ea(),N}for(;m=r.lastChild;)r.removeChild(m);if(typeof u=="function"){var L=u;u=function(){var ce=Pc(U);L.call(ce)}}var U=th(r,0,!1,null,null,!1,!1,"",zf);return r._reactRootContainer=U,r[Hs]=U.current,Tl(r.nodeType===8?r.parentNode:r),ea(function(){Ic(s,U,l,u)}),U}function zc(r,s,l,u,m){var g=l._reactRootContainer;if(g){var N=g;if(typeof m=="function"){var L=m;m=function(){var U=Pc(N);L.call(U)}}Ic(s,N,r,m)}else N=iv(l,s,r,m,u);return Pc(N)}ba=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=nn(s.pendingLanes);l!==0&&(ss(s,l|1),Nn(s,wt()),(At&6)===0&&(qa=wt()+500,gi()))}break;case 13:ea(function(){var u=Ws(r,1);if(u!==null){var m=dn();ms(u,r,1,m)}}),rh(r,1)}},ui=function(r){if(r.tag===13){var s=Ws(r,134217728);if(s!==null){var l=dn();ms(s,r,134217728,l)}rh(r,134217728)}},Fs=function(r){if(r.tag===13){var s=ki(r),l=Ws(r,s);if(l!==null){var u=dn();ms(l,r,s,u)}rh(r,s)}},xn=function(){return kt},$s=function(r,s){var l=kt;try{return kt=r,s()}finally{kt=l}},Lt=function(r,s,l){switch(s){case"input":if(ie(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==r&&u.form===r.form){var m=Jo(u);if(!m)throw Error(n(90));_e(u),ie(u,m)}}}break;case"textarea":De(r,l);break;case"select":s=l.value,s!=null&&be(r,!!l.multiple,s,!1)}},gs=Wd,Rs=ea;var av={usingClientEntryPoint:!1,Events:[Al,za,Jo,On,li,Wd]},Ul={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lv={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ln(r),r===null?null:r.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||sv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Ms=Mc.inject(lv),rn=Mc}catch{}}return wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=av,wn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sh(s))throw Error(n(200));return nv(r,s,null,l)},wn.createRoot=function(r,s){if(!sh(r))throw Error(n(299));var l=!1,u="",m=Rf;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=th(r,1,!1,null,null,l,!1,u,m),r[Hs]=s.current,Tl(r.nodeType===8?r.parentNode:r),new nh(s)},wn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Ln(s),r=r===null?null:r.stateNode,r},wn.flushSync=function(r){return ea(r)},wn.hydrate=function(r,s,l){if(!Rc(s))throw Error(n(200));return zc(null,r,s,!0,l)},wn.hydrateRoot=function(r,s,l){if(!sh(r))throw Error(n(405));var u=l!=null&&l.hydratedSources||null,m=!1,g="",N=Rf;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),s=Pf(s,null,r,1,l??null,m,!1,g,N),r[Hs]=s.current,Tl(r),u)for(r=0;r<u.length;r++)l=u[r],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new Dc(s)},wn.render=function(r,s,l){if(!Rc(s))throw Error(n(200));return zc(null,r,s,!1,l)},wn.unmountComponentAtNode=function(r){if(!Rc(r))throw Error(n(40));return r._reactRootContainer?(ea(function(){zc(null,null,r,!1,function(){r._reactRootContainer=null,r[Hs]=null})}),!0):!1},wn.unstable_batchedUpdates=Wd,wn.unstable_renderSubtreeIntoContainer=function(r,s,l,u){if(!Rc(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return zc(r,s,l,!1,u)},wn.version="18.3.1-next-f1338f8080-20240426",wn}var Uf;function gv(){if(Uf)return lh.exports;Uf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lh.exports=fv(),lh.exports}var Kf;function xv(){if(Kf)return Vc;Kf=1;var i=gv();return Vc.createRoot=i.createRoot,Vc.hydrateRoot=i.hydrateRoot,Vc}var yv=xv();const vv=eg(yv),tg=B.createContext(null);async function rg(i){var e=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",e),a=Array.from(new Uint8Array(n));return a.map(function(o){return o.toString(16).padStart(2,"0")}).join("")}var bv=[{username:"master",passwordHash:null,plainForInit:"Master@ArGe2026!",role:"master",displayName:"Master Ynetici"},{username:"admin",passwordHash:null,plainForInit:"ArGe@Aof2026",role:"admin",displayName:"Ynetici"},{username:"editor",passwordHash:null,plainForInit:"ArGeEdit2026!",role:"editor",displayName:"Editr"},{username:"user",passwordHash:null,plainForInit:"AofView2026!",role:"viewer",displayName:"Grntleyici"}],Oc=null;async function jv(){return Oc||(Oc=Promise.all(bv.map(async function(i){return{username:i.username,passwordHash:await rg(i.plainForInit),plainForInit:i.plainForInit,role:i.role,displayName:i.displayName}})),Oc)}function kv({children:i}){var e=B.useState(null),n=e[0],a=e[1],o=B.useState(!0),d=o[0],h=o[1];B.useEffect(function(){var b=localStorage.getItem("arge_auth");if(b)try{var T=JSON.parse(b);if(T&&T.username&&T.role){if(!T.displayName||!T.displayName.includes("#")){var M=Math.floor(1e3+Math.random()*9e3);T.displayName=(T.baseDisplayName||T.displayName||T.username)+" #"+M,T.baseDisplayName=T.baseDisplayName||T.displayName,localStorage.setItem("arge_auth",JSON.stringify(T))}a(T)}}catch{localStorage.removeItem("arge_auth")}h(!1)},[]);var p=async function(b,T){try{var M=await jv(),V=await rg(T),X=M.find(function(z){return z.username===b&&z.passwordHash===V});if(!X)return{success:!1,error:"Kullanc ad veya ifre hatal"};var oe=Math.floor(1e3+Math.random()*9e3),F={username:X.username,role:X.role,displayName:X.displayName+" #"+oe,baseDisplayName:X.displayName};return a(F),localStorage.setItem("arge_auth",JSON.stringify(F)),{success:!0}}catch(z){return console.error("Login hatas:",z),{success:!1,error:"Giri hatas: "+(z.message||"Bilinmeyen hata")}}},v=function(){a(null),localStorage.removeItem("arge_auth")};return t.jsx(tg.Provider,{value:{user:n,login:p,logout:v,loading:d},children:i})}function ng(){var i=B.useContext(tg);if(!i)throw new Error("useAuth must be used within AuthProvider");return i}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sg=(...i)=>i.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=B.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:d,iconNode:h,...p},v)=>B.createElement("svg",{ref:v,...wv,width:e,height:e,stroke:i,strokeWidth:a?Number(n)*24/Number(e):n,className:sg("lucide",o),...p},[...h.map(([b,T])=>B.createElement(b,T)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(i,e)=>{const n=B.forwardRef(({className:a,...o},d)=>B.createElement(_v,{ref:d,iconNode:e,className:sg(`lucide-${Nv(i)}`,a),...o}));return n.displayName=`${i}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Je("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Je("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Je("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=Je("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Je("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=Je("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Je("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Je("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=Je("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Je("DatabaseBackup",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 12a9 3 0 0 0 5 2.69",key:"1ui2ym"}],["path",{d:"M21 9.3V5",key:"6k6cib"}],["path",{d:"M3 5v14a9 3 0 0 0 6.47 2.88",key:"i62tjy"}],["path",{d:"M12 12v4h4",key:"1bxaet"}],["path",{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16",key:"1f4ei9"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Je("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Je("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Je("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=Je("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=Je("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=Je("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Je("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Je("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Je("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Je("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Je("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Je("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=Je("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=Je("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=Je("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=Je("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Je("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Je("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function $v(){const{login:i}=ng(),[e,n]=B.useState(""),[a,o]=B.useState(""),[d,h]=B.useState(!1),[p,v]=B.useState(""),[b,T]=B.useState(!1),M=async V=>{if(V.preventDefault(),!e.trim()||!a.trim()){v("Kullanc ad ve ifre gereklidir");return}T(!0),v("");try{const X=await i(e.trim(),a);X.success||v(X.error)}catch(X){console.error("Login hatas:",X),v("Giri srasnda bir hata olutu: "+(X.message||"Bilinmeyen hata"))}finally{T(!1)}};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-indigo-200",children:t.jsx(co,{size:32,className:"text-white"})}),t.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Anadolu niversitesi"}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Akretim Fakltesi  Ar-Ge Dashboard"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100 p-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-6 text-center",children:"Giri Yap"}),t.jsxs("form",{onSubmit:M,className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5",children:"Kullanc Ad"}),t.jsx("input",{type:"text",value:e,onChange:V=>n(V.target.value),placeholder:"Kullanc adnz girin",className:"w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl bg-slate-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 transition-all",autoFocus:!0,autoComplete:"username"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5",children:"ifre"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:d?"text":"password",value:a,onChange:V=>o(V.target.value),placeholder:"ifrenizi girin",className:"w-full px-4 py-2.5 pr-10 text-sm border border-slate-200 rounded-xl bg-slate-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 transition-all",autoComplete:"current-password"}),t.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:d?t.jsx(Sv,{size:16}):t.jsx(cg,{size:16})})]})]}),p&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-100 rounded-lg text-sm text-red-600",children:[t.jsx(lg,{size:14}),p]}),t.jsx("button",{type:"submit",disabled:b,className:"w-full py-2.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-700 transition-all shadow-lg shadow-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b?t.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Dv,{size:16}),"Giri Yap"]})})]})]}),t.jsx("p",{className:"text-center text-[11px] text-slate-400 mt-6",children:" SE, 2026  Bu uygulama birim ii bilgi amaldr."})]})})}const Bv=()=>{};var Yf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=function(i){const e=[];let n=0;for(let a=0;a<i.length;a++){let o=i.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Uv=function(i){const e=[];let n=0,a=0;for(;n<i.length;){const o=i[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const d=i[n++];e[a++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=i[n++],h=i[n++],p=i[n++],v=((o&7)<<18|(d&63)<<12|(h&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const d=i[n++],h=i[n++];e[a++]=String.fromCharCode((o&15)<<12|(d&63)<<6|h&63)}}return e.join("")},pg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<i.length;o+=3){const d=i[o],h=o+1<i.length,p=h?i[o+1]:0,v=o+2<i.length,b=v?i[o+2]:0,T=d>>2,M=(d&3)<<4|p>>4;let V=(p&15)<<2|b>>6,X=b&63;v||(X=64,h||(V=64)),a.push(n[T],n[M],n[V],n[X])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(mg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Uv(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<i.length;){const d=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const M=o<i.length?n[i.charAt(o)]:64;if(++o,d==null||p==null||b==null||M==null)throw new Kv;const V=d<<2|p>>4;if(a.push(V),b!==64){const X=p<<4&240|b>>2;if(a.push(X),M!==64){const oe=b<<6&192|M;a.push(oe)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Kv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hv=function(i){const e=mg(i);return pg.encodeByteArray(e,!0)},fg=function(i){return Hv(i).replace(/\./g,"")},Gv=function(i){try{return pg.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=()=>Yv().__FIREBASE_DEFAULTS__,Wv=()=>{if(typeof process>"u"||typeof Yf>"u")return;const i=Yf.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Qv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Gv(i[1]);return e&&JSON.parse(e)},gg=()=>{try{return Bv()||qv()||Wv()||Qv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Xv=()=>{var i;return(i=gg())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tb(){var i;const e=(i=gg())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rb(){return!tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function sb(){return new Promise((i,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var d;e(((d=o.error)===null||d===void 0?void 0:d.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="FirebaseError";class ul extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=ib,Object.setPrototypeOf(this,ul.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yg.prototype.create)}}class yg{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,d=this.errors[e],h=d?ab(d,a):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new ul(o,p,a)}}function ab(i,e){return i.replace(lb,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const lb=/\{\$([^}]+)}/g;function lu(i,e){if(i===e)return!0;const n=Object.keys(i),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const d=i[o],h=e[o];if(qf(d)&&qf(h)){if(!lu(d,h))return!1}else if(d!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function qf(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(i){return i&&i._delegate?i._delegate:i}class jo{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Jv;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(d){if(o)return null;throw d}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ub(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:o});a.resolve(d)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[d,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);a===p&&h.resolve(o)}return o}onInit(e,n){var a;const o=this.normalizeInstanceIdentifier(n),d=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;d.add(e),this.onInitCallbacks.set(o,d);const h=this.instances.get(o);return h&&e(h,o),()=>{d.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:cb(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cb(i){return i===aa?void 0:i}function ub(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ob(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(St||(St={}));const hb={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},mb=St.INFO,pb={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},fb=(i,e,...n)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),o=pb[e];if(o)console[o](`[${a}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=mb,this._logHandler=fb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const gb=(i,e)=>e.some(n=>i instanceof n);let Wf,Qf;function xb(){return Wf||(Wf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yb(){return Qf||(Qf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bg=new WeakMap,_h=new WeakMap,jg=new WeakMap,uh=new WeakMap,Zh=new WeakMap;function vb(i){const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("success",d),i.removeEventListener("error",h)},d=()=>{n(Ai(i.result)),o()},h=()=>{a(i.error),o()};i.addEventListener("success",d),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&bg.set(n,i)}).catch(()=>{}),Zh.set(e,i),e}function bb(i){if(_h.has(i))return;const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",h),i.removeEventListener("abort",h)},d=()=>{n(),o()},h=()=>{a(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",d),i.addEventListener("error",h),i.addEventListener("abort",h)});_h.set(i,e)}let Th={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return _h.get(i);if(e==="objectStoreNames")return i.objectStoreNames||jg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function jb(i){Th=i(Th)}function kb(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=i.call(dh(this),e,...n);return jg.set(a,e.sort?e.sort():[e]),Ai(a)}:yb().includes(i)?function(...e){return i.apply(dh(this),e),Ai(bg.get(this))}:function(...e){return Ai(i.apply(dh(this),e))}}function Nb(i){return typeof i=="function"?kb(i):(i instanceof IDBTransaction&&bb(i),gb(i,xb())?new Proxy(i,Th):i)}function Ai(i){if(i instanceof IDBRequest)return vb(i);if(uh.has(i))return uh.get(i);const e=Nb(i);return e!==i&&(uh.set(i,e),Zh.set(e,i)),e}const dh=i=>Zh.get(i);function wb(i,e,{blocked:n,upgrade:a,blocking:o,terminated:d}={}){const h=indexedDB.open(i,e),p=Ai(h);return a&&h.addEventListener("upgradeneeded",v=>{a(Ai(h.result),v.oldVersion,v.newVersion,Ai(h.transaction),v)}),n&&h.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),p.then(v=>{d&&v.addEventListener("close",()=>d()),o&&v.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),p}const _b=["get","getKey","getAll","getAllKeys","count"],Tb=["put","add","delete","clear"],hh=new Map;function Xf(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(hh.get(e))return hh.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=Tb.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||_b.includes(n)))return;const d=async function(h,...p){const v=this.transaction(h,o?"readwrite":"readonly");let b=v.store;return a&&(b=b.index(p.shift())),(await Promise.all([b[n](...p),o&&v.done]))[0]};return hh.set(e,d),d}jb(i=>({...i,get:(e,n,a)=>Xf(e,n)||i.get(e,n,a),has:(e,n)=>!!Xf(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sb(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function Sb(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eh="@firebase/app",Jf="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new vg("@firebase/app"),Ab="@firebase/app-compat",Cb="@firebase/analytics-compat",Ib="@firebase/analytics",Pb="@firebase/app-check-compat",Db="@firebase/app-check",Rb="@firebase/auth",zb="@firebase/auth-compat",Mb="@firebase/database",Vb="@firebase/data-connect",Ob="@firebase/database-compat",Lb="@firebase/functions",Fb="@firebase/functions-compat",$b="@firebase/installations",Bb="@firebase/installations-compat",Ub="@firebase/messaging",Kb="@firebase/messaging-compat",Hb="@firebase/performance",Gb="@firebase/performance-compat",Yb="@firebase/remote-config",qb="@firebase/remote-config-compat",Wb="@firebase/storage",Qb="@firebase/storage-compat",Xb="@firebase/firestore",Jb="@firebase/ai",Zb="@firebase/firestore-compat",e1="firebase",t1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="[DEFAULT]",n1={[Eh]:"fire-core",[Ab]:"fire-core-compat",[Ib]:"fire-analytics",[Cb]:"fire-analytics-compat",[Db]:"fire-app-check",[Pb]:"fire-app-check-compat",[Rb]:"fire-auth",[zb]:"fire-auth-compat",[Mb]:"fire-rtdb",[Vb]:"fire-data-connect",[Ob]:"fire-rtdb-compat",[Lb]:"fire-fn",[Fb]:"fire-fn-compat",[$b]:"fire-iid",[Bb]:"fire-iid-compat",[Ub]:"fire-fcm",[Kb]:"fire-fcm-compat",[Hb]:"fire-perf",[Gb]:"fire-perf-compat",[Yb]:"fire-rc",[qb]:"fire-rc-compat",[Wb]:"fire-gcs",[Qb]:"fire-gcs-compat",[Xb]:"fire-fst",[Zb]:"fire-fst-compat",[Jb]:"fire-vertex","fire-js":"fire-js",[e1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,s1=new Map,Ah=new Map;function Zf(i,e){try{i.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ou(i){const e=i.name;if(Ah.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;Ah.set(e,i);for(const n of Sh.values())Zf(n,i);for(const n of s1.values())Zf(n,i);return!0}function i1(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function a1(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ca=new yg("app","Firebase",l1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=t1;function u1(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const a=Object.assign({name:r1,automaticDataCollectionEnabled:!0},e),o=a.name;if(typeof o!="string"||!o)throw ca.create("bad-app-name",{appName:String(o)});if(n||(n=Xv()),!n)throw ca.create("no-options");const d=Sh.get(o);if(d){if(lu(n,d.options)&&lu(a,d.config))return d;throw ca.create("duplicate-app",{appName:o})}const h=new db(o);for(const v of Ah.values())h.addComponent(v);const p=new o1(n,a,h);return Sh.set(o,p),p}function el(i,e,n){var a;let o=(a=n1[i])!==null&&a!==void 0?a:i;n&&(o+=`-${n}`);const d=o.match(/\s|\//),h=e.match(/\s|\//);if(d||h){const p=[`Unable to register library "${o}" with version "${e}":`];d&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),d&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(p.join(" "));return}ou(new jo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="firebase-heartbeat-database",h1=1,ko="firebase-heartbeat-store";let mh=null;function kg(){return mh||(mh=wb(d1,h1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ko)}catch(n){console.warn(n)}}}}).catch(i=>{throw ca.create("idb-open",{originalErrorMessage:i.message})})),mh}async function m1(i){try{const n=(await kg()).transaction(ko),a=await n.objectStore(ko).get(Ng(i));return await n.done,a}catch(e){if(e instanceof ul)si.warn(e.message);else{const n=ca.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});si.warn(n.message)}}}async function e0(i,e){try{const a=(await kg()).transaction(ko,"readwrite");await a.objectStore(ko).put(e,Ng(i)),await a.done}catch(n){if(n instanceof ul)si.warn(n.message);else{const a=ca.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});si.warn(a.message)}}}function Ng(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=1024,f1=30;class g1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y1(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=t0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(h=>h.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:o}),this._heartbeatsCache.heartbeats.length>f1){const h=v1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){si.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t0(),{heartbeatsToSend:a,unsentEntries:o}=x1(this._heartbeatsCache.heartbeats),d=fg(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(n){return si.warn(n),""}}}function t0(){return new Date().toISOString().substring(0,10)}function x1(i,e=p1){const n=[];let a=i.slice();for(const o of i){const d=n.find(h=>h.agent===o.agent);if(d){if(d.dates.push(o.date),r0(n)>e){d.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),r0(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class y1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?sb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function r0(i){return fg(JSON.stringify({version:2,heartbeats:i})).length}function v1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let a=1;a<i.length;a++)i[a].date<n&&(n=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(i){ou(new jo("platform-logger",e=>new Eb(e),"PRIVATE")),ou(new jo("heartbeat",e=>new g1(e),"PRIVATE")),el(Eh,Jf,i),el(Eh,Jf,"esm2017"),el("fire-js","")}b1("");var j1="firebase",k1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */el(j1,k1,"app");var n0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,wg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,x){function A(){}A.prototype=x.prototype,O.D=x.prototype,O.prototype=new A,O.prototype.constructor=O,O.C=function(k,E,_){for(var P=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)P[ge-2]=arguments[ge];return x.prototype[E].apply(k,P)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,x,A){A||(A=0);var k=Array(16);if(typeof x=="string")for(var E=0;16>E;++E)k[E]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(E=0;16>E;++E)k[E]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=O.g[0],A=O.g[1],E=O.g[2];var _=O.g[3],P=x+(_^A&(E^_))+k[0]+3614090360&4294967295;x=A+(P<<7&4294967295|P>>>25),P=_+(E^x&(A^E))+k[1]+3905402710&4294967295,_=x+(P<<12&4294967295|P>>>20),P=E+(A^_&(x^A))+k[2]+606105819&4294967295,E=_+(P<<17&4294967295|P>>>15),P=A+(x^E&(_^x))+k[3]+3250441966&4294967295,A=E+(P<<22&4294967295|P>>>10),P=x+(_^A&(E^_))+k[4]+4118548399&4294967295,x=A+(P<<7&4294967295|P>>>25),P=_+(E^x&(A^E))+k[5]+1200080426&4294967295,_=x+(P<<12&4294967295|P>>>20),P=E+(A^_&(x^A))+k[6]+2821735955&4294967295,E=_+(P<<17&4294967295|P>>>15),P=A+(x^E&(_^x))+k[7]+4249261313&4294967295,A=E+(P<<22&4294967295|P>>>10),P=x+(_^A&(E^_))+k[8]+1770035416&4294967295,x=A+(P<<7&4294967295|P>>>25),P=_+(E^x&(A^E))+k[9]+2336552879&4294967295,_=x+(P<<12&4294967295|P>>>20),P=E+(A^_&(x^A))+k[10]+4294925233&4294967295,E=_+(P<<17&4294967295|P>>>15),P=A+(x^E&(_^x))+k[11]+2304563134&4294967295,A=E+(P<<22&4294967295|P>>>10),P=x+(_^A&(E^_))+k[12]+1804603682&4294967295,x=A+(P<<7&4294967295|P>>>25),P=_+(E^x&(A^E))+k[13]+4254626195&4294967295,_=x+(P<<12&4294967295|P>>>20),P=E+(A^_&(x^A))+k[14]+2792965006&4294967295,E=_+(P<<17&4294967295|P>>>15),P=A+(x^E&(_^x))+k[15]+1236535329&4294967295,A=E+(P<<22&4294967295|P>>>10),P=x+(E^_&(A^E))+k[1]+4129170786&4294967295,x=A+(P<<5&4294967295|P>>>27),P=_+(A^E&(x^A))+k[6]+3225465664&4294967295,_=x+(P<<9&4294967295|P>>>23),P=E+(x^A&(_^x))+k[11]+643717713&4294967295,E=_+(P<<14&4294967295|P>>>18),P=A+(_^x&(E^_))+k[0]+3921069994&4294967295,A=E+(P<<20&4294967295|P>>>12),P=x+(E^_&(A^E))+k[5]+3593408605&4294967295,x=A+(P<<5&4294967295|P>>>27),P=_+(A^E&(x^A))+k[10]+38016083&4294967295,_=x+(P<<9&4294967295|P>>>23),P=E+(x^A&(_^x))+k[15]+3634488961&4294967295,E=_+(P<<14&4294967295|P>>>18),P=A+(_^x&(E^_))+k[4]+3889429448&4294967295,A=E+(P<<20&4294967295|P>>>12),P=x+(E^_&(A^E))+k[9]+568446438&4294967295,x=A+(P<<5&4294967295|P>>>27),P=_+(A^E&(x^A))+k[14]+3275163606&4294967295,_=x+(P<<9&4294967295|P>>>23),P=E+(x^A&(_^x))+k[3]+4107603335&4294967295,E=_+(P<<14&4294967295|P>>>18),P=A+(_^x&(E^_))+k[8]+1163531501&4294967295,A=E+(P<<20&4294967295|P>>>12),P=x+(E^_&(A^E))+k[13]+2850285829&4294967295,x=A+(P<<5&4294967295|P>>>27),P=_+(A^E&(x^A))+k[2]+4243563512&4294967295,_=x+(P<<9&4294967295|P>>>23),P=E+(x^A&(_^x))+k[7]+1735328473&4294967295,E=_+(P<<14&4294967295|P>>>18),P=A+(_^x&(E^_))+k[12]+2368359562&4294967295,A=E+(P<<20&4294967295|P>>>12),P=x+(A^E^_)+k[5]+4294588738&4294967295,x=A+(P<<4&4294967295|P>>>28),P=_+(x^A^E)+k[8]+2272392833&4294967295,_=x+(P<<11&4294967295|P>>>21),P=E+(_^x^A)+k[11]+1839030562&4294967295,E=_+(P<<16&4294967295|P>>>16),P=A+(E^_^x)+k[14]+4259657740&4294967295,A=E+(P<<23&4294967295|P>>>9),P=x+(A^E^_)+k[1]+2763975236&4294967295,x=A+(P<<4&4294967295|P>>>28),P=_+(x^A^E)+k[4]+1272893353&4294967295,_=x+(P<<11&4294967295|P>>>21),P=E+(_^x^A)+k[7]+4139469664&4294967295,E=_+(P<<16&4294967295|P>>>16),P=A+(E^_^x)+k[10]+3200236656&4294967295,A=E+(P<<23&4294967295|P>>>9),P=x+(A^E^_)+k[13]+681279174&4294967295,x=A+(P<<4&4294967295|P>>>28),P=_+(x^A^E)+k[0]+3936430074&4294967295,_=x+(P<<11&4294967295|P>>>21),P=E+(_^x^A)+k[3]+3572445317&4294967295,E=_+(P<<16&4294967295|P>>>16),P=A+(E^_^x)+k[6]+76029189&4294967295,A=E+(P<<23&4294967295|P>>>9),P=x+(A^E^_)+k[9]+3654602809&4294967295,x=A+(P<<4&4294967295|P>>>28),P=_+(x^A^E)+k[12]+3873151461&4294967295,_=x+(P<<11&4294967295|P>>>21),P=E+(_^x^A)+k[15]+530742520&4294967295,E=_+(P<<16&4294967295|P>>>16),P=A+(E^_^x)+k[2]+3299628645&4294967295,A=E+(P<<23&4294967295|P>>>9),P=x+(E^(A|~_))+k[0]+4096336452&4294967295,x=A+(P<<6&4294967295|P>>>26),P=_+(A^(x|~E))+k[7]+1126891415&4294967295,_=x+(P<<10&4294967295|P>>>22),P=E+(x^(_|~A))+k[14]+2878612391&4294967295,E=_+(P<<15&4294967295|P>>>17),P=A+(_^(E|~x))+k[5]+4237533241&4294967295,A=E+(P<<21&4294967295|P>>>11),P=x+(E^(A|~_))+k[12]+1700485571&4294967295,x=A+(P<<6&4294967295|P>>>26),P=_+(A^(x|~E))+k[3]+2399980690&4294967295,_=x+(P<<10&4294967295|P>>>22),P=E+(x^(_|~A))+k[10]+4293915773&4294967295,E=_+(P<<15&4294967295|P>>>17),P=A+(_^(E|~x))+k[1]+2240044497&4294967295,A=E+(P<<21&4294967295|P>>>11),P=x+(E^(A|~_))+k[8]+1873313359&4294967295,x=A+(P<<6&4294967295|P>>>26),P=_+(A^(x|~E))+k[15]+4264355552&4294967295,_=x+(P<<10&4294967295|P>>>22),P=E+(x^(_|~A))+k[6]+2734768916&4294967295,E=_+(P<<15&4294967295|P>>>17),P=A+(_^(E|~x))+k[13]+1309151649&4294967295,A=E+(P<<21&4294967295|P>>>11),P=x+(E^(A|~_))+k[4]+4149444226&4294967295,x=A+(P<<6&4294967295|P>>>26),P=_+(A^(x|~E))+k[11]+3174756917&4294967295,_=x+(P<<10&4294967295|P>>>22),P=E+(x^(_|~A))+k[2]+718787259&4294967295,E=_+(P<<15&4294967295|P>>>17),P=A+(_^(E|~x))+k[9]+3951481745&4294967295,O.g[0]=O.g[0]+x&4294967295,O.g[1]=O.g[1]+(E+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+E&4294967295,O.g[3]=O.g[3]+_&4294967295}a.prototype.u=function(O,x){x===void 0&&(x=O.length);for(var A=x-this.blockSize,k=this.B,E=this.h,_=0;_<x;){if(E==0)for(;_<=A;)o(this,O,_),_+=this.blockSize;if(typeof O=="string"){for(;_<x;)if(k[E++]=O.charCodeAt(_++),E==this.blockSize){o(this,k),E=0;break}}else for(;_<x;)if(k[E++]=O[_++],E==this.blockSize){o(this,k),E=0;break}}this.h=E,this.o+=x},a.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var x=1;x<O.length-8;++x)O[x]=0;var A=8*this.o;for(x=O.length-8;x<O.length;++x)O[x]=A&255,A/=256;for(this.u(O),O=Array(16),x=A=0;4>x;++x)for(var k=0;32>k;k+=8)O[A++]=this.g[x]>>>k&255;return O};function d(O,x){var A=p;return Object.prototype.hasOwnProperty.call(A,O)?A[O]:A[O]=x(O)}function h(O,x){this.h=x;for(var A=[],k=!0,E=O.length-1;0<=E;E--){var _=O[E]|0;k&&_==x||(A[E]=_,k=!1)}this.g=A}var p={};function v(O){return-128<=O&&128>O?d(O,function(x){return new h([x|0],0>x?-1:0)}):new h([O|0],0>O?-1:0)}function b(O){if(isNaN(O)||!isFinite(O))return M;if(0>O)return z(b(-O));for(var x=[],A=1,k=0;O>=A;k++)x[k]=O/A|0,A*=4294967296;return new h(x,0)}function T(O,x){if(O.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(O.charAt(0)=="-")return z(T(O.substring(1),x));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=b(Math.pow(x,8)),k=M,E=0;E<O.length;E+=8){var _=Math.min(8,O.length-E),P=parseInt(O.substring(E,E+_),x);8>_?(_=b(Math.pow(x,_)),k=k.j(_).add(b(P))):(k=k.j(A),k=k.add(b(P)))}return k}var M=v(0),V=v(1),X=v(16777216);i=h.prototype,i.m=function(){if(F(this))return-z(this).m();for(var O=0,x=1,A=0;A<this.g.length;A++){var k=this.i(A);O+=(0<=k?k:4294967296+k)*x,x*=4294967296}return O},i.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(oe(this))return"0";if(F(this))return"-"+z(this).toString(O);for(var x=b(Math.pow(O,6)),A=this,k="";;){var E=Q(A,x).g;A=ne(A,E.j(x));var _=((0<A.g.length?A.g[0]:A.h)>>>0).toString(O);if(A=E,oe(A))return _+k;for(;6>_.length;)_="0"+_;k=_+k}},i.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function oe(O){if(O.h!=0)return!1;for(var x=0;x<O.g.length;x++)if(O.g[x]!=0)return!1;return!0}function F(O){return O.h==-1}i.l=function(O){return O=ne(this,O),F(O)?-1:oe(O)?0:1};function z(O){for(var x=O.g.length,A=[],k=0;k<x;k++)A[k]=~O.g[k];return new h(A,~O.h).add(V)}i.abs=function(){return F(this)?z(this):this},i.add=function(O){for(var x=Math.max(this.g.length,O.g.length),A=[],k=0,E=0;E<=x;E++){var _=k+(this.i(E)&65535)+(O.i(E)&65535),P=(_>>>16)+(this.i(E)>>>16)+(O.i(E)>>>16);k=P>>>16,_&=65535,P&=65535,A[E]=P<<16|_}return new h(A,A[A.length-1]&-2147483648?-1:0)};function ne(O,x){return O.add(z(x))}i.j=function(O){if(oe(this)||oe(O))return M;if(F(this))return F(O)?z(this).j(z(O)):z(z(this).j(O));if(F(O))return z(this.j(z(O)));if(0>this.l(X)&&0>O.l(X))return b(this.m()*O.m());for(var x=this.g.length+O.g.length,A=[],k=0;k<2*x;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var E=0;E<O.g.length;E++){var _=this.i(k)>>>16,P=this.i(k)&65535,ge=O.i(E)>>>16,Ve=O.i(E)&65535;A[2*k+2*E]+=P*Ve,Z(A,2*k+2*E),A[2*k+2*E+1]+=_*Ve,Z(A,2*k+2*E+1),A[2*k+2*E+1]+=P*ge,Z(A,2*k+2*E+1),A[2*k+2*E+2]+=_*ge,Z(A,2*k+2*E+2)}for(k=0;k<x;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=x;k<2*x;k++)A[k]=0;return new h(A,0)};function Z(O,x){for(;(O[x]&65535)!=O[x];)O[x+1]+=O[x]>>>16,O[x]&=65535,x++}function ee(O,x){this.g=O,this.h=x}function Q(O,x){if(oe(x))throw Error("division by zero");if(oe(O))return new ee(M,M);if(F(O))return x=Q(z(O),x),new ee(z(x.g),z(x.h));if(F(x))return x=Q(O,z(x)),new ee(z(x.g),x.h);if(30<O.g.length){if(F(O)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var A=V,k=x;0>=k.l(O);)A=ye(A),k=ye(k);var E=je(A,1),_=je(k,1);for(k=je(k,2),A=je(A,2);!oe(k);){var P=_.add(k);0>=P.l(O)&&(E=E.add(A),_=P),k=je(k,1),A=je(A,1)}return x=ne(O,E.j(x)),new ee(E,x)}for(E=M;0<=O.l(x);){for(A=Math.max(1,Math.floor(O.m()/x.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),_=b(A),P=_.j(x);F(P)||0<P.l(O);)A-=k,_=b(A),P=_.j(x);oe(_)&&(_=V),E=E.add(_),O=ne(O,P)}return new ee(E,O)}i.A=function(O){return Q(this,O).h},i.and=function(O){for(var x=Math.max(this.g.length,O.g.length),A=[],k=0;k<x;k++)A[k]=this.i(k)&O.i(k);return new h(A,this.h&O.h)},i.or=function(O){for(var x=Math.max(this.g.length,O.g.length),A=[],k=0;k<x;k++)A[k]=this.i(k)|O.i(k);return new h(A,this.h|O.h)},i.xor=function(O){for(var x=Math.max(this.g.length,O.g.length),A=[],k=0;k<x;k++)A[k]=this.i(k)^O.i(k);return new h(A,this.h^O.h)};function ye(O){for(var x=O.g.length+1,A=[],k=0;k<x;k++)A[k]=O.i(k)<<1|O.i(k-1)>>>31;return new h(A,O.h)}function je(O,x){var A=x>>5;x%=32;for(var k=O.g.length-A,E=[],_=0;_<k;_++)E[_]=0<x?O.i(_+A)>>>x|O.i(_+A+1)<<32-x:O.i(_+A);return new h(E,O.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,wg=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=b,h.fromString=T,Ci=h}).apply(typeof n0<"u"?n0:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _g,Xl,Tg,Wc,Ch,Eg,Sg,Ag;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,y){return c==Array.prototype||c==Object.prototype||(c[f]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var f=0;f<c.length;++f){var y=c[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var a=n(this);function o(c,f){if(f)e:{var y=a;c=c.split(".");for(var I=0;I<c.length-1;I++){var te=c[I];if(!(te in y))break e;y=y[te]}c=c[c.length-1],I=y[c],f=f(I),f!=I&&f!=null&&e(y,c,{configurable:!0,writable:!0,value:f})}}function d(c,f){c instanceof String&&(c+="");var y=0,I=!1,te={next:function(){if(!I&&y<c.length){var he=y++;return{value:f(he,c[he]),done:!1}}return I=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}o("Array.prototype.values",function(c){return c||function(){return d(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function v(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function b(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function T(c,f,y){return c.call.apply(c.bind,arguments)}function M(c,f,y){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,I),c.apply(f,te)}}return function(){return c.apply(f,arguments)}}function V(c,f,y){return V=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:M,V.apply(null,arguments)}function X(c,f){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function oe(c,f){function y(){}y.prototype=f.prototype,c.aa=f.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(I,te,he){for(var Oe=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)Oe[zt-2]=arguments[zt];return f.prototype[te].apply(I,Oe)}}function F(c){const f=c.length;if(0<f){const y=Array(f);for(let I=0;I<f;I++)y[I]=c[I];return y}return[]}function z(c,f){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(v(I)){const te=c.length||0,he=I.length||0;c.length=te+he;for(let Oe=0;Oe<he;Oe++)c[te+Oe]=I[Oe]}else c.push(I)}}class ne{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Z(c){return/^[\s\xa0]*$/.test(c)}function ee(){var c=p.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var ye=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function je(c,f,y){for(const I in c)f.call(y,c[I],I,c)}function O(c,f){for(const y in c)f.call(void 0,c[y],y,c)}function x(c){const f={};for(const y in c)f[y]=c[y];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,f){let y,I;for(let te=1;te<arguments.length;te++){I=arguments[te];for(y in I)c[y]=I[y];for(let he=0;he<A.length;he++)y=A[he],Object.prototype.hasOwnProperty.call(I,y)&&(c[y]=I[y])}}function E(c){var f=1;c=c.split(":");const y=[];for(;0<f&&c.length;)y.push(c.shift()),f--;return c.length&&y.push(c.join(":")),y}function _(c){p.setTimeout(()=>{throw c},0)}function P(){var c=Y;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class ge{constructor(){this.h=this.g=null}add(f,y){const I=Ve.get();I.set(f,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Ve=new ne(()=>new Ne,c=>c.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let we,H=!1,Y=new ge,ue=()=>{const c=p.Promise.resolve(void 0);we=()=>{c.then(w)}};var w=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(y){_(y)}var f=Ve;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}H=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};p.addEventListener("test",y,f),p.removeEventListener("test",y,f)}catch{}return c})();function j(c,f){if(K.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(ye){e:{try{Q(f.nodeName);var te=!0;break e}catch{}te=!1}te||(f=null)}}else y=="mouseover"?f=c.fromElement:y=="mouseout"&&(f=c.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:S[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&j.aa.h.call(this)}}oe(j,K);var S={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),J=0;function xe(c,f,y,I,te){this.listener=c,this.proxy=null,this.src=f,this.type=y,this.capture=!!I,this.ha=te,this.key=++J,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function re(c){this.src=c,this.g={},this.h=0}re.prototype.add=function(c,f,y,I,te){var he=c.toString();c=this.g[he],c||(c=this.g[he]=[],this.h++);var Oe=ve(c,f,I,te);return-1<Oe?(f=c[Oe],y||(f.fa=!1)):(f=new xe(f,this.src,he,!!I,te),f.fa=y,c.push(f)),f};function _e(c,f){var y=f.type;if(y in c.g){var I=c.g[y],te=Array.prototype.indexOf.call(I,f,void 0),he;(he=0<=te)&&Array.prototype.splice.call(I,te,1),he&&(me(f),c.g[y].length==0&&(delete c.g[y],c.h--))}}function ve(c,f,y,I){for(var te=0;te<c.length;++te){var he=c[te];if(!he.da&&he.listener==f&&he.capture==!!y&&he.ha==I)return te}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),Be={};function C(c,f,y,I,te){if(Array.isArray(f)){for(var he=0;he<f.length;he++)C(c,f[he],y,I,te);return null}return y=pe(y),c&&c[$]?c.K(f,y,b(I)?!!I.capture:!1,te):ie(c,f,y,!1,I,te)}function ie(c,f,y,I,te,he){if(!f)throw Error("Invalid event type");var Oe=b(te)?!!te.capture:!!te,zt=Ue(c);if(zt||(c[qe]=zt=new re(c)),y=zt.add(f,y,I,Oe,he),y.proxy)return y;if(I=fe(),y.proxy=I,I.src=c,I.listener=y,c.addEventListener)q||(te=Oe),te===void 0&&(te=!1),c.addEventListener(f.toString(),I,te);else if(c.attachEvent)c.attachEvent(be(f.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function fe(){function c(y){return f.call(c.src,c.listener,y)}const f=Pe;return c}function Ke(c,f,y,I,te){if(Array.isArray(f))for(var he=0;he<f.length;he++)Ke(c,f[he],y,I,te);else I=b(I)?!!I.capture:!!I,y=pe(y),c&&c[$]?(c=c.i,f=String(f).toString(),f in c.g&&(he=c.g[f],y=ve(he,y,I,te),-1<y&&(me(he[y]),Array.prototype.splice.call(he,y,1),he.length==0&&(delete c.g[f],c.h--)))):c&&(c=Ue(c))&&(f=c.g[f.toString()],c=-1,f&&(c=ve(f,y,I,te)),(y=-1<c?f[c]:null)&&ze(y))}function ze(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[$])_e(f.i,c);else{var y=c.type,I=c.proxy;f.removeEventListener?f.removeEventListener(y,I,c.capture):f.detachEvent?f.detachEvent(be(y),I):f.addListener&&f.removeListener&&f.removeListener(I),(y=Ue(f))?(_e(y,c),y.h==0&&(y.src=null,f[qe]=null)):me(c)}}}function be(c){return c in Be?Be[c]:Be[c]="on"+c}function Pe(c,f){if(c.da)c=!0;else{f=new j(f,this);var y=c.listener,I=c.ha||c.src;c.fa&&ze(c),c=y.call(I,f)}return c}function Ue(c){return c=c[qe],c instanceof re?c:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function pe(c){return typeof c=="function"?c:(c[De]||(c[De]=function(f){return c.handleEvent(f)}),c[De])}function $e(){R.call(this),this.i=new re(this),this.M=this,this.F=null}oe($e,R),$e.prototype[$]=!0,$e.prototype.removeEventListener=function(c,f,y,I){Ke(this,c,f,y,I)};function Ee(c,f){var y,I=c.F;if(I)for(y=[];I;I=I.F)y.push(I);if(c=c.M,I=f.type||f,typeof f=="string")f=new K(f,c);else if(f instanceof K)f.target=f.target||c;else{var te=f;f=new K(I,c),k(f,te)}if(te=!0,y)for(var he=y.length-1;0<=he;he--){var Oe=f.g=y[he];te=xt(Oe,I,!0,f)&&te}if(Oe=f.g=c,te=xt(Oe,I,!0,f)&&te,te=xt(Oe,I,!1,f)&&te,y)for(he=0;he<y.length;he++)Oe=f.g=y[he],te=xt(Oe,I,!1,f)&&te}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var y=c.g[f],I=0;I<y.length;I++)me(y[I]);delete c.g[f],c.h--}}this.F=null},$e.prototype.K=function(c,f,y,I){return this.i.add(String(c),f,!1,y,I)},$e.prototype.L=function(c,f,y,I){return this.i.add(String(c),f,!0,y,I)};function xt(c,f,y,I){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var te=!0,he=0;he<f.length;++he){var Oe=f[he];if(Oe&&!Oe.da&&Oe.capture==y){var zt=Oe.listener,br=Oe.ha||Oe.src;Oe.fa&&_e(c.i,Oe),te=zt.call(br,I)!==!1&&te}}return te&&!I.defaultPrevented}function _t(c,f,y){if(typeof c=="function")y&&(c=V(c,y));else if(c&&typeof c.handleEvent=="function")c=V(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:p.setTimeout(c,f||0)}function Te(c){c.g=_t(()=>{c.g=null,c.i&&(c.i=!1,Te(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class rt extends R{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gt(c){R.call(this),this.h=c,this.g={}}oe(gt,R);var ht=[];function tr(c){je(c.g,function(f,y){this.g.hasOwnProperty(y)&&ze(f)},c),c.g={}}gt.prototype.N=function(){gt.aa.N.call(this),tr(this)},gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ht=p.JSON.stringify,es=p.JSON.parse,An=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function Ze(){}Ze.prototype.h=null;function jt(c){return c.h||(c.h=c.i())}function Lt(){}var qt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $r(){K.call(this,"d")}oe($r,K);function Ds(){K.call(this,"c")}oe(Ds,K);var On={},li=null;function gs(){return li=li||new $e}On.La="serverreachability";function Rs(c){K.call(this,On.La,c)}oe(Rs,K);function or(c){const f=gs();Ee(f,new Rs(f))}On.STAT_EVENT="statevent";function hn(c,f){K.call(this,On.STAT_EVENT,c),this.stat=f}oe(hn,K);function Ct(c){const f=gs();Ee(f,new hn(f,c))}On.Ma="timingevent";function Jr(c,f){K.call(this,On.Ma,c),this.size=f}oe(Jr,K);function rr(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},f)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function Er(c,f,y,I,te,he){c.info(function(){if(c.g)if(he)for(var Oe="",zt=he.split("&"),br=0;br<zt.length;br++){var Tt=zt[br].split("=");if(1<Tt.length){var Ar=Tt[0];Tt=Tt[1];var fr=Ar.split("_");Oe=2<=fr.length&&fr[1]=="type"?Oe+(Ar+"="+Tt+"&"):Oe+(Ar+"=redacted&")}}else Oe=null;else Oe=he;return"XMLHTTP REQ ("+I+") [attempt "+te+"]: "+f+`
`+y+`
`+Oe})}function Zr(c,f,y,I,te,he,Oe){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+te+"]: "+f+`
`+y+`
`+he+" "+Oe})}function nr(c,f,y,I){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+pn(c,y)+(I?" "+I:"")})}function mn(c,f){c.info(function(){return"TIMEOUT: "+f})}Br.prototype.info=function(){};function pn(c,f){if(!c.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var I=y[c];if(!(2>I.length)){var te=I[1];if(Array.isArray(te)&&!(1>te.length)){var he=te[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Oe=1;Oe<te.length;Oe++)te[Oe]=""}}}}return Ht(y)}catch{return f}}var en={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mr;function Sr(){}oe(Sr,Ze),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},mr=new Sr;function pr(c,f,y,I){this.j=c,this.i=f,this.l=y,this.R=I||1,this.U=new gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ts}function ts(){this.i=null,this.g="",this.h=!1}var Ln={},Cn={};function In(c,f,y){c.L=1,c.v=ss(sn(f)),c.m=y,c.P=!0,Fi(c,null)}function Fi(c,f){c.F=Date.now(),wt(c),c.A=sn(c.v);var y=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),is(y.i,"t",I),c.C=0,y=c.j.J,c.h=new ts,c.g=Bo(c.j,y?f:null,!c.m),0<c.O&&(c.M=new rt(V(c.Y,c,c.g),c.O)),f=c.U,y=c.g,I=c.ca;var te="readystatechange";Array.isArray(te)||(te&&(ht[0]=te.toString()),te=ht);for(var he=0;he<te.length;he++){var Oe=C(y,te[he],I||f.handleEvent,!1,f.h||f);if(!Oe)break;f.g[Oe.key]=Oe}f=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),or(),Er(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;const f=this.M;f&&yn(c)==3?f.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const fr=yn(this.g);var f=this.g.Ba();const Un=this.g.Z();if(!(3>fr)&&(fr!=3||this.g&&(this.h.h||this.g.oa()||xl(this.g)))){this.J||fr!=4||f==7||(f==8||0>=Un?or(3):or(2)),Fn(this);var y=this.g.Z();this.X=y;t:if($i(this)){var I=xl(this.g);c="";var te=I.length,he=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),fn(this);var Oe="";break t}this.h.i=new p.TextDecoder}for(f=0;f<te;f++)this.h.h=!0,c+=this.h.i.decode(I[f],{stream:!(he&&f==te-1)});I.length=0,this.h.g+=c,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=y==200,Zr(this.i,this.u,this.A,this.l,this.R,fr,y),this.o){if(this.T&&!this.K){t:{if(this.g){var zt,br=this.g;if((zt=br.g?br.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(zt)){var Tt=zt;break t}}Tt=null}if(y=Tt)nr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gn(this,y);else{this.o=!1,this.s=3,Ct(12),Gt(this),fn(this);break e}}if(this.P){y=!0;let Dn;for(;!this.J&&this.C<Oe.length;)if(Dn=zs(this,Oe),Dn==Cn){fr==4&&(this.s=4,Ct(14),y=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Ln){this.s=4,Ct(15),nr(this.i,this.l,Oe,"[Invalid Chunk]"),y=!1;break}else nr(this.i,this.l,Dn,null),gn(this,Dn);if($i(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fr!=4||Oe.length!=0||this.h.h||(this.s=1,Ct(16),y=!1),this.o=this.o&&y,!y)nr(this.i,this.l,Oe,"[Invalid Chunked Response]"),Gt(this),fn(this);else if(0<Oe.length&&!this.W){this.W=!0;var Ar=this.j;Ar.g==this&&Ar.ba&&!Ar.M&&(Ar.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),vl(Ar),Ar.M=!0,Ct(11))}}else nr(this.i,this.l,Oe,null),gn(this,Oe);fr==4&&Gt(this),this.o&&!this.J&&(fr==4?Ea(this.j,this):(this.o=!1,wt(this)))}else ka(this.g),y==400&&0<Oe.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Gt(this),fn(this)}}}catch{}finally{}};function $i(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function zs(c,f){var y=c.C,I=f.indexOf(`
`,y);return I==-1?Cn:(y=Number(f.substring(y,I)),isNaN(y)?Ln:(I+=1,I+y>f.length?Cn:(f=f.slice(I,I+y),c.C=I+y,f)))}pr.prototype.cancel=function(){this.J=!0,Gt(this)};function wt(c){c.S=Date.now()+c.I,oi(c,c.I)}function oi(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=rr(V(c.ba,c),f)}function Fn(c){c.B&&(p.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(mn(this.i,this.A),this.L!=2&&(or(),Ct(17)),Gt(this),this.s=2,fn(this)):oi(this,this.S-c)};function fn(c){c.j.G==0||c.J||Ea(c.j,c)}function Gt(c){Fn(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,tr(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function gn(c,f){try{var y=c.j;if(y.G!=0&&(y.g==c||vr(y.h,c))){if(!c.K&&vr(y.h,c)&&y.G==3){try{var I=y.Da.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var te=I;if(te[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Ta(y),ls(y);else break e;_a(y),Ct(18)}}else y.za=te[1],0<y.za-y.T&&37500>te[2]&&y.F&&y.v==0&&!y.C&&(y.C=rr(V(y.Za,y),6e3));if(1>=Vs(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ks(y,11)}else if((c.K||y.g==c)&&Ta(y),!Z(f))for(te=y.Da.g.parse(f),f=0;f<te.length;f++){let Tt=te[f];if(y.T=Tt[0],Tt=Tt[1],y.G==2)if(Tt[0]=="c"){y.K=Tt[1],y.ia=Tt[2];const Ar=Tt[3];Ar!=null&&(y.la=Ar,y.j.info("VER="+y.la));const fr=Tt[4];fr!=null&&(y.Aa=fr,y.j.info("SVER="+y.Aa));const Un=Tt[5];Un!=null&&typeof Un=="number"&&0<Un&&(I=1.5*Un,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const Dn=c.g;if(Dn){const Hi=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hi){var he=I.h;he.g||Hi.indexOf("spdy")==-1&&Hi.indexOf("quic")==-1&&Hi.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(ci(he,he.h),he.h=null))}if(I.D){const Aa=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(I.ya=Aa,Rt(I.I,I.D,Aa))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var Oe=c;if(I.qa=$o(I,I.J?I.ia:null,I.W),Oe.K){va(I.h,Oe);var zt=Oe,br=I.L;br&&(zt.I=br),zt.B&&(Fn(zt),wt(zt)),I.g=Oe}else Ki(I);0<y.i.length&&bs(y)}else Tt[0]!="stop"&&Tt[0]!="close"||Ks(y,7);else y.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Ks(y,7):zr(y):Tt[0]!="noop"&&y.l&&y.l.ta(Tt),y.v=0)}}or(4)}catch{}}var Bi=class{constructor(c,f){this.g=c,this.map=f}};function Ms(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Vs(c){return c.h?1:c.g?c.g.size:0}function vr(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function ci(c,f){c.g?c.g.add(f):c.h=f}function va(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Ms.prototype.cancel=function(){if(this.i=Ui(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ui(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const y of c.g.values())f=f.concat(y.D);return f}return F(c.i)}function Os(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(v(c)){for(var f=[],y=c.length,I=0;I<y;I++)f.push(c[I]);return f}f=[],y=0;for(I in c)f[y++]=c[I];return f}function $n(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(v(c)||typeof c=="string"){var f=[];c=c.length;for(var y=0;y<c;y++)f.push(y);return f}f=[],y=0;for(const I in c)f[y++]=I;return f}}}function nn(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(v(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var y=$n(c),I=Os(c),te=I.length,he=0;he<te;he++)f.call(void 0,I[he],y&&y[he],c)}var sr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fl(c,f){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var I=c[y].indexOf("="),te=null;if(0<=I){var he=c[y].substring(0,I);te=c[y].substring(I+1)}else he=c[y];f(he,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function rs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof rs){this.h=c.h,Ls(this,c.j),this.o=c.o,this.g=c.g,ns(this,c.s),this.l=c.l;var f=c.i,y=new an;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),xs(this,y),this.m=c.m}else c&&(f=String(c).match(sr))?(this.h=!1,Ls(this,f[1]||"",!0),this.o=kt(f[2]||""),this.g=kt(f[3]||"",!0),ns(this,f[4]),this.l=kt(f[5]||"",!0),xs(this,f[6]||"",!0),this.m=kt(f[7]||"")):(this.h=!1,this.i=new an(null,this.h))}rs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(ys(f,ui,!0),":");var y=this.g;return(y||f=="file")&&(c.push("//"),(f=this.o)&&c.push(ys(f,ui,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(ys(y,y.charAt(0)=="/"?xn:Fs,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",ys(y,Bn)),c.join("")};function sn(c){return new rs(c)}function Ls(c,f,y){c.j=y?kt(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function ns(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function xs(c,f,y){f instanceof an?(c.i=f,G(c.i,c.h)):(y||(f=ys(f,$s)),c.i=new an(f,c.h))}function Rt(c,f,y){c.i.set(f,y)}function ss(c){return Rt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function kt(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ys(c,f,y){return typeof c=="string"?(c=encodeURI(c).replace(f,ba),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ba(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ui=/[#\/\?@]/g,Fs=/[#\?:]/g,xn=/[#\?]/g,$s=/[#\?@]/g,Bn=/#/g;function an(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function cr(c){c.g||(c.g=new Map,c.h=0,c.i&&fl(c.i,function(f,y){c.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}i=an.prototype,i.add=function(c,f){cr(this),this.i=null,c=D(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(f),this.h+=1,this};function ln(c,f){cr(c),f=D(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function ur(c,f){return cr(c),f=D(c,f),c.g.has(f)}i.forEach=function(c,f){cr(this),this.g.forEach(function(y,I){y.forEach(function(te){c.call(f,te,I,this)},this)},this)},i.na=function(){cr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let I=0;I<f.length;I++){const te=c[I];for(let he=0;he<te.length;he++)y.push(f[I])}return y},i.V=function(c){cr(this);let f=[];if(typeof c=="string")ur(this,c)&&(f=f.concat(this.g.get(D(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)f=f.concat(c[y])}return f},i.set=function(c,f){return cr(this),this.i=null,c=D(this,c),ur(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},i.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function is(c,f,y){ln(c,f),0<y.length&&(c.i=null,c.g.set(D(c,f),F(y)),c.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var I=f[y];const he=encodeURIComponent(String(I)),Oe=this.V(I);for(I=0;I<Oe.length;I++){var te=he;Oe[I]!==""&&(te+="="+encodeURIComponent(String(Oe[I]))),c.push(te)}}return this.i=c.join("&")};function D(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function G(c,f){f&&!c.j&&(cr(c),c.i=null,c.g.forEach(function(y,I){var te=I.toLowerCase();I!=te&&(ln(this,I),is(this,te,y))},c)),c.j=f}function ae(c,f){const y=new Br;if(p.Image){const I=new Image;I.onload=X(Se,y,"TestLoadImage: loaded",!0,f,I),I.onerror=X(Se,y,"TestLoadImage: error",!1,f,I),I.onabort=X(Se,y,"TestLoadImage: abort",!1,f,I),I.ontimeout=X(Se,y,"TestLoadImage: timeout",!1,f,I),p.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else f(!1)}function de(c,f){const y=new Br,I=new AbortController,te=setTimeout(()=>{I.abort(),Se(y,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:I.signal}).then(he=>{clearTimeout(te),he.ok?Se(y,"TestPingServer: ok",!0,f):Se(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(te),Se(y,"TestPingServer: error",!1,f)})}function Se(c,f,y,I,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),I(y)}catch{}}function He(){this.g=new An}function Fe(c,f,y){const I=y||"";try{nn(c,function(te,he){let Oe=te;b(te)&&(Oe=Ht(te)),f.push(I+he+"="+encodeURIComponent(Oe))})}catch(te){throw f.push(I+"type="+encodeURIComponent("_badmap")),te}}function Le(c){this.l=c.Ub||null,this.j=c.eb||!1}oe(Le,Ze),Le.prototype.g=function(){return new it(this.l,this.j)},Le.prototype.i=(function(c){return function(){return c}})({});function it(c,f){$e.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}oe(it,$e),i=it.prototype,i.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,mt(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||p).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,st(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mt(this)),this.g&&(this.readyState=3,mt(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nt(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function nt(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?st(this):mt(this),this.readyState==3&&nt(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,st(this))},i.Qa=function(c){this.g&&(this.response=c,st(this))},i.ga=function(){this.g&&st(this)};function st(c){c.readyState=4,c.l=null,c.j=null,c.v=null,mt(c)}i.setRequestHeader=function(c,f){this.u.append(c,f)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=f.next();return c.join(`\r
`)};function mt(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(it.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Wt(c){let f="";return je(c,function(y,I){f+=I,f+=":",f+=y,f+=`\r
`}),f}function ir(c,f,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Wt(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Rt(c,f,y))}function Ft(c){$e.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}oe(Ft,$e);var as=/^https?$/i,on=["POST","PUT"];i=Ft.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,f,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mr.g(),this.v=this.o?jt(this.o):jt(mr),this.g.onreadystatechange=V(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(he){Ur(this,he);return}if(c=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var te in I)y.set(te,I[te]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const he of I.keys())y.set(he,I.get(he));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(he=>he.toLowerCase()=="content-type"),te=p.FormData&&c instanceof p.FormData,!(0<=Array.prototype.indexOf.call(on,f,void 0))||I||te||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Oe]of y)this.g.setRequestHeader(he,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ja(this),this.u=!0,this.g.send(c),this.u=!1}catch(he){Ur(this,he)}};function Ur(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Bs(c),Pn(c)}function Bs(c){c.A||(c.A=!0,Ee(c,"complete"),Ee(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ee(this,"complete"),Ee(this,"abort"),Pn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pn(this,!0)),Ft.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?gl(this):this.bb())},i.bb=function(){gl(this)};function gl(c){if(c.h&&typeof h<"u"&&(!c.v[1]||yn(c)!=4||c.Z()!=2)){if(c.u&&yn(c)==4)_t(c.Ea,0,c);else if(Ee(c,"readystatechange"),yn(c)==4){c.h=!1;try{const Oe=c.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var I;if(I=Oe===0){var te=String(c.D).match(sr)[1]||null;!te&&p.self&&p.self.location&&(te=p.self.location.protocol.slice(0,-1)),I=!as.test(te?te.toLowerCase():"")}y=I}if(y)Ee(c,"complete"),Ee(c,"success");else{c.m=6;try{var he=2<yn(c)?c.g.statusText:""}catch{he=""}c.l=he+" ["+c.Z()+"]",Bs(c)}}finally{Pn(c)}}}}function Pn(c,f){if(c.g){ja(c);const y=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Ee(c,"ready");try{y.onreadystatechange=I}catch{}}}function ja(c){c.I&&(p.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function yn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),es(f)}};function xl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ka(c){const f={};c=(c.g&&2<=yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(Z(c[I]))continue;var y=E(c[I]);const te=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const he=f[te]||[];f[te]=he,he.push(y)}O(f,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(c,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||f}function yl(c){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,c),this.cb=vs("retryDelaySeedMs",1e4,c),this.Wa=vs("forwardChannelMaxRetries",2,c),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ms(c&&c.concurrentRequestLimit),this.Da=new He,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=yl.prototype,i.la=8,i.G=1,i.connect=function(c,f,y,I){Ct(0),this.W=c,this.H=f||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=$o(this,null,this.W),bs(this)};function zr(c){if(Na(c),c.G==3){var f=c.U++,y=sn(c.I);if(Rt(y,"SID",c.K),Rt(y,"RID",f),Rt(y,"TYPE","terminate"),Us(c,y),f=new pr(c,c.j,f),f.L=2,f.v=ss(sn(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=f.v,y=!0),y||(f.g=Bo(f.j,null),f.g.ea(f.v)),f.F=Date.now(),wt(f)}Fo(c)}function ls(c){c.g&&(vl(c),c.g.cancel(),c.g=null)}function Na(c){ls(c),c.u&&(p.clearTimeout(c.u),c.u=null),Ta(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&p.clearTimeout(c.s),c.s=null)}function bs(c){if(!rn(c.h)&&!c.s){c.s=!0;var f=c.Ga;we||ue(),H||(we(),H=!0),Y.add(f,c),c.B=0}}function Lu(c,f){return Vs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=rr(V(c.Ga,c,f),Lo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const te=new pr(this,this.j,c);let he=this.o;if(this.S&&(he?(he=x(he),k(he,this.S)):he=this.S),this.m!==null||this.O||(te.H=he,he=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=di(this,te,f),y=sn(this.I),Rt(y,"RID",c),Rt(y,"CVER",22),this.D&&Rt(y,"X-HTTP-Session-Id",this.D),Us(this,y),he&&(this.O?f="headers="+encodeURIComponent(String(Wt(he)))+"&"+f:this.m&&ir(y,this.m,he)),ci(this.h,te),this.Ua&&Rt(y,"TYPE","init"),this.P?(Rt(y,"$req",f),Rt(y,"SID","null"),te.T=!0,In(te,y,null)):In(te,y,f),this.G=2}}else this.G==3&&(c?wa(this,c):this.i.length==0||rn(this.h)||wa(this))};function wa(c,f){var y;f?y=f.l:y=c.U++;const I=sn(c.I);Rt(I,"SID",c.K),Rt(I,"RID",y),Rt(I,"AID",c.T),Us(c,I),c.m&&c.o&&ir(I,c.m,c.o),y=new pr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),f&&(c.i=f.D.concat(c.i)),f=di(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ci(c.h,y),In(y,I,f)}function Us(c,f){c.H&&je(c.H,function(y,I){Rt(f,I,y)}),c.l&&nn({},function(y,I){Rt(f,I,y)})}function di(c,f,y){y=Math.min(c.i.length,y);var I=c.l?V(c.l.Na,c.l,c):null;e:{var te=c.i;let he=-1;for(;;){const Oe=["count="+y];he==-1?0<y?(he=te[0].g,Oe.push("ofs="+he)):he=0:Oe.push("ofs="+he);let zt=!0;for(let br=0;br<y;br++){let Tt=te[br].g;const Ar=te[br].map;if(Tt-=he,0>Tt)he=Math.max(0,te[br].g-100),zt=!1;else try{Fe(Ar,Oe,"req"+Tt+"_")}catch{I&&I(Ar)}}if(zt){I=Oe.join("&");break e}}}return c=c.i.splice(0,y),f.D=c,I}function Ki(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;we||ue(),H||(we(),H=!0),Y.add(f,c),c.v=0}}function _a(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=rr(V(c.Fa,c),Lo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Oo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=rr(V(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),ls(this),Oo(this))};function vl(c){c.A!=null&&(p.clearTimeout(c.A),c.A=null)}function Oo(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=sn(c.qa);Rt(f,"RID","rpc"),Rt(f,"SID",c.K),Rt(f,"AID",c.T),Rt(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Rt(f,"TO",c.ja),Rt(f,"TYPE","xmlhttp"),Us(c,f),c.m&&c.o&&ir(f,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=ss(sn(f)),y.m=null,y.P=!0,Fi(y,c)}i.Za=function(){this.C!=null&&(this.C=null,ls(this),_a(this),Ct(19))};function Ta(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function Ea(c,f){var y=null;if(c.g==f){Ta(c),vl(c),c.g=null;var I=2}else if(vr(c.h,f))y=f.D,va(c.h,f),I=1;else return;if(c.G!=0){if(f.o)if(I==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var te=c.B;I=gs(),Ee(I,new Jr(I,y)),bs(c)}else Ki(c);else if(te=f.s,te==3||te==0&&0<f.X||!(I==1&&Lu(c,f)||I==2&&_a(c)))switch(y&&0<y.length&&(f=c.h,f.i=f.i.concat(y)),te){case 1:Ks(c,5);break;case 4:Ks(c,10);break;case 3:Ks(c,6);break;default:Ks(c,2)}}}function Lo(c,f){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*f}function Ks(c,f){if(c.j.info("Error code "+f),f==2){var y=V(c.fb,c),I=c.Xa;const te=!I;I=new rs(I||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Ls(I,"https"),ss(I),te?ae(I.toString(),y):de(I.toString(),y)}else Ct(2);c.G=0,c.l&&c.l.sa(f),Fo(c),Na(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Fo(c){if(c.G=0,c.ka=[],c.l){const f=Ui(c.h);(f.length!=0||c.i.length!=0)&&(z(c.ka,f),z(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function $o(c,f,y){var I=y instanceof rs?sn(y):new rs(y);if(I.g!="")f&&(I.g=f+"."+I.g),ns(I,I.s);else{var te=p.location;I=te.protocol,f=f?f+"."+te.hostname:te.hostname,te=+te.port;var he=new rs(null);I&&Ls(he,I),f&&(he.g=f),te&&ns(he,te),y&&(he.l=y),I=he}return y=c.D,f=c.ya,y&&f&&Rt(I,y,f),Rt(I,"VER",c.la),Us(c,I),I}function Bo(c,f,y){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ft(new Le({eb:y})):new Ft(c.pa),f.Ha(c.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function bl(){}i=bl.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Sa(){}Sa.prototype.g=function(c,f){return new cn(c,f)};function cn(c,f){$e.call(this),this.g=new yl(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!Z(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Z(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new js(this)}oe(cn,$e),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){zr(this.g)},cn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Ht(c),c=y);f.i.push(new Bi(f.Ya++,c)),f.G==3&&bs(f)},cn.prototype.N=function(){this.g.l=null,delete this.j,zr(this.g),delete this.g,cn.aa.N.call(this)};function Uo(c){$r.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const y in f){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}oe(Uo,$r);function Ko(){Ds.call(this),this.status=1}oe(Ko,Ds);function js(c){this.g=c}oe(js,bl),js.prototype.ua=function(){Ee(this.g,"a")},js.prototype.ta=function(c){Ee(this.g,new Uo(c))},js.prototype.sa=function(c){Ee(this.g,new Ko)},js.prototype.ra=function(){Ee(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Ag=function(){return new Sa},Sg=function(){return gs()},Eg=On,Ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,Wc=en,tn.COMPLETE="complete",Tg=tn,Lt.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Xl=Lt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,_g=Ft}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const s0="@firebase/firestore",i0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new vg("@firebase/firestore");function Qa(){return ha.logLevel}function Ye(i,...e){if(ha.logLevel<=St.DEBUG){const n=e.map(em);ha.debug(`Firestore (${dl}): ${i}`,...n)}}function ii(i,...e){if(ha.logLevel<=St.ERROR){const n=e.map(em);ha.error(`Firestore (${dl}): ${i}`,...n)}}function ma(i,...e){if(ha.logLevel<=St.WARN){const n=e.map(em);ha.warn(`Firestore (${dl}): ${i}`,...n)}}function em(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(i,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Cg(i,a,n)}function Cg(i,e,n){let a=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw ii(a),new Error(a)}function Dt(i,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,i||Cg(e,o,a)}function ft(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends ul{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tn.UNAUTHENTICATED)))}shutdown(){}}class _1{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Dt(this.o===void 0,42304);let a=this.i;const o=v=>this.i!==a?(a=this.i,n(v)):Promise.resolve();let d=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ii,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const v=d;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ii)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Dt(typeof a.accessToken=="string",31837,{l:a}),new N1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class T1{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E1{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new T1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class a0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,a1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Dt(this.o===void 0,3512);const a=d=>{d.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const h=d.token!==this.m;return this.m=d.token,Ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>a(d)))};const o=d=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new a0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=A1(40);for(let d=0;d<o.length;++d)a.length<20&&o[d]<n&&(a+=e.charAt(o[d]%62))}return a}}function yt(i,e){return i<e?-1:i>e?1:0}function Ih(i,e){let n=0;for(;n<i.length&&n<e.length;){const a=i.codePointAt(n),o=e.codePointAt(n);if(a!==o){if(a<128&&o<128)return yt(a,o);{const d=Ig(),h=C1(d.encode(l0(i,n)),d.encode(l0(e,n)));return h!==0?h:yt(a,o)}}n+=a>65535?2:1}return yt(i.length,e.length)}function l0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function C1(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return yt(i[n],e[n]);return yt(i.length,e.length)}function il(i,e,n){return i.length===e.length&&i.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="__name__";class Ts{constructor(e,n,a){n===void 0?n=0:n>e.length&&ut(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&ut(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const d=Ts.compareSegments(e.get(o),n.get(o));if(d!==0)return d}return yt(e.length,n.length)}static compareSegments(e,n){const a=Ts.isNumericId(e),o=Ts.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):Ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Zt extends Ts{construct(e,n,a){return new Zt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new tt(Ae.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const I1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends Ts{construct(e,n,a){return new Lr(e,n,a)}static isValidIdentifier(e){return I1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o0}static keyField(){return new Lr([o0])}static fromServerFormat(e){const n=[];let a="",o=0;const d=()=>{if(a.length===0)throw new tt(Ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new tt(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new tt(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(a+=p,o++):(d(),o++)}if(d(),h)throw new tt(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(n)}static emptyPath(){return new Lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(Zt.fromString(e))}static fromName(e){return new ot(Zt.fromString(e).popFirst(5))}static empty(){return new ot(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new Zt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(i,e,n){if(!n)throw new tt(Ae.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function D1(i,e,n,a){if(e===!0&&a===!0)throw new tt(Ae.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function c0(i){if(!ot.isDocumentKey(i))throw new tt(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Pg(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function rm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ut(12329,{type:typeof i})}function ua(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new tt(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rm(i);throw new tt(Ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(i,e){const n={typeString:i};return e&&(n.value=e),n}function Do(i,e){if(!Pg(i))throw new tt(Ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,d="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){n=`JSON missing required field: '${a}'`;break}const h=i[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(d!==void 0&&h!==d.value){n=`Expected '${a}' field to equal '${d.value}'`;break}}if(n)throw new tt(Ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=-62135596800,d0=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*d0);return new Kt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new tt(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<u0)throw new tt(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d0}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Do(e,Kt._jsonSchema))return new Kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-u0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:yr("string",Kt._jsonSchemaVersion),seconds:yr("number"),nanoseconds:yr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static fromTimestamp(e){return new pt(e)}static min(){return new pt(new Kt(0,0))}static max(){return new pt(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function R1(i,e){const n=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,o=pt.fromTimestamp(a===1e9?new Kt(n+1,0):new Kt(n,a));return new Ri(o,ot.empty(),e)}function z1(i){return new Ri(i.readTime,i.key,No)}class Ri{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ri(pt.min(),ot.empty(),No)}static max(){return new Ri(pt.max(),ot.empty(),No)}}function M1(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ot.comparator(i.documentKey,e.documentKey),n!==0?n:yt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(i){if(i.code!==Ae.FAILED_PRECONDITION||i.message!==V1)throw i;Ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ke(((a,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(a,o)},this.catchCallback=d=>{this.wrapFailure(n,d).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ke?n:ke.resolve(n)}catch(n){return ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ke.reject(n)}static resolve(e){return new ke(((n,a)=>{n(e)}))}static reject(e){return new ke(((n,a)=>{a(e)}))}static waitFor(e){return new ke(((n,a)=>{let o=0,d=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++d,h&&d===o&&n()}),(v=>a(v)))})),h=!0,d===o&&n()}))}static or(e){let n=ke.resolve(!1);for(const a of e)n=n.next((o=>o?ke.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,d)=>{a.push(n.call(this,o,d))})),this.waitFor(a)}static mapArray(e,n){return new ke(((a,o)=>{const d=e.length,h=new Array(d);let p=0;for(let v=0;v<d;v++){const b=v;n(e[b]).next((T=>{h[b]=T,++p,p===d&&a(h)}),(T=>o(T)))}}))}static doWhile(e,n){return new ke(((a,o)=>{const d=()=>{e()===!0?n().next((()=>{d()}),o):a()};d()}))}}function L1(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this._e(a),this.ae=a=>n.writeSequenceNumber(a))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_u.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=-1;function Tu(i){return i==null}function cu(i){return i===0&&1/i==-1/0}function F1(i){return typeof i=="number"&&Number.isInteger(i)&&!cu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="";function $1(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=h0(e)),e=B1(i.get(n),e);return h0(e)}function B1(i,e){let n=e;const a=i.length;for(let o=0;o<a;o++){const d=i.charAt(o);switch(d){case"\0":n+="";break;case Dg:n+="";break;default:n+=d}}return n}function h0(i){return i+Dg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function fa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Rg(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this.comparator=e,this.root=n||Or.EMPTY}insert(e,n){return new er(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=n?a(e.key,n):1,n&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,n,a,o,d){this.key=e,this.value=n,this.color=a??Or.RED,this.left=o??Or.EMPTY,this.right=d??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,d){return new Or(e??this.key,n??this.value,a??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const d=a(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,n,a),null):d===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Or.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ut(27949);return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(e,n,a,o,d){return this}insert(e,n,a){return new Or(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Tr)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,d=a.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Tr(this.comparator);return n.data=e,n}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.fields=e,e.sort(Lr.comparator)}static empty(){return new fs([])}unionWith(e){let n=new Tr(Lr.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new fs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new zg("Invalid base64 string: "+d):d}})(e);return new Fr(n)}static fromUint8Array(e){const n=(function(o){let d="";for(let h=0;h<o.length;++h)d+=String.fromCharCode(o[h]);return d})(e);return new Fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(i){if(Dt(!!i,39018),typeof i=="string"){let e=0;const n=U1.exec(i);if(Dt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:hr(i.seconds),nanos:hr(i.nanos)}}function hr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Mi(i){return typeof i=="string"?Fr.fromBase64String(i):Fr.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="server_timestamp",Vg="__type__",Og="__previous_value__",Lg="__local_write_time__";function sm(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vg])===null||n===void 0?void 0:n.stringValue)===Mg}function Eu(i){const e=i.mapValue.fields[Og];return sm(e)?Eu(e):e}function wo(i){const e=zi(i.mapValue.fields[Lg].timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,a,o,d,h,p,v,b,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=d,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=T}}const uu="(default)";class _o{constructor(e,n){this.projectId=e,this.database=n||uu}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===uu}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="__type__",H1="__max__",$c={mapValue:{}},$g="__vector__",du="value";function Vi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sm(i)?4:Y1(i)?9007199254740991:G1(i)?10:11:ut(28295,{value:i})}function Is(i,e){if(i===e)return!0;const n=Vi(i);if(n!==Vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return wo(i).isEqual(wo(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const h=zi(o.timestampValue),p=zi(d.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,d){return Mi(o.bytesValue).isEqual(Mi(d.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,d){return hr(o.geoPointValue.latitude)===hr(d.geoPointValue.latitude)&&hr(o.geoPointValue.longitude)===hr(d.geoPointValue.longitude)})(i,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return hr(o.integerValue)===hr(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const h=hr(o.doubleValue),p=hr(d.doubleValue);return h===p?cu(h)===cu(p):isNaN(h)&&isNaN(p)}return!1})(i,e);case 9:return il(i.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(o,d){const h=o.mapValue.fields||{},p=d.mapValue.fields||{};if(m0(h)!==m0(p))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(p[v]===void 0||!Is(h[v],p[v])))return!1;return!0})(i,e);default:return ut(52216,{left:i})}}function To(i,e){return(i.values||[]).find((n=>Is(n,e)))!==void 0}function al(i,e){if(i===e)return 0;const n=Vi(i),a=Vi(e);if(n!==a)return yt(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return yt(i.booleanValue,e.booleanValue);case 2:return(function(d,h){const p=hr(d.integerValue||d.doubleValue),v=hr(h.integerValue||h.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(i,e);case 3:return f0(i.timestampValue,e.timestampValue);case 4:return f0(wo(i),wo(e));case 5:return Ih(i.stringValue,e.stringValue);case 6:return(function(d,h){const p=Mi(d),v=Mi(h);return p.compareTo(v)})(i.bytesValue,e.bytesValue);case 7:return(function(d,h){const p=d.split("/"),v=h.split("/");for(let b=0;b<p.length&&b<v.length;b++){const T=yt(p[b],v[b]);if(T!==0)return T}return yt(p.length,v.length)})(i.referenceValue,e.referenceValue);case 8:return(function(d,h){const p=yt(hr(d.latitude),hr(h.latitude));return p!==0?p:yt(hr(d.longitude),hr(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return g0(i.arrayValue,e.arrayValue);case 10:return(function(d,h){var p,v,b,T;const M=d.fields||{},V=h.fields||{},X=(p=M[du])===null||p===void 0?void 0:p.arrayValue,oe=(v=V[du])===null||v===void 0?void 0:v.arrayValue,F=yt(((b=X==null?void 0:X.values)===null||b===void 0?void 0:b.length)||0,((T=oe==null?void 0:oe.values)===null||T===void 0?void 0:T.length)||0);return F!==0?F:g0(X,oe)})(i.mapValue,e.mapValue);case 11:return(function(d,h){if(d===$c.mapValue&&h===$c.mapValue)return 0;if(d===$c.mapValue)return 1;if(h===$c.mapValue)return-1;const p=d.fields||{},v=Object.keys(p),b=h.fields||{},T=Object.keys(b);v.sort(),T.sort();for(let M=0;M<v.length&&M<T.length;++M){const V=Ih(v[M],T[M]);if(V!==0)return V;const X=al(p[v[M]],b[T[M]]);if(X!==0)return X}return yt(v.length,T.length)})(i.mapValue,e.mapValue);default:throw ut(23264,{le:n})}}function f0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return yt(i,e);const n=zi(i),a=zi(e),o=yt(n.seconds,a.seconds);return o!==0?o:yt(n.nanos,a.nanos)}function g0(i,e){const n=i.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const d=al(n[o],a[o]);if(d)return d}return yt(n.length,a.length)}function ll(i){return Ph(i)}function Ph(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const a=zi(n);return`time(${a.seconds},${a.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Mi(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ot.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let a="[",o=!0;for(const d of n.values||[])o?o=!1:a+=",",a+=Ph(d);return a+"]"})(i.arrayValue):"mapValue"in i?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",d=!0;for(const h of a)d?d=!1:o+=",",o+=`${h}:${Ph(n.fields[h])}`;return o+"}"})(i.mapValue):ut(61005,{value:i})}function Qc(i){switch(Vi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eu(i);return e?16+Qc(e):16;case 5:return 2*i.stringValue.length;case 6:return Mi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,d)=>o+Qc(d)),0)})(i.arrayValue);case 10:case 11:return(function(a){let o=0;return fa(a.fields,((d,h)=>{o+=d.length+Qc(h)})),o})(i.mapValue);default:throw ut(13486,{value:i})}}function Dh(i){return!!i&&"integerValue"in i}function im(i){return!!i&&"arrayValue"in i}function x0(i){return!!i&&"nullValue"in i}function y0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Xc(i){return!!i&&"mapValue"in i}function G1(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fg])===null||n===void 0?void 0:n.stringValue)===$g}function uo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return fa(i.mapValue.fields,((n,a)=>e.mapValue.fields[n]=uo(a))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Y1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===H1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uo(n)}setAll(e){let n=Lr.emptyPath(),a={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const v=this.getFieldsMap(n);this.applyChanges(v,a,o),a={},o=[],n=p.popLast()}h?a[p.lastSegment()]=uo(h):o.push(p.lastSegment())}));const d=this.getFieldsMap(n);this.applyChanges(d,a,o)}delete(e){const n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){fa(n,((o,d)=>e[o]=d));for(const o of a)delete e[o]}clone(){return new Xn(uo(this.value))}}function Bg(i){const e=[];return fa(i.fields,((n,a)=>{const o=new Lr([n]);if(Xc(a)){const d=Bg(a.mapValue).fields;if(d.length===0)e.push(o);else for(const h of d)e.push(o.child(h))}else e.push(o)})),new fs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,a,o,d,h,p){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=d,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Xr(e,0,pt.min(),pt.min(),pt.min(),Xn.empty(),0)}static newFoundDocument(e,n,a,o){return new Xr(e,1,n,pt.min(),a,o,0)}static newNoDocument(e,n){return new Xr(e,2,n,pt.min(),pt.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new Xr(e,3,n,pt.min(),pt.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.position=e,this.inclusive=n}}function v0(i,e,n){let a=0;for(let o=0;o<i.position.length;o++){const d=e[o],h=i.position[o];if(d.field.isKeyField()?a=ot.comparator(ot.fromName(h.referenceValue),n.key):a=al(h,n.data.field(d.field)),d.dir==="desc"&&(a*=-1),a!==0)break}return a}function b0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Is(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function q1(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{}class wr extends Ug{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new Q1(e,n,a):n==="array-contains"?new Z1(e,a):n==="in"?new ej(e,a):n==="not-in"?new tj(e,a):n==="array-contains-any"?new rj(e,a):new wr(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new X1(e,a):new J1(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(al(n,this.value)):n!==null&&Vi(this.value)===Vi(n)&&this.matchesComparison(al(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ps extends Ug{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ps(e,n)}matches(e){return Kg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Kg(i){return i.op==="and"}function Hg(i){return W1(i)&&Kg(i)}function W1(i){for(const e of i.filters)if(e instanceof Ps)return!1;return!0}function Rh(i){if(i instanceof wr)return i.field.canonicalString()+i.op.toString()+ll(i.value);if(Hg(i))return i.filters.map((e=>Rh(e))).join(",");{const e=i.filters.map((n=>Rh(n))).join(",");return`${i.op}(${e})`}}function Gg(i,e){return i instanceof wr?(function(a,o){return o instanceof wr&&a.op===o.op&&a.field.isEqual(o.field)&&Is(a.value,o.value)})(i,e):i instanceof Ps?(function(a,o){return o instanceof Ps&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((d,h,p)=>d&&Gg(h,o.filters[p])),!0):!1})(i,e):void ut(19439)}function Yg(i){return i instanceof wr?(function(n){return`${n.field.canonicalString()} ${n.op} ${ll(n.value)}`})(i):i instanceof Ps?(function(n){return n.op.toString()+" {"+n.getFilters().map(Yg).join(" ,")+"}"})(i):"Filter"}class Q1 extends wr{constructor(e,n,a){super(e,n,a),this.key=ot.fromName(a.referenceValue)}matches(e){const n=ot.comparator(e.key,this.key);return this.matchesComparison(n)}}class X1 extends wr{constructor(e,n){super(e,"in",n),this.keys=qg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class J1 extends wr{constructor(e,n){super(e,"not-in",n),this.keys=qg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function qg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((a=>ot.fromName(a.referenceValue)))}class Z1 extends wr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return im(n)&&To(n.arrayValue,this.value)}}class ej extends wr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&To(this.value.arrayValue,n)}}class tj extends wr{constructor(e,n){super(e,"not-in",n)}matches(e){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!To(this.value.arrayValue,n)}}class rj extends wr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!im(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>To(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n=null,a=[],o=[],d=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=d,this.startAt=h,this.endAt=p,this.Pe=null}}function j0(i,e=null,n=[],a=[],o=null,d=null,h=null){return new nj(i,e,n,a,o,d,h)}function am(i){const e=ft(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Rh(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(d){return d.field.canonicalString()+d.dir})(a))).join(","),Tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>ll(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>ll(a))).join(",")),e.Pe=n}return e.Pe}function lm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!q1(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Gg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!b0(i.startAt,e.startAt)&&b0(i.endAt,e.endAt)}function zh(i){return ot.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n=null,a=[],o=[],d=null,h="F",p=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=d,this.limitType=h,this.startAt=p,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function sj(i,e,n,a,o,d,h,p){return new Su(i,e,n,a,o,d,h,p)}function Au(i){return new Su(i)}function k0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function ij(i){return i.collectionGroup!==null}function ho(i){const e=ft(i);if(e.Te===null){e.Te=[];const n=new Set;for(const d of e.explicitOrderBy)e.Te.push(d),n.add(d.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Tr(Lr.comparator);return h.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(p=p.add(b.field))}))})),p})(e).forEach((d=>{n.has(d.canonicalString())||d.isKeyField()||e.Te.push(new mu(d,a))})),n.has(Lr.keyField().canonicalString())||e.Te.push(new mu(Lr.keyField(),a))}return e.Te}function Es(i){const e=ft(i);return e.Ie||(e.Ie=aj(e,ho(i))),e.Ie}function aj(i,e){if(i.limitType==="F")return j0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new mu(o.field,d)}));const n=i.endAt?new hu(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new hu(i.startAt.position,i.startAt.inclusive):null;return j0(i.path,i.collectionGroup,e,i.filters,i.limit,n,a)}}function Mh(i,e,n){return new Su(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Cu(i,e){return lm(Es(i),Es(e))&&i.limitType===e.limitType}function Wg(i){return`${am(Es(i))}|lt:${i.limitType}`}function Xa(i){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>Yg(o))).join(", ")}]`),Tu(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>ll(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>ll(o))).join(",")),`Target(${a})`})(Es(i))}; limitType=${i.limitType})`}function Iu(i,e){return e.isFoundDocument()&&(function(a,o){const d=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(d):ot.isDocumentKey(a.path)?a.path.isEqual(d):a.path.isImmediateParentOf(d)})(i,e)&&(function(a,o){for(const d of ho(a))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(i,e)&&(function(a,o){for(const d of a.filters)if(!d.matches(o))return!1;return!0})(i,e)&&(function(a,o){return!(a.startAt&&!(function(h,p,v){const b=v0(h,p,v);return h.inclusive?b<=0:b<0})(a.startAt,ho(a),o)||a.endAt&&!(function(h,p,v){const b=v0(h,p,v);return h.inclusive?b>=0:b>0})(a.endAt,ho(a),o))})(i,e)}function lj(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Qg(i){return(e,n)=>{let a=!1;for(const o of ho(i)){const d=oj(o,e,n);if(d!==0)return d;a=a||o.field.isKeyField()}return 0}}function oj(i,e,n){const a=i.field.isKeyField()?ot.comparator(e.key,n.key):(function(d,h,p){const v=h.data.field(d),b=p.data.field(d);return v!==null&&b!==null?al(v,b):ut(42886)})(i.field,e,n);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return ut(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,d]of a)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((n,a)=>{for(const[o,d]of a)e(o,d)}))}isEmpty(){return Rg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new er(ot.comparator);function ai(){return cj}const Xg=new er(ot.comparator);function Jl(...i){let e=Xg;for(const n of i)e=e.insert(n.key,n);return e}function Jg(i){let e=Xg;return i.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function la(){return mo()}function Zg(){return mo()}function mo(){return new ga((i=>i.toString()),((i,e)=>i.isEqual(e)))}const uj=new er(ot.comparator),dj=new Tr(ot.comparator);function Nt(...i){let e=dj;for(const n of i)e=e.add(n);return e}const hj=new Tr(yt);function mj(){return hj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(e)?"-0":e}}function ex(i){return{integerValue:""+i}}function pj(i,e){return F1(e)?ex(e):om(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function fj(i,e,n){return i instanceof pu?(function(o,d){const h={fields:{[Vg]:{stringValue:Mg},[Lg]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&sm(d)&&(d=Eu(d)),d&&(h.fields[Og]=d),{mapValue:h}})(n,e):i instanceof Eo?rx(i,e):i instanceof So?nx(i,e):(function(o,d){const h=tx(o,d),p=N0(h)+N0(o.Ee);return Dh(h)&&Dh(o.Ee)?ex(p):om(o.serializer,p)})(i,e)}function gj(i,e,n){return i instanceof Eo?rx(i,e):i instanceof So?nx(i,e):n}function tx(i,e){return i instanceof fu?(function(a){return Dh(a)||(function(d){return!!d&&"doubleValue"in d})(a)})(e)?e:{integerValue:0}:null}class pu extends Pu{}class Eo extends Pu{constructor(e){super(),this.elements=e}}function rx(i,e){const n=sx(e);for(const a of i.elements)n.some((o=>Is(o,a)))||n.push(a);return{arrayValue:{values:n}}}class So extends Pu{constructor(e){super(),this.elements=e}}function nx(i,e){let n=sx(e);for(const a of i.elements)n=n.filter((o=>!Is(o,a)));return{arrayValue:{values:n}}}class fu extends Pu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function N0(i){return hr(i.integerValue||i.doubleValue)}function sx(i){return im(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function xj(i,e){return i.field.isEqual(e.field)&&(function(a,o){return a instanceof Eo&&o instanceof Eo||a instanceof So&&o instanceof So?il(a.elements,o.elements,Is):a instanceof fu&&o instanceof fu?Is(a.Ee,o.Ee):a instanceof pu&&o instanceof pu})(i.transform,e.transform)}class yj{constructor(e,n){this.version=e,this.transformResults=n}}class ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Du{}function ix(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new lx(i.key,ri.none()):new Ro(i.key,i.data,ri.none());{const n=i.data,a=Xn.empty();let o=new Tr(Lr.comparator);for(let d of e.fields)if(!o.has(d)){let h=n.field(d);h===null&&d.length>1&&(d=d.popLast(),h=n.field(d)),h===null?a.delete(d):a.set(d,h),o=o.add(d)}return new xa(i.key,a,new fs(o.toArray()),ri.none())}}function vj(i,e,n){i instanceof Ro?(function(o,d,h){const p=o.value.clone(),v=_0(o.fieldTransforms,d,h.transformResults);p.setAll(v),d.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):i instanceof xa?(function(o,d,h){if(!Jc(o.precondition,d))return void d.convertToUnknownDocument(h.version);const p=_0(o.fieldTransforms,d,h.transformResults),v=d.data;v.setAll(ax(o)),v.setAll(p),d.convertToFoundDocument(h.version,v).setHasCommittedMutations()})(i,e,n):(function(o,d,h){d.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function po(i,e,n,a){return i instanceof Ro?(function(d,h,p,v){if(!Jc(d.precondition,h))return p;const b=d.value.clone(),T=T0(d.fieldTransforms,v,h);return b.setAll(T),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),null})(i,e,n,a):i instanceof xa?(function(d,h,p,v){if(!Jc(d.precondition,h))return p;const b=T0(d.fieldTransforms,v,h),T=h.data;return T.setAll(ax(d)),T.setAll(b),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((M=>M.field)))})(i,e,n,a):(function(d,h,p){return Jc(d.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(i,e,n)}function bj(i,e){let n=null;for(const a of i.fieldTransforms){const o=e.data.field(a.field),d=tx(a.transform,o||null);d!=null&&(n===null&&(n=Xn.empty()),n.set(a.field,d))}return n||null}function w0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&il(a,o,((d,h)=>xj(d,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ro extends Du{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xa extends Du{constructor(e,n,a,o,d=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function ax(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=i.data.field(n);e.set(n,a)}})),e}function _0(i,e,n){const a=new Map;Dt(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let o=0;o<n.length;o++){const d=i[o],h=d.transform,p=e.data.field(d.field);a.set(d.field,gj(h,p,n[o]))}return a}function T0(i,e,n){const a=new Map;for(const o of i){const d=o.transform,h=n.data.field(o.field);a.set(o.field,fj(d,h,e))}return a}class lx extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jj extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&vj(d,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=po(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=po(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=Zg();return this.mutations.forEach((o=>{const d=e.get(o.key),h=d.overlayedDocument;let p=this.applyToLocalView(h,d.mutatedFields);p=n.has(o.key)?null:p;const v=ix(h,p);v!==null&&a.set(o.key,v),h.isValidDocument()||h.convertToNoDocument(pt.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Nt())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,((n,a)=>w0(n,a)))&&il(this.baseMutations,e.baseMutations,((n,a)=>w0(n,a)))}}class cm{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){Dt(e.mutations.length===a.length,58842,{Ve:e.mutations.length,me:a.length});let o=(function(){return uj})();const d=e.mutations;for(let h=0;h<d.length;h++)o=o.insert(d[h].key,a[h].version);return new cm(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,Et;function _j(i){switch(i){case Ae.OK:return ut(64938);case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0;default:return ut(15467,{code:i})}}function ox(i){if(i===void 0)return ii("GRPC error has no .code"),Ae.UNKNOWN;switch(i){case xr.OK:return Ae.OK;case xr.CANCELLED:return Ae.CANCELLED;case xr.UNKNOWN:return Ae.UNKNOWN;case xr.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case xr.INTERNAL:return Ae.INTERNAL;case xr.UNAVAILABLE:return Ae.UNAVAILABLE;case xr.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case xr.NOT_FOUND:return Ae.NOT_FOUND;case xr.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case xr.ABORTED:return Ae.ABORTED;case xr.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case xr.DATA_LOSS:return Ae.DATA_LOSS;default:return ut(39323,{code:i})}}(Et=xr||(xr={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new Ci([4294967295,4294967295],0);function E0(i){const e=Ig().encode(i),n=new wg;return n.update(e),new Uint8Array(n.digest())}function S0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Ci([n,a],0),new Ci([o,d],0)]}class um{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(a<0)throw new Zl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ci.fromNumber(this.fe)}pe(e,n,a){let o=e.add(n.multiply(Ci.fromNumber(a)));return o.compare(Tj)===1&&(o=new Ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=E0(e),[a,o]=S0(n);for(let d=0;d<this.hashCount;d++){const h=this.pe(a,o,d);if(!this.ye(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),h=new um(d,o,n);return a.forEach((p=>h.insert(p))),h}insert(e){if(this.fe===0)return;const n=E0(e),[a,o]=S0(n);for(let d=0;d<this.hashCount;d++){const h=this.pe(a,o,d);this.we(h)}}we(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,a,o,d){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,zo.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Ru(pt.min(),o,new er(yt),ai(),Nt())}}class zo{constructor(e,n,a,o,d){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new zo(a,n,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.be=o}}class cx{constructor(e,n){this.targetId=e,this.De=n}}class ux{constructor(e,n,a=Fr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class A0{constructor(){this.ve=0,this.Ce=C0(),this.Fe=Fr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Nt(),n=Nt(),a=Nt();return this.Ce.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:ut(38017,{changeType:d})}})),new zo(this.Fe,this.Me,e,n,a)}ke(){this.xe=!1,this.Ce=C0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Ej{constructor(e){this.We=e,this.Ge=new Map,this.ze=ai(),this.je=Bc(),this.Je=Bc(),this.He=new er(yt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const a=this.tt(n);switch(e.state){case 0:this.nt(n)&&a.Be(e.resumeToken);break;case 1:a.Ue(),a.Oe||a.ke(),a.Be(e.resumeToken);break;case 2:a.Ue(),a.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(a.Ke(),a.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),a.Be(e.resumeToken));break;default:ut(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((a,o)=>{this.nt(o)&&n(o)}))}it(e){const n=e.targetId,a=e.De.count,o=this.st(n);if(o){const d=o.target;if(zh(d))if(a===0){const h=new ot(d.path);this.Xe(n,h,Xr.newNoDocument(h,pt.min()))}else Dt(a===1,20013,{expectedCount:a});else{const h=this.ot(n);if(h!==a){const p=this._t(e),v=p?this.ut(p,e,h):1;if(v!==0){this.rt(n);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,b)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:d=0}=n;let h,p;try{h=Mi(a).toUint8Array()}catch(v){if(v instanceof zg)return ma("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new um(h,o,d)}catch(v){return ma(v instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.fe===0?null:p}ut(e,n,a){return n.De.count===a-this.ht(e,n.targetId)?0:2}ht(e,n){const a=this.We.getRemoteKeysForTarget(n);let o=0;return a.forEach((d=>{const h=this.We.lt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,d,null),o++)})),o}Pt(e){const n=new Map;this.Ge.forEach(((d,h)=>{const p=this.st(h);if(p){if(d.current&&zh(p.target)){const v=new ot(p.target.path);this.Tt(v).has(h)||this.It(h,v)||this.Xe(h,v,Xr.newNoDocument(v,e))}d.Ne&&(n.set(h,d.Le()),d.ke())}}));let a=Nt();this.Je.forEach(((d,h)=>{let p=!0;h.forEachWhile((v=>{const b=this.st(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(d))})),this.ze.forEach(((d,h)=>h.setReadTime(e)));const o=new Ru(e,n,this.He,this.ze,a);return this.ze=ai(),this.je=Bc(),this.Je=Bc(),this.He=new er(yt),o}Ze(e,n){if(!this.nt(e))return;const a=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,a),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,a){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),a&&(this.ze=this.ze.insert(n,a))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new A0,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Tr(yt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Tr(yt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ye("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new A0),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Bc(){return new er(ot.comparator)}function C0(){return new er(ot.comparator)}const Sj={asc:"ASCENDING",desc:"DESCENDING"},Aj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cj={and:"AND",or:"OR"};class Ij{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vh(i,e){return i.useProto3Json||Tu(e)?e:{value:e}}function gu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dx(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(i,e){return gu(i,e.toTimestamp())}function Ss(i){return Dt(!!i,49232),pt.fromTimestamp((function(n){const a=zi(n);return new Kt(a.seconds,a.nanos)})(i))}function dm(i,e){return Oh(i,e).canonicalString()}function Oh(i,e){const n=(function(o){return new Zt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function hx(i){const e=Zt.fromString(i);return Dt(xx(e),10190,{key:e.toString()}),e}function Lh(i,e){return dm(i.databaseId,e.path)}function ph(i,e){const n=hx(e);if(n.get(1)!==i.databaseId.projectId)throw new tt(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new tt(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ot(px(n))}function mx(i,e){return dm(i.databaseId,e)}function Dj(i){const e=hx(i);return e.length===4?Zt.emptyPath():px(e)}function Fh(i){return new Zt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function px(i){return Dt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function I0(i,e,n){return{name:Lh(i,e),fields:n.value.mapValue.fields}}function Rj(i,e){let n;if("targetChange"in e){e.targetChange;const a=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:ut(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(b,T){return b.useProto3Json?(Dt(T===void 0||typeof T=="string",58123),Fr.fromBase64String(T||"")):(Dt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Fr.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(b){const T=b.code===void 0?Ae.UNKNOWN:ox(b.code);return new tt(T,b.message||"")})(h);n=new ux(a,o,d,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=ph(i,a.document.name),d=Ss(a.document.updateTime),h=a.document.createTime?Ss(a.document.createTime):pt.min(),p=new Xn({mapValue:{fields:a.document.fields}}),v=Xr.newFoundDocument(o,d,h,p),b=a.targetIds||[],T=a.removedTargetIds||[];n=new Zc(b,T,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=ph(i,a.document),d=a.readTime?Ss(a.readTime):pt.min(),h=Xr.newNoDocument(o,d),p=a.removedTargetIds||[];n=new Zc([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=ph(i,a.document),d=a.removedTargetIds||[];n=new Zc([],d,o,null)}else{if(!("filter"in e))return ut(11601,{At:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:d}=a,h=new wj(o,d),p=a.targetId;n=new cx(p,h)}}return n}function zj(i,e){let n;if(e instanceof Ro)n={update:I0(i,e.key,e.value)};else if(e instanceof lx)n={delete:Lh(i,e.key)};else if(e instanceof xa)n={update:I0(i,e.key,e.data),updateMask:Kj(e.fieldMask)};else{if(!(e instanceof jj))return ut(16599,{Rt:e.type});n={verify:Lh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(d,h){const p=h.transform;if(p instanceof pu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Eo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof So)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fu)return{fieldPath:h.field.canonicalString(),increment:p.Ee};throw ut(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:Pj(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:ut(27497)})(i,e.precondition)),n}function Mj(i,e){return i&&i.length>0?(Dt(e!==void 0,14353),i.map((n=>(function(o,d){let h=o.updateTime?Ss(o.updateTime):Ss(d);return h.isEqual(pt.min())&&(h=Ss(d)),new yj(h,o.transformResults||[])})(n,e)))):[]}function Vj(i,e){return{documents:[mx(i,e.path)]}}function Oj(i,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=mx(i,o);const d=(function(b){if(b.length!==0)return gx(Ps.create(b,"and"))})(e.filters);d&&(n.structuredQuery.where=d);const h=(function(b){if(b.length!==0)return b.map((T=>(function(V){return{field:Ja(V.field),direction:$j(V.dir)}})(T)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Vh(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{Vt:n,parent:o}}function Lj(i){let e=Dj(i.parent);const n=i.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){Dt(a===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let d=[];n.where&&(d=(function(M){const V=fx(M);return V instanceof Ps&&Hg(V)?V.getFilters():[V]})(n.where));let h=[];n.orderBy&&(h=(function(M){return M.map((V=>(function(oe){return new mu(Za(oe.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(oe.direction))})(V)))})(n.orderBy));let p=null;n.limit&&(p=(function(M){let V;return V=typeof M=="object"?M.value:M,Tu(V)?null:V})(n.limit));let v=null;n.startAt&&(v=(function(M){const V=!!M.before,X=M.values||[];return new hu(X,V)})(n.startAt));let b=null;return n.endAt&&(b=(function(M){const V=!M.before,X=M.values||[];return new hu(X,V)})(n.endAt)),sj(e,o,h,d,p,"F",v,b)}function Fj(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fx(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Za(n.unaryFilter.field);return wr.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Za(n.unaryFilter.field);return wr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Za(n.unaryFilter.field);return wr.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Za(n.unaryFilter.field);return wr.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}})(i):i.fieldFilter!==void 0?(function(n){return wr.create(Za(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ps.create(n.compositeFilter.filters.map((a=>fx(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ut(1026)}})(n.compositeFilter.op))})(i):ut(30097,{filter:i})}function $j(i){return Sj[i]}function Bj(i){return Aj[i]}function Uj(i){return Cj[i]}function Ja(i){return{fieldPath:i.canonicalString()}}function Za(i){return Lr.fromServerFormat(i.fieldPath)}function gx(i){return i instanceof wr?(function(n){if(n.op==="=="){if(y0(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NAN"}};if(x0(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y0(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NAN"}};if(x0(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(n.field),op:Bj(n.op),value:n.value}}})(i):i instanceof Ps?(function(n){const a=n.getFilters().map((o=>gx(o)));return a.length===1?a[0]:{compositeFilter:{op:Uj(n.op),filters:a}}})(i):ut(54877,{filter:i})}function Kj(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xx(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,a,o,d=pt.min(),h=pt.min(),p=Fr.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.gt=e}}function Gj(i){const e=Lj({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.Dn=new qj}addToCollectionParentIndex(e,n){return this.Dn.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(Ri.min())}updateCollectionGroup(e,n,a){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}}class qj{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new Tr(Zt.comparator),d=!o.has(a);return this.index[n]=o.add(a),d}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Tr(Zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yx=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(yx,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ol(0)}static ur(){return new ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="LruGarbageCollector",vx=1048576;function R0([i,e],[n,a]){const o=yt(i,n);return o===0?yt(e,a):o}class Wj{constructor(e){this.Tr=e,this.buffer=new Tr(R0),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();R0(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Qj{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ye(D0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ml(n)?Ye(D0,"Ignoring IndexedDB error during garbage collection: ",n):await hl(n)}await this.Rr(3e5)}))}}class Xj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ke.resolve(_u.ue);const a=new Wj(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(P0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P0):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let a,o,d,h,p,v,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((M=>(M>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),o=this.params.maximumSequenceNumbersToCollect):o=M,h=Date.now(),this.nthSequenceNumber(e,o)))).next((M=>(a=M,p=Date.now(),this.removeTargets(e,a,n)))).next((M=>(d=M,v=Date.now(),this.removeOrphanedDocuments(e,a)))).next((M=>(b=Date.now(),Qa()<=St.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${d} targets in `+(v-p)+`ms
	Removed ${M} documents in `+(b-v)+`ms
Total Duration: ${b-T}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:M}))))}}function Jj(i,e){return new Xj(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.changes=new ga((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ke.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&po(a.mutation,o,fs.empty(),Kt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Nt()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Nt()){const o=la();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((d=>{let h=Jl();return d.forEach(((p,v)=>{h=h.insert(p,v.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=la();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Nt())))}populateOverlays(e,n,a){const o=[];return a.forEach((d=>{n.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,a,o){let d=ai();const h=mo(),p=(function(){return mo()})();return n.forEach(((v,b)=>{const T=a.get(b.key);o.has(b.key)&&(T===void 0||T.mutation instanceof xa)?d=d.insert(b.key,b):T!==void 0?(h.set(b.key,T.mutation.getFieldMask()),po(T.mutation,b,T.mutation.getFieldMask(),Kt.now())):h.set(b.key,fs.empty())})),this.recalculateAndSaveOverlays(e,d).next((v=>(v.forEach(((b,T)=>h.set(b,T))),n.forEach(((b,T)=>{var M;return p.set(b,new ek(T,(M=h.get(b))!==null&&M!==void 0?M:null))})),p)))}recalculateAndSaveOverlays(e,n){const a=mo();let o=new er(((h,p)=>h-p)),d=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((v=>{const b=n.get(v);if(b===null)return;let T=a.get(v)||fs.empty();T=p.applyToLocalView(b,T),a.set(v,T);const M=(o.get(p.batchId)||Nt()).add(v);o=o.insert(p.batchId,M)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),b=v.key,T=v.value,M=Zg();T.forEach((V=>{if(!d.has(V)){const X=ix(n.get(V),a.get(V));X!==null&&M.set(V,X),d=d.add(V)}})),h.push(this.documentOverlayCache.saveOverlays(e,b,M))}return ke.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(h){return ot.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ij(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((d=>{const h=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-d.size):ke.resolve(la());let p=No,v=d;return h.next((b=>ke.forEach(b,((T,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),d.get(T)?ke.resolve():this.remoteDocumentCache.getEntry(e,T).next((V=>{v=v.insert(T,V)}))))).next((()=>this.populateOverlays(e,b,d))).next((()=>this.computeViews(e,v,b,Nt()))).next((T=>({batchId:p,changes:Jg(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ot(n)).next((a=>{let o=Jl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const d=n.collectionGroup;let h=Jl();return this.indexManager.getCollectionParents(e,d).next((p=>ke.forEach(p,(v=>{const b=(function(M,V){return new Su(V,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)})(n,v.child(d));return this.getDocumentsMatchingCollectionQuery(e,b,a,o).next((T=>{T.forEach(((M,V)=>{h=h.insert(M,V)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(d=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,d,o)))).next((h=>{d.forEach(((v,b)=>{const T=b.getKey();h.get(T)===null&&(h=h.insert(T,Xr.newInvalidDocument(T)))}));let p=Jl();return h.forEach(((v,b)=>{const T=d.get(v);T!==void 0&&po(T.mutation,b,fs.empty(),Kt.now()),Iu(n,b)&&(p=p.insert(v,b))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ke.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ss(o.createTime)}})(n)),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(o){return{name:o.name,query:Gj(o.bundledQuery),readTime:Ss(o.readTime)}})(n)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.overlays=new er(ot.comparator),this.kr=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const a=la();return ke.forEach(n,(o=>this.getOverlay(e,o).next((d=>{d!==null&&a.set(o,d)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,d)=>{this.wt(e,n,d)})),ke.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.kr.get(a);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.kr.delete(a)),ke.resolve()}getOverlaysForCollection(e,n,a){const o=la(),d=n.length+1,h=new ot(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const v=p.getNext().value,b=v.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===d&&v.largestBatchId>a&&o.set(v.getKey(),v)}return ke.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let d=new er(((b,T)=>b-T));const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>a){let T=d.get(b.largestBatchId);T===null&&(T=la(),d=d.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const p=la(),v=d.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,T)=>p.set(b,T))),!(p.size()>=o)););return ke.resolve(p)}wt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(a.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new Nj(n,a));let d=this.kr.get(n);d===void 0&&(d=Nt(),this.kr.set(n,d)),this.kr.set(n,d.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.qr=new Tr(Dr.Qr),this.$r=new Tr(Dr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const a=new Dr(e,n);this.qr=this.qr.add(a),this.$r=this.$r.add(a)}Kr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new Dr(e,n))}Gr(e,n){e.forEach((a=>this.removeReference(a,n)))}zr(e){const n=new ot(new Zt([])),a=new Dr(n,e),o=new Dr(n,e+1),d=[];return this.$r.forEachInRange([a,o],(h=>{this.Wr(h),d.push(h.key)})),d}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ot(new Zt([])),a=new Dr(n,e),o=new Dr(n,e+1);let d=Nt();return this.$r.forEachInRange([a,o],(h=>{d=d.add(h.key)})),d}containsKey(e){const n=new Dr(e,0),a=this.qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Dr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ot.comparator(e.key,n.key)||yt(e.Hr,n.Hr)}static Ur(e,n){return yt(e.Hr,n.Hr)||ot.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Tr(Dr.Qr)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const d=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new kj(d,n,a,o);this.mutationQueue.push(h);for(const p of o)this.Yr=this.Yr.add(new Dr(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ke.resolve(h)}lookupMutationBatch(e,n){return ke.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),d=o<0?0:o;return ke.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?nm:this.er-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Dr(n,0),o=new Dr(n,Number.POSITIVE_INFINITY),d=[];return this.Yr.forEachInRange([a,o],(h=>{const p=this.Zr(h.Hr);d.push(p)})),ke.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Tr(yt);return n.forEach((o=>{const d=new Dr(o,0),h=new Dr(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([d,h],(p=>{a=a.add(p.Hr)}))})),ke.resolve(this.ei(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let d=a;ot.isDocumentKey(d)||(d=d.child(""));const h=new Dr(new ot(d),0);let p=new Tr(yt);return this.Yr.forEachWhile((v=>{const b=v.key.path;return!!a.isPrefixOf(b)&&(b.length===o&&(p=p.add(v.Hr)),!0)}),h),ke.resolve(this.ei(p))}ei(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Dt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Yr;return ke.forEach(n.mutations,(o=>{const d=new Dr(o.key,n.batchId);return a=a.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=a}))}rr(e){}containsKey(e,n){const a=new Dr(n,0),o=this.Yr.firstAfterOrEqual(a);return ke.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.ni=e,this.docs=(function(){return new er(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),d=o?o.size:0,h=this.ni(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-d,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ke.resolve(a?a.document.mutableCopy():Xr.newInvalidDocument(n))}getEntries(e,n){let a=ai();return n.forEach((o=>{const d=this.docs.get(o);a=a.insert(o,d?d.document.mutableCopy():Xr.newInvalidDocument(o))})),ke.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let d=ai();const h=n.path,p=new ot(h.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:b,value:{document:T}}=v.getNext();if(!h.isPrefixOf(b.path))break;b.path.length>h.length+1||M1(z1(T),a)<=0||(o.has(T.key)||Iu(n,T))&&(d=d.insert(T.key,T.mutableCopy()))}return ke.resolve(d)}getAllFromCollectionGroup(e,n,a,o){ut(9500)}ri(e,n){return ke.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new lk(this)}getSize(e){return ke.resolve(this.size)}}class lk extends Zj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(a)})),ke.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.persistence=e,this.ii=new ga((n=>am(n)),lm),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.si=0,this.oi=new hm,this.targetCount=0,this._i=ol.ar()}forEachTarget(e,n){return this.ii.forEach(((a,o)=>n(o))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.si&&(this.si=n),ke.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ol(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.hr(n),ke.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,a){let o=0;const d=[];return this.ii.forEach(((h,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ii.delete(h),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ke.waitFor(d).next((()=>o))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const a=this.ii.get(n)||null;return ke.resolve(a)}addMatchingKeys(e,n,a){return this.oi.Kr(n,a),ke.resolve()}removeMatchingKeys(e,n,a){this.oi.Gr(n,a);const o=this.persistence.referenceDelegate,d=[];return o&&n.forEach((h=>{d.push(o.markPotentiallyOrphaned(e,h))})),ke.waitFor(d)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const a=this.oi.Jr(n);return ke.resolve(a)}containsKey(e,n){return ke.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.ai={},this.overlays={},this.ui=new _u(0),this.ci=!1,this.ci=!0,this.li=new sk,this.referenceDelegate=e(this),this.hi=new ok(this),this.indexManager=new Yj,this.remoteDocumentCache=(function(o){return new ak(o)})((a=>this.referenceDelegate.Pi(a))),this.serializer=new Hj(n),this.Ti=new rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ai[e.toKey()];return a||(a=new ik(n,this.referenceDelegate),this.ai[e.toKey()]=a),a}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,a){Ye("MemoryPersistence","Starting transaction:",e);const o=new ck(this.ui.next());return this.referenceDelegate.Ii(),a(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ei(e,n){return ke.or(Object.values(this.ai).map((a=>()=>a.containsKey(e,n))))}}class ck extends O1{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Ai=new hm,this.Ri=null}static Vi(e){return new mm(e)}get mi(){if(this.Ri)return this.Ri;throw ut(60996)}addReference(e,n,a){return this.Ai.addReference(a,n),this.mi.delete(a.toString()),ke.resolve()}removeReference(e,n,a){return this.Ai.removeReference(a,n),this.mi.add(a.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ke.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((o=>this.mi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((d=>this.mi.add(d.toString())))})).next((()=>a.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.mi,(a=>{const o=ot.fromPath(a);return this.fi(e,o).next((d=>{d||n.removeEntry(o,pt.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((a=>{a?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ke.or([()=>ke.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class xu{constructor(e,n){this.persistence=e,this.gi=new ga((a=>$1(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=Jj(this,n)}static Vi(e,n){return new xu(e,n)}Ii(){}di(e){return ke.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}yr(e){let n=0;return this.gr(e,(a=>{n++})).next((()=>n))}gr(e,n){return ke.forEach(this.gi,((a,o)=>this.Sr(e,a,o).next((d=>d?ke.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,n).next((p=>{p||(a++,d.removeEntry(h,pt.min()))})))).next((()=>d.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ke.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.gi.set(a,e.currentSequenceNumber),ke.resolve()}removeReference(e,n,a){return this.gi.set(a,e.currentSequenceNumber),ke.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ke.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qc(e.data.value)),n}Sr(e,n,a){return ke.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return ke.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Is=a,this.ds=o}static Es(e,n){let a=Nt(),o=Nt();for(const d of n.docChanges)switch(d.type){case 0:a=a.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new pm(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return rb()?8:L1(eb())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,a,o){const d={result:null};return this.ps(e,n).next((h=>{d.result=h})).next((()=>{if(!d.result)return this.ys(e,n,o,a).next((h=>{d.result=h}))})).next((()=>{if(d.result)return;const h=new uk;return this.ws(e,n,h).next((p=>{if(d.result=p,this.Rs)return this.Ss(e,n,h,p.size)}))})).next((()=>d.result))}Ss(e,n,a,o){return a.documentReadCount<this.Vs?(Qa()<=St.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ke.resolve()):(Qa()<=St.DEBUG&&Ye("QueryEngine","Query:",Xa(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.fs*o?(Qa()<=St.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(n))):ke.resolve())}ps(e,n){if(k0(n))return ke.resolve(null);let a=Es(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Mh(n,null,"F"),a=Es(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((d=>{const h=Nt(...d);return this.gs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,a).next((v=>{const b=this.bs(n,p);return this.Ds(n,b,h,v.readTime)?this.ps(e,Mh(n,null,"F")):this.vs(e,b,n,v)}))))})))))}ys(e,n,a,o){return k0(n)||o.isEqual(pt.min())?ke.resolve(null):this.gs.getDocuments(e,a).next((d=>{const h=this.bs(n,d);return this.Ds(n,h,a,o)?ke.resolve(null):(Qa()<=St.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xa(n)),this.vs(e,h,n,R1(o,No)).next((p=>p)))}))}bs(e,n){let a=new Tr(Qg(e));return n.forEach(((o,d)=>{Iu(e,d)&&(a=a.add(d))})),a}Ds(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const d=e.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}ws(e,n,a){return Qa()<=St.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.gs.getDocumentsMatchingQuery(e,n,Ri.min(),a)}vs(e,n,a,o){return this.gs.getDocumentsMatchingQuery(e,a,o).next((d=>(n.forEach((h=>{d=d.insert(h.key,h)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="LocalStore",hk=3e8;class mk{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new er(yt),this.Ms=new ga((d=>am(d)),lm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(a)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function pk(i,e,n,a){return new mk(i,e,n,a)}async function jx(i,e){const n=ft(i);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((d=>(o=d,n.Ns(e),n.mutationQueue.getAllMutationBatches(a)))).next((d=>{const h=[],p=[];let v=Nt();for(const b of o){h.push(b.batchId);for(const T of b.mutations)v=v.add(T.key)}for(const b of d){p.push(b.batchId);for(const T of b.mutations)v=v.add(T.key)}return n.localDocuments.getDocuments(a,v).next((b=>({Bs:b,removedBatchIds:h,addedBatchIds:p})))}))}))}function fk(i,e){const n=ft(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),d=n.Os.newChangeBuffer({trackRemovals:!0});return(function(p,v,b,T){const M=b.batch,V=M.keys();let X=ke.resolve();return V.forEach((oe=>{X=X.next((()=>T.getEntry(v,oe))).next((F=>{const z=b.docVersions.get(oe);Dt(z!==null,48541),F.version.compareTo(z)<0&&(M.applyToRemoteDocument(F,b),F.isValidDocument()&&(F.setReadTime(b.commitVersion),T.addEntry(F)))}))})),X.next((()=>p.mutationQueue.removeMutationBatch(v,M)))})(n,a,e,d).next((()=>d.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let v=Nt();for(let b=0;b<p.mutationResults.length;++b)p.mutationResults[b].transformResults.length>0&&(v=v.add(p.batch.mutations[b].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function kx(i){const e=ft(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function gk(i,e){const n=ft(i),a=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const h=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const p=[];e.targetChanges.forEach(((T,M)=>{const V=o.get(M);if(!V)return;p.push(n.hi.removeMatchingKeys(d,T.removedDocuments,M).next((()=>n.hi.addMatchingKeys(d,T.addedDocuments,M))));let X=V.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(M)!==null?X=X.withResumeToken(Fr.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):T.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(T.resumeToken,a)),o=o.insert(M,X),(function(F,z,ne){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=hk?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(V,X,T)&&p.push(n.hi.updateTargetData(d,X))}));let v=ai(),b=Nt();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(d,T))})),p.push(xk(d,h,e.documentUpdates).next((T=>{v=T.Ls,b=T.ks}))),!a.isEqual(pt.min())){const T=n.hi.getLastRemoteSnapshotVersion(d).next((M=>n.hi.setTargetsMetadata(d,d.currentSequenceNumber,a)));p.push(T)}return ke.waitFor(p).next((()=>h.apply(d))).next((()=>n.localDocuments.getLocalViewOfDocuments(d,v,b))).next((()=>v))})).then((d=>(n.Fs=o,d)))}function xk(i,e,n){let a=Nt(),o=Nt();return n.forEach((d=>a=a.add(d))),e.getEntries(i,a).next((d=>{let h=ai();return n.forEach(((p,v)=>{const b=d.get(p);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(pt.min())?(e.removeEntry(p,v.readTime),h=h.insert(p,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(v),h=h.insert(p,v)):Ye(fm,"Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",v.version)})),{Ls:h,ks:o}}))}function yk(i,e){const n=ft(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=nm),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function vk(i,e){const n=ft(i);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.hi.getTargetData(a,e).next((d=>d?(o=d,ke.resolve(o)):n.hi.allocateTargetId(a).next((h=>(o=new Ei(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.hi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Fs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(a.targetId,a),n.Ms.set(e,a.targetId)),a}))}async function $h(i,e,n){const a=ft(i),o=a.Fs.get(e),d=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",d,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ml(h))throw h;Ye(fm,`Failed to update sequence numbers for target ${e}: ${h}`)}a.Fs=a.Fs.remove(e),a.Ms.delete(o.target)}function z0(i,e,n){const a=ft(i);let o=pt.min(),d=Nt();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(v,b,T){const M=ft(v),V=M.Ms.get(T);return V!==void 0?ke.resolve(M.Fs.get(V)):M.hi.getTargetData(b,T)})(a,h,Es(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,a.hi.getMatchingKeysForTargetId(h,p.targetId).next((v=>{d=v}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,n?o:pt.min(),n?d:Nt()))).next((p=>(bk(a,lj(e),p),{documents:p,qs:d})))))}function bk(i,e,n){let a=i.xs.get(e)||pt.min();n.forEach(((o,d)=>{d.readTime.compareTo(a)>0&&(a=d.readTime)})),i.xs.set(e,a)}class M0{constructor(){this.activeTargetIds=mj()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jk{constructor(){this.Fo=new M0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,a){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new M0,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="ConnectivityMonitor";class O0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ye(V0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ye(V0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Bh(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="RestConnection",Nk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wk{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.Ko=this.databaseId.database===uu?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,d){const h=Bh(),p=this.Go(e,n.toUriEncodedString());Ye(fh,`Sending RPC '${e}' ${h}:`,p,a);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,o,d);const{host:b}=new URL(p),T=xg(b);return this.jo(e,p,v,a,T).then((M=>(Ye(fh,`Received RPC '${e}' ${h}: `,M),M)),(M=>{throw ma(fh,`RPC '${e}' ${h} failed with error: `,M,"url: ",p,"request:",a),M}))}Jo(e,n,a,o,d,h){return this.Wo(e,n,a,o,d)}zo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,d)=>e[d]=o)),a&&a.headers.forEach(((o,d)=>e[d]=o))}Go(e,n){const a=Nk[e];return`${this.$o}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="WebChannelConnection";class Tk extends wk{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,a,o,d){const h=Bh();return new Promise(((p,v)=>{const b=new _g;b.setWithCredentials(!0),b.listenOnce(Tg.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Wc.NO_ERROR:const M=b.getResponseJson();Ye(qr,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(M)),p(M);break;case Wc.TIMEOUT:Ye(qr,`RPC '${e}' ${h} timed out`),v(new tt(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const V=b.getStatus();if(Ye(qr,`RPC '${e}' ${h} failed with status:`,V,"response text:",b.getResponseText()),V>0){let X=b.getResponseJson();Array.isArray(X)&&(X=X[0]);const oe=X==null?void 0:X.error;if(oe&&oe.status&&oe.message){const F=(function(ne){const Z=ne.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(Z)>=0?Z:Ae.UNKNOWN})(oe.status);v(new tt(F,oe.message))}else v(new tt(Ae.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new tt(Ae.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{c_:e,streamId:h,l_:b.getLastErrorCode(),h_:b.getLastError()})}}finally{Ye(qr,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);Ye(qr,`RPC '${e}' ${h} sending request:`,o),b.send(n,"POST",T,a,15)}))}P_(e,n,a){const o=Bh(),d=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ag(),p=Sg(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,n,a),v.encodeInitMessageHeaders=!0;const T=d.join("");Ye(qr,`Creating RPC '${e}' stream ${o}: ${T}`,v);const M=h.createWebChannel(T,v);this.T_(M);let V=!1,X=!1;const oe=new _k({Ho:z=>{X?Ye(qr,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(V||(Ye(qr,`Opening RPC '${e}' stream ${o} transport.`),M.open(),V=!0),Ye(qr,`RPC '${e}' stream ${o} sending:`,z),M.send(z))},Yo:()=>M.close()}),F=(z,ne,Z)=>{z.listen(ne,(ee=>{try{Z(ee)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return F(M,Xl.EventType.OPEN,(()=>{X||(Ye(qr,`RPC '${e}' stream ${o} transport opened.`),oe.s_())})),F(M,Xl.EventType.CLOSE,(()=>{X||(X=!0,Ye(qr,`RPC '${e}' stream ${o} transport closed`),oe.__(),this.I_(M))})),F(M,Xl.EventType.ERROR,(z=>{X||(X=!0,ma(qr,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),oe.__(new tt(Ae.UNAVAILABLE,"The operation could not be completed")))})),F(M,Xl.EventType.MESSAGE,(z=>{var ne;if(!X){const Z=z.data[0];Dt(!!Z,16349);const ee=Z,Q=(ee==null?void 0:ee.error)||((ne=ee[0])===null||ne===void 0?void 0:ne.error);if(Q){Ye(qr,`RPC '${e}' stream ${o} received error:`,Q);const ye=Q.status;let je=(function(A){const k=xr[A];if(k!==void 0)return ox(k)})(ye),O=Q.message;je===void 0&&(je=Ae.INTERNAL,O="Unknown error status: "+ye+" with message "+Q.message),X=!0,oe.__(new tt(je,O)),M.close()}else Ye(qr,`RPC '${e}' stream ${o} received:`,Z),oe.a_(Z)}})),F(p,Eg.STAT_EVENT,(z=>{z.stat===Ch.PROXY?Ye(qr,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Ch.NOPROXY&&Ye(qr,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{oe.o_()}),0),oe}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(i){return new Ij(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,a=1e3,o=1.5,d=6e4){this.Fi=e,this.timerId=n,this.d_=a,this.E_=o,this.A_=d,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-a);o>0&&Ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="PersistentStream";class wx{constructor(e,n,a,o,d,h,p,v){this.Fi=e,this.w_=a,this.S_=o,this.connection=d,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Nx(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Ae.RESOURCE_EXHAUSTED?(ii(n.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.b_===n&&this.W_(a,o)}),(a=>{e((()=>{const o=new tt(Ae.UNKNOWN,"Fetching auth token failed: "+a.message);return this.G_(o)}))}))}W_(e,n){const a=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.e_((()=>{a((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{a((()=>this.G_(o)))})),this.stream.onMessage((o=>{a((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ye(L0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Ye(L0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ek extends wx{constructor(e,n,a,o,d,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=d}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Rj(this.serializer,e),a=(function(d){if(!("targetChange"in d))return pt.min();const h=d.targetChange;return h.targetIds&&h.targetIds.length?pt.min():h.readTime?Ss(h.readTime):pt.min()})(e);return this.listener.J_(n,a)}H_(e){const n={};n.database=Fh(this.serializer),n.addTarget=(function(d,h){let p;const v=h.target;if(p=zh(v)?{documents:Vj(d,v)}:{query:Oj(d,v).Vt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=dx(d,h.resumeToken);const b=Vh(d,h.expectedCount);b!==null&&(p.expectedCount=b)}else if(h.snapshotVersion.compareTo(pt.min())>0){p.readTime=gu(d,h.snapshotVersion.toTimestamp());const b=Vh(d,h.expectedCount);b!==null&&(p.expectedCount=b)}return p})(this.serializer,e);const a=Fj(this.serializer,e);a&&(n.labels=a),this.k_(n)}Y_(e){const n={};n.database=Fh(this.serializer),n.removeTarget=e,this.k_(n)}}class Sk extends wx{constructor(e,n,a,o,d,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=d}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Mj(e.writeResults,e.commitTime),a=Ss(e.commitTime);return this.listener.ta(a,n)}na(){const e={};e.database=Fh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>zj(this.serializer,a)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{}class Ck extends Ak{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new tt(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,h])=>this.connection.Wo(e,Oh(n,a),o,d,h))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new tt(Ae.UNKNOWN,d.toString())}))}Jo(e,n,a,o,d){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Jo(e,Oh(n,a),o,h,p,d))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new tt(Ae.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ii(n),this._a=!1):Ye("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class Pk{constructor(e,n,a,o,d){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=d,this.Ea.xo((h=>{a.enqueueAndForget((async()=>{ya(this)&&(Ye(pa,"Restarting streams for network reachability change."),await(async function(v){const b=ft(v);b.Ia.add(4),await Mo(b),b.Aa.set("Unknown"),b.Ia.delete(4),await Mu(b)})(this))}))})),this.Aa=new Ik(a,o)}}async function Mu(i){if(ya(i))for(const e of i.da)await e(!0)}async function Mo(i){for(const e of i.da)await e(!1)}function _x(i,e){const n=ft(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),vm(n)?ym(n):pl(n).x_()&&xm(n,e))}function gm(i,e){const n=ft(i),a=pl(n);n.Ta.delete(e),a.x_()&&Tx(n,e),n.Ta.size===0&&(a.x_()?a.B_():ya(n)&&n.Aa.set("Unknown"))}function xm(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pl(i).H_(e)}function Tx(i,e){i.Ra.$e(e),pl(i).Y_(e)}function ym(i){i.Ra=new Ej({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),pl(i).start(),i.Aa.aa()}function vm(i){return ya(i)&&!pl(i).M_()&&i.Ta.size>0}function ya(i){return ft(i).Ia.size===0}function Ex(i){i.Ra=void 0}async function Dk(i){i.Aa.set("Online")}async function Rk(i){i.Ta.forEach(((e,n)=>{xm(i,e)}))}async function zk(i,e){Ex(i),vm(i)?(i.Aa.la(e),ym(i)):i.Aa.set("Unknown")}async function Mk(i,e,n){if(i.Aa.set("Online"),e instanceof ux&&e.state===2&&e.cause)try{await(async function(o,d){const h=d.cause;for(const p of d.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ta.delete(p),o.Ra.removeTarget(p))})(i,e)}catch(a){Ye(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await yu(i,a)}else if(e instanceof Zc?i.Ra.Ye(e):e instanceof cx?i.Ra.it(e):i.Ra.et(e),!n.isEqual(pt.min()))try{const a=await kx(i.localStore);n.compareTo(a)>=0&&await(function(d,h){const p=d.Ra.Pt(h);return p.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const T=d.Ta.get(b);T&&d.Ta.set(b,T.withResumeToken(v.resumeToken,h))}})),p.targetMismatches.forEach(((v,b)=>{const T=d.Ta.get(v);if(!T)return;d.Ta.set(v,T.withResumeToken(Fr.EMPTY_BYTE_STRING,T.snapshotVersion)),Tx(d,v);const M=new Ei(T.target,v,b,T.sequenceNumber);xm(d,M)})),d.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(a){Ye(pa,"Failed to raise snapshot:",a),await yu(i,a)}}async function yu(i,e,n){if(!ml(e))throw e;i.Ia.add(1),await Mo(i),i.Aa.set("Offline"),n||(n=()=>kx(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ye(pa,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await Mu(i)}))}function Sx(i,e){return e().catch((n=>yu(i,n,e)))}async function Vu(i){const e=ft(i),n=Oi(e);let a=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:nm;for(;Vk(e);)try{const o=await yk(e.localStore,a);if(o===null){e.Pa.length===0&&n.B_();break}a=o.batchId,Ok(e,o)}catch(o){await yu(e,o)}Ax(e)&&Cx(e)}function Vk(i){return ya(i)&&i.Pa.length<10}function Ok(i,e){i.Pa.push(e);const n=Oi(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function Ax(i){return ya(i)&&!Oi(i).M_()&&i.Pa.length>0}function Cx(i){Oi(i).start()}async function Lk(i){Oi(i).na()}async function Fk(i){const e=Oi(i);for(const n of i.Pa)e.X_(n.mutations)}async function $k(i,e,n){const a=i.Pa.shift(),o=cm.from(a,e,n);await Sx(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Vu(i)}async function Bk(i,e){e&&Oi(i).Z_&&await(async function(a,o){if((function(h){return _j(h)&&h!==Ae.ABORTED})(o.code)){const d=a.Pa.shift();Oi(a).N_(),await Sx(a,(()=>a.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Vu(a)}})(i,e),Ax(i)&&Cx(i)}async function F0(i,e){const n=ft(i);n.asyncQueue.verifyOperationInProgress(),Ye(pa,"RemoteStore received new credentials");const a=ya(n);n.Ia.add(3),await Mo(n),a&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Mu(n)}async function Uk(i,e){const n=ft(i);e?(n.Ia.delete(2),await Mu(n)):e||(n.Ia.add(2),await Mo(n),n.Aa.set("Unknown"))}function pl(i){return i.Va||(i.Va=(function(n,a,o){const d=ft(n);return d.ia(),new Ek(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(i.datastore,i.asyncQueue,{Zo:Dk.bind(null,i),e_:Rk.bind(null,i),n_:zk.bind(null,i),J_:Mk.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),vm(i)?ym(i):i.Aa.set("Unknown")):(await i.Va.stop(),Ex(i))}))),i.Va}function Oi(i){return i.ma||(i.ma=(function(n,a,o){const d=ft(n);return d.ia(),new Sk(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:Lk.bind(null,i),n_:Bk.bind(null,i),ea:Fk.bind(null,i),ta:$k.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await Vu(i)):(await i.ma.stop(),i.Pa.length>0&&(Ye(pa,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,a,o,d){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=d,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,d){const h=Date.now()+a,p=new bm(e,n,h,o,d);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jm(i,e){if(ii("AsyncQueue",`${e}: ${i}`),ml(i))return new tt(Ae.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{static emptySet(e){return new tl(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||ot.comparator(n.key,a.key):(n,a)=>ot.comparator(n.key,a.key),this.keyedMap=Jl(),this.sortedSet=new er(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof tl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,d=a.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new tl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.fa=new er(ot.comparator)}track(e){const n=e.doc.key,a=this.fa.get(n);a?e.type!==0&&a.type===3?this.fa=this.fa.insert(n,e):e.type===3&&a.type!==1?this.fa=this.fa.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.fa=this.fa.remove(n):e.type===1&&a.type===2?this.fa=this.fa.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ut(63341,{At:e,ga:a}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,a)=>{e.push(a)})),e}}class cl{constructor(e,n,a,o,d,h,p,v,b){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=d,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,n,a,o,d){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new cl(e,n,tl.emptySet(n),h,a,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Hk{constructor(){this.queries=B0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,a){const o=ft(n),d=o.queries;o.queries=B0(),d.forEach(((h,p)=>{for(const v of p.wa)v.onError(a)}))})(this,new tt(Ae.ABORTED,"Firestore shutting down"))}}function B0(){return new ga((i=>Wg(i)),Cu)}async function Ix(i,e){const n=ft(i);let a=3;const o=e.query;let d=n.queries.get(o);d?!d.Sa()&&e.ba()&&(a=2):(d=new Kk,a=e.ba()?0:1);try{switch(a){case 0:d.ya=await n.onListen(o,!0);break;case 1:d.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=jm(h,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,d),d.wa.push(e),e.va(n.onlineState),d.ya&&e.Ca(d.ya)&&km(n)}async function Px(i,e){const n=ft(i),a=e.query;let o=3;const d=n.queries.get(a);if(d){const h=d.wa.indexOf(e);h>=0&&(d.wa.splice(h,1),d.wa.length===0?o=e.ba()?0:1:!d.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function Gk(i,e){const n=ft(i);let a=!1;for(const o of e){const d=o.query,h=n.queries.get(d);if(h){for(const p of h.wa)p.Ca(o)&&(a=!0);h.ya=o}}a&&km(n)}function Yk(i,e,n){const a=ft(i),o=a.queries.get(e);if(o)for(const d of o.wa)d.onError(n);a.queries.delete(e)}function km(i){i.Da.forEach((e=>{e.next()}))}var Uh,U0;(U0=Uh||(Uh={})).Fa="default",U0.Cache="cache";class Dx{constructor(e,n,a){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=a||{}}Ca(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new cl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const a=n!=="Offline";return(!this.options.ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.key=e}}class zx{constructor(e){this.key=e}}class qk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Nt(),this.mutatedKeys=Nt(),this.Xa=Qg(e),this.eu=new tl(this.Xa)}get tu(){return this.Ha}nu(e,n){const a=n?n.ru:new $0,o=n?n.eu:this.eu;let d=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,M)=>{const V=o.get(T),X=Iu(this.query,M)?M:null,oe=!!V&&this.mutatedKeys.has(V.key),F=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let z=!1;V&&X?V.data.isEqual(X.data)?oe!==F&&(a.track({type:3,doc:X}),z=!0):this.iu(V,X)||(a.track({type:2,doc:X}),z=!0,(v&&this.Xa(X,v)>0||b&&this.Xa(X,b)<0)&&(p=!0)):!V&&X?(a.track({type:0,doc:X}),z=!0):V&&!X&&(a.track({type:1,doc:V}),z=!0,(v||b)&&(p=!0)),z&&(X?(h=h.add(X),d=F?d.add(T):d.delete(T)):(h=h.delete(T),d=d.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),d=d.delete(T.key),a.track({type:1,doc:T})}return{eu:h,ru:a,Ds:p,mutatedKeys:d}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const d=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((T,M)=>(function(X,oe){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{At:z})}};return F(X)-F(oe)})(T.type,M.type)||this.Xa(T.doc,M.doc))),this.su(a),o=o!=null&&o;const p=n&&!o?this.ou():[],v=this.Za.size===0&&this.current&&!o?1:0,b=v!==this.Ya;return this.Ya=v,h.length!==0||b?{snapshot:new cl(this.query,e.eu,d,h,e.mutatedKeys,v===0,b,!1,!!a&&a.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Nt(),this.eu.forEach((a=>{this.au(a.key)&&(this.Za=this.Za.add(a.key))}));const n=[];return e.forEach((a=>{this.Za.has(a)||n.push(new zx(a))})),this.Za.forEach((a=>{e.has(a)||n.push(new Rx(a))})),n}uu(e){this.Ha=e.qs,this.Za=Nt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return cl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Nm="SyncEngine";class Wk{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class Qk{constructor(e){this.key=e,this.lu=!1}}class Xk{constructor(e,n,a,o,d,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new ga((p=>Wg(p)),Cu),this.Tu=new Map,this.Iu=new Set,this.du=new er(ot.comparator),this.Eu=new Map,this.Au=new hm,this.Ru={},this.Vu=new Map,this.mu=ol.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Jk(i,e,n=!0){const a=$x(i);let o;const d=a.Pu.get(e);return d?(a.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.cu()):o=await Mx(a,e,n,!0),o}async function Zk(i,e){const n=$x(i);await Mx(n,e,!0,!1)}async function Mx(i,e,n,a){const o=await vk(i.localStore,Es(e)),d=o.targetId,h=i.sharedClientState.addLocalQueryTarget(d,n);let p;return a&&(p=await eN(i,e,d,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&_x(i.remoteStore,o),p}async function eN(i,e,n,a,o){i.gu=(M,V,X)=>(async function(F,z,ne,Z){let ee=z.view.nu(ne);ee.Ds&&(ee=await z0(F.localStore,z.query,!1).then((({documents:O})=>z.view.nu(O,ee))));const Q=Z&&Z.targetChanges.get(z.targetId),ye=Z&&Z.targetMismatches.get(z.targetId)!=null,je=z.view.applyChanges(ee,F.isPrimaryClient,Q,ye);return H0(F,z.targetId,je._u),je.snapshot})(i,M,V,X);const d=await z0(i.localStore,e,!0),h=new qk(e,d.qs),p=h.nu(d.documents),v=zo.createSynthesizedTargetChangeForCurrentChange(n,a&&i.onlineState!=="Offline",o),b=h.applyChanges(p,i.isPrimaryClient,v);H0(i,n,b._u);const T=new Wk(e,n,h);return i.Pu.set(e,T),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),b.snapshot}async function tN(i,e,n){const a=ft(i),o=a.Pu.get(e),d=a.Tu.get(o.targetId);if(d.length>1)return a.Tu.set(o.targetId,d.filter((h=>!Cu(h,e)))),void a.Pu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await $h(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&gm(a.remoteStore,o.targetId),Kh(a,o.targetId)})).catch(hl)):(Kh(a,o.targetId),await $h(a.localStore,o.targetId,!0))}async function rN(i,e){const n=ft(i),a=n.Pu.get(e),o=n.Tu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),gm(n.remoteStore,a.targetId))}async function nN(i,e,n){const a=uN(i);try{const o=await(function(h,p){const v=ft(h),b=Kt.now(),T=p.reduce(((X,oe)=>X.add(oe.key)),Nt());let M,V;return v.persistence.runTransaction("Locally write mutations","readwrite",(X=>{let oe=ai(),F=Nt();return v.Os.getEntries(X,T).next((z=>{oe=z,oe.forEach(((ne,Z)=>{Z.isValidDocument()||(F=F.add(ne))}))})).next((()=>v.localDocuments.getOverlayedDocuments(X,oe))).next((z=>{M=z;const ne=[];for(const Z of p){const ee=bj(Z,M.get(Z.key).overlayedDocument);ee!=null&&ne.push(new xa(Z.key,ee,Bg(ee.value.mapValue),ri.exists(!0)))}return v.mutationQueue.addMutationBatch(X,b,ne,p)})).next((z=>{V=z;const ne=z.applyToLocalDocumentSet(M,F);return v.documentOverlayCache.saveOverlays(X,z.batchId,ne)}))})).then((()=>({batchId:V.batchId,changes:Jg(M)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,p,v){let b=h.Ru[h.currentUser.toKey()];b||(b=new er(yt)),b=b.insert(p,v),h.Ru[h.currentUser.toKey()]=b})(a,o.batchId,n),await Vo(a,o.changes),await Vu(a.remoteStore)}catch(o){const d=jm(o,"Failed to persist write");n.reject(d)}}async function Vx(i,e){const n=ft(i);try{const a=await gk(n.localStore,e);e.targetChanges.forEach(((o,d)=>{const h=n.Eu.get(d);h&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Dt(h.lu,14607):o.removedDocuments.size>0&&(Dt(h.lu,42227),h.lu=!1))})),await Vo(n,a,e)}catch(a){await hl(a)}}function K0(i,e,n){const a=ft(i);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Pu.forEach(((d,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const v=ft(h);v.onlineState=p;let b=!1;v.queries.forEach(((T,M)=>{for(const V of M.wa)V.va(p)&&(b=!0)})),b&&km(v)})(a.eventManager,e),o.length&&a.hu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function sN(i,e,n){const a=ft(i);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Eu.get(e),d=o&&o.key;if(d){let h=new er(ot.comparator);h=h.insert(d,Xr.newNoDocument(d,pt.min()));const p=Nt().add(d),v=new Ru(pt.min(),new Map,new er(yt),h,p);await Vx(a,v),a.du=a.du.remove(d),a.Eu.delete(e),wm(a)}else await $h(a.localStore,e,!1).then((()=>Kh(a,e,n))).catch(hl)}async function iN(i,e){const n=ft(i),a=e.batch.batchId;try{const o=await fk(n.localStore,e);Lx(n,a,null),Ox(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Vo(n,o)}catch(o){await hl(o)}}async function aN(i,e,n){const a=ft(i);try{const o=await(function(h,p){const v=ft(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let T;return v.mutationQueue.lookupMutationBatch(b,p).next((M=>(Dt(M!==null,37113),T=M.keys(),v.mutationQueue.removeMutationBatch(b,M)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,T,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,T))).next((()=>v.localDocuments.getDocuments(b,T)))}))})(a.localStore,e);Lx(a,e,n),Ox(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Vo(a,o)}catch(o){await hl(o)}}function Ox(i,e){(i.Vu.get(e)||[]).forEach((n=>{n.resolve()})),i.Vu.delete(e)}function Lx(i,e,n){const a=ft(i);let o=a.Ru[a.currentUser.toKey()];if(o){const d=o.get(e);d&&(n?d.reject(n):d.resolve(),o=o.remove(e)),a.Ru[a.currentUser.toKey()]=o}}function Kh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.Tu.get(e))i.Pu.delete(a),n&&i.hu.pu(a,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((a=>{i.Au.containsKey(a)||Fx(i,a)}))}function Fx(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(gm(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),wm(i))}function H0(i,e,n){for(const a of n)a instanceof Rx?(i.Au.addReference(a.key,e),lN(i,a)):a instanceof zx?(Ye(Nm,"Document no longer in limbo: "+a.key),i.Au.removeReference(a.key,e),i.Au.containsKey(a.key)||Fx(i,a.key)):ut(19791,{yu:a})}function lN(i,e){const n=e.key,a=n.path.canonicalString();i.du.get(n)||i.Iu.has(a)||(Ye(Nm,"New document in limbo: "+n),i.Iu.add(a),wm(i))}function wm(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new ot(Zt.fromString(e)),a=i.mu.next();i.Eu.set(a,new Qk(n)),i.du=i.du.insert(n,a),_x(i.remoteStore,new Ei(Es(Au(n.path)),a,"TargetPurposeLimboResolution",_u.ue))}}async function Vo(i,e,n){const a=ft(i),o=[],d=[],h=[];a.Pu.isEmpty()||(a.Pu.forEach(((p,v)=>{h.push(a.gu(v,e,n).then((b=>{var T;if((b||n)&&a.isPrimaryClient){const M=b?!b.fromCache:(T=n==null?void 0:n.targetChanges.get(v.targetId))===null||T===void 0?void 0:T.current;a.sharedClientState.updateQueryState(v.targetId,M?"current":"not-current")}if(b){o.push(b);const M=pm.Es(v.targetId,b);d.push(M)}})))})),await Promise.all(h),a.hu.J_(o),await(async function(v,b){const T=ft(v);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(M=>ke.forEach(b,(V=>ke.forEach(V.Is,(X=>T.persistence.referenceDelegate.addReference(M,V.targetId,X))).next((()=>ke.forEach(V.ds,(X=>T.persistence.referenceDelegate.removeReference(M,V.targetId,X)))))))))}catch(M){if(!ml(M))throw M;Ye(fm,"Failed to update sequence numbers: "+M)}for(const M of b){const V=M.targetId;if(!M.fromCache){const X=T.Fs.get(V),oe=X.snapshotVersion,F=X.withLastLimboFreeSnapshotVersion(oe);T.Fs=T.Fs.insert(V,F)}}})(a.localStore,d))}async function oN(i,e){const n=ft(i);if(!n.currentUser.isEqual(e)){Ye(Nm,"User change. New user:",e.toKey());const a=await jx(n.localStore,e);n.currentUser=e,(function(d,h){d.Vu.forEach((p=>{p.forEach((v=>{v.reject(new tt(Ae.CANCELLED,h))}))})),d.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Vo(n,a.Bs)}}function cN(i,e){const n=ft(i),a=n.Eu.get(e);if(a&&a.lu)return Nt().add(a.key);{let o=Nt();const d=n.Tu.get(e);if(!d)return o;for(const h of d){const p=n.Pu.get(h);o=o.unionWith(p.view.tu)}return o}}function $x(i){const e=ft(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sN.bind(null,e),e.hu.J_=Gk.bind(null,e.eventManager),e.hu.pu=Yk.bind(null,e.eventManager),e}function uN(i){const e=ft(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aN.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return pk(this.persistence,new dk,e.initialUser,this.serializer)}Du(e){return new bx(mm.Vi,this.serializer)}bu(e){return new jk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class Bx extends vu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Dt(this.persistence.referenceDelegate instanceof xu,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new Qj(a,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new bx((a=>xu.Vi(a,n)),this.serializer)}}class bu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>K0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=oN.bind(null,this.syncEngine),await Uk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Hk})()}createDatastore(e){const n=zu(e.databaseInfo.databaseId),a=(function(d){return new Tk(d)})(e.databaseInfo);return(function(d,h,p,v){return new Ck(d,h,p,v)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,d,h,p){return new Pk(a,o,d,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>K0(this.syncEngine,n,0)),(function(){return O0.C()?new O0:new kk})())}createSyncEngine(e,n){return(function(o,d,h,p,v,b,T){const M=new Xk(o,d,h,p,v,b);return T&&(M.fu=!0),M})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const d=ft(o);Ye(pa,"RemoteStore shutting down."),d.Ia.add(5),await Mo(d),d.Ea.shutdown(),d.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bu.provider={build:()=>new bu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="FirestoreClient";class dN{constructor(e,n,a,o,d){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=Tn.UNAUTHENTICATED,this.clientId=tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(a,(async h=>{Ye(Li,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(Ye(Li,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=jm(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function xh(i,e){i.asyncQueue.verifyOperationInProgress(),Ye(Li,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let a=n.initialUser;i.setCredentialChangeListener((async o=>{a.isEqual(o)||(await jx(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>{ma("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{Ye("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{ma("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e}async function G0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await hN(i);Ye(Li,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((a=>F0(e.remoteStore,a))),i.setAppCheckTokenChangeListener(((a,o)=>F0(e.remoteStore,o))),i._onlineComponents=e}async function hN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ye(Li,"Using user provided OfflineComponentProvider");try{await xh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ae.FAILED_PRECONDITION||o.code===Ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await xh(i,new vu)}}else Ye(Li,"Using default OfflineComponentProvider"),await xh(i,new Bx(void 0));return i._offlineComponents}async function Kx(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ye(Li,"Using user provided OnlineComponentProvider"),await G0(i,i._uninitializedComponentsProvider._online)):(Ye(Li,"Using default OnlineComponentProvider"),await G0(i,new bu))),i._onlineComponents}function mN(i){return Kx(i).then((e=>e.syncEngine))}async function Hh(i){const e=await Kx(i),n=e.eventManager;return n.onListen=Jk.bind(null,e.syncEngine),n.onUnlisten=tN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Zk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rN.bind(null,e.syncEngine),n}function pN(i,e,n={}){const a=new Ii;return i.asyncQueue.enqueueAndForget((async()=>(function(d,h,p,v,b){const T=new Ux({next:V=>{T.Ou(),h.enqueueAndForget((()=>Px(d,M)));const X=V.docs.has(p);!X&&V.fromCache?b.reject(new tt(Ae.UNAVAILABLE,"Failed to get document because the client is offline.")):X&&V.fromCache&&v&&v.source==="server"?b.reject(new tt(Ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(V)},error:V=>b.reject(V)}),M=new Dx(Au(p.path),T,{includeMetadataChanges:!0,ka:!0});return Ix(d,M)})(await Hh(i),i.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firestore.googleapis.com",q0=!0;class W0{constructor(e){var n,a;if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fN,this.ssl=q0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:q0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vx)throw new tt(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hx((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),(function(d){if(d.timeoutSeconds!==void 0){if(isNaN(d.timeoutSeconds))throw new tt(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new tt(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new tt(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gx{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new w1;switch(a.type){case"firstParty":return new E1(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new tt(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=Y0.get(n);a&&(Ye("ComponentProvider","Removing Datastore"),Y0.delete(n),a.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ou(this.firestore,e,this._query)}}class _r{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _r(this.firestore,e,this._key)}toJSON(){return{type:_r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Do(n,_r._jsonSchema))return new _r(e,a||null,new ot(Zt.fromString(n.referencePath)))}}_r._jsonSchemaVersion="firestore/documentReference/1.0",_r._jsonSchema={type:yr("string",_r._jsonSchemaVersion),referencePath:yr("string")};class Ao extends Ou{constructor(e,n,a){super(e,n,Au(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _r(this.firestore,null,new ot(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function Mt(i,e,...n){if(i=bo(i),arguments.length===1&&(e=tm.newId()),P1("doc","path",e),i instanceof Gx){const a=Zt.fromString(e,...n);return c0(a),new _r(i,null,new ot(a))}{if(!(i instanceof _r||i instanceof Ao))throw new tt(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Zt.fromString(e,...n));return c0(a),new _r(i.firestore,i instanceof Ao?i.converter:null,new ot(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="AsyncQueue";class X0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Nx(this,"async_queue_retry"),this.oc=()=>{const a=gh();a&&Ye(Q0,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ii;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ml(e))throw e;Ye(Q0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((a=>{throw this.tc=a,this.nc=!1,ii("INTERNAL UNHANDLED ERROR: ",J0(a)),a})).then((a=>(this.nc=!1,a))))));return this._c=n,n}enqueueAfterDelay(e,n,a){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=bm.createAndSchedule(this,e,n,a,(d=>this.lc(d)));return this.ec.push(o),o}ac(){this.tc&&ut(47125,{hc:J0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function J0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(i){return(function(n,a){if(typeof n!="object"||n===null)return!1;const o=n;for(const d of a)if(d in o&&typeof o[d]=="function")return!0;return!1})(i,["next","error","complete"])}class Co extends Gx{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new X0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X0(e),this._firestoreClient=void 0,await e}}}function gN(i,e,n){n||(n=uu);const a=i1(i,"firestore");if(a.isInitialized(n)){const o=a.getImmediate({identifier:n}),d=a.getOptions(n);if(lu(d,e))return o;throw new tt(Ae.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new tt(Ae.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vx)throw new tt(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&xg(e.host)&&Zv(e.host),a.initialize({options:e,instanceIdentifier:n})}function _m(i){if(i._terminated)throw new tt(Ae.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||xN(i),i._firestoreClient}function xN(i){var e,n,a;const o=i._freezeSettings(),d=(function(p,v,b,T){return new K1(p,v,b,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Hx(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new dN(i._authCredentials,i._appCheckCredentials,i._queue,d,i._componentsProvider&&(function(p){const v=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(v),_online:v}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(Fr.fromBase64String(e))}catch(n){throw new tt(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jn(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Do(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:yr("string",Jn._jsonSchemaVersion),bytes:yr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new tt(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new tt(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new tt(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(Do(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:yr("string",As._jsonSchemaVersion),latitude:yr("number"),longitude:yr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let d=0;d<a.length;++d)if(a[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Do(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Cs(e.vectorValues);throw new tt(Ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:yr("string",Cs._jsonSchemaVersion),vectorValues:yr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=/^__.*__$/;class vN{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}function qx(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ec:i})}}class Em{constructor(e,n,a,o,d,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,d===void 0&&this.Ac(),this.fieldTransforms=d||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Em(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:a,mc:!1});return o.fc(e),o}gc(e){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:a,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ju(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(qx(this.Ec)&&yN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class bN{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||zu(e)}Dc(e,n,a,o=!1){return new Em({Ec:e,methodName:n,bc:a,path:Lr.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jN(i){const e=i._freezeSettings(),n=zu(i._databaseId);return new bN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function kN(i,e,n,a,o,d={}){const h=i.Dc(d.merge||d.mergeFields?2:0,e,n,o);Jx("Data must be an object, but it was:",h,a);const p=Qx(a,h);let v,b;if(d.merge)v=new fs(h.fieldMask),b=h.fieldTransforms;else if(d.mergeFields){const T=[];for(const M of d.mergeFields){const V=NN(e,M,n);if(!h.contains(V))throw new tt(Ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);_N(T,V)||T.push(V)}v=new fs(T),b=h.fieldTransforms.filter((M=>v.covers(M.field)))}else v=null,b=h.fieldTransforms;return new vN(new Xn(p),v,b)}function Wx(i,e){if(Xx(i=bo(i)))return Jx("Unsupported field value:",e,i),Qx(i,e);if(i instanceof Yx)return(function(a,o){if(!qx(o.Ec))throw o.wc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${a._methodName}() is not currently supported inside arrays`);const d=a._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(a,o){const d=[];let h=0;for(const p of a){let v=Wx(p,o.yc(h));v==null&&(v={nullValue:"NULL_VALUE"}),d.push(v),h++}return{arrayValue:{values:d}}})(i,e)}return(function(a,o){if((a=bo(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return pj(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const d=Kt.fromDate(a);return{timestampValue:gu(o.serializer,d)}}if(a instanceof Kt){const d=new Kt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:gu(o.serializer,d)}}if(a instanceof As)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Jn)return{bytesValue:dx(o.serializer,a._byteString)};if(a instanceof _r){const d=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(d))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:dm(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Cs)return(function(h,p){return{mapValue:{fields:{[Fg]:{stringValue:$g},[du]:{arrayValue:{values:h.toArray().map((b=>{if(typeof b!="number")throw p.wc("VectorValues must only contain numeric values.");return om(p.serializer,b)}))}}}}}})(a,o);throw o.wc(`Unsupported field value: ${rm(a)}`)})(i,e)}function Qx(i,e){const n={};return Rg(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(i,((a,o)=>{const d=Wx(o,e.Vc(a));d!=null&&(n[a]=d)})),{mapValue:{fields:n}}}function Xx(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Kt||i instanceof As||i instanceof Jn||i instanceof _r||i instanceof Yx||i instanceof Cs)}function Jx(i,e,n){if(!Xx(n)||!Pg(n)){const a=rm(n);throw a==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+a)}}function NN(i,e,n){if((e=bo(e))instanceof Tm)return e._internalPath;if(typeof e=="string")return Zx(i,e);throw ju("Field path arguments must be of type string or ",i,!1,void 0,n)}const wN=new RegExp("[~\\*/\\[\\]]");function Zx(i,e,n){if(e.search(wN)>=0)throw ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Tm(...e.split("."))._internalPath}catch{throw ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ju(i,e,n,a,o){const d=a&&!a.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(d||h)&&(v+=" (found",d&&(v+=` in field ${a}`),h&&(v+=` in document ${o}`),v+=")"),new tt(Ae.INVALID_ARGUMENT,p+i+v)}function _N(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,a,o,d){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new _r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ty("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends ey{data(){return super.data()}}function ty(i,e){return typeof e=="string"?Zx(i,e):e instanceof Tm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new tt(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SN{convertValue(e,n="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ut(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return fa(e,((o,d)=>{a[o]=this.convertValue(d,n)})),a}convertVectorValue(e){var n,a,o;const d=(o=(a=(n=e.fields)===null||n===void 0?void 0:n[du].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map((h=>hr(h.doubleValue)));return new Cs(d)}convertGeoPoint(e){return new As(hr(e.latitude),hr(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Eu(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(wo(e));default:return null}}convertTimestamp(e){const n=zi(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Zt.fromString(e);Dt(xx(a),9688,{name:e});const o=new _o(a.get(1),a.get(3)),d=new ot(a.popFirst(5));return o.isEqual(n)||ii(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i,e,n){let a;return a=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,a}class eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends ey{constructor(e,n,a,o,d,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(ty("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:yr("string",da._jsonSchemaVersion),bundleSource:yr("string","DocumentSnapshot"),bundleName:yr("string"),bundle:yr("string")};class eu extends da{data(e={}){return super.data(e)}}class rl{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new eo(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new eu(this._firestore,this._userDataWriter,a.key,a,new eo(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const v=new eu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new eo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const v=new eu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new eo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,T=-1;return p.type!==0&&(b=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),T=h.indexOf(p.doc.key)),{type:CN(p.type),doc:v,oldIndex:b,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=rl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(n.push(d._document),a.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(i){i=ua(i,_r);const e=ua(i.firestore,Co);return pN(_m(e),i._key).then((n=>ny(e,i,n)))}rl._jsonSchemaVersion="firestore/querySnapshot/1.0",rl._jsonSchema={type:yr("string",rl._jsonSchemaVersion),bundleSource:yr("string","QuerySnapshot"),bundleName:yr("string"),bundle:yr("string")};class ry extends SN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _r(this.firestore,null,n)}}function lr(i,e,n){i=ua(i,_r);const a=ua(i.firestore,Co),o=AN(i.converter,e,n);return IN(a,[kN(jN(a),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ri.none())])}function Kc(i,...e){var n,a,o;i=bo(i);let d={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Z0(e[h])||(d=e[h++]);const p={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Z0(e[h])){const M=e[h];e[h]=(n=M.next)===null||n===void 0?void 0:n.bind(M),e[h+1]=(a=M.error)===null||a===void 0?void 0:a.bind(M),e[h+2]=(o=M.complete)===null||o===void 0?void 0:o.bind(M)}let v,b,T;if(i instanceof _r)b=ua(i.firestore,Co),T=Au(i._key.path),v={next:M=>{e[h]&&e[h](ny(b,i,M))},error:e[h+1],complete:e[h+2]};else{const M=ua(i,Ou);b=ua(M.firestore,Co),T=M._query;const V=new ry(b);v={next:X=>{e[h]&&e[h](new rl(b,V,M,X))},error:e[h+1],complete:e[h+2]},EN(i._query)}return(function(V,X,oe,F){const z=new Ux(F),ne=new Dx(X,z,oe);return V.asyncQueue.enqueueAndForget((async()=>Ix(await Hh(V),ne))),()=>{z.Ou(),V.asyncQueue.enqueueAndForget((async()=>Px(await Hh(V),ne)))}})(_m(b),T,p,v)}function IN(i,e){return(function(a,o){const d=new Ii;return a.asyncQueue.enqueueAndForget((async()=>nN(await mN(a),o,d))),d.promise})(_m(i),e)}function ny(i,e,n){const a=n.docs.get(e._key),o=new ry(i);return new da(i,o,e._key,a,new eo(n.hasPendingWrites,n.fromCache),e.converter)}class PN{constructor(e){this.kind="memory",this._onlineComponentProvider=bu.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new Bx(void 0)}}toJSON(){return{kind:this.kind}}}function DN(i){return new PN(i)}(function(e,n=!0){(function(o){dl=o})(c1),ou(new jo("firestore",((a,{instanceIdentifier:o,options:d})=>{const h=a.getProvider("app").getImmediate(),p=new Co(new _1(a.getProvider("auth-internal")),new S1(h,a.getProvider("app-check-internal")),(function(b,T){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new tt(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(b.options.projectId,T)})(h,o),h);return d=Object.assign({useFetchStreams:n},d),p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),el(s0,i0,e),el(s0,i0,"esm2017")})();const RN={apiKey:"AIzaSyAWQN5caYDCTzl9al4vc85ejhsY4PCZJVM",authDomain:"arge-dashboard.firebaseapp.com",projectId:"arge-dashboard",storageBucket:"arge-dashboard.firebasestorage.app",messagingSenderId:"74269180972",appId:"1:74269180972:web:319328fa4e4c876033bd89"},zN=u1(RN),Vt=gN(zN,{experimentalForceLongPolling:!0,localCache:DN()});function Zs(i,e,n){return Promise.race([i,new Promise(function(a,o){setTimeout(function(){o(new Error("TIMEOUT ("+e+"ms): "+(n||"Firestore ilemi")+" yant vermedi. Gvenlik kurallarn kontrol edin!"))},e)})])}const vh=[{id:"r1",name:"Sefa Emre nc",title:"",institution:"Anadolu niversitesi",unit:"Ar-Ge",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"renci",languages:["ngilizce"],researchAreas:["destek hizmetleri","mikro-yeterlik (mikro-kredilendirme)","uzaktan eitim","yapay zeka (AI)","yksekretimin ynetimi"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#6366f1"},{id:"r2",name:"Aras Bozkurt",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["karma aratrma yntemleri","uzaktan eitim","yabanc dil eitimi","yapay zeka (AI)"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#8b5cf6"},{id:"r3",name:"Halil Elibol",title:"r.Gr.Dr.",institution:"Anadolu niversitesi",unit:"Ar-Ge",eduUniversity:"Anadolu niversitesi",eduProgram:"Eitim Bilimleri",eduDegree:"Doktora",eduStatus:"Mezun",languages:["Franszca","ngilizce"],researchAreas:["eitim bilimleri","uzaktan eitim","yabanc dil eitimi"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#ec4899"},{id:"r4",name:"Fatih zer",title:"Dr.r.yesi",institution:"Anadolu niversitesi",unit:"Ar-Ge",eduUniversity:"stanbul niversitesi",eduProgram:"Eitim Programlar ve retim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["AR","VR","XR","oyunlatrma","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#f43f5e"},{id:"r5",name:"Rabia Ta",title:"r.Gr.Dr.",institution:"Anadolu niversitesi",unit:"ARNKOM",eduUniversity:"Anadolu niversitesi",eduProgram:"",eduDegree:"",eduStatus:"",languages:["ngilizce"],researchAreas:["proje ynetimi","uluslararas ilikiler"],tools:[],hasPIExperience:!1,isAofMember:!1,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#f97316"},{id:"r6",name:"Erdem Erdodu",title:"Dr.r.yesi",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["bilgisayar retimi ve teknolojileri","destek hizmetleri","uzaktan eitim","yapay zeka (AI)","retim tasarm"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#eab308"},{id:"r7",name:"Alper Tolga Kumtepe",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Florida State University",eduProgram:"Eitim Programlar ve retim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["eitim programlar (curriculum)","uzaktan eitim","lme ve deerlendirme"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#22c55e"},{id:"r8",name:"Nedime Selin pgeven",title:"Ar.Gr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"renci",languages:["ngilizce"],researchAreas:["bilgisayar retimi ve teknolojileri","oyunlatrma","saysal tablolar","uzaktan eitim","yapay zeka (AI)","retim tasarm"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#14b8a6"},{id:"r9",name:"Frat Ssuncu",title:"Ar.Gr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"renci",languages:["ngilizce"],researchAreas:["grafik tasarm","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#06b6d4"},{id:"r10",name:"Gamze Tuna Bykkse",title:"Ar.Gr.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#3b82f6"},{id:"r11",name:"Mesut Aydemir",title:"Dr.r.yesi",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["oyunlatrma","programlama","uzaktan eitim","retim tasarm"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#a855f7"},{id:"r12",name:"lker Kayaba",title:"Dr.r.yesi",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["oyunlatrma","programlama","uzaktan eitim","yapay zeka (AI)"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#d946ef"},{id:"r13",name:"Gkhan Deniz Diner",title:"Dr.r.yesi",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["fotoraflk","iletiim","sosyal medya","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#0ea5e9"},{id:"r14",name:"Sinan Aydn",title:"Do.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Saysal Yntemler",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["oyunlatrma","saysal tablolar","veri analizi","yapay zeka (AI)"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#10b981"},{id:"r15",name:"Seil Kaya Glen",title:"Do.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Eitim Bilimleri",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["eitim bilimleri","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#f59e0b"},{id:"r16",name:"Nejdet Karada",title:"Do.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["destek hizmetleri","uzaktan eitim","yabanc dil eitimi","lme ve deerlendirme"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#ef4444"},{id:"r17",name:"lker Usta",title:"Do.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["eitim programlar (curriculum)","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#8b5cf6"},{id:"r18",name:"Emine Demiray",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Sinema ve Televizyon",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["sinema ve televizyon","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#6366f1"},{id:"r19",name:"Tevfik Volkan Yzer",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Sinema ve Televizyon",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["sinema ve televizyon","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#14b8a6"},{id:"r20",name:"Serpil Kodar",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["uzaktan eitim","renci topluluu"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#ec4899"},{id:"r21",name:"Nilgn zdamar",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Bilgisayar ve retim Teknolojileri retmenlii",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["bilgisayar retimi ve teknolojileri","uzaktan eitim","yapay zeka (AI)"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#3b82f6"},{id:"r22",name:"Mjgan Yazc",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"letiim Bilimleri",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["iletiim","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#22c55e"},{id:"r23",name:"Murat Akyldz",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Ankara niversitesi",eduProgram:"lme ve Deerlendirme",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["nicel aratrma yntemleri","lme ve deerlendirme"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#f97316"},{id:"r24",name:"Mehmet Emin Mutlu",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Eskiehir Osmangazi niversitesi",eduProgram:"Endstri Mhendislii",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["bilgisayar retimi ve teknolojileri","programlama"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#06b6d4"},{id:"r25",name:"Mediha Terlemez",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Sinema ve Televizyon",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["sinema ve televizyon","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#a855f7"},{id:"r26",name:"Kamil ekerol",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"ktisat",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["eitim programlar (curriculum)","grsel iletiim ve tasarm","iktisat","nitel aratrma yntemleri","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#d946ef"},{id:"r27",name:"Glsn Kurubacak",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"University of Cincinnati",eduProgram:"Eitim Bilimleri",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#eab308"},{id:"r28",name:"Hasan Uar",title:"Do.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["uzaktan eitim","yabanc dil eitimi"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#0ea5e9"},{id:"r29",name:"Evrim Gen Kumtepe",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Florida State University",eduProgram:"Eitim Programlar ve retim",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["eitim programlar (curriculum)","mikro-yeterlik (mikro-kredilendirme)","nicel aratrma yntemleri","su rnleri","tarm teknolojileri","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#10b981"},{id:"r30",name:"Elif Toprak",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Bursa Uluda niversitesi",eduProgram:"Uluslararas likiler",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["uluslararas ilikiler","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#f59e0b"},{id:"r31",name:"Berrin zkanal",title:"Prof.Dr.",institution:"Anadolu niversitesi",unit:"Akretim Fakltesi",eduUniversity:"Seluk niversitesi",eduProgram:"Halkla likiler ve Tantm",eduDegree:"Doktora",eduStatus:"Mezun",languages:["ngilizce"],researchAreas:["halkla ilikiler","iletiim","uzaktan eitim"],tools:[],hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#ef4444"},{id:"r32",name:"Uygar Soyra",title:"",institution:"Anadolu niversitesi",unit:"",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"renci",languages:["ngilizce"],researchAreas:["halkla ilikiler","iletiim","uzaktan eitim","renci topluluu"],tools:[],hasPIExperience:!1,isAofMember:!1,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#f43f5e"},{id:"r33",name:"Sercan Uzun",title:"",institution:"Anadolu niversitesi",unit:"",eduUniversity:"Anadolu niversitesi",eduProgram:"Uzaktan Eitim",eduDegree:"Doktora",eduStatus:"renci",languages:["ngilizce"],researchAreas:["oyunlatrma","uzaktan eitim","yabanc dil eitimi"],tools:[],hasPIExperience:!1,isAofMember:!1,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#6366f1"},{id:"r34",name:"Elif Dadelen",title:"",institution:"Anadolu niversitesi",unit:"",eduUniversity:"Anadolu niversitesi",eduProgram:"BF",eduDegree:"Tezsiz Yksek Lisans",eduStatus:"renci",languages:[],researchAreas:["yapay zeka (AI)"],tools:[],hasPIExperience:!1,isAofMember:!1,url:"",phone:"",email:"",bio:"",performanceNotes:"",color:"#8b5cf6"}],bh=[{id:"t1",title:"Trke'nin Yurtdnda K-12 dzeyinde miras dil olarak oyunlatrlarak retilmesi",description:"TRT ile anlama yaplabilir",category:"Ar-Ge i",status:"proposed",priority:"critical",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Horizon Europe"],researchers:[{researcherId:"r3",role:"lead"},{researcherId:"r4",role:"member"},{researcherId:"r5",role:"member"}],tasks:[],projectType:"Horizon",projectTypeDetail:"Horizon Europe",projectCall:"",applicationStatus:"Bavuru yaplabilir"},{id:"t2",title:"STEM ve XR (Mikro-yeterlik)",description:"",category:"Ar-Ge i",status:"proposed",priority:"critical",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["AB-KA220 (HED)"],researchers:[{researcherId:"r4",role:"lead"},{researcherId:"r5",role:"member"}],tasks:[],projectType:"Erasmus+",projectTypeDetail:"KA220-HED",projectCall:"",applicationStatus:"Bavuru yaplabilir"},{id:"t3",title:"aiCTS: Byk dil modelleri kullanarak yksekretim kurumlarnda yapay zeka destekli kredi transfer sisteminin kurulmas",description:"",category:"Ar-Ge i",status:"proposed",priority:"critical",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["TBTAK"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"TBTAK",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t4",title:"Avrupa Birlii (AB) ieriiyle ders verilmesi",description:"",category:"Ar-Ge i",status:"proposed",priority:"critical",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["AB-ERASMUS-JMO"],researchers:[{researcherId:"r5",role:"lead"},{researcherId:"r3",role:"member"}],tasks:[],projectType:"Erasmus+",projectTypeDetail:"Jean Monnet",projectCall:"",applicationStatus:""},{id:"t5",title:"XR, VR Merkezi",description:"",category:"Ar-Ge i",status:"proposed",priority:"critical",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["AB-KA2"],researchers:[{researcherId:"r4",role:"lead"}],tasks:[],projectType:"Erasmus+",projectTypeDetail:"KA2",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t6",title:"Yapay zeka ile kitaptan snav sorusu retme",description:"",category:"Ortak alma",status:"proposed",priority:"high",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:""},{id:"t7",title:"Ak ve Uzaktan retim Yaynlarnn nfografik, Video ve Podcast ile Sunulmas",description:"",category:"Ar-Ge i",status:"proposed",priority:"high",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r3",role:"lead"},{researcherId:"r2",role:"member"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad",requiredSkills:"Yapay zeka aralarn kullanma",researchMethod:"Daha sonra belirlenecek"},{id:"t8",title:"e-Kamps ve renci Bilgi Sistemi verilerine gre renme analitiklerine dahal veri grselletirmesi (rozet vb.) yapay zeka temelli akll uyar sisteminin tasarlanmas",description:"",category:"Ortak alma",status:"proposed",priority:"high",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r2",role:"lead"},{researcherId:"r1",role:"member"},{researcherId:"r6",role:"member"},{researcherId:"r3",role:"member"},{researcherId:"r11",role:"member"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t9",title:"Mikro-yeterlilik program ihtiyalarnn belirlenmesi: AF renci ve mezunlar, akademisyenler ve sektr aratrmas",description:"",category:"Ortak alma",status:"proposed",priority:"high",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"},{researcherId:"r3",role:"member"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t10",title:"ARF Projesi: Uzaktan Eitim Aratrma Topluluu",description:"(1) CoI: Lisansst eitimde aratrma topluluklarnn akademik yazma becerleri ve sosyal bulunuluk zerindeki etkisi, renen-renen etkileiminin aratrlmas, renen-yapay-zeka etkileimi hakknda topluluun tutumu aratrlabilir (2) Lisansst Eitim Enstits ARF projesi kapsamnda uzaktan eitim dnda hangi topluluklarn kurulmasnn talep edildiine dair anket toplayabilir (CoI ile lek varsa bunu uygulayabilir)",category:"Ortak alma",status:"proposed",priority:"high",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavuru yaplabilir",requiredSkills:"Yapay zeka aralarn kullanma, leri dzey akademik yazma becerileri",researchMethod:"Daha sonra belirlenecek"},{id:"t11",title:"Uzaktan eitimde grme engelliler iin popler YZ aralarn renme srelerine entegre etme",description:"ChatGPT Atlas ve Google Docs + Geminiyi/sesli komut verme gibi zelliklerle retim tasarm yaplabilir",category:"Ar-Ge i",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["TBTAK"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"TBTAK",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t12",title:"Ak ve Uzaktan renenlerin Dropout Davranlarnn rdelenmesi ve YZ Desteiyle Uyar Sisteminin Tasarlanmas",description:"",category:"Ortak alma",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["TBTAK"],researchers:[{researcherId:"r2",role:"lead"},{researcherId:"r16",role:"member"}],tasks:[],projectType:"TBTAK",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad",requiredSkills:"Yapay zeka aralarn kullanma",researchMethod:"Daha sonra belirlenecek"},{id:"t13",title:"e-Kamps Altrmalar ile Akademik Baar Arasndaki liki",description:"",category:"Ortak alma",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r6",role:"lead"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:""},{id:"t14",title:"Ak ve uzaktan eitimde yapay zeka etikletleri",description:"",category:"Ar-Ge i",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r2",role:"lead"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"AUAd",researchMethod:"Daha sonra belirlenecek"},{id:"t15",title:"Benim Hikayem: Yurt D Programlar",description:"",category:"Ortak alma",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Kitap"],researchers:[{researcherId:"r2",role:"lead"},{researcherId:"r1",role:"member"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Kitap",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t16",title:"Agentic AI'n ak ve uzaktan reitmde eitli konulara gre performansnn incelenmesi",description:"",category:"Ortak alma",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"AUAd"},{id:"t17",title:"Bilgi paketlerinin yapay zeka desteiyle oluturulmas",description:"",category:"Ortak alma",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"},{researcherId:"r6",role:"member"},{researcherId:"r2",role:"member"},{researcherId:"r26",role:"member"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t18",title:"LMS-Wrapped: renenlerinin renme malzeme kullanma verilerinin hikayeletirilmesinin SLRe etkisi",description:"Aratrma konular (1) veri hikayeletirme Data Storytelling (2) SRL / zynetimli renme, (3) Bu bilekenin uzaktan eitim zerindeki yansmas ve lm ve ktlar. Buna gre Q1: veri hikayeletirme uzaktan eitimdeki rencilerin zynetimli renme becerilerini nasl etkiler?",category:"Ortak alma",status:"proposed",priority:"medium",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad",requiredSkills:"Temel dzeyde oyunlatrma bilgisine sahip olma, Yapay zeka aralarn kullanma, retim tasarm yapabilme",researchMethod:"Daha sonra belirlenecek"},{id:"t20",title:"Byk dil modelleri kullanlarak yapay zeka ile derslerde okutulan kitap ieriklerinin balamna gre ierik analizinin yaplmas",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r6",role:"lead"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t21",title:"Yapay Zeka Destekli kinci niversite Tercih Asistan",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t22",title:"Yurtd programlarnda renci beklentilerinin analizi",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"AUAd"},{id:"t23",title:"Kayt yaptrmak isteyen rencilere retken yapay zeka temelli tercih rehberliinin insan ve yapay zeka ortaklnda sunulmas",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"},{researcherId:"r6",role:"member"},{researcherId:"r2",role:"member"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"TOJDE"},{id:"t24",title:"E kamps kalite elilii rolyle renen-ierik etkileiminin ift ynl artrlmas",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r6",role:"lead"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t25",title:"rgtsel yapay zekann gerek hayattaki yansmas: Bir ak ve uzaktan eitim kurumunda birim bazl mikro YZ aralar ile makro YZ tasarlama",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"},{researcherId:"r2",role:"member"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t26",title:"Btnleik destek sistemleri: Ak ve uzaktan eitimde farkl kanallardan insan ve yapay zeka ibirliiyle renen destei verilmesi",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r1",role:"responsible"},{researcherId:"r16",role:"member"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad",requiredSkills:"Destek sistemlerinde uzmanlk, Yapay zeka aralarn kullanma",researchMethod:"Daha sonra belirlenecek"},{id:"t27",title:"renci ve renci adaylarn web, mobil kullanma ve YZ davranlarnn lke bazl karlatrlmas",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"TOJDE"},{id:"t28",title:"Ak ve uzaktan retimde kullanlan renme malzemelerinin lke bazl incelenmesi",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"TOJDE"},{id:"t29",title:"renen-renen etkileimi iin YZ Grup zelliinin Kullanlmas",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t30",title:"retken yapay zeka task zelliinin uzaktan eitimde kiiselletirilerek kullanlmas",description:"ChatGPT task zelliini bir derse Sokratik yntemlerle entegre etme",category:"Ar-Ge i",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["BAP"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"BAP",projectTypeDetail:"",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t31",title:'renme amalar ve dersin ieriine gre YZ destekli "What-if" botunun tasarlanmas',description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r6",role:"lead"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"TOJDE"},{id:"t32",title:"Senkron ve asenkron derslerde renen-ierik etkileiminin incelenmesi (AF canl dersler)",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r6",role:"lead"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"AUAd"},{id:"t33",title:"Anadolu niversitesi Akretim Fakltesi kaytlarndaki tantm faaliyetlerinin incelenmesi",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r2",role:"lead"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"AUAd"},{id:"t34",title:"Dnyadaki ak ve uzaktan eitim kurumlarndaki mikro-yeterlik rnekleri",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["A Yayn"],researchers:[{researcherId:"r2",role:"lead"},{researcherId:"r1",role:"member"}],tasks:[],projectType:"Dier",projectTypeDetail:"A Yayn",projectCall:"",applicationStatus:"Bavurular henz balamad",targetJournal:"AUAd"},{id:"t35",title:"Ak ve uzaktan eitimde kaytl renciler iin sisteme ynelik kapsaml oryantasyon dersinin oluturulmas",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r6",role:"lead"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t36",title:"Anlk YZ evirisine farkl bir bak: Gnlk hayatta dil renimi iin kullanm",description:"rnein Airpods (Pro3 ile) yabanc dil olarak spanyolca renmek isteyen bir Amerikal u an Airpodsunu listening iin kullanabilir",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"},{id:"t37",title:"Farkl dillerde konuan ve ayn dersi alan uluslararas renenlerle birlikte Grup YZ kullanm",description:"",category:"Ortak alma",status:"proposed",priority:"low",applicationDate:"",startDate:"",endDate:"",workLink:"",tags:["Makale"],researchers:[{researcherId:"r1",role:"responsible"}],tasks:[],projectType:"Dier",projectTypeDetail:"Makale",projectCall:"",applicationStatus:"Bavurular henz balamad"}],to=["BAP","TBTAK","Horizon","Erasmus+","DIGITAL","Dier Ulusal","Dier Uluslararas","Dier"],jh=[],ro={proposed:{label:"nerilen",color:"bg-slate-100 text-slate-700",dot:"bg-slate-400"},active:{label:"Aktif",color:"bg-emerald-100 text-emerald-700",dot:"bg-emerald-500"},completed:{label:"Tamamland",color:"bg-blue-100 text-blue-700",dot:"bg-blue-500"},failed:{label:"Tamamlanamad",color:"bg-red-100 text-red-700",dot:"bg-red-500"},archived:{label:"Ariv",color:"bg-gray-100 text-gray-500",dot:"bg-gray-400"},planning:{label:"lem Yaplyor",color:"bg-amber-100 text-amber-700",dot:"bg-amber-500"},review:{label:"nceleme",color:"bg-purple-100 text-indigo-700",dot:"bg-purple-500"}},no={low:{label:"Dk",color:"bg-slate-100 text-slate-600",icon:""},medium:{label:"Orta",color:"bg-amber-100 text-amber-700",icon:""},high:{label:"Yksek",color:"bg-red-100 text-red-700",icon:""},critical:{label:"Kritik",color:"bg-red-200 text-red-800",icon:""}},so={lead:{label:"Yrtc",color:"bg-indigo-100 text-indigo-700",weight:10},unit_manager:{label:"Birim Sorumlusu",color:"bg-rose-100 text-rose-700",weight:9},responsible:{label:"Sorumlu",color:"bg-orange-100 text-orange-700",weight:8},member:{label:"Aratrmac",color:"bg-emerald-100 text-emerald-700",weight:4},advisor:{label:"Danman",color:"bg-purple-100 text-indigo-700",weight:2},scholar:{label:"Bursiyer",color:"bg-cyan-100 text-cyan-700",weight:1}},MN={todo:{label:"Yaplacak",icon:t.jsx(og,{size:14,className:"text-slate-400"}),color:"text-slate-500"},in_progress:{label:"Devam Ediyor",icon:t.jsx(Lv,{size:14,className:"text-blue-500"}),color:"text-blue-600"},done:{label:"Tamamland",icon:t.jsx(Po,{size:14,className:"text-emerald-500"}),color:"text-emerald-600"}},io=["Lisans","Yksek Lisans","Doktora","Doentlik","Profesrlk"],ao=["Devam Ediyor","Mezun","Doktora Devam Ediyor","Doentlik Aamasnda"],fo=["Trkiye","Almanya","ABD","ngiltere","Fransa","talya","spanya","Hollanda","Belika","sve","Norve","Danimarka","Finlandiya","Avusturya","svire","Polonya","ekya","Macaristan","Romanya","Bulgaristan","Yunanistan","Portekiz","rlanda","Hrvatistan","Slovenya","Slovakya","Litvanya","Letonya","Estonya","Lksemburg","Malta","Kbrs","Japonya","in","Gney Kore","Hindistan","Kanada","Avustralya","Brezilya","Meksika","Arjantin","Rusya","Ukrayna","Grcistan","Azerbaycan","Kazakistan","srail","Msr","Gney Afrika","Nijerya","Fas","Tunus","Suudi Arabistan","BAE","Katar","Pakistan","Endonezya","Malezya","Singapur","Tayland","Vietnam","Filipinler","Yeni Zelanda","ili","Kolombiya","Peru","Srbistan","Bosna Hersek","Karada","Arnavutluk","Kuzey Makedonya","Kosova","Moldova","Belarus","zlanda","Tayvan"].sort((i,e)=>i.localeCompare(e,"tr")),tu="ANADOLU NVERSTES AIKRETM FAKLTES",Nr=i=>i.toLocaleUpperCase("tr-TR"),sy=i=>{const e=new Set([tu]);return(i||[]).forEach(n=>{n.piInstitution&&e.add(Nr(n.piInstitution)),(n.partnerInstitutions||[]).forEach(a=>e.add(Nr(a)))}),[...e].sort((n,a)=>n.localeCompare(a,"tr"))},lo=["Ar-Ge i","Ortak alma","Dier"],oo=[{id:"sci",label:"SCI",coefficient:10,color:"#3b82f6"},{id:"sci-e",label:"SCI-E",coefficient:9,color:"#06b6d4"},{id:"ssci",label:"SSCI",coefficient:8,color:"#8b5cf6"},{id:"ahci",label:"AHCI",coefficient:7,color:"#ec4899"},{id:"esci",label:"ESCI",coefficient:6,color:"#f59e0b"},{id:"scopus",label:"Scopus",coefficient:5,color:"#14b8a6"},{id:"tr-dizin",label:"TR Dizin",coefficient:4,color:"#10b981"},{id:"diger",label:"Dier",coefficient:2,color:"#94a3b8"}],oa=5;let Jt=so,Ot=ro,Zn=no,Si=to,Gh=lo,go=io,xo=ao,Sn=oo,ku=oa;const VN=i=>i.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase(),nl=i=>!i||i.length===0?0:Math.round(i.filter(e=>e.status==="done").length/i.length*100),Hc={active:0,proposed:1,planning:2,review:3,completed:4,failed:5,archived:6},iy=(i,e)=>{if(i==="failed")return{bg:"bg-red-50",border:"border-red-200 hover:border-red-300",label:"Tamamlanamayan alma",labelClass:"bg-red-100 text-red-700",icon:""};if(i==="completed")return{bg:"bg-emerald-50",border:"border-emerald-200 hover:border-emerald-300",label:"Tamamland",labelClass:"bg-emerald-100 text-emerald-700",icon:""};if(e){const n=new Date,a=new Date(e),o=Math.ceil((a-n)/(1e3*60*60*24));if(o>=0&&o<=30)return{bg:"bg-amber-50",border:"border-amber-200 hover:border-amber-300",label:`Sre: ${o} gn`,labelClass:"bg-amber-100 text-amber-700",icon:""}}return null},ct=({children:i,className:e=""})=>t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${e}`,children:i}),Sm=({value:i,className:e=""})=>t.jsx("div",{className:`w-full bg-slate-100 rounded-full h-1.5 ${e}`,children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:`${i}%`,background:i===100?"#10b981":i>60?"#6366f1":i>30?"#f59e0b":"#94a3b8"}})}),Vn=({name:i,color:e,size:n="sm"})=>{const a={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-14 h-14 text-lg",xl:"w-20 h-20 text-2xl"};return t.jsx("div",{className:`${a[n]} rounded-full flex items-center justify-center text-white font-semibold flex-shrink-0`,style:{backgroundColor:e||"#6366f1"},children:VN(i)})},ei=({icon:i,label:e,value:n,href:a})=>n?t.jsxs("div",{className:"flex items-start gap-2.5 py-1.5",children:[t.jsx(i,{size:14,className:"text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs text-slate-400",children:e}),a?t.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline break-all",children:n}):t.jsx("p",{className:"text-sm text-slate-700",children:n})]})]}):null,Yl=({label:i,icon:e,options:n,value:a,onChange:o,className:d=""})=>{var v;const[h,p]=B.useState(!1);return t.jsxs("div",{className:`relative ${d}`,children:[t.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors text-slate-600",children:[e&&t.jsx(e,{size:14}),t.jsx("span",{children:a&&((v=n.find(b=>b.value===a))==null?void 0:v.label)||i}),t.jsx(ag,{size:14,className:`transition-transform ${h?"rotate-180":""}`})]}),h&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),t.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-20 min-w-[160px]",children:[t.jsx("button",{onClick:()=>{o(""),p(!1)},className:`w-full text-left px-3 py-1.5 text-sm hover:bg-slate-50 ${a?"text-slate-600":"text-indigo-600 font-medium"}`,children:"Tm"}),n.map(b=>t.jsxs("button",{onClick:()=>{o(b.value),p(!1)},className:`w-full text-left px-3 py-1.5 text-sm hover:bg-slate-50 flex items-center gap-2 ${a===b.value?"text-indigo-600 font-medium":"text-slate-600"}`,children:[b.dot&&t.jsx("span",{className:`w-2 h-2 rounded-full ${b.dot}`}),b.label]},b.value))]})]})]})},ON=({onSelect:i,onCancel:e,position:n})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40 bg-black/20",onClick:e}),t.jsxs("div",{className:"fixed z-50 bg-white rounded-xl shadow-2xl border border-slate-200 p-4 w-64",style:{top:(n==null?void 0:n.y)||"50%",left:(n==null?void 0:n.x)||"50%",transform:"translate(-50%, -50%)"},children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[t.jsx(au,{size:16,className:"text-indigo-500"}),"Rol Sein"]}),t.jsx("div",{className:"space-y-1.5",children:Object.entries(Jt).map(([a,o])=>t.jsx("button",{onClick:()=>i(a),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-50 transition-colors text-left",children:t.jsx(ct,{className:o.color,children:o.label})},a))}),t.jsx("button",{onClick:e,className:"mt-3 w-full text-center text-xs text-slate-400 hover:text-slate-600",children:"ptal"})]})]}),LN=({task:i,researchers:e,onStatusChange:n,onDelete:a})=>{const o=e.find(p=>p.id===i.assignedTo),d={todo:"in_progress",in_progress:"done",done:"todo"},h=MN[i.status];return t.jsxs("div",{className:"flex items-center gap-2 py-1.5 group",children:[t.jsx("button",{onClick:()=>n(i.id,d[i.status]),className:"flex-shrink-0 hover:scale-110 transition-transform",title:"Durum deitir",children:h.icon}),t.jsx("span",{className:`text-sm flex-1 ${i.status==="done"?"line-through text-slate-400":"text-slate-700"}`,children:i.title}),o&&t.jsx(Vn,{name:o.name,color:o.color,size:"xs"}),t.jsx("button",{onClick:()=>a(i.id),className:"opacity-0 group-hover:opacity-100 text-slate-300 hover:text-red-400 transition-all",children:t.jsx(Rr,{size:12})})]})},FN=({message:i,type:e="success",onClose:n})=>{const a={success:"bg-emerald-500",info:"bg-indigo-500",warning:"bg-amber-500",error:"bg-red-500"};return t.jsxs("div",{className:`fixed bottom-6 left-6 z-[60] ${a[e]} text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 animate-slide-up text-sm font-medium`,children:[e==="success"&&t.jsx(Po,{size:16}),e==="info"&&t.jsx(ru,{size:16}),i,t.jsx("button",{onClick:n,className:"ml-2 hover:bg-white/20 rounded p-0.5",children:t.jsx(Rr,{size:14})})]})},$N=({researcher:i,onClick:e,isAdmin:n,topics:a,projects:o,maximized:d,editingBy:h})=>{const p=(a||[]).filter(F=>F.researchers.some(z=>z.researcherId===i.id)),v=p.filter(F=>F.status==="proposed").length,b=p.filter(F=>F.status==="active").length,T=p.filter(F=>F.status==="completed").length,M=p.length,V=p.filter(F=>(o||[]).some(z=>(z.topics||[]).includes(F.id))),X=V.length,oe={};return V.forEach(F=>{F.projectType&&(oe[F.projectType]=(oe[F.projectType]||0)+1)}),t.jsxs("div",{draggable:n,onDragStart:F=>{if(!n){F.preventDefault();return}F.stopPropagation(),F.dataTransfer.setData("type","researcher"),F.dataTransfer.setData("id",i.id),F.dataTransfer.effectAllowed="copy"},onClick:F=>{F.stopPropagation(),e(i)},className:`bg-white rounded-xl border cursor-grab active:cursor-grabbing
        hover:shadow-md transition-all duration-200 group relative ${d?"p-4":"p-3"} ${h?`${h.color.border} border-2 ring-1 ${h.color.ring} shadow-md`:"border-slate-200 hover:border-indigo-200"}`,children:[h&&t.jsxs("div",{className:`absolute -top-2.5 right-3 flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-semibold text-white ${h.color.bg} shadow-sm z-10`,children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),h.displayName," dzenliyor"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Vn,{name:i.name,color:i.color,size:"md"}),M>0&&t.jsx("div",{className:`absolute -top-1 -right-1 min-w-[20px] h-5 px-1 rounded-full flex items-center justify-center text-[10px] font-bold text-white ring-2 ring-white shadow-sm ${b>0?"bg-emerald-500":T>0?"bg-blue-500":"bg-slate-400"}`,title:`${v} nerilen  ${b} aktif  ${T} tamamlanan`,children:M})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("p",{className:`font-semibold text-slate-800 truncate ${d?"text-base":"text-sm"}`,children:[i.title," ",i.name]}),t.jsxs("p",{className:`text-slate-500 truncate ${d?"text-sm":"text-xs"}`,children:[i.institution,i.unit?`  ${i.unit}`:""]}),M>0?t.jsxs("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[v>0&&t.jsxs(ct,{className:"bg-slate-100 text-slate-600",children:[v," nerilen"]}),b>0&&t.jsxs(ct,{className:"bg-emerald-50 text-emerald-700",children:[b," Aktif"]}),T>0&&t.jsxs(ct,{className:"bg-blue-50 text-blue-700",children:[T," Tamamlanan"]}),M>v+b+T&&t.jsxs(ct,{className:"bg-red-50 text-red-600",children:["+",M-v-b-T]})]}):t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5",children:[i.researchAreas.slice(0,2).map(F=>t.jsx(ct,{className:"bg-slate-100 text-slate-600",children:F},F)),i.researchAreas.length>2&&t.jsxs(ct,{className:"bg-slate-50 text-slate-400",children:["+",i.researchAreas.length-2]})]}),X>0&&t.jsxs("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[t.jsxs(ct,{className:"bg-violet-100 text-violet-700 border border-violet-200",style:{fontSize:"10px",padding:"1px 5px"},children:[t.jsx(bt,{size:10,className:"mr-0.5 inline"}),X,"p"]}),Object.entries(oe).slice(0,3).map(([F,z])=>t.jsxs(ct,{className:"bg-violet-50 text-violet-600 border border-violet-200",style:{fontSize:"9px",padding:"1px 4px"},children:[F.length>12?F.slice(0,12)+"":F," ",z]},F)),Object.keys(oe).length>3&&t.jsxs(ct,{className:"bg-violet-50 text-violet-400",style:{fontSize:"9px",padding:"1px 4px"},children:["+",Object.keys(oe).length-3]})]}),(()=>{const F=p.filter(ne=>{var Z,ee;return ne.status==="completed"&&((ee=(Z=ne.publishingIndex)==null?void 0:Z.types)==null?void 0:ee.length)>0});if(F.length===0)return null;const z={};return F.forEach(ne=>ne.publishingIndex.types.forEach(Z=>{z[Z]=(z[Z]||0)+1})),t.jsxs("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[t.jsxs("span",{className:"text-[10px] text-blue-500 font-medium",children:[F.length," yayn:"]}),Object.entries(z).slice(0,3).map(([ne,Z])=>{const ee=(Sn||[]).find(Q=>Q.id===ne);return ee?t.jsxs("span",{className:"px-1.5 py-0.5 rounded-full text-[9px] font-bold text-white",style:{backgroundColor:ee.color},children:[ee.label," ",Z>1?`${Z}`:""]},ne):null}),Object.keys(z).length>3&&t.jsxs("span",{className:"text-[9px] text-slate-400",children:["+",Object.keys(z).length-3]})]})})()]}),t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(ug,{size:16,className:"text-slate-300"}),i.isAofMember&&t.jsx("span",{className:"text-[8px] font-bold text-teal-600 bg-teal-50 border border-teal-200 rounded px-1 py-0.5 leading-none",title:"AF retim yesi",children:"AF"}),i.hasPIExperience&&t.jsx(ni,{size:12,className:"text-amber-400",title:"Proje Yrtcl Deneyimi"})]})]})]})},BN=({researcher:i,topics:e,projects:n,isAdmin:a,onClose:o,onUpdate:d,onSelectTopic:h,onDeleteResearcher:p,editingBy:v,allResearchers:b})=>{const[T,M]=B.useState(!1),[V,X]=B.useState({...i}),oe=(x,A)=>X({...V,[x]:A}),F="w-full text-sm border border-slate-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300",z=e.filter(x=>x.researchers.some(A=>A.researcherId===i.id)),ne=z.filter(x=>(n||[]).some(A=>(A.topics||[]).includes(x.id))),Z=ne.length,ee={};ne.forEach(x=>{x.projectType&&(ee[x.projectType]=(ee[x.projectType]||0)+1)});const[Q,ye]=B.useState(""),je=()=>{ye("");const x=(V.name||"").trim().toLowerCase();if(x){const A=(b||[]).find(k=>k.id!==i.id&&k.name.trim().toLowerCase()===x);if(A){ye(`"${A.name}" adnda baka bir aratrmac zaten mevcut!`);return}}d({...V,languages:typeof V.languages=="string"?V.languages.split(",").map(A=>A.trim()).filter(Boolean):V.languages,researchAreas:typeof V.researchAreas=="string"?V.researchAreas.split(",").map(A=>A.trim()).filter(Boolean):V.researchAreas,tools:typeof V.tools=="string"?V.tools.split(",").map(A=>A.trim()).filter(Boolean):V.tools}),M(!1),ye("")},O=()=>{X({...i}),M(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:o}),t.jsxs("div",{className:`fixed inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2
        md:w-[580px] md:max-h-[85vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden`,children:[v&&t.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 text-xs font-medium text-white ${v.color.bg}`,children:[t.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),t.jsxs("span",{children:[v.displayName," de bu profili dzenliyor"]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-5 relative flex-shrink-0",children:[t.jsxs("div",{className:"absolute top-3 right-3 flex gap-1.5",children:[a&&t.jsx("button",{onClick:()=>T?O():M(!0),className:`p-1.5 rounded-lg text-white ${T?"bg-white/30":"bg-white/20 hover:bg-white/30"}`,title:T?"Dzenlemeyi iptal et":"Profili dzenle",children:T?t.jsx(Fv,{size:16}):t.jsx(Ql,{size:16})}),t.jsx("button",{onClick:o,className:"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white",children:t.jsx(Rr,{size:16})})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[t.jsx("div",{className:"ring-4 ring-white/30 rounded-full flex-shrink-0",children:t.jsx(Vn,{name:T?V.name:i.name,color:i.color,size:"xl"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[T?t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:V.title,onChange:x=>oe("title",x.target.value),placeholder:"Unvan",className:"text-sm bg-white/20 border border-white/30 rounded px-2 py-1 w-28 text-white placeholder-white/60"}),t.jsx("input",{value:V.name,onChange:x=>oe("name",x.target.value),placeholder:"Ad Soyad",className:"text-sm bg-white/20 border border-white/30 rounded px-2 py-1 flex-1 font-bold text-white placeholder-white/60"})]}):t.jsxs("h2",{className:"text-xl font-bold text-white drop-shadow-sm truncate",children:[i.title," ",i.name]}),t.jsxs("p",{className:"text-sm text-white/70 mt-1",children:[i.institution,i.unit?`  ${i.unit}`:""]})]})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-5 space-y-4",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:T?t.jsxs(t.Fragment,{children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:V.hasPIExperience,onChange:x=>oe("hasPIExperience",x.target.checked),className:"rounded border-slate-300"}),"Proje Yrtcl Deneyimi"]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-teal-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:V.isAofMember||!1,onChange:x=>oe("isAofMember",x.target.checked),className:"rounded border-teal-300 text-teal-500 focus:ring-teal-200"}),"AF retim yesi"]})]}):t.jsxs(t.Fragment,{children:[i.isAofMember&&t.jsx(ct,{className:"bg-teal-100 text-teal-700",children:"AF retim yesi"}),i.hasPIExperience?t.jsxs(ct,{className:"bg-amber-100 text-amber-700",children:[t.jsx(ni,{size:11,className:"mr-1"}),"Proje Yrtcl Deneyimi Var"]}):t.jsx(ct,{className:"bg-slate-100 text-slate-500",children:"Proje Yrtcl Deneyimi Yok"}),t.jsx(ct,{className:"bg-indigo-50 text-indigo-600",children:i.eduDegree}),t.jsx(ct,{className:"bg-slate-100 text-slate-600",children:i.eduStatus})]})}),!T&&(()=>{const x=z,A={proposed:0,active:0,completed:0};x.forEach(we=>{A[we.status]!==void 0&&A[we.status]++});const k=new Set(x.map(we=>we.id)),E=(n||[]).filter(we=>(we.researchers||[]).some(H=>H.researcherId===i.id)||(we.topics||[]).some(H=>k.has(H))),_={proposed:0,planning:0,active:0,completed:0};E.forEach(we=>{_[we.status]!==void 0&&_[we.status]++});const P=(_.proposed||0)+(_.planning||0),ge=[...x,...E].flatMap(we=>we.tasks||[]),Ve=ge.filter(we=>we.status==="done").length,Ne={};return x.forEach(we=>{const H=we.researchers.find(Y=>Y.researcherId===i.id);H!=null&&H.role&&(Ne[H.role]=(Ne[H.role]||0)+1)}),t.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-indigo-50/30 rounded-xl p-4 border border-slate-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[t.jsx(yo,{size:12,className:"text-indigo-500"}),"Kiisel statistikler"]}),t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Konular"}),t.jsxs("div",{className:"grid grid-cols-3 gap-1.5 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 bg-slate-50 rounded-lg border border-slate-100",children:[t.jsx(Pt,{size:12,className:"text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] text-slate-400",children:"nerilen"}),t.jsx("p",{className:"text-sm font-bold text-slate-700",children:A.proposed})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 bg-emerald-50 rounded-lg border border-emerald-100",children:[t.jsx(Pt,{size:12,className:"text-emerald-500 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] text-emerald-500",children:"Aktif"}),t.jsx("p",{className:"text-sm font-bold text-emerald-700",children:A.active})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 bg-blue-50 rounded-lg border border-blue-100",children:[t.jsx(Pt,{size:12,className:"text-blue-500 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] text-blue-500",children:"Tamamlanan"}),t.jsx("p",{className:"text-sm font-bold text-blue-700",children:A.completed})]})]})]}),t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Projeler"}),t.jsxs("div",{className:"grid grid-cols-3 gap-1.5 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 bg-amber-50 rounded-lg border border-amber-100",children:[t.jsx(bt,{size:12,className:"text-amber-500 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] text-amber-500",children:"nerilen"}),t.jsx("p",{className:"text-sm font-bold text-amber-700",children:P})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 bg-violet-50 rounded-lg border border-violet-100",children:[t.jsx(bt,{size:12,className:"text-violet-500 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] text-violet-500",children:"Aktif"}),t.jsx("p",{className:"text-sm font-bold text-violet-700",children:_.active})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-2 bg-teal-50 rounded-lg border border-teal-100",children:[t.jsx(bt,{size:12,className:"text-teal-500 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-[9px] text-teal-500",children:"Tamamlanan"}),t.jsx("p",{className:"text-sm font-bold text-teal-700",children:_.completed})]})]})]}),t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Grevler"}),t.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2.5 border border-slate-100 mb-3",children:[t.jsx(Po,{size:14,className:"text-emerald-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("span",{className:"text-xs text-slate-600 font-medium",children:[Ve," / ",ge.length," tamamland"]}),t.jsxs("span",{className:"text-[10px] font-bold text-indigo-600",children:[ge.length>0?Math.round(Ve/ge.length*100):0,"%"]})]}),t.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-emerald-500 h-1.5 rounded-full transition-all",style:{width:`${ge.length>0?Ve/ge.length*100:0}%`}})})]})]}),Z>0&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:["Projelendirilmi Konular (",Z,")"]}),t.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:Object.entries(ee).sort((we,H)=>H[1]-we[1]).map(([we,H])=>t.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-indigo-50 text-indigo-700 text-xs font-medium border border-indigo-100",children:[t.jsx(bt,{size:10}),t.jsx("span",{children:we}),t.jsxs("span",{className:"font-bold",children:["",H]})]},we))})]}),t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Rol Dalm"}),t.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[Object.entries(Jt).map(([we,H])=>{const Y=Ne[we]||0;return Y===0?null:t.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg ${H.color} text-xs font-medium`,children:[t.jsx("span",{children:H.label}),t.jsx("span",{className:"font-bold",children:Y})]},we)}),Object.keys(Ne).length===0&&t.jsx("span",{className:"text-xs text-slate-400 italic",children:"Atama yok"})]})]})})(),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 space-y-2",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:"letiim"}),T?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{value:V.email,onChange:x=>oe("email",x.target.value),placeholder:"E-posta",className:F}),t.jsx("input",{value:V.phone,onChange:x=>oe("phone",x.target.value),placeholder:"Telefon",className:F})]}),t.jsx("input",{value:V.url,onChange:x=>oe("url",x.target.value),placeholder:"Profil URL",className:F})]}):t.jsxs(t.Fragment,{children:[t.jsx(ei,{icon:dg,label:"E-posta",value:i.email,href:`mailto:${i.email}`}),t.jsx(ei,{icon:zv,label:"Telefon",value:i.phone}),i.url&&t.jsx(ei,{icon:ps,label:"Profil URL",value:i.url,href:i.url})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 space-y-2",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:"renim Bilgileri"}),T?t.jsxs(t.Fragment,{children:[t.jsx("input",{value:V.eduUniversity,onChange:x=>oe("eduUniversity",x.target.value),placeholder:"niversite",className:F}),t.jsx("input",{value:V.eduProgram,onChange:x=>oe("eduProgram",x.target.value),placeholder:"Program",className:F}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("select",{value:V.eduDegree,onChange:x=>oe("eduDegree",x.target.value),className:F,children:go.map(x=>t.jsx("option",{value:x,children:x},x))}),t.jsx("select",{value:V.eduStatus,onChange:x=>oe("eduStatus",x.target.value),className:F,children:xo.map(x=>t.jsx("option",{value:x,children:x},x))})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(ei,{icon:vo,label:"niversite",value:i.eduUniversity}),t.jsx(ei,{icon:Pt,label:"Program",value:i.eduProgram}),t.jsx(ei,{icon:ni,label:"Derece",value:i.eduDegree}),t.jsx(ei,{icon:Ev,label:"Durum",value:i.eduStatus})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 space-y-2",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:"Kurum Bilgileri"}),T?t.jsxs(t.Fragment,{children:[t.jsx("input",{value:V.institution,onChange:x=>oe("institution",x.target.value),placeholder:"alt Kurum",className:F}),t.jsx("input",{value:V.unit,onChange:x=>oe("unit",x.target.value),placeholder:"Birimi",className:F})]}):t.jsxs(t.Fragment,{children:[t.jsx(ei,{icon:Ti,label:"alt Kurum",value:i.institution}),t.jsx(ei,{icon:Nh,label:"Birimi",value:i.unit})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Yabanc Diller"}),T?t.jsx("input",{value:Array.isArray(V.languages)?V.languages.join(", "):V.languages,onChange:x=>oe("languages",x.target.value),placeholder:"Virglle ayrarak yazn...",className:F}):t.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(i.languages||[]).map(x=>t.jsxs(ct,{className:"bg-blue-50 text-blue-600",children:[t.jsx(Av,{size:11,className:"mr-1"}),x]},x)),(!i.languages||i.languages.length===0)&&t.jsx("span",{className:"text-sm text-slate-400 italic",children:"Belirtilmemi"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"alma Alanlar"}),T?t.jsx("textarea",{value:Array.isArray(V.researchAreas)?V.researchAreas.join(", "):V.researchAreas,onChange:x=>oe("researchAreas",x.target.value),placeholder:"Virglle ayrarak yazn...",className:F+" h-20 resize-none"}):t.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.researchAreas.map(x=>t.jsx(ct,{className:"bg-indigo-50 text-indigo-700",children:x},x))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Kullanabildii Aralar"}),T?t.jsx("input",{value:Array.isArray(V.tools)?V.tools.join(", "):V.tools,onChange:x=>oe("tools",x.target.value),placeholder:"Virglle ayrarak yazn...",className:F}):t.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(i.tools||[]).map(x=>t.jsxs(ct,{className:"bg-emerald-50 text-emerald-700",children:[t.jsx(wu,{size:10,className:"mr-1"}),x]},x)),(!i.tools||i.tools.length===0)&&t.jsx("span",{className:"text-sm text-slate-400 italic",children:"Belirtilmemi"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Aklama"}),T?t.jsx("textarea",{value:V.bio,onChange:x=>oe("bio",x.target.value),placeholder:"Aklama...",className:F+" h-20 resize-none"}):t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:i.bio||t.jsx("span",{className:"italic text-slate-400",children:"Belirtilmemi"})})]}),z.length>0&&(()=>{const x=[{key:"active",label:"Aktif",icon:"emerald"},{key:"completed",label:"Tamamland",icon:"blue"},{key:"failed",label:"Tamamlanamad",icon:"red"},{key:"proposed",label:"nerilen",icon:"slate"},{key:"planning",label:"lem Yaplyor",icon:"amber"},{key:"review",label:"nceleme",icon:"purple"},{key:"archived",label:"Ariv",icon:"gray"}],A={emerald:"bg-emerald-50",blue:"bg-blue-50",red:"bg-red-50",slate:"bg-slate-50",amber:"bg-amber-50",purple:"bg-purple-50",gray:"bg-gray-50"},k={emerald:"bg-emerald-500",blue:"bg-blue-500",red:"bg-red-500",slate:"bg-slate-400",amber:"bg-amber-500",purple:"bg-purple-500",gray:"bg-gray-400"},E={emerald:"text-emerald-700",blue:"text-blue-700",red:"text-red-700",slate:"text-slate-700",amber:"text-amber-700",purple:"text-indigo-700",gray:"text-gray-500"},_={lead:0,unit_manager:1,responsible:2,member:3,advisor:4,scholar:5},P=Ve=>(n||[]).find(Ne=>(Ne.topics||[]).includes(Ve)),ge={};return z.forEach(Ve=>{const Ne=Ve.researchers.find(we=>we.researcherId===i.id);Ne!=null&&Ne.role&&(ge[Ne.role]=(ge[Ne.role]||0)+1)}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:["Atand Konular (",z.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:Object.entries(Jt).map(([Ve,Ne])=>{const we=ge[Ve]||0;return we===0?null:t.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg ${Ne.color} text-xs font-medium`,children:[t.jsx("span",{children:Ne.label}),t.jsx("span",{className:"font-bold",children:we})]},Ve)})}),t.jsx("div",{className:"space-y-3",children:x.map(Ve=>{const Ne=z.filter(we=>we.status===Ve.key).sort((we,H)=>{var K,q;const Y=(n||[]).some(j=>(j.topics||[]).includes(we.id))?0:1,ue=(n||[]).some(j=>(j.topics||[]).includes(H.id))?0:1;if(Y!==ue)return Y-ue;const w=((K=we.researchers.find(j=>j.researcherId===i.id))==null?void 0:K.role)||"member",R=((q=H.researchers.find(j=>j.researcherId===i.id))==null?void 0:q.role)||"member";return(_[w]??99)-(_[R]??99)});return Ne.length===0?null:t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${k[Ve.icon]}`}),t.jsxs("span",{className:`text-xs font-semibold ${E[Ve.icon]}`,children:[Ve.label," (",Ne.length,")"]})]}),t.jsx("div",{className:"space-y-1",children:Ne.map(we=>{var w,R,K;const H=we.researchers.find(q=>q.researcherId===i.id),Y=P(we.id),ue=!!Y;return t.jsxs("button",{onClick:()=>{h&&(o(),h(we))},className:`w-full flex items-center gap-2 p-2 rounded-lg transition-all text-left group ${ue?"bg-gradient-to-r from-violet-50 to-indigo-50 border border-violet-200 ring-1 ring-violet-100 shadow-sm":`${A[Ve.icon]} hover:ring-2 hover:ring-indigo-200`}`,children:[ue?t.jsx(bt,{size:14,className:"text-violet-500 flex-shrink-0"}):t.jsx(Pt,{size:14,className:`${E[Ve.icon]} flex-shrink-0`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{className:`text-sm font-medium truncate block group-hover:text-indigo-600 ${ue?"text-violet-800":E[Ve.icon]}`,children:we.title}),ue&&t.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 flex-wrap",children:[t.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-violet-100 text-[10px] font-semibold text-violet-700",children:[t.jsx(bt,{size:9}),((w=Y.title)==null?void 0:w.length)>30?Y.title.slice(0,30)+"...":Y.title]}),Y.type&&t.jsxs("span",{className:"text-[10px] text-violet-500 font-medium",children:[Y.type,Y.projectTypeDetail?`  ${Y.projectTypeDetail}`:""]})]})]}),t.jsx(ct,{className:((R=Jt[H==null?void 0:H.role])==null?void 0:R.color)||"bg-slate-100",children:((K=Jt[H==null?void 0:H.role])==null?void 0:K.label)||(H==null?void 0:H.role)}),t.jsx(Pi,{size:12,className:"text-slate-300 group-hover:text-indigo-400 flex-shrink-0"})]},we.id)})})]},Ve.key)})})]})})(),(()=>{const x=z.filter(_=>{var P,ge;return _.status==="completed"&&((ge=(P=_.publishingIndex)==null?void 0:P.types)==null?void 0:ge.length)>0});if(x.length===0)return null;const A={};x.forEach(_=>_.publishingIndex.types.forEach(P=>{A[P]=(A[P]||0)+1}));const k=Object.entries(A).sort((_,P)=>P[1]-_[1]),E=Math.max(...k.map(_=>_[1]),1);return t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:["Yayn ndeksleri (",x.length," yayn)"]}),t.jsx("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-100",children:t.jsx("div",{className:"space-y-2",children:k.map(([_,P])=>{const ge=(Sn||[]).find(Ve=>Ve.id===_);return ge?t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-20 text-right flex-shrink-0",children:ge.label}),t.jsx("div",{className:"flex-1 bg-blue-100 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(P/E*100,15)}%`,backgroundColor:ge.color},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:P})})})]},_):null})})})]})})(),t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Performans Takip Notlar"}),T?t.jsx("textarea",{value:V.performanceNotes,onChange:x=>oe("performanceNotes",x.target.value),placeholder:"Performans notlar...",className:F+" h-24 resize-none"}):t.jsx("div",{className:"bg-amber-50 rounded-lg p-3",children:t.jsx("p",{className:"text-sm text-slate-600",children:i.performanceNotes||t.jsx("span",{className:"italic text-slate-400",children:"Henz not eklenmedi"})})})]}),T&&t.jsxs("div",{className:"pt-2 border-t border-slate-100",children:[Q&&t.jsxs("p",{className:"text-xs text-red-500 mb-2 flex items-center gap-1.5 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:[t.jsx(Di,{size:14,className:"flex-shrink-0"}),Q]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:je,className:"flex-1 px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors",children:"Kaydet"}),t.jsx("button",{onClick:O,className:"px-4 py-2 bg-slate-100 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-200 transition-colors",children:"ptal"})]})]}),!T&&a&&p&&t.jsxs("div",{className:"pt-3 mt-3 border-t border-red-100",children:[t.jsxs("button",{onClick:()=>p(i.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-xl border border-red-200 transition-colors",children:[t.jsx(Qn,{size:14}),"Kiiyi Sil"]}),t.jsx("p",{className:"text-[10px] text-slate-400 text-center mt-1.5",children:"Kii kalc olarak silinir. Atand tm konulardan ve projelerden kaldrlr."})]})]})]})]})},UN=({topic:i,allResearchers:e,onDrop:n,onClick:a,isAdmin:o,projects:d,allTopics:h,onRemoveFromProject:p,maximized:v,editingBy:b})=>{var Q,ye,je,O;const[T,M]=B.useState(!1),V=Ot[i.status]||Ot.proposed,X=Zn[i.priority]||Zn.medium,oe=(d||[]).some(x=>(x.topics||[]).includes(i.id)),F=oe?(d||[]).find(x=>(x.topics||[]).includes(i.id)):null,z=nl(oe&&F?[...F.tasks||[],...(F.topics||[]).flatMap(x=>{const A=(h||[]).find(k=>k.id===x);return A?A.tasks||[]:[]})]:i.tasks),ne=iy(i.status,i.endDate),Z=oe?"bg-slate-100 opacity-80 hover:opacity-100":ne?`${ne.bg} hover:shadow-md`:"bg-white hover:shadow-md",ee=b?`${b.color.border} border-2 ring-1 ${b.color.ring} shadow-md`:T?"border-indigo-400 bg-indigo-50 shadow-lg ring-2 ring-indigo-200":oe?"border-slate-300":ne?ne.border:"border-slate-200 hover:border-indigo-200";return t.jsxs("div",{draggable:o,onDragStart:x=>{if(!o){x.preventDefault();return}x.dataTransfer.setData("type","topic"),x.dataTransfer.setData("id",i.id),x.dataTransfer.effectAllowed="copy"},onDragOver:x=>{x.preventDefault(),M(!0)},onDragLeave:()=>M(!1),onDrop:x=>{x.preventDefault(),M(!1);const A=x.dataTransfer.getData("type"),k=x.dataTransfer.getData("id");A==="researcher"&&n(i.id,k,x)},onClick:()=>a(i),className:`rounded-xl border cursor-pointer transition-all duration-200 relative ${Z} ${ee} ${v?"p-4":"p-3"}`,children:[b&&t.jsxs("div",{className:`absolute -top-2.5 right-3 flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-semibold text-white ${b.color.bg} shadow-sm z-10`,children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),b.displayName," dzenliyor"]}),ne&&!oe&&t.jsxs("div",{className:`flex items-center gap-1.5 mb-2 px-2 py-1 rounded-lg ${ne.labelClass}`,children:[t.jsx("span",{className:"text-xs",children:ne.icon}),t.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:ne.label})]}),oe&&t.jsxs("div",{className:"flex items-center gap-1.5 mb-2 px-2 py-1 bg-slate-200/80 rounded-lg",children:[t.jsx(bt,{size:12,className:"text-slate-500"}),t.jsx("span",{className:"text-[11px] font-semibold text-slate-600 uppercase tracking-wide",children:"Projelendirildi"}),F&&t.jsx("span",{className:"text-[10px] text-slate-500 truncate max-w-[100px]",children:F.title}),o&&p&&t.jsxs("button",{onClick:x=>{x.stopPropagation(),p(i.id)},className:"ml-auto px-1.5 py-0.5 text-[10px] font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors",title:"Projelendirmeyi ptal Et",children:[t.jsx(Rr,{size:10,className:"inline mr-0.5"}),"ptal"]})]}),t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h3",{className:`font-semibold flex-1 pr-2 ${v?"text-base":"text-sm"} ${oe?"text-slate-600":i.status==="failed"?"text-red-700":i.status==="completed"?"text-emerald-700":"text-slate-800"}`,children:i.title}),t.jsx(ug,{size:16,className:"text-slate-300 flex-shrink-0"})]}),t.jsxs("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[t.jsxs(ct,{className:V.color,children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${V.dot} mr-1`}),V.label]}),t.jsxs(ct,{className:X.color,children:[X.icon," ",X.label]}),i.projectType&&(d||[]).some(x=>(x.topics||[]).includes(i.id))&&t.jsxs(ct,{className:"bg-violet-50 text-violet-600",children:[i.projectType,i.projectTypeDetail?`: ${i.projectTypeDetail}`:""]}),i.category&&t.jsx(ct,{className:"bg-blue-50 text-blue-600",children:i.category}),((ye=(Q=i.publishingIndex)==null?void 0:Q.types)==null?void 0:ye.length)>0&&i.publishingIndex.types.slice(0,3).map(x=>{const A=(Sn||[]).find(k=>k.id===x);return A?t.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[9px] font-bold text-white",style:{backgroundColor:A.color},children:A.label},x):null}),((O=(je=i.publishingIndex)==null?void 0:je.types)==null?void 0:O.length)>3&&t.jsxs("span",{className:"text-[9px] text-slate-400",children:["+",i.publishingIndex.types.length-3]})]}),t.jsx("p",{className:`text-slate-500 mb-3 ${v?"text-sm line-clamp-3":"text-xs line-clamp-2"}`,children:i.description}),i.tasks.length>0&&t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs text-slate-400",children:"Grev Tamamlanma"}),t.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[z,"%"]})]}),t.jsx(Sm,{value:z})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("div",{className:"flex -space-x-1.5",children:[i.researchers.slice(0,4).map(x=>{const A=e.find(k=>k.id===x.researcherId);return A?t.jsx(Vn,{name:A.name,color:A.color,size:"xs"},A.id):null}),i.researchers.length>4&&t.jsxs("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:["+",i.researchers.length-4]})]}),i.researchers.some(x=>x.isIdeaOwner)&&t.jsxs("span",{className:"text-[10px] text-yellow-600 bg-yellow-50 px-1 py-0.5 rounded flex items-center gap-0.5",title:`Fikir: ${i.researchers.filter(x=>x.isIdeaOwner).map(x=>{const A=e.find(k=>k.id===x.researcherId);return A?A.name.split(" ").pop():""}).join(", ")}`,children:["",i.researchers.filter(x=>x.isIdeaOwner).map(x=>{const A=e.find(k=>k.id===x.researcherId);return A?A.name.split(" ").pop():""}).join(", ")]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[i.workLink&&t.jsx("span",{title:"alma Linki",children:t.jsx(Pi,{size:12,className:"text-indigo-400"})}),i.tasks.length>0&&t.jsxs("span",{className:"flex items-center gap-0.5",children:[t.jsx(Xh,{size:12}),i.tasks.filter(x=>x.status==="done").length,"/",i.tasks.length]})]})]}),T&&t.jsx("div",{className:"mt-2 pt-2 border-t border-dashed border-indigo-300 text-center",children:t.jsxs("p",{className:"text-xs text-indigo-500 font-medium flex items-center justify-center gap-1",children:[t.jsx(wh,{size:12})," Aratrmacy bu konuya ekle"]})})]})},KN=({project:i,topics:e,allResearchers:n,onDrop:a,onClick:o,onCancelProject:d,isAdmin:h,maximized:p,editingBy:v})=>{const[b,T]=B.useState(!1),M=Ot[i.status]||Ot.planning,V=Zn[i.priority]||Zn.medium,X=e.filter(ye=>i.topics.includes(ye.id)),oe=[...i.tasks||[],...X.flatMap(ye=>ye.tasks||[])],F=nl(oe),z=B.useMemo(()=>{const ye=new Set;return(i.researchers||[]).forEach(je=>ye.add(je.researcherId)),X.forEach(je=>je.researchers.forEach(O=>ye.add(O.researcherId))),n.filter(je=>ye.has(je.id))},[i.researchers,X,n]),ne=B.useMemo(()=>[i.piCountry,...i.partnerCountries||[]].filter(Boolean).some(je=>je!=="Trkiye"),[i.piCountry,i.partnerCountries]),Z=iy(i.status,i.endDate),ee=Z?`${Z.bg} hover:shadow-md`:"bg-white hover:shadow-md",Q=v?`${v.color.border} border-2 ring-1 ${v.color.ring} shadow-md`:b?"border-emerald-400 bg-emerald-50 shadow-lg ring-2 ring-emerald-200":Z?Z.border:"border-slate-200 hover:border-emerald-200";return t.jsxs("div",{onDragOver:ye=>{ye.preventDefault(),ye.stopPropagation(),T(!0)},onDragLeave:()=>T(!1),onDrop:ye=>{ye.preventDefault(),ye.stopPropagation(),T(!1);const je=ye.dataTransfer.getData("type"),O=ye.dataTransfer.getData("id");je==="topic"&&a(i.id,O)},onClick:()=>o(i),className:`rounded-xl border cursor-pointer transition-all duration-200 relative ${ee} ${Q} ${p?"p-4":"p-3"}`,children:[v&&t.jsxs("div",{className:`absolute -top-2.5 right-3 flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-semibold text-white ${v.color.bg} shadow-sm z-10`,children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),v.displayName," dzenliyor"]}),Z&&t.jsxs("div",{className:`flex items-center gap-1.5 mb-2 px-2 py-1 rounded-lg ${Z.labelClass}`,children:[t.jsx("span",{className:"text-xs",children:Z.icon}),t.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:Z.label})]}),t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h3",{className:`font-semibold flex-1 pr-2 ${p?"text-base":"text-sm"} ${i.status==="failed"?"text-red-700":i.status==="completed"?"text-emerald-700":"text-slate-800"}`,children:i.title}),t.jsx(bt,{size:16,className:"text-slate-300 flex-shrink-0"})]}),t.jsxs("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[t.jsxs(ct,{className:M.color,children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${M.dot} mr-1`}),M.label]}),t.jsxs(ct,{className:V.color,children:[V.icon," ",V.label]}),ne&&t.jsxs(ct,{className:"bg-blue-50 text-blue-600 border border-blue-200",children:[t.jsx(ps,{size:11,className:"mr-0.5"}),"Uluslararas"]}),i.fundingSource&&t.jsx(ct,{className:"bg-violet-50 text-violet-600",children:i.fundingSource}),i.type&&t.jsx(ct,{className:"bg-sky-50 text-sky-600",children:i.type})]}),t.jsx("p",{className:`text-slate-500 mb-3 ${p?"text-sm line-clamp-3":"text-xs line-clamp-2"}`,children:i.description}),i.budget>0&&t.jsx("p",{className:"text-xs text-slate-500 mb-2",children:t.jsxs("span",{className:"font-medium text-slate-700",children:["",i.budget.toLocaleString("tr-TR")]})}),oe.length>0&&t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:["Grev Tamamlanma",t.jsx("span",{className:"inline-flex items-center justify-center w-3.5 h-3.5 rounded-full bg-slate-200 text-slate-500 cursor-help text-[8px] font-bold",title:`Tamamlanan / Toplam grev: Projenin kendi grevleri (${(i.tasks||[]).length}) + bal konularn grevleri (${X.flatMap(ye=>ye.tasks||[]).length}) = ${oe.length} grev`,children:"i"})]}),t.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[F,"%"]})]}),t.jsx(Sm,{value:F})]}),X.length>0&&t.jsx("div",{className:"mb-2",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:X.map(ye=>t.jsxs(ct,{className:"bg-blue-50 text-blue-600 text-xs",children:[t.jsx(Pt,{size:10,className:"mr-0.5"}),ye.title.slice(0,20)]},ye.id))})}),(()=>{const ye=new Set;if(X.forEach(O=>(O.researchers||[]).filter(x=>x.isIdeaOwner).forEach(x=>ye.add(x.researcherId))),(i.researchers||[]).filter(O=>O.isIdeaOwner).forEach(O=>ye.add(O.researcherId)),ye.size===0)return null;const je=[...ye].map(O=>{const x=n.find(A=>A.id===O);return x?x.name.split(" ").pop():""}).filter(Boolean);return t.jsx("div",{className:"mb-2 flex items-center gap-1 flex-wrap",children:t.jsxs("span",{className:"text-[10px] text-yellow-600 bg-yellow-50 px-1.5 py-0.5 rounded flex items-center gap-0.5 border border-yellow-200",title:`Fikir Sahibi: ${je.join(", ")}`,children:["",je.join(", ")]})})})(),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex -space-x-1.5",children:[z.slice(0,4).map(ye=>t.jsx(Vn,{name:ye.name,color:ye.color,size:"xs"},ye.id)),z.length>4&&t.jsxs("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:["+",z.length-4]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[t.jsxs("span",{className:"flex items-center gap-0.5",children:[t.jsx(Cv,{size:12}),X.length]}),t.jsxs("span",{className:"flex items-center gap-0.5",children:[t.jsx(_n,{size:12}),z.length]})]})]}),h&&d&&t.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100 relative z-10",children:t.jsxs("button",{type:"button",onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),d(i.id)},onMouseDown:ye=>ye.stopPropagation(),className:"w-full text-center text-[11px] text-red-500 hover:text-white hover:bg-red-500 py-2 rounded-lg transition-colors flex items-center justify-center gap-1.5 border border-red-200 hover:border-red-500 cursor-pointer select-none",children:[t.jsx(Qn,{size:12}),"Projeyi ptal Et"]})}),b&&t.jsx("div",{className:"mt-2 pt-2 border-t border-dashed border-emerald-300 text-center",children:t.jsxs("p",{className:"text-xs text-emerald-600 font-medium flex items-center justify-center gap-1",children:[t.jsx(Pt,{size:12})," Konuyu bu projeye ekle"]})})]})},HN=({item:i,type:e,allResearchers:n,topics:a,projects:o,isAdmin:d,onClose:h,onUpdate:p,onSelectResearcher:v,onSelectTopic:b,onRemoveFromProject:T,onCancelProject:M,onDeleteTopic:V,editingBy:X})=>{var re,_e,ve,qe,Be;const oe=B.useMemo(()=>sy(o),[o]),[F,z]=B.useState(""),[ne,Z]=B.useState(!1),ee=B.useMemo(()=>({...i,piInstitution:i.piInstitution||"",piCountry:i.piCountry||"Trkiye",partnerInstitutions:Array.isArray(i.partnerInstitutions)?i.partnerInstitutions:[],partnerCountries:Array.isArray(i.partnerCountries)?i.partnerCountries:[]}),[i]),[Q,ye]=B.useState({...ee}),[je,O]=B.useState(!1),[x,A]=B.useState("member"),k=(C,ie)=>{const fe={...Q,[C]:ie};C==="status"&&Q.status==="completed"&&ie!=="completed"&&(fe.publishingIndex={types:[],date:"",notes:""}),ye(fe)},E="w-full text-sm border border-slate-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300",[_,P]=B.useState(""),ge=()=>{P("");const C={...Q};C.budget!==void 0&&(C.budget=parseFloat(C.budget)||0);const ie=(C.title||"").trim().toLowerCase();if(ie){if(H){const fe=a.find(Ke=>Ke.id!==i.id&&Ke.title.trim().toLowerCase()===ie);if(fe){P(`"${fe.title}" balnda bir konu zaten mevcut!`);return}}else if(Y){const fe=o.find(Ke=>Ke.id!==i.id&&Ke.title.trim().toLowerCase()===ie);if(fe){P(`"${fe.title}" balnda bir proje zaten mevcut!`);return}}}C.piInstitution=Nr(C.piInstitution||""),C.piCountry=C.piCountry||"Trkiye",typeof C.partnerInstitutions=="string"&&(C.partnerInstitutions=C.partnerInstitutions.split(",").map(fe=>Nr(fe.trim())).filter(Boolean)),Array.isArray(C.partnerInstitutions)?C.partnerInstitutions=C.partnerInstitutions.map(fe=>Nr(fe)):C.partnerInstitutions=[],Array.isArray(C.partnerCountries)||(C.partnerCountries=[]),p({...i,...C}),Z(!1),P("")},Ve=()=>{ye({...ee}),Z(!1)},Ne=Ot[i.status]||Ot.proposed,we=Zn[i.priority]||Zn.medium,H=e==="topic",Y=e==="project",ue=H?(i.researchers||[]).map(C=>({...n.find(ie=>ie.id===C.researcherId),role:C.role,isIdeaOwner:C.isIdeaOwner||!1})).filter(Boolean):[],w=Y?a.filter(C=>(i.topics||[]).includes(C.id)):[],R=Y?(()=>{const C=new Map;return w.forEach(ie=>{(ie.researchers||[]).forEach(fe=>{const Ke=n.find(ze=>ze.id===fe.researcherId);if(Ke&&!C.has(Ke.id))C.set(Ke.id,{...Ke,role:fe.role,isIdeaOwner:fe.isIdeaOwner||!1,topicTitle:ie.title});else if(Ke&&fe.isIdeaOwner){const ze=C.get(Ke.id);C.set(Ke.id,{...ze,isIdeaOwner:!0})}})}),Array.from(C.values())})():[],K=()=>{F.trim()&&(p({...i,tasks:[...i.tasks||[],{id:`tk_${Date.now()}`,title:F.trim(),status:"todo",assignedTo:null}]}),z(""))},q=(C,ie)=>{p({...i,tasks:(i.tasks||[]).map(fe=>fe.id===C?{...fe,status:ie}:fe)})},j=C=>{p({...i,tasks:(i.tasks||[]).filter(ie=>ie.id!==C)})},S=C=>{p({...i,researchers:(i.researchers||[]).filter(ie=>ie.researcherId!==C)})},$=H?(o||[]).find(C=>(C.topics||[]).includes(i.id)):null,J=nl($?[...$.tasks||[],...($.topics||[]).flatMap(C=>{const ie=(a||[]).find(fe=>fe.id===C);return ie?ie.tasks||[]:[]})]:Y?[...i.tasks||[],...w.flatMap(C=>C.tasks||[])]:i.tasks||[]),xe=Object.keys(Ot||{}),me=Object.keys(Zn||{});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:h}),t.jsxs("div",{className:"fixed inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] md:max-h-[80vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden",children:[X&&t.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 text-xs font-medium text-white ${X.color.bg}`,children:[t.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),t.jsxs("span",{children:[X.displayName," de bu eyi dzenliyor"]})]}),t.jsx("div",{className:"p-5 border-b border-slate-100",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[H?t.jsx(Pt,{size:18,className:"text-indigo-500"}):t.jsx(bt,{size:18,className:"text-emerald-500"}),ne?t.jsx("input",{value:Q.title,onChange:C=>k("title",C.target.value),className:E+" text-lg font-bold"}):t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:i.title})]}),ne?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("select",{value:Q.status,onChange:C=>k("status",C.target.value),className:"text-xs border border-slate-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-200",children:xe.map(C=>{var ie;return t.jsx("option",{value:C,children:((ie=Ot[C])==null?void 0:ie.label)||C},C)})}),t.jsx("select",{value:Q.priority,onChange:C=>k("priority",C.target.value),className:"text-xs border border-slate-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-200",children:me.map(C=>{var ie;return t.jsx("option",{value:C,children:((ie=Zn[C])==null?void 0:ie.label)||C},C)})}),H&&t.jsxs("select",{value:Q.category||"",onChange:C=>k("category",C.target.value),className:"text-xs border border-slate-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-200",children:[t.jsx("option",{value:"",children:"Kategori sein"}),Gh.map(C=>t.jsx("option",{value:C,children:C},C))]})]}),H&&Q.status==="completed"&&t.jsxs("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-xl p-3",children:[t.jsxs("p",{className:"text-xs font-semibold text-blue-700 mb-2 flex items-center gap-1.5",children:[t.jsx(ni,{size:13}),"Yayn ndeksleri"]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(Sn||[]).map(C=>{var fe;const ie=(((fe=Q.publishingIndex)==null?void 0:fe.types)||[]).includes(C.id);return t.jsxs("label",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium cursor-pointer transition-all border ${ie?"text-white border-transparent":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,style:ie?{backgroundColor:C.color,borderColor:C.color}:{},children:[t.jsx("input",{type:"checkbox",checked:ie,onChange:()=>{var be;const Ke=((be=Q.publishingIndex)==null?void 0:be.types)||[],ze=ie?Ke.filter(Pe=>Pe!==C.id):[...Ke,C.id];k("publishingIndex",{...Q.publishingIndex||{},types:ze})},className:"sr-only"}),ie?t.jsx(sa,{size:12}):t.jsx(og,{size:12,className:"text-slate-300"}),C.label]},C.id)})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"date",value:((re=Q.publishingIndex)==null?void 0:re.date)||"",onChange:C=>k("publishingIndex",{...Q.publishingIndex||{},date:C.target.value}),className:"text-xs border border-slate-200 rounded-lg px-2 py-1 bg-white focus:outline-none focus:ring-1 focus:ring-blue-200"}),t.jsx("input",{value:((_e=Q.publishingIndex)==null?void 0:_e.notes)||"",onChange:C=>k("publishingIndex",{...Q.publishingIndex||{},notes:C.target.value}),placeholder:"Not (opsiyonel)",className:"flex-1 text-xs border border-slate-200 rounded-lg px-2 py-1 bg-white focus:outline-none focus:ring-1 focus:ring-blue-200"})]})]})]}):t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs(ct,{className:Ne.color,children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${Ne.dot} mr-1`}),Ne.label]}),t.jsxs(ct,{className:we.color,children:[we.icon," ",we.label]}),H&&i.category&&t.jsx(ct,{className:"bg-blue-50 text-blue-600",children:i.category}),Y&&i.fundingSource&&t.jsx(ct,{className:"bg-violet-50 text-violet-600",children:i.fundingSource})]}),H&&!ne&&(()=>{const C=(o||[]).find(ie=>(ie.topics||[]).includes(i.id));return C?t.jsxs("div",{className:"flex items-center gap-2 mt-2 px-3 py-2 bg-slate-100 rounded-lg border border-slate-200",children:[t.jsx(bt,{size:14,className:"text-violet-500"}),t.jsxs("span",{className:"text-xs text-slate-600 font-medium",children:["Proje: ",t.jsx("span",{className:"text-violet-600",children:C.title})]}),d&&T&&t.jsxs("button",{onClick:()=>{T(i.id),h()},className:"ml-auto px-2 py-1 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors border border-red-200",children:[t.jsx(Rr,{size:12,className:"inline mr-0.5"}),"Projelendirmeyi ptal Et"]})]}):null})(),H&&!ne&&((qe=(ve=i.publishingIndex)==null?void 0:ve.types)==null?void 0:qe.length)>0&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 px-3 py-2 bg-blue-50 rounded-lg border border-blue-200 flex-wrap",children:[t.jsx(ni,{size:14,className:"text-blue-500 flex-shrink-0"}),i.publishingIndex.types.map(C=>{const ie=(Sn||[]).find(fe=>fe.id===C);return ie?t.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold text-white",style:{backgroundColor:ie.color},children:ie.label},C):null}),i.publishingIndex.date&&t.jsx("span",{className:"text-[10px] text-slate-400 ml-auto",children:new Date(i.publishingIndex.date).toLocaleDateString("tr-TR")}),i.publishingIndex.notes&&t.jsx("span",{className:"text-[10px] text-slate-500 italic",children:i.publishingIndex.notes})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[d&&t.jsx("button",{onClick:()=>{ne?Ve():(ye({...ee}),Z(!0))},className:`p-1.5 rounded-lg transition-colors ${ne?"bg-amber-100 text-amber-600 hover:bg-amber-200":"hover:bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:ne?"Dzenlemeyi iptal et":"Dzenle",children:t.jsx(Jh,{size:16})}),t.jsx("button",{onClick:h,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-slate-600",children:t.jsx(Rr,{size:18})})]})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Aklama"}),ne?t.jsx("textarea",{value:Q.description||"",onChange:C=>k("description",C.target.value),placeholder:"Aklama ekleyin...",className:E+" h-20 resize-none"}):t.jsx("p",{className:"text-sm text-slate-600",children:i.description||t.jsx("span",{className:"italic text-slate-400",children:"Belirtilmemi"})})]}),ne?t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"alma Linki"}),t.jsx("input",{value:Q.workLink||"",onChange:C=>k("workLink",C.target.value),placeholder:"https://...",className:E})]}):i.workLink?t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 flex items-center gap-2",children:[t.jsx(Pi,{size:16,className:"text-indigo-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs text-indigo-400 mb-0.5",children:"alma Linki"}),t.jsx("a",{href:i.workLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline truncate block",children:i.workLink})]})]}):null,ne?t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[H&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"ngrlen Proje Tr"}),t.jsxs("select",{value:Q.projectType||"",onChange:C=>k("projectType",C.target.value),className:E,children:[t.jsx("option",{value:"",children:"Seiniz"}),Si.map(C=>t.jsx("option",{value:C,children:C},C))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Proje Tr Detay"}),t.jsx("input",{value:Q.projectTypeDetail||"",onChange:C=>k("projectTypeDetail",C.target.value),placeholder:"Detay...",className:E})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Bavuru Durumu"}),t.jsx("input",{value:Q.applicationStatus||"",onChange:C=>k("applicationStatus",C.target.value),className:E})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Hedef Dergi"}),t.jsx("input",{value:Q.targetJournal||"",onChange:C=>k("targetJournal",C.target.value),className:E})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Bavuru Tarihi"}),t.jsx("input",{type:"date",value:Q.applicationDate||"",onChange:C=>k("applicationDate",C.target.value),className:E})]})]}),Y&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Proje Tr"}),t.jsxs("select",{value:Q.type||"",onChange:C=>k("type",C.target.value),className:E,children:[t.jsx("option",{value:"",children:"Seiniz"}),Si.map(C=>t.jsx("option",{value:C,children:C},C))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Proje Tr Detay"}),t.jsx("input",{value:Q.projectTypeDetail||"",onChange:C=>k("projectTypeDetail",C.target.value),placeholder:"Detay...",className:E})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Fon Kayna"}),t.jsx("input",{value:Q.fundingSource||"",onChange:C=>k("fundingSource",C.target.value),className:E})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Bte ()"}),t.jsx("input",{type:"number",value:Q.budget??"",onChange:C=>k("budget",C.target.value),className:E})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Yrtc Kurum"}),t.jsx("input",{list:"inst-list-edit",value:Q.piInstitution||"",onChange:C=>k("piInstitution",Nr(C.target.value)),onBlur:C=>k("piInstitution",Nr(C.target.value)),className:E,placeholder:"Kurum ad yazn veya sein..."}),t.jsx("datalist",{id:"inst-list-edit",children:oe.map(C=>t.jsx("option",{value:C},C))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Yrtc lke"}),t.jsx("select",{value:Q.piCountry||"Trkiye",onChange:C=>k("piCountry",C.target.value),className:E,children:fo.map(C=>t.jsx("option",{value:C,children:C},C))})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Ortak Kurumlar (virglle ayrn)"}),t.jsx("input",{list:"inst-list-partner-edit",value:Array.isArray(Q.partnerInstitutions)?Q.partnerInstitutions.join(", "):Q.partnerInstitutions||"",onChange:C=>k("partnerInstitutions",C.target.value.split(",").map(ie=>Nr(ie.trim())).filter(Boolean)),onBlur:C=>{Array.isArray(Q.partnerInstitutions)&&k("partnerInstitutions",Q.partnerInstitutions.map(ie=>Nr(ie)))},className:E}),t.jsx("datalist",{id:"inst-list-partner-edit",children:oe.map(C=>t.jsx("option",{value:C},C))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Ortak lkeler"}),t.jsx("div",{className:"border border-slate-200 rounded-lg p-2 max-h-24 overflow-y-auto bg-slate-50 space-y-0.5",children:fo.map(C=>t.jsxs("label",{className:`flex items-center gap-2 px-2 py-0.5 rounded cursor-pointer text-xs ${(Q.partnerCountries||[]).includes(C)?"bg-violet-50 text-violet-700 font-medium":"hover:bg-white text-slate-600"}`,children:[t.jsx("input",{type:"checkbox",checked:(Q.partnerCountries||[]).includes(C),onChange:ie=>{ie.target.checked?k("partnerCountries",[...Q.partnerCountries||[],C]):k("partnerCountries",(Q.partnerCountries||[]).filter(fe=>fe!==C))},className:"w-3 h-3 rounded border-slate-300 text-violet-500"}),C]},C))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Balang Tarihi"}),t.jsx("input",{type:"date",value:Q.startDate||"",onChange:C=>k("startDate",C.target.value),className:E})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Biti Tarihi"}),t.jsx("input",{type:"date",value:Q.endDate||"",onChange:C=>k("endDate",C.target.value),className:E})]})]}):t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[H&&i.projectType&&(o||[]).some(C=>(C.topics||[]).includes(i.id))&&t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-indigo-400 mb-0.5",children:"Proje Tr"}),t.jsxs("p",{className:"text-sm font-medium text-indigo-700",children:[i.projectType,i.projectTypeDetail?`  ${i.projectTypeDetail}`:""]})]}),H&&i.applicationStatus&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Bavuru Durumu"}),t.jsx("p",{className:"text-sm font-medium text-slate-700",children:i.applicationStatus})]}),H&&i.targetJournal&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Hedef Dergi"}),t.jsx("p",{className:"text-sm font-medium text-slate-700",children:i.targetJournal})]}),H&&i.applicationDate&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Bavuru Tarihi"}),t.jsx("p",{className:"text-sm font-medium text-slate-700",children:new Date(i.applicationDate).toLocaleDateString("tr-TR")})]}),i.startDate&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"alma Balang"}),t.jsx("p",{className:"text-sm font-medium text-slate-700",children:new Date(i.startDate).toLocaleDateString("tr-TR")})]}),i.endDate&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"alma Biti"}),t.jsx("p",{className:"text-sm font-medium text-slate-700",children:new Date(i.endDate).toLocaleDateString("tr-TR")})]}),Y&&i.budget>0&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Bte"}),t.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["",i.budget.toLocaleString("tr-TR")]})]}),Y&&i.type&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Proje Tr"}),t.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[i.type,i.projectTypeDetail?`  ${i.projectTypeDetail}`:""]})]}),Y&&i.fundingSource&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-2.5",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Fon Kayna"}),t.jsx("p",{className:"text-sm font-medium text-slate-700",children:i.fundingSource})]})]}),!ne&&Y&&(ee.piInstitution||ee.piCountry||ee.partnerInstitutions.length>0||ee.partnerCountries.length>0)&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(ps,{size:13})," Kurum & lke Bilgileri",[ee.piCountry,...ee.partnerCountries].filter(Boolean).some(C=>C!=="Trkiye")&&t.jsxs("span",{className:"ml-auto px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[t.jsx(ps,{size:10}),"Uluslararas Proje"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ee.piInstitution&&t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 border border-indigo-100",children:[t.jsx("p",{className:"text-xs text-indigo-400 mb-1 font-medium",children:"Yrtc Kurum"}),t.jsx("p",{className:"text-sm font-semibold text-indigo-700",children:ee.piInstitution})]}),ee.piCountry&&t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 border border-indigo-100",children:[t.jsx("p",{className:"text-xs text-indigo-400 mb-1 font-medium",children:"Yrtc lke"}),t.jsx("p",{className:"text-sm font-semibold text-indigo-700",children:ee.piCountry})]}),ee.partnerInstitutions.length>0&&t.jsxs("div",{className:"bg-violet-50 rounded-lg p-3 border border-violet-100 col-span-2",children:[t.jsx("p",{className:"text-xs text-violet-400 mb-1.5 font-medium",children:"Ortak Kurumlar"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:ee.partnerInstitutions.map((C,ie)=>t.jsx("span",{className:"px-2.5 py-1 bg-violet-100 text-violet-700 rounded-full text-xs font-medium",children:C},ie))})]}),ee.partnerCountries.length>0&&t.jsxs("div",{className:"bg-violet-50 rounded-lg p-3 border border-violet-100 col-span-2",children:[t.jsx("p",{className:"text-xs text-violet-400 mb-1.5 font-medium",children:"Ortak lkeler"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:ee.partnerCountries.map((C,ie)=>t.jsx("span",{className:"px-2.5 py-1 bg-violet-100 text-violet-700 rounded-full text-xs font-medium",children:C},ie))})]})]})]}),H&&(ne?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Gerekli Beceriler"}),t.jsx("textarea",{value:Q.requiredSkills||"",onChange:C=>k("requiredSkills",C.target.value),className:E+" h-16 resize-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Aratrma Yntemi"}),t.jsx("input",{value:Q.researchMethod||"",onChange:C=>k("researchMethod",C.target.value),className:E})]})]}):t.jsxs(t.Fragment,{children:[i.requiredSkills&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Gerekli Beceriler"}),t.jsx("p",{className:"text-sm text-slate-600",children:i.requiredSkills})]}),i.researchMethod&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:"Aratrma Yntemi"}),t.jsx("p",{className:"text-sm text-slate-600",children:i.researchMethod})]})]})),ne&&t.jsxs("div",{className:"pt-2 border-t border-slate-100",children:[_&&t.jsxs("p",{className:"text-xs text-red-500 mb-2 flex items-center gap-1.5 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:[t.jsx(Di,{size:14,className:"flex-shrink-0"}),_]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:ge,className:"flex-1 px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors",children:"Kaydet"}),t.jsx("button",{onClick:Ve,className:"px-4 py-2 bg-slate-100 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-200 transition-colors",children:"ptal"})]})]}),(i.tasks||[]).length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Grev Tamamlanma"}),t.jsxs("span",{className:"text-sm font-bold",style:{color:J===100?"#10b981":"#6366f1"},children:[J,"%"]})]}),t.jsx(Sm,{value:J,className:"h-2"})]}),H&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:["Ekip (",ue.length,")"]}),d&&t.jsx("button",{onClick:()=>O(!je),className:`p-1 rounded-lg transition-colors ${je?"bg-indigo-100 text-indigo-600":"hover:bg-slate-100 text-slate-400"}`,title:"Aratrmac Ekle",children:t.jsx(wh,{size:14})})]}),je&&d&&t.jsxs("div",{className:"bg-indigo-50/50 border border-indigo-100 rounded-lg p-3 mb-3 space-y-2 animate-slide-up",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-xs font-semibold text-indigo-600",children:"Aratrmac Ekle"}),t.jsx("select",{value:x,onChange:C=>A(C.target.value),className:"text-[10px] border border-slate-200 rounded px-1.5 py-0.5 bg-white",children:Object.entries(Jt).map(([C,ie])=>t.jsx("option",{value:C,children:ie.label},C))})]}),t.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[n.filter(C=>!(i.researchers||[]).some(ie=>ie.researcherId===C.id)).map(C=>t.jsxs("button",{onClick:()=>{p({...i,researchers:[...i.researchers||[],{researcherId:C.id,role:x}]}),O(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-white transition-colors text-left",children:[t.jsx(Vn,{name:C.name,color:C.color,size:"xs"}),t.jsxs("span",{className:"text-xs text-slate-700 truncate",children:[C.title?`${C.title} `:"",C.name]})]},C.id)),n.filter(C=>!(i.researchers||[]).some(ie=>ie.researcherId===C.id)).length===0&&t.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:"Tm aratrmaclar zaten eklenmi"})]})]}),ue.length===0?t.jsx("p",{className:"text-sm text-slate-400 italic",children:"Henz aratrmac atanmad. Yukardaki + butonundan ekleyin veya aratrmac kartn srkleyin."}):t.jsx("div",{className:"space-y-2",children:ue.map(C=>{var Pe,Ue;const ie=(i.researchers||[]).find(De=>De.researcherId===C.id),fe=ie==null?void 0:ie.failed,Ke=Object.keys(Jt),ze=Ke.indexOf(C.role),be=()=>{const De=Ke[(ze+1)%Ke.length],pe=(i.researchers||[]).map($e=>$e.researcherId===C.id?{...$e,role:De}:$e);p({...i,researchers:pe})};return t.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg group ${fe?"bg-red-50 border border-red-200":"bg-slate-50"}`,children:[t.jsx(Vn,{name:C.name,color:C.color,size:"sm"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("button",{onClick:De=>{De.stopPropagation(),v&&v(n.find(pe=>pe.id===C.id))},className:"text-sm font-medium text-slate-700 hover:text-indigo-600 hover:underline text-left truncate block",children:[C.title," ",C.name]}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:C.unit||C.institution})]}),t.jsx("button",{onClick:be,title:"Rol deitirmek iin tklayn",className:"cursor-pointer hover:opacity-80 transition-opacity",children:t.jsx(ct,{className:((Pe=Jt[C.role])==null?void 0:Pe.color)||"bg-slate-100 text-slate-600",children:((Ue=Jt[C.role])==null?void 0:Ue.label)||C.role})}),t.jsxs("button",{onClick:()=>{const De=(i.researchers||[]).map(pe=>pe.researcherId===C.id?{...pe,isIdeaOwner:!pe.isIdeaOwner}:pe);p({...i,researchers:De})},className:`px-1.5 py-0.5 rounded text-[10px] font-medium transition-colors flex-shrink-0 flex items-center gap-0.5 ${C.isIdeaOwner?"bg-yellow-100 text-yellow-700 ring-1 ring-yellow-300":"bg-slate-100 text-slate-400 hover:bg-yellow-50 hover:text-yellow-600"}`,title:C.isIdeaOwner?"Fikir sahibi (iareti kaldr)":"Fikir sahibi olarak iaretle",children:["",C.isIdeaOwner&&t.jsx("span",{children:"Fikir"})]}),t.jsx("button",{onClick:()=>{const De=(i.researchers||[]).map(pe=>pe.researcherId===C.id?{...pe,failed:!pe.failed}:pe);p({...i,researchers:De})},className:`p-1 rounded text-xs font-medium transition-colors flex-shrink-0 ${fe?"bg-red-100 text-red-600 hover:bg-red-200":"bg-slate-100 text-slate-400 hover:bg-amber-100 hover:text-amber-600"}`,title:fe?"Grevi yerine getirmedi (iareti kaldr)":"Grevi yerine getirmedi olarak iaretle",children:t.jsx(Di,{size:14})}),t.jsx("button",{onClick:()=>S(C.id),className:"opacity-0 group-hover:opacity-100 text-slate-300 hover:text-red-400 p-1 flex-shrink-0",children:t.jsx(Rr,{size:14})})]},C.id)})})]}),Y&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:["Proje Ekibi (",(i.researchers||[]).length,")"]}),d&&t.jsx("button",{onClick:()=>O(!je),className:`p-1 rounded-lg transition-colors ${je?"bg-indigo-100 text-indigo-600":"hover:bg-slate-100 text-slate-400"}`,title:"Aratrmac Ekle",children:t.jsx(wh,{size:14})})]}),je&&d&&t.jsxs("div",{className:"bg-indigo-50/50 border border-indigo-100 rounded-lg p-3 mb-3 space-y-2 animate-slide-up",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-xs font-semibold text-indigo-600",children:"Projeye Aratrmac Ekle"}),t.jsx("select",{value:x,onChange:C=>A(C.target.value),className:"text-[10px] border border-slate-200 rounded px-1.5 py-0.5 bg-white",children:Object.entries(Jt).map(([C,ie])=>t.jsx("option",{value:C,children:ie.label},C))})]}),t.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[n.filter(C=>!(i.researchers||[]).some(ie=>ie.researcherId===C.id)).map(C=>t.jsxs("button",{onClick:()=>{p({...i,researchers:[...i.researchers||[],{researcherId:C.id,role:x}]}),O(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-white transition-colors text-left",children:[t.jsx(Vn,{name:C.name,color:C.color,size:"xs"}),t.jsxs("span",{className:"text-xs text-slate-700 truncate",children:[C.title?`${C.title} `:"",C.name]})]},C.id)),n.filter(C=>!(i.researchers||[]).some(ie=>ie.researcherId===C.id)).length===0&&t.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:"Tm aratrmaclar zaten eklenmi"})]})]}),(i.researchers||[]).length===0?t.jsx("p",{className:"text-sm text-slate-400 italic",children:"Henz aratrmac atanmad. Yukardaki + butonundan ekleyin."}):t.jsx("div",{className:"space-y-2",children:(i.researchers||[]).map(C=>{var be,Pe;const ie=n.find(Ue=>Ue.id===C.researcherId);if(!ie)return null;const fe=Object.keys(Jt),Ke=fe.indexOf(C.role),ze=()=>{const Ue=fe[(Ke+1)%fe.length],De=(i.researchers||[]).map(pe=>pe.researcherId===C.researcherId?{...pe,role:Ue}:pe);p({...i,researchers:De})};return t.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-slate-50 group",children:[t.jsx(Vn,{name:ie.name,color:ie.color,size:"sm"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),v&&v(ie)},className:"text-sm font-medium text-slate-700 hover:text-indigo-600 hover:underline text-left truncate block",children:[ie.title?`${ie.title} `:"",ie.name]}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:ie.unit||ie.institution})]}),t.jsx("button",{onClick:ze,title:"Rol deitirmek iin tklayn",className:"cursor-pointer hover:opacity-80 transition-opacity",children:t.jsx(ct,{className:((be=Jt[C.role])==null?void 0:be.color)||"bg-slate-100 text-slate-600",children:((Pe=Jt[C.role])==null?void 0:Pe.label)||C.role})}),t.jsxs("button",{onClick:()=>{const Ue=(i.researchers||[]).map(De=>De.researcherId===C.researcherId?{...De,isIdeaOwner:!De.isIdeaOwner}:De);p({...i,researchers:Ue})},className:`px-1.5 py-0.5 rounded text-[10px] font-medium transition-colors flex-shrink-0 flex items-center gap-0.5 ${C.isIdeaOwner?"bg-yellow-100 text-yellow-700 ring-1 ring-yellow-300":"bg-slate-100 text-slate-400 hover:bg-yellow-50 hover:text-yellow-600"}`,title:C.isIdeaOwner?"Fikir sahibi (iareti kaldr)":"Fikir sahibi olarak iaretle",children:["",C.isIdeaOwner&&t.jsx("span",{children:"Fikir"})]}),d&&t.jsx("button",{onClick:()=>{const Ue=(i.researchers||[]).filter(De=>De.researcherId!==C.researcherId);p({...i,researchers:Ue})},className:"opacity-0 group-hover:opacity-100 text-slate-300 hover:text-red-400 p-1 flex-shrink-0",children:t.jsx(Rr,{size:14})})]},ie.id)}).filter(Boolean)}),R.length>0&&(i.researchers||[]).length>0&&(()=>{const C=new Set((i.researchers||[]).map(fe=>fe.researcherId)),ie=R.filter(fe=>!C.has(fe.id));return ie.length===0?null:t.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-100",children:[t.jsxs("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1.5",children:["Konulardan Gelen (",ie.length,")"]}),t.jsx("div",{className:"space-y-1",children:ie.map(fe=>{var Ke,ze;return t.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50/50",children:[t.jsx(Vn,{name:fe.name,color:fe.color,size:"xs"}),t.jsx("span",{className:"text-xs text-slate-500 truncate flex-1",children:fe.name}),fe.isIdeaOwner&&t.jsx("span",{className:"text-[10px] text-yellow-600 bg-yellow-50 px-1 py-0.5 rounded border border-yellow-200 flex items-center gap-0.5",children:"Fikir"}),t.jsx("span",{className:"text-[10px] text-slate-400",children:fe.topicTitle}),t.jsx(ct,{className:`${((Ke=Jt[fe.role])==null?void 0:Ke.color)||"bg-slate-100"} text-[10px]`,children:((ze=Jt[fe.role])==null?void 0:ze.label)||fe.role})]},fe.id)})})]})})()]}),Y&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:["Bal Konular (",w.length,")"]}),w.length===0?t.jsx("p",{className:"text-sm text-slate-400 italic",children:"Henz konu eklenmedi. Konu kartn bu projeye srkleyin."}):t.jsx("div",{className:"space-y-1.5",children:w.map(C=>{var fe,Ke;const ie=(C.researchers||[]).filter(ze=>ze.isIdeaOwner).map(ze=>{const be=n.find(Pe=>Pe.id===ze.researcherId);return be?be.name.split(" ").pop():""}).filter(Boolean);return t.jsxs("button",{onClick:()=>{b&&b(C)},className:"w-full flex items-center gap-2 p-2 rounded-lg bg-blue-50 hover:ring-2 hover:ring-indigo-200 transition-all text-left group",children:[t.jsx(Pt,{size:14,className:"text-blue-500"}),t.jsx("span",{className:"text-sm text-blue-700 font-medium flex-1 truncate group-hover:text-indigo-600",children:C.title}),ie.length>0&&t.jsxs("span",{className:"text-[10px] text-yellow-600 bg-yellow-50 px-1 py-0.5 rounded border border-yellow-200 flex items-center gap-0.5 flex-shrink-0",children:["",ie.join(", ")]}),t.jsx(ct,{className:((fe=Ot[C.status])==null?void 0:fe.color)||"",children:(Ke=Ot[C.status])==null?void 0:Ke.label}),t.jsx(Pi,{size:12,className:"text-slate-300 group-hover:text-indigo-400 flex-shrink-0"})]},C.id)})})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:["Grevler (",(i.tasks||[]).length,")"]}),t.jsx("div",{className:"space-y-0.5 mb-3",children:(i.tasks||[]).map(C=>t.jsx(LN,{task:C,researchers:n,onStatusChange:q,onDelete:j},C.id))}),d&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:F,onChange:C=>z(C.target.value),onKeyDown:C=>C.key==="Enter"&&K(),placeholder:"Yeni grev ekle...",className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300"}),t.jsx("button",{onClick:K,className:"px-3 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors",children:t.jsx(ti,{size:16})})]})]}),H&&((Be=i.tags)==null?void 0:Be.length)>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Etiketler"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.tags.map(C=>t.jsxs(ct,{className:"bg-slate-100 text-slate-600",children:["#",C]},C))})]}),Y&&d&&M&&t.jsxs("div",{className:"pt-3 mt-3 border-t border-red-100",children:[t.jsxs("button",{type:"button",onClick:()=>M(i.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-xl border border-red-200 transition-colors cursor-pointer select-none",children:[t.jsx(Qn,{size:14}),"Projeyi ptal Et"]}),t.jsx("p",{className:"text-[10px] text-slate-400 text-center mt-1.5",children:"Proje silinir, bal konular projelendirilmemi olarak kalr."})]}),H&&d&&V&&t.jsxs("div",{className:"pt-3 mt-3 border-t border-red-100",children:[t.jsxs("button",{type:"button",onClick:()=>V(i.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-xl border border-red-200 transition-colors cursor-pointer select-none",children:[t.jsx(Qn,{size:14}),"Konuyu Sil"]}),t.jsx("p",{className:"text-[10px] text-slate-400 text-center mt-1.5",children:"Konu kalc olarak silinir. Projelendirilmise ilgili proje de etkilenir."})]})]})]})]})},GN=({type:i,onAdd:e,onClose:n,allTopics:a,projects:o,allResearchers:d})=>{const h=B.useMemo(()=>sy(o),[o]),[p,v]=B.useState({title:"",description:"",status:i==="project"?"planning":"proposed",priority:"medium",category:"",applicationDate:"",startDate:"",endDate:"",budget:"",fundingSource:"",projectType:"",projectTypeDetail:"",workLink:"",piInstitution:"",piCountry:"Trkiye",partnerInstitutions:"",partnerCountries:[],ourInstitution:tu,isOurPI:!0,name:"",rTitle:"",institution:"",unit:"",eduUniversity:"",eduProgram:"",eduDegree:"Yksek Lisans",eduStatus:"Devam Ediyor",languages:"",researchAreas:"",tools:"",hasPIExperience:!1,isAofMember:!0,url:"",phone:"",email:"",bio:"",performanceNotes:""}),[b,T]=B.useState([]),[M,V]=B.useState(""),[X,oe]=B.useState("basic"),F=i==="researcher",z=i==="topic",ne=i==="project",Z=(x,A)=>v({...p,[x]:A}),ee="w-full text-sm border border-slate-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300",Q="block text-xs font-medium text-slate-500 mb-1",[ye,je]=B.useState(""),O=()=>{if(je(""),F){if(!p.name.trim())return;const x=p.name.trim().toLowerCase(),A=(d||[]).find(k=>k.name.trim().toLowerCase()===x);if(A){je(`"${A.name}" adnda bir aratrmac zaten mevcut!`);return}e({id:`r_${Date.now()}`,name:p.name,title:p.rTitle,institution:p.institution,unit:p.unit,eduUniversity:p.eduUniversity,eduProgram:p.eduProgram,eduDegree:p.eduDegree,eduStatus:p.eduStatus,languages:p.languages.split(",").map(k=>k.trim()).filter(Boolean),researchAreas:p.researchAreas.split(",").map(k=>k.trim()).filter(Boolean),tools:p.tools.split(",").map(k=>k.trim()).filter(Boolean),hasPIExperience:p.hasPIExperience,isAofMember:p.isAofMember,url:p.url,phone:p.phone,email:p.email,bio:p.bio,performanceNotes:p.performanceNotes,color:`hsl(${Math.random()*360}, 55%, 55%)`})}else if(z){if(!p.title.trim())return;if(!p.category){alert("Ltfen bir kategori seiniz (Ar-Ge i veya Ortak alma)");return}const x=p.title.trim().toLowerCase(),A=(a||[]).find(k=>k.title.trim().toLowerCase()===x);if(A){je(`"${A.title}" balnda bir konu zaten mevcut!`);return}e({id:`t_${Date.now()}`,title:p.title,description:p.description,category:p.category,status:p.status,priority:p.priority,projectType:p.projectType,projectTypeDetail:p.projectTypeDetail,applicationDate:p.applicationDate,startDate:p.startDate,endDate:p.endDate,workLink:p.workLink,tags:[],researchers:[],tasks:[]})}else{if(!p.title.trim())return;if(b.length===0){V("Bir proje en az bir konuyla ilikilendirilmelidir!");return}const x=p.title.trim().toLowerCase(),A=(o||[]).find(P=>P.title.trim().toLowerCase()===x);if(A){je(`"${A.title}" balnda bir proje zaten mevcut!`);return}const k=Nr(p.ourInstitution||tu);let E=Nr(p.piInstitution||""),_=p.partnerInstitutions.split(",").map(P=>Nr(P.trim())).filter(Boolean);p.isOurPI?(E=k,p.piInstitution&&Nr(p.piInstitution)!==k&&!_.includes(Nr(p.piInstitution))&&(_=[Nr(p.piInstitution),..._])):_.includes(k)||(_=[k,..._]),e({id:`p_${Date.now()}`,title:p.title,description:p.description,type:p.projectType,projectTypeDetail:p.projectTypeDetail,status:p.status,priority:p.priority,startDate:p.startDate,endDate:p.endDate,budget:parseFloat(p.budget)||0,fundingSource:p.fundingSource,workLink:p.workLink,topics:b,tasks:[],researchers:[],piInstitution:E,piCountry:p.piCountry,partnerInstitutions:_,partnerCountries:p.partnerCountries||[]})}n()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:n}),t.jsxs("div",{className:`fixed inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2
        md:w-[520px] md:max-h-[85vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden`,children:[t.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:F?"Yeni Aratrmac":z?"Yeni Konu":"Yeni Proje"}),t.jsx("button",{onClick:n,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Rr,{size:18})})]}),F&&t.jsx("div",{className:"flex border-b border-slate-100 px-5 gap-1",children:[{key:"basic",label:"Temel Bilgiler",icon:_n},{key:"education",label:"renim",icon:vo},{key:"skills",label:"Yetkinlikler",icon:wu},{key:"contact",label:"letiim",icon:dg}].map(x=>t.jsxs("button",{onClick:()=>oe(x.key),className:`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium border-b-2 transition-colors ${X===x.key?"border-indigo-500 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:[t.jsx(x.icon,{size:13}),x.label]},x.key))}),t.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-3",children:F?t.jsxs(t.Fragment,{children:[X==="basic"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Ad Soyad *"}),t.jsx("input",{value:p.name,onChange:x=>Z("name",x.target.value),className:ee,placeholder:"Ad Soyad"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Unvan"}),t.jsxs("select",{value:p.rTitle,onChange:x=>Z("rTitle",x.target.value),className:ee,children:[t.jsx("option",{value:"",children:"Seiniz"}),t.jsx("option",{value:"Prof. Dr.",children:"Prof. Dr."}),t.jsx("option",{value:"Do. Dr.",children:"Do. Dr."}),t.jsx("option",{value:"Dr. r. yesi",children:"Dr. r. yesi"}),t.jsx("option",{value:"Dr.",children:"Dr."}),t.jsx("option",{value:"Ara. Gr. Dr.",children:"Ara. Gr. Dr."}),t.jsx("option",{value:"Ara. Gr.",children:"Ara. Gr."}),t.jsx("option",{value:"r. Gr.",children:"r. Gr."}),t.jsx("option",{value:"Uzman",children:"Uzman"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"alt Kurum"}),t.jsx("input",{value:p.institution,onChange:x=>Z("institution",x.target.value),className:ee,placeholder:"niversite veya kurum ad"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Birimi"}),t.jsx("input",{value:p.unit,onChange:x=>Z("unit",x.target.value),className:ee,placeholder:"Blm / Birim / Anabilim Dal"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Aklama"}),t.jsx("textarea",{value:p.bio,onChange:x=>Z("bio",x.target.value),className:`${ee} h-16 resize-none`,placeholder:"Ksa biyografi..."})]})]}),X==="education"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"renim Grd niversite"}),t.jsx("input",{value:p.eduUniversity,onChange:x=>Z("eduUniversity",x.target.value),className:ee})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"renim Grd Program"}),t.jsx("input",{value:p.eduProgram,onChange:x=>Z("eduProgram",x.target.value),className:ee})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"renim Derecesi"}),t.jsx("select",{value:p.eduDegree,onChange:x=>Z("eduDegree",x.target.value),className:ee,children:go.map(x=>t.jsx("option",{value:x,children:x},x))})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"renim Durumu"}),t.jsx("select",{value:p.eduStatus,onChange:x=>Z("eduStatus",x.target.value),className:ee,children:xo.map(x=>t.jsx("option",{value:x,children:x},x))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Yabanc Diller (virglle ayrn)"}),t.jsx("input",{value:p.languages,onChange:x=>Z("languages",x.target.value),className:ee,placeholder:"ngilizce (C1), Almanca (B1)"})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:p.hasPIExperience,onChange:x=>Z("hasPIExperience",x.target.checked),className:"w-4 h-4 rounded border-slate-300 text-indigo-500 focus:ring-indigo-200"}),t.jsx("span",{className:"text-sm text-slate-700",children:"Daha nce Proje Yrtcl yapt"})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:p.isAofMember,onChange:x=>Z("isAofMember",x.target.checked),className:"w-4 h-4 rounded border-teal-300 text-teal-500 focus:ring-teal-200"}),t.jsx("span",{className:"text-sm text-teal-700 font-medium",children:"AF retim yesi"})]})]})]}),X==="skills"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"alma Alanlar (virglle ayrn)"}),t.jsx("input",{value:p.researchAreas,onChange:x=>Z("researchAreas",x.target.value),className:ee,placeholder:"Yapay Zeka, NLP, Veri Bilimi"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Kullanabildii Aralar (virglle ayrn)"}),t.jsx("input",{value:p.tools,onChange:x=>Z("tools",x.target.value),className:ee,placeholder:"Python, MATLAB, LaTeX, SPSS"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Performans Takip Notlar"}),t.jsx("textarea",{value:p.performanceNotes,onChange:x=>Z("performanceNotes",x.target.value),className:`${ee} h-20 resize-none`,placeholder:"Notlar..."})]})]}),X==="contact"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"E-posta"}),t.jsx("input",{type:"email",value:p.email,onChange:x=>Z("email",x.target.value),className:ee,placeholder:"ad@kurum.edu.tr"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Telefon"}),t.jsx("input",{value:p.phone,onChange:x=>Z("phone",x.target.value),className:ee,placeholder:"+90 5XX XXX XXXX"})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"URL (Google Scholar, ORCID, vb.)"}),t.jsx("input",{value:p.url,onChange:x=>Z("url",x.target.value),className:ee,placeholder:"https://..."})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Balk *"}),t.jsx("input",{value:p.title,onChange:x=>Z("title",x.target.value),className:ee})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Aklama"}),t.jsx("textarea",{value:p.description,onChange:x=>Z("description",x.target.value),className:`${ee} h-20 resize-none`})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Durum"}),t.jsx("select",{value:p.status,onChange:x=>Z("status",x.target.value),className:ee,children:z?t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"proposed",children:"nerilen"}),t.jsx("option",{value:"active",children:"Aktif"}),t.jsx("option",{value:"completed",children:"Tamamland"}),t.jsx("option",{value:"failed",children:"Tamamlanamad"})]}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"planning",children:"lem Yaplyor"}),t.jsx("option",{value:"active",children:"Aktif"}),t.jsx("option",{value:"review",children:"nceleme"}),t.jsx("option",{value:"completed",children:"Tamamland"}),t.jsx("option",{value:"failed",children:"Tamamlanamad"})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"ncelik"}),t.jsxs("select",{value:p.priority,onChange:x=>Z("priority",x.target.value),className:ee,children:[t.jsx("option",{value:"low",children:"Dk"}),t.jsx("option",{value:"medium",children:"Orta"}),t.jsx("option",{value:"high",children:"Yksek"}),t.jsx("option",{value:"critical",children:"Kritik"})]})]})]}),z&&t.jsxs("div",{children:[t.jsxs("label",{className:Q,children:["Kategori ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("select",{value:p.category,onChange:x=>Z("category",x.target.value),className:ee+(p.category?"":" border-red-300 bg-red-50"),children:[t.jsx("option",{value:"",disabled:!0,children:"Kategori seiniz..."}),t.jsx("option",{value:"Ar-Ge i",children:"Ar-Ge i"}),t.jsx("option",{value:"Ortak alma",children:"Ortak alma"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:z?"ngrlen Proje Tr":"Proje Tr"}),t.jsxs("select",{value:p.projectType||"",onChange:x=>Z("projectType",x.target.value),className:ee,children:[t.jsx("option",{value:"",children:"Seiniz"}),Si.map(x=>t.jsx("option",{value:x,children:x},x))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Proje Tr Detay"}),t.jsx("input",{value:p.projectTypeDetail||"",onChange:x=>Z("projectTypeDetail",x.target.value),className:ee,placeholder:"rn: KA220-HED, TBTAK 1001, A Yayn..."})]}),ne&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"likili Konular *"}),t.jsx("div",{className:"border border-slate-200 rounded-lg p-2 max-h-36 overflow-y-auto bg-slate-50 space-y-1",children:(a||[]).length===0?t.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:"Henz konu bulunmuyor"}):(a||[]).map(x=>{var A,k;return t.jsxs("label",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors ${b.includes(x.id)?"bg-indigo-50 border border-indigo-200":"hover:bg-white"}`,children:[t.jsx("input",{type:"checkbox",checked:b.includes(x.id),onChange:E=>{E.target.checked?T(_=>[..._,x.id]):T(_=>_.filter(P=>P!==x.id)),V("")},className:"w-3.5 h-3.5 rounded border-slate-300 text-indigo-500 focus:ring-indigo-200"}),t.jsx("span",{className:"text-xs text-slate-700 truncate flex-1",children:x.title}),t.jsx(ct,{className:((A=Ot[x.status])==null?void 0:A.color)||"bg-slate-100 text-slate-500",children:((k=Ot[x.status])==null?void 0:k.label)||x.status})]},x.id)})}),M&&t.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t.jsx(lg,{size:12}),M]}),t.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-lg px-3 py-2 flex items-start gap-2",children:[t.jsx(Di,{size:14,className:"text-amber-500 mt-0.5 flex-shrink-0"}),t.jsx("p",{className:"text-[11px] text-amber-700",children:"Yeni eklenen bir projenin, en az bir konuyla ilikilendirilmesi gerekmektedir."})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Fon Kayna"}),t.jsx("input",{value:p.fundingSource,onChange:x=>Z("fundingSource",x.target.value),className:ee,placeholder:"TBTAK 1001, Horizon..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Bte ()"}),t.jsx("input",{value:p.budget,onChange:x=>Z("budget",x.target.value),className:ee,type:"number"})]})]}),t.jsxs("div",{className:"bg-teal-50/60 rounded-lg p-3 border border-teal-200 space-y-2 mt-2",children:[t.jsx("p",{className:"text-[10px] font-semibold text-teal-600 uppercase tracking-wider",children:"Kurumumuz"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-slate-600 font-medium flex-1",children:p.ourInstitution||tu}),t.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[t.jsx("input",{type:"checkbox",checked:p.isOurPI,onChange:x=>Z("isOurPI",x.target.checked),className:"w-4 h-4 rounded border-teal-300 text-teal-600 focus:ring-teal-200"}),t.jsx("span",{className:"text-xs font-semibold text-teal-700",children:"Yrtc"})]})]}),!p.isOurPI&&t.jsx("p",{className:"text-[10px] text-teal-500",children:"Kurumumuz bu projede ortak kurum olarak kaydedilecek."})]}),!p.isOurPI&&t.jsxs("div",{className:"bg-indigo-50/50 rounded-lg p-3 border border-indigo-100 space-y-2",children:[t.jsx("p",{className:"text-[10px] font-semibold text-indigo-500 uppercase tracking-wider",children:"Proje Yrtcs (D Kurum)"}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Yrtc Kurum"}),t.jsx("input",{list:"inst-list-add",value:p.piInstitution,onChange:x=>Z("piInstitution",Nr(x.target.value)),onBlur:x=>Z("piInstitution",Nr(x.target.value)),className:ee,placeholder:"Kurum ad yazn veya sein..."}),t.jsx("datalist",{id:"inst-list-add",children:h.map(x=>t.jsx("option",{value:x},x))})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Yrtc lke"}),t.jsx("select",{value:p.piCountry,onChange:x=>Z("piCountry",x.target.value),className:ee,children:fo.map(x=>t.jsx("option",{value:x,children:x},x))})]})]}),p.isOurPI&&t.jsxs("div",{className:"bg-indigo-50/50 rounded-lg p-3 border border-indigo-100 space-y-2",children:[t.jsx("p",{className:"text-[10px] font-semibold text-indigo-500 uppercase tracking-wider",children:"Yrtc lke"}),t.jsx("select",{value:p.piCountry,onChange:x=>Z("piCountry",x.target.value),className:ee,children:fo.map(x=>t.jsx("option",{value:x,children:x},x))})]}),t.jsxs("div",{className:"bg-violet-50/50 rounded-lg p-3 border border-violet-100 space-y-2",children:[t.jsx("p",{className:"text-[10px] font-semibold text-violet-500 uppercase tracking-wider",children:"Ortak Kurum & lkeler"}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Ortak Kurumlar"}),t.jsx("input",{list:"inst-list-partner-add",value:p.partnerInstitutions,onChange:x=>Z("partnerInstitutions",Nr(x.target.value)),onBlur:x=>Z("partnerInstitutions",Nr(x.target.value)),className:ee,placeholder:"Virglle ayrarak: KURUM1, KURUM2, ..."}),t.jsx("datalist",{id:"inst-list-partner-add",children:h.map(x=>t.jsx("option",{value:x},x))})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Ortak lkeler (oklu seim)"}),t.jsx("div",{className:"border border-slate-200 rounded-lg p-2 max-h-28 overflow-y-auto bg-white space-y-0.5",children:fo.map(x=>t.jsxs("label",{className:`flex items-center gap-2 px-2 py-1 rounded cursor-pointer text-xs transition-colors ${(p.partnerCountries||[]).includes(x)?"bg-violet-50 text-violet-700 font-medium":"hover:bg-slate-50 text-slate-600"}`,children:[t.jsx("input",{type:"checkbox",checked:(p.partnerCountries||[]).includes(x),onChange:A=>{A.target.checked?Z("partnerCountries",[...p.partnerCountries||[],x]):Z("partnerCountries",(p.partnerCountries||[]).filter(k=>k!==x))},className:"w-3 h-3 rounded border-slate-300 text-violet-500 focus:ring-violet-200"}),x]},x))}),(p.partnerCountries||[]).length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:p.partnerCountries.map(x=>t.jsxs(ct,{className:"bg-violet-100 text-violet-700",children:[x," ",t.jsx("button",{onClick:()=>Z("partnerCountries",p.partnerCountries.filter(A=>A!==x)),className:"ml-1 hover:text-red-500",children:""})]},x))})]})]})]}),z&&t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"Bavuru Tarihi"}),t.jsx("input",{type:"date",value:p.applicationDate,onChange:x=>Z("applicationDate",x.target.value),className:ee})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"alma Balang"}),t.jsx("input",{type:"date",value:p.startDate,onChange:x=>Z("startDate",x.target.value),className:ee})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"alma Biti"}),t.jsx("input",{type:"date",value:p.endDate,onChange:x=>Z("endDate",x.target.value),className:ee})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:Q,children:"alma Linki (Drive, URL)"}),t.jsx("input",{value:p.workLink,onChange:x=>Z("workLink",x.target.value),className:ee,placeholder:"https://drive.google.com/..."})]})]})}),t.jsxs("div",{className:"p-5 border-t border-slate-100",children:[ye&&t.jsxs("p",{className:"text-xs text-red-500 mb-3 flex items-center gap-1.5 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:[t.jsx(Di,{size:14,className:"flex-shrink-0"}),ye]}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"ptal"}),t.jsx("button",{onClick:O,className:"px-4 py-2 text-sm bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 font-medium",children:"Ekle"})]})]})]})]})},YN=()=>{const[i,e]=B.useState(""),[n,a]=B.useState(!0),[o,d]=B.useState(null);return B.useEffect(()=>{let h=!1;return fetch("/ArGe-Dashboard-Teknik-Rapor.md").then(p=>{if(!p.ok)throw new Error("Rapor yklenemedi");return p.text()}).then(p=>{if(h)return;let v=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^#### (.+)$/gm,'<h4 class="rp-h4">$1</h4>').replace(/^### (.+)$/gm,'<h3 class="rp-h3">$1</h3>').replace(/^## (.+)$/gm,'<h2 class="rp-h2">$1</h2>').replace(/^# (.+)$/gm,'<h1 class="rp-h1">$1</h1>').replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^---$/gm,'<hr class="rp-hr"/>').replace(/^[-*] (.+)$/gm,"<li>$1</li>").replace(/^\|(.+)\|$/gm,(b,T)=>{const M=T.split("|").map(X=>X.trim());if(M.every(X=>/^[-:]+$/.test(X)))return"";const V="td";return"<tr>"+M.map(X=>`<${V}>${X}</${V}>`).join("")+"</tr>"});v=v.replace(/((?:<li>.*<\/li>\n?)+)/g,'<ul class="rp-ul">$1</ul>'),v=v.replace(/((?:<tr>.*<\/tr>\n?)+)/g,'<table class="rp-table">$1</table>'),v=v.split(`
`).map(b=>{const T=b.trim();return T?/^<(h[1-4]|ul|li|table|tr|td|hr|\/)/i.test(T)?b:`<p class="rp-p">${T}</p>`:""}).join(`
`),v=v.replace(/\n{3,}/g,`

`),e(v),a(!1)}).catch(p=>{h||(d(p.message),a(!1))}),()=>{h=!0}},[]),n?t.jsxs("div",{className:"flex items-center justify-center py-12 text-slate-500",children:[t.jsx(Pv,{className:"animate-spin mr-2",size:18}),"Rapor ykleniyor..."]}):o?t.jsx("div",{className:"text-center py-8 text-red-500 text-sm",children:o}):t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[t.jsx("style",{children:`
        .rp-container { font-family: 'Times New Roman', Georgia, serif; max-width: 100%; padding: 24px; line-height: 1.8; color: #1e293b; font-size: 13px; max-height: 60vh; overflow-y: auto; }
        .rp-container .rp-h1 { text-align: center; font-size: 17px; font-weight: bold; margin: 0 0 4px; color: #1e293b; }
        .rp-container .rp-h2 { font-size: 15px; font-weight: 600; margin: 20px 0 6px; color: #334155; border-bottom: 1px solid #e2e8f0; padding-bottom: 4px; }
        .rp-container .rp-h3 { font-size: 14px; font-weight: 600; margin: 16px 0 6px; color: #475569; }
        .rp-container .rp-h4 { font-size: 13px; font-weight: 600; margin: 12px 0 4px; color: #64748b; }
        .rp-container .rp-p { text-align: justify; margin: 6px 0; }
        .rp-container .rp-ul { margin: 6px 0 10px 20px; padding: 0; }
        .rp-container .rp-ul li { margin: 3px 0; }
        .rp-container .rp-table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 12px; }
        .rp-container .rp-table td { border: 1px solid #e2e8f0; padding: 5px 8px; }
        .rp-container .rp-table tr:first-child td { background: #f8fafc; font-weight: 600; }
        .rp-container .rp-hr { border: none; border-top: 1px solid #e2e8f0; margin: 16px 0; }
      `}),t.jsx("div",{className:"rp-container",dangerouslySetInnerHTML:{__html:i}})]})},qN=({roleConfig:i,onRoleConfigChange:e,statusConfig:n,onStatusConfigChange:a,priorityConfig:o,onPriorityConfigChange:d,projectTypeOptions:h,onProjectTypeOptionsChange:p,categoryOptions:v,onCategoryOptionsChange:b,eduDegreeOptions:T,onEduDegreeOptionsChange:M,eduStatusOptions:V,onEduStatusOptionsChange:X,indexTypesConfig:oe,onIndexTypesConfigChange:F,projectTypeCoeffConfig:z,onProjectTypeCoeffChange:ne,onResetDefaults:Z,onClose:ee,onExportData:Q,onImportData:ye,onResetAllData:je,quickLinks:O,onQuickLinksChange:x,onForceSync:A,syncStatus:k,onForcePublish:E,isMaster:_,onBackupDownload:P,onBackupRestore:ge,lastBackupAt:Ve})=>{const[Ne,we]=B.useState("roles"),H=B.useRef(null),[Y,ue]=B.useState(null),[w,R]=B.useState({label:"",url:""}),K=[{key:"roles",label:"Roller",icon:au},{key:"projectTypes",label:"Proje Trleri",icon:bt},{key:"statuses",label:"Durum",icon:ru},{key:"priorities",label:"ncelik",icon:co},{key:"categories",label:"Kategoriler",icon:Ov},{key:"education",label:"Eitim",icon:vo},{key:"indexTypes",label:"Yayn ndeksleri",icon:ni},{key:"scoring",label:"Puanlama",icon:sl},{key:"links",label:"Balantlar",icon:Qh},{key:"data",label:"Veri",icon:nu},{key:"report",label:"Rapor",icon:su}],q=[{value:"bg-indigo-100 text-indigo-700",label:"ndigo",preview:"bg-indigo-100"},{value:"bg-rose-100 text-rose-700",label:"Gl",preview:"bg-rose-100"},{value:"bg-orange-100 text-orange-700",label:"Turuncu",preview:"bg-orange-100"},{value:"bg-emerald-100 text-emerald-700",label:"Yeil",preview:"bg-emerald-100"},{value:"bg-purple-100 text-indigo-700",label:"Mor",preview:"bg-purple-100"},{value:"bg-cyan-100 text-cyan-700",label:"Camgbei",preview:"bg-cyan-100"},{value:"bg-amber-100 text-amber-700",label:"Amber",preview:"bg-amber-100"},{value:"bg-pink-100 text-pink-700",label:"Pembe",preview:"bg-pink-100"},{value:"bg-blue-100 text-blue-700",label:"Mavi",preview:"bg-blue-100"},{value:"bg-teal-100 text-teal-700",label:"Teal",preview:"bg-teal-100"},{value:"bg-red-100 text-red-700",label:"Krmz",preview:"bg-red-100"},{value:"bg-slate-100 text-slate-700",label:"Gri",preview:"bg-slate-100"},{value:"bg-red-200 text-red-800",label:"Koyu Krmz",preview:"bg-red-200"},{value:"bg-gray-100 text-gray-500",label:"Soluk",preview:"bg-gray-100"}],j=()=>{const[re,_e]=B.useState(null),[ve,qe]=B.useState({label:"",color:"",weight:1}),[Be,C]=B.useState({key:"",label:"",color:"bg-indigo-100 text-indigo-700",weight:1}),[ie,fe]=B.useState(!1),Ke=(De,pe)=>{_e(De),qe({label:pe.label,color:pe.color,weight:pe.weight||1})},ze=()=>{ve.label.trim()&&(e(De=>{const pe={...De};return pe[re]={...pe[re],label:ve.label.trim(),color:ve.color,weight:Number(ve.weight)||1},pe}),_e(null))},be=De=>{Object.keys(i).length<=1||confirm(`"${i[De].label}" roln silmek istediinize emin misiniz?`)&&e(pe=>{const $e={...pe};return delete $e[De],$e})},Pe=()=>{const De=Be.key.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");!De||!Be.label.trim()||i[De]||(e(pe=>({...pe,[De]:{label:Be.label.trim(),color:Be.color,weight:Number(Be.weight)||1}})),C({key:"",label:"",color:"bg-indigo-100 text-indigo-700",weight:1}),fe(!1))},Ue=(De,pe)=>{const $e=Object.keys(i),Ee=$e.indexOf(De);if(pe===-1&&Ee===0||pe===1&&Ee===$e.length-1)return;const xt=[...$e];[xt[Ee],xt[Ee+pe]]=[xt[Ee+pe],xt[Ee]];const _t={};xt.forEach(Te=>{_t[Te]=i[Te]}),e(_t)};return t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Aratrmaclara atanabilecek rolleri ynetin. Arlk deeri Leaderboard puan hesabnda kullanlr."}),Object.entries(i).map(([De,pe],$e)=>t.jsx("div",{className:"border border-slate-200 rounded-xl p-3 bg-white",children:re===De?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:ve.label,onChange:Ee=>qe({...ve,label:Ee.target.value}),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-200 outline-none",placeholder:"Rol ad"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-slate-400",children:""}),t.jsx("input",{type:"number",value:ve.weight,onChange:Ee=>qe({...ve,weight:Ee.target.value}),className:"w-14 text-sm border border-slate-200 rounded-lg px-2 py-1.5 text-center focus:ring-2 focus:ring-indigo-200 outline-none",min:"0",max:"100"})]})]}),t.jsx("div",{className:"grid grid-cols-7 gap-1.5",children:q.map(Ee=>t.jsx("button",{onClick:()=>qe({...ve,color:Ee.value}),className:`h-8 rounded-lg border-2 transition-all flex items-center justify-center ${Ee.preview} ${ve.color===Ee.value?"border-indigo-500 ring-1 ring-indigo-200":"border-transparent hover:border-slate-300"}`,children:ve.color===Ee.value&&t.jsx(sa,{size:12})},Ee.value))}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>_e(null),className:"px-3 py-1.5 text-xs text-slate-500 bg-slate-100 rounded-lg hover:bg-slate-200",children:"ptal"}),t.jsx("button",{onClick:ze,className:"px-3 py-1.5 text-xs text-white bg-indigo-500 rounded-lg hover:bg-indigo-600",children:"Kaydet"})]})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx("button",{onClick:()=>Ue(De,-1),disabled:$e===0,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(ql,{size:12,className:"rotate-90"})}),t.jsx("button",{onClick:()=>Ue(De,1),disabled:$e===Object.keys(i).length-1,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(Wl,{size:12,className:"rotate-90"})})]}),t.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium ${pe.color}`,children:pe.label}),t.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["",pe.weight||1]}),t.jsx("span",{className:"text-[10px] text-slate-300 ml-auto",children:De}),t.jsx("button",{onClick:()=>Ke(De,pe),className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Ql,{size:13})}),t.jsx("button",{onClick:()=>be(De),disabled:Object.keys(i).length<=1,className:"p-1.5 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-500 disabled:opacity-30",children:t.jsx(Qn,{size:13})})]})},De)),ie?t.jsxs("div",{className:"border border-dashed border-indigo-300 rounded-xl p-3 bg-indigo-50/30 space-y-3",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:Be.key,onChange:De=>C({...Be,key:De.target.value}),className:"w-28 text-xs border border-slate-200 rounded-lg px-2 py-1.5 bg-white outline-none",placeholder:"anahtar (r: intern)"}),t.jsx("input",{value:Be.label,onChange:De=>C({...Be,label:De.target.value}),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 bg-white outline-none",placeholder:"Grnen ad"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-slate-400",children:""}),t.jsx("input",{type:"number",value:Be.weight,onChange:De=>C({...Be,weight:De.target.value}),className:"w-14 text-sm border border-slate-200 rounded-lg px-2 py-1.5 text-center bg-white outline-none",min:"0",max:"100"})]})]}),t.jsx("div",{className:"grid grid-cols-7 gap-1.5",children:q.map(De=>t.jsx("button",{onClick:()=>C({...Be,color:De.value}),className:`h-8 rounded-lg border-2 transition-all flex items-center justify-center ${De.preview} ${Be.color===De.value?"border-indigo-500 ring-1 ring-indigo-200":"border-transparent hover:border-slate-300"}`,children:Be.color===De.value&&t.jsx(sa,{size:12})},De.value))}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>fe(!1),className:"px-3 py-1.5 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg",children:"ptal"}),t.jsx("button",{onClick:Pe,disabled:!Be.key.trim()||!Be.label.trim(),className:"px-3 py-1.5 text-xs text-white bg-indigo-500 rounded-lg hover:bg-indigo-600 disabled:opacity-50",children:"Ekle"})]})]}):t.jsxs("button",{onClick:()=>fe(!0),className:"w-full py-2.5 border-2 border-dashed border-slate-200 rounded-xl text-xs font-medium text-slate-400 hover:text-indigo-500 hover:border-indigo-300 transition-colors flex items-center justify-center gap-1.5",children:[t.jsx(ti,{size:14}),"Yeni Rol Ekle"]})]})},S=({items:re,onChange:_e,itemLabel:ve,placeholder:qe})=>{const[Be,C]=B.useState(null),[ie,fe]=B.useState(""),[Ke,ze]=B.useState(""),be=()=>{if(!ie.trim())return;const pe=[...re];pe[Be]=ie.trim(),_e(pe),C(null)},Pe=pe=>{re.length<=1||confirm(`"${re[pe]}" silinsin mi?`)&&_e(re.filter(($e,Ee)=>Ee!==pe))},Ue=()=>{!Ke.trim()||re.includes(Ke.trim())||(_e([...re,Ke.trim()]),ze(""))},De=(pe,$e)=>{const Ee=[...re];[Ee[pe],Ee[pe+$e]]=[Ee[pe+$e],Ee[pe]],_e(Ee)};return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-xs text-slate-500 mb-3",children:[ve," listesini dzenleyin. Sralamay deitirmek iin ok tularn kullann."]}),re.map((pe,$e)=>t.jsx("div",{className:"flex items-center gap-2 border border-slate-200 rounded-lg px-3 py-2 bg-white",children:Be===$e?t.jsxs(t.Fragment,{children:[t.jsx("input",{value:ie,onChange:Ee=>fe(Ee.target.value),className:"flex-1 text-sm border border-slate-200 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-indigo-200",autoFocus:!0,onKeyDown:Ee=>Ee.key==="Enter"&&be()}),t.jsx("button",{onClick:be,className:"text-xs text-white bg-indigo-500 px-2.5 py-1 rounded hover:bg-indigo-600",children:"Kaydet"}),t.jsx("button",{onClick:()=>C(null),className:"text-xs text-slate-500 px-2 py-1",children:"ptal"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col gap-0.5 flex-shrink-0",children:[t.jsx("button",{onClick:()=>De($e,-1),disabled:$e===0,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(ql,{size:11,className:"rotate-90"})}),t.jsx("button",{onClick:()=>De($e,1),disabled:$e===re.length-1,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(Wl,{size:11,className:"rotate-90"})})]}),t.jsx("span",{className:"flex-1 text-sm text-slate-700",children:pe}),t.jsx("button",{onClick:()=>{C($e),fe(pe)},className:"p-1 rounded hover:bg-slate-100 text-slate-400",children:t.jsx(Ql,{size:13})}),t.jsx("button",{onClick:()=>Pe($e),disabled:re.length<=1,className:"p-1 rounded hover:bg-red-50 text-slate-400 hover:text-red-500 disabled:opacity-30",children:t.jsx(Qn,{size:13})})]})},$e)),t.jsxs("div",{className:"flex gap-2 mt-3",children:[t.jsx("input",{value:Ke,onChange:pe=>ze(pe.target.value),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-200",placeholder:qe,onKeyDown:pe=>pe.key==="Enter"&&Ue()}),t.jsx("button",{onClick:Ue,disabled:!Ke.trim(),className:"px-4 py-2 text-xs font-medium text-white bg-indigo-500 rounded-lg hover:bg-indigo-600 disabled:opacity-50",children:"Ekle"})]})]})},$=({config:re,onChange:_e,description:ve,showDot:qe,showIcon:Be})=>{const[C,ie]=B.useState(null),[fe,Ke]=B.useState({label:"",color:""}),[ze,be]=B.useState(!1),[Pe,Ue]=B.useState({key:"",label:"",color:"bg-slate-100 text-slate-700"}),De=()=>{fe.label.trim()&&(_e(Ee=>({...Ee,[C]:{...Ee[C],label:fe.label.trim(),color:fe.color}})),ie(null))},pe=Ee=>{Object.keys(re).length<=1||confirm(`"${re[Ee].label}" silinsin mi?`)&&_e(xt=>{const _t={...xt};return delete _t[Ee],_t})},$e=()=>{const Ee=Pe.key.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");!Ee||!Pe.label.trim()||re[Ee]||(_e(xt=>{var _t;return{...xt,[Ee]:{label:Pe.label.trim(),color:Pe.color,dot:((_t=Pe.color.replace("bg-","bg-").split(" ")[0])==null?void 0:_t.replace("100","500"))||"bg-slate-400"}}}),Ue({key:"",label:"",color:"bg-slate-100 text-slate-700"}),be(!1))};return t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs text-slate-500 mb-3",children:ve}),Object.entries(re).map(([Ee,xt])=>t.jsx("div",{className:"border border-slate-200 rounded-xl p-3 bg-white",children:C===Ee?t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{value:fe.label,onChange:_t=>Ke({...fe,label:_t.target.value}),className:"w-full text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-200 outline-none",placeholder:"Etiket"}),t.jsx("div",{className:"grid grid-cols-7 gap-1.5",children:q.map(_t=>t.jsx("button",{onClick:()=>Ke({...fe,color:_t.value}),className:`h-8 rounded-lg border-2 transition-all flex items-center justify-center ${_t.preview} ${fe.color===_t.value?"border-indigo-500 ring-1 ring-indigo-200":"border-transparent hover:border-slate-300"}`,children:fe.color===_t.value&&t.jsx(sa,{size:12})},_t.value))}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>ie(null),className:"px-3 py-1.5 text-xs text-slate-500 bg-slate-100 rounded-lg",children:"ptal"}),t.jsx("button",{onClick:De,className:"px-3 py-1.5 text-xs text-white bg-indigo-500 rounded-lg hover:bg-indigo-600",children:"Kaydet"})]})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium ${xt.color}`,children:xt.label}),t.jsx("span",{className:"text-[10px] text-slate-300 ml-auto",children:Ee}),t.jsx("button",{onClick:()=>{ie(Ee),Ke({label:xt.label,color:xt.color})},className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Ql,{size:13})}),t.jsx("button",{onClick:()=>pe(Ee),disabled:Object.keys(re).length<=1,className:"p-1.5 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-500 disabled:opacity-30",children:t.jsx(Qn,{size:13})})]})},Ee)),ze?t.jsxs("div",{className:"border border-dashed border-indigo-300 rounded-xl p-3 bg-indigo-50/30 space-y-3",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:Pe.key,onChange:Ee=>Ue({...Pe,key:Ee.target.value}),className:"w-28 text-xs border border-slate-200 rounded-lg px-2 py-1.5 bg-white outline-none",placeholder:"anahtar"}),t.jsx("input",{value:Pe.label,onChange:Ee=>Ue({...Pe,label:Ee.target.value}),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 bg-white outline-none",placeholder:"Grnen ad"})]}),t.jsx("div",{className:"grid grid-cols-7 gap-1.5",children:q.map(Ee=>t.jsx("button",{onClick:()=>Ue({...Pe,color:Ee.value}),className:`h-8 rounded-lg border-2 transition-all flex items-center justify-center ${Ee.preview} ${Pe.color===Ee.value?"border-indigo-500 ring-1 ring-indigo-200":"border-transparent hover:border-slate-300"}`,children:Pe.color===Ee.value&&t.jsx(sa,{size:12})},Ee.value))}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>be(!1),className:"px-3 py-1.5 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg",children:"ptal"}),t.jsx("button",{onClick:$e,disabled:!Pe.key.trim()||!Pe.label.trim(),className:"px-3 py-1.5 text-xs text-white bg-indigo-500 rounded-lg hover:bg-indigo-600 disabled:opacity-50",children:"Ekle"})]})]}):t.jsxs("button",{onClick:()=>be(!0),className:"w-full py-2.5 border-2 border-dashed border-slate-200 rounded-xl text-xs font-medium text-slate-400 hover:text-indigo-500 hover:border-indigo-300 transition-colors flex items-center justify-center gap-1.5",children:[t.jsx(ti,{size:14}),"Yeni Ekle"]})]})},J=()=>{const[re,_e]=B.useState(null),[ve,qe]=B.useState({label:"",coefficient:1,color:"#3b82f6"}),[Be,C]=B.useState(!1),[ie,fe]=B.useState({id:"",label:"",coefficient:1,color:"#3b82f6"}),Ke=oe||[],ze=["#3b82f6","#06b6d4","#8b5cf6","#ec4899","#f59e0b","#14b8a6","#10b981","#94a3b8","#f97316","#ef4444","#6366f1","#84cc16","#0ea5e9","#d946ef"],be=()=>{if(!ve.label.trim())return;const pe=[...Ke];pe[re]={...pe[re],label:ve.label.trim(),coefficient:Number(ve.coefficient)||1,color:ve.color},F(pe),_e(null)},Pe=pe=>{Ke.length<=1||confirm(`"${Ke[pe].label}" silinsin mi?`)&&F(Ke.filter(($e,Ee)=>Ee!==pe))},Ue=()=>{const pe=ie.id.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");!pe||!ie.label.trim()||Ke.some($e=>$e.id===pe)||(F([...Ke,{id:pe,label:ie.label.trim(),coefficient:Number(ie.coefficient)||1,color:ie.color}]),fe({id:"",label:"",coefficient:1,color:"#3b82f6"}),C(!1))},De=(pe,$e)=>{const Ee=[...Ke];[Ee[pe],Ee[pe+$e]]=[Ee[pe+$e],Ee[pe]],F(Ee)};return t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Yayn indeks trlerini ynetin. Katsay deeri Leaderboard puan hesabnda kullanlr."}),Ke.map((pe,$e)=>t.jsx("div",{className:"border border-slate-200 rounded-xl p-3 bg-white",children:re===$e?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:ve.label,onChange:Ee=>qe({...ve,label:Ee.target.value}),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-200 outline-none",placeholder:"ndeks ad"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-slate-400",children:""}),t.jsx("input",{type:"number",value:ve.coefficient,onChange:Ee=>qe({...ve,coefficient:Ee.target.value}),className:"w-14 text-sm border border-slate-200 rounded-lg px-2 py-1.5 text-center focus:ring-2 focus:ring-indigo-200 outline-none",min:"0",max:"100"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:ze.map(Ee=>t.jsx("button",{onClick:()=>qe({...ve,color:Ee}),className:`w-8 h-8 rounded-lg border-2 transition-all flex items-center justify-center ${ve.color===Ee?"border-indigo-500 ring-1 ring-indigo-200":"border-transparent hover:border-slate-300"}`,style:{backgroundColor:Ee},children:ve.color===Ee&&t.jsx(sa,{size:12,className:"text-white"})},Ee))}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>_e(null),className:"px-3 py-1.5 text-xs text-slate-500 bg-slate-100 rounded-lg hover:bg-slate-200",children:"ptal"}),t.jsx("button",{onClick:be,className:"px-3 py-1.5 text-xs text-white bg-indigo-500 rounded-lg hover:bg-indigo-600",children:"Kaydet"})]})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx("button",{onClick:()=>De($e,-1),disabled:$e===0,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(ql,{size:12,className:"rotate-90"})}),t.jsx("button",{onClick:()=>De($e,1),disabled:$e===Ke.length-1,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(Wl,{size:12,className:"rotate-90"})})]}),t.jsx("span",{className:"px-2.5 py-1 rounded-lg text-xs font-medium text-white",style:{backgroundColor:pe.color},children:pe.label}),t.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["",pe.coefficient]}),t.jsx("span",{className:"text-[10px] text-slate-300 ml-auto",children:pe.id}),t.jsx("button",{onClick:()=>{_e($e),qe({label:pe.label,coefficient:pe.coefficient,color:pe.color})},className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Ql,{size:13})}),t.jsx("button",{onClick:()=>Pe($e),disabled:Ke.length<=1,className:"p-1.5 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-500 disabled:opacity-30",children:t.jsx(Qn,{size:13})})]})},pe.id)),Be?t.jsxs("div",{className:"border border-dashed border-indigo-300 rounded-xl p-3 bg-indigo-50/30 space-y-3",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:ie.id,onChange:pe=>fe({...ie,id:pe.target.value}),className:"w-24 text-xs border border-slate-200 rounded-lg px-2 py-1.5 bg-white outline-none",placeholder:"anahtar"}),t.jsx("input",{value:ie.label,onChange:pe=>fe({...ie,label:pe.target.value}),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 bg-white outline-none",placeholder:"ndeks ad"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-slate-400",children:""}),t.jsx("input",{type:"number",value:ie.coefficient,onChange:pe=>fe({...ie,coefficient:pe.target.value}),className:"w-14 text-sm border border-slate-200 rounded-lg px-2 py-1.5 text-center bg-white outline-none",min:"0",max:"100"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:ze.map(pe=>t.jsx("button",{onClick:()=>fe({...ie,color:pe}),className:`w-8 h-8 rounded-lg border-2 transition-all flex items-center justify-center ${ie.color===pe?"border-indigo-500 ring-1 ring-indigo-200":"border-transparent hover:border-slate-300"}`,style:{backgroundColor:pe},children:ie.color===pe&&t.jsx(sa,{size:12,className:"text-white"})},pe))}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg",children:"ptal"}),t.jsx("button",{onClick:Ue,disabled:!ie.id.trim()||!ie.label.trim(),className:"px-3 py-1.5 text-xs text-white bg-indigo-500 rounded-lg hover:bg-indigo-600 disabled:opacity-50",children:"Ekle"})]})]}):t.jsxs("button",{onClick:()=>C(!0),className:"w-full py-2.5 border-2 border-dashed border-slate-200 rounded-xl text-xs font-medium text-slate-400 hover:text-indigo-500 hover:border-indigo-300 transition-colors flex items-center justify-center gap-1.5",children:[t.jsx(ti,{size:14}),"Yeni ndeks Tr Ekle"]})]})},xe=()=>{const[re,_e]=B.useState(z||oa);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(sl,{size:14}),"Proje Tr Bonus Katsays"]}),t.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Tamamlanm ve projelendirilmi konular iin ek puan katsays. Bu deer yayn indeks puanndan daha yksek olmaldr."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1 bg-white border border-slate-200 rounded-lg px-3 py-2",children:[t.jsx("span",{className:"text-xs text-slate-400",children:""}),t.jsx("input",{type:"number",value:re,onChange:ve=>_e(Number(ve.target.value)||1),className:"w-16 text-sm text-center outline-none focus:ring-1 focus:ring-indigo-200 rounded",min:"1",max:"100"})]}),t.jsx("button",{onClick:()=>ne(re),className:"px-4 py-2 text-xs font-medium text-white bg-indigo-500 rounded-lg hover:bg-indigo-600",children:"Kaydet"})]}),t.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Her tamamlanm ve projelendirilmi konu iin aratrmacya bu katsay kadar ek puan verilir."})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-5",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(ni,{size:14}),"Yayn ndeks Katsaylar"]}),t.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'Her indeks trnn katsays "Yayn ndeksleri" sekmesinden dzenlenir. Aada zet:'}),t.jsx("div",{className:"space-y-1.5",children:(oe||[]).map(ve=>t.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 rounded-lg px-3 py-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:ve.color}}),t.jsx("span",{className:"text-sm text-slate-700 flex-1",children:ve.label}),t.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["",ve.coefficient]})]},ve.id))})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-5",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Puan Forml"}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-xs text-slate-600 space-y-1.5 font-mono",children:[t.jsx("p",{children:"puan = rol_puanlar"}),t.jsx("p",{className:"pl-6",children:"+ tamamlanan  15"}),t.jsx("p",{className:"pl-6",children:"+ grev  3"}),t.jsx("p",{className:"pl-6",children:"- baarsz  20"}),t.jsx("p",{className:"pl-6 text-indigo-600",children:"+ indeks_bonusu (her indeks tr katsays toplam)"}),t.jsxs("p",{className:"pl-6 text-violet-600",children:["+ proje_bonusu (tamamlanm + projelendirilmi  ",z||oa,")"]})]})]})]})},me=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(vo,{size:14}),"Derece Seenekleri"]}),t.jsx(S,{items:T,onChange:M,itemLabel:"Eitim derecesi",placeholder:"Yeni derece ekle..."})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-5",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(ru,{size:14}),"Eitim Durumu Seenekleri"]}),t.jsx(S,{items:V,onChange:X,itemLabel:"Eitim durumu",placeholder:"Yeni durum ekle..."})]})]});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:ee}),t.jsxs("div",{className:"fixed inset-4 md:inset-auto md:top-[50%] md:left-[50%] md:-translate-x-1/2 md:-translate-y-1/2 md:w-[850px] md:max-h-[85vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx("div",{className:"w-9 h-9 bg-indigo-100 rounded-xl flex items-center justify-center",children:t.jsx(wu,{size:18,className:"text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Ayarlar"}),t.jsx("p",{className:"text-[11px] text-slate-400",children:"Sistem yaplandrmasn buradan ynetin"})]})]}),t.jsx("button",{onClick:ee,className:"p-2 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Rr,{size:18})})]}),t.jsx("div",{className:"border-b border-slate-200 flex flex-shrink-0 overflow-x-auto",children:K.map(re=>t.jsxs("button",{onClick:()=>we(re.key),className:`px-4 py-3 text-xs font-medium whitespace-nowrap border-b-2 transition-colors flex items-center gap-1.5 ${Ne===re.key?"text-indigo-600 border-indigo-500 bg-indigo-50/50":"text-slate-500 border-transparent hover:text-slate-700 hover:bg-slate-50"}`,children:[t.jsx(re.icon,{size:13}),re.label]},re.key))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-5",children:[Ne==="roles"&&t.jsx(j,{}),Ne==="projectTypes"&&t.jsx(S,{items:h,onChange:p,itemLabel:"Proje tr",placeholder:"Yeni proje tr ekle..."}),Ne==="statuses"&&t.jsx($,{config:n,onChange:a,description:"Konu ve projelerde kullanlan durum seeneklerini ynetin."}),Ne==="priorities"&&t.jsx($,{config:o,onChange:d,description:"ncelik seviyelerini ve renklerini dzenleyin."}),Ne==="categories"&&t.jsx(S,{items:v,onChange:b,itemLabel:"Kategori",placeholder:"Yeni kategori ekle..."}),Ne==="indexTypes"&&t.jsx(J,{}),Ne==="scoring"&&t.jsx(xe,{}),Ne==="education"&&t.jsx(me,{}),Ne==="links"&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Hzl balantlar ynetin. Ekle, dzenle, sil veya srasn deitir."}),t.jsxs("div",{className:"space-y-1.5",children:[(O||[]).map((re,_e)=>t.jsx("div",{className:"flex items-center gap-2 bg-slate-50 rounded-lg p-2.5 border border-slate-100 group",children:Y===re.id?t.jsxs("div",{className:"flex-1 space-y-1.5",children:[t.jsx("input",{value:w.label,onChange:ve=>R({...w,label:ve.target.value}),placeholder:"Balant ad",className:"w-full text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-200"}),t.jsx("input",{value:w.url,onChange:ve=>R({...w,url:ve.target.value}),placeholder:"https://...",className:"w-full text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-200"}),t.jsxs("div",{className:"flex gap-1.5",children:[t.jsx("button",{onClick:()=>{!w.label.trim()||!w.url.trim()||(x(O.map(ve=>ve.id===re.id?{...ve,label:w.label.trim(),url:w.url.trim()}:ve)),ue(null))},className:"px-3 py-1 text-xs font-medium text-white bg-indigo-500 rounded-lg hover:bg-indigo-600",children:"Kaydet"}),t.jsx("button",{onClick:()=>ue(null),className:"px-3 py-1 text-xs font-medium text-slate-500 bg-slate-200 rounded-lg hover:bg-slate-300",children:"ptal"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx("button",{onClick:()=>{if(_e>0){const ve=[...O];[ve[_e-1],ve[_e]]=[ve[_e],ve[_e-1]],x(ve)}},disabled:_e===0,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(ql,{size:12,className:"rotate-90"})}),t.jsx("button",{onClick:()=>{if(_e<O.length-1){const ve=[...O];[ve[_e],ve[_e+1]]=[ve[_e+1],ve[_e]],x(ve)}},disabled:_e===O.length-1,className:"text-slate-300 hover:text-slate-500 disabled:opacity-30",children:t.jsx(Wl,{size:12,className:"rotate-90"})})]}),t.jsx(Pi,{size:14,className:"text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:re.label}),t.jsx("p",{className:"text-[11px] text-slate-400 truncate",children:re.url})]}),t.jsx("button",{onClick:()=>{ue(re.id),R({label:re.label,url:re.url})},className:"p-1 text-slate-300 hover:text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Dzenle",children:t.jsx(Jh,{size:13})}),t.jsx("button",{onClick:()=>{confirm(`"${re.label}" balantsn silmek istiyor musunuz?`)&&x(O.filter(ve=>ve.id!==re.id))},className:"p-1 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Sil",children:t.jsx(Qn,{size:13})})]})},re.id)),(O||[]).length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-6",children:"Henz balant eklenmemi"})]}),t.jsxs("div",{className:"bg-indigo-50/50 rounded-xl p-3 border border-indigo-100 space-y-2",children:[t.jsx("h4",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wider",children:"Yeni Balant Ekle"}),t.jsx("input",{value:Y==="new"?w.label:"",onChange:re=>{ue("new"),R({...w,label:re.target.value})},onFocus:()=>{Y!=="new"&&(ue("new"),R({label:"",url:""}))},placeholder:"Balant ad",className:"w-full text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-200 bg-white"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:Y==="new"?w.url:"",onChange:re=>{ue("new"),R({...w,url:re.target.value})},onFocus:()=>{Y!=="new"&&(ue("new"),R({label:w.label||"",url:""}))},onKeyDown:re=>{re.key==="Enter"&&w.label.trim()&&w.url.trim()&&(x([...O||[],{id:`ql_${Date.now()}`,label:w.label.trim(),url:w.url.trim(),icon:"external"}]),R({label:"",url:""}),ue(null))},placeholder:"https://...",className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-200 bg-white"}),t.jsxs("button",{onClick:()=>{!w.label.trim()||!w.url.trim()||(x([...O||[],{id:`ql_${Date.now()}`,label:w.label.trim(),url:w.url.trim(),icon:"external"}]),R({label:"",url:""}),ue(null))},className:"px-3 py-1.5 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 text-sm font-medium flex items-center gap-1",children:[t.jsx(ti,{size:14}),"Ekle"]})]})]}),t.jsxs("button",{onClick:()=>{confirm("Balantlar varsaylana sfrlamak istiyor musunuz?")&&x(Yh)},className:"text-xs text-slate-400 hover:text-slate-600 flex items-center gap-1",children:[t.jsx(Di,{size:11}),"Varsaylana sfrla"]})]}),Ne==="data"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Tm verileri (aratrmaclar, konular, projeler, ayarlar) da aktarp baka bir cihaza veya taraycya aktarabilirsiniz."}),t.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 border border-emerald-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-emerald-800 flex items-center gap-2 mb-2",children:[t.jsx(ia,{size:15}),"Veriyi Da Aktar"]}),t.jsx("p",{className:"text-xs text-emerald-600 mb-3",children:'Tm verileriniz bir JSON dosyas olarak indirilir. Bu dosyay baka bir cihazda "e Aktar" ile ykleyebilirsiniz.'}),t.jsxs("button",{onClick:Q,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-500 rounded-lg hover:bg-emerald-600 transition-colors flex items-center gap-2",children:[t.jsx(ia,{size:14}),"JSON Olarak ndir"]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2 mb-2",children:[t.jsx(Gl,{size:15}),"Veriyi e Aktar"]}),t.jsx("p",{className:"text-xs text-blue-600 mb-3",children:"Daha nce da aktardnz JSON dosyasn ykleyerek tm verileri bu cihaza aktarn. Mevcut veriler deitirilecektir!"}),t.jsx("input",{ref:H,type:"file",accept:".json",className:"hidden",onChange:re=>{var qe;const _e=(qe=re.target.files)==null?void 0:qe[0];if(!_e)return;const ve=new FileReader;ve.onload=Be=>{try{const C=JSON.parse(Be.target.result);ye(C)}catch{alert("Geersiz dosya format!")}},ve.readAsText(_e),re.target.value=""}}),t.jsxs("button",{onClick:()=>{var re;return(re=H.current)==null?void 0:re.click()},className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[t.jsx(Gl,{size:14}),"JSON Dosyas Se"]})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4 border border-indigo-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-indigo-800 flex items-center gap-2 mb-2",children:[t.jsx(iu,{size:15}),"Manuel Senkronizasyon"]}),t.jsx("p",{className:"text-xs text-indigo-600 mb-3",children:"Otomatik senkronizasyon her 30 saniyede alr. Sorun yayorsanz bu butonla tm verileri elle senkronize edebilirsiniz."}),t.jsxs("button",{onClick:A,disabled:k==="syncing",className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-all flex items-center gap-2 ${k==="syncing"?"bg-indigo-400 cursor-not-allowed":k==="done"?"bg-emerald-500":"bg-indigo-500 hover:bg-indigo-600"}`,children:[t.jsx(iu,{size:14,className:k==="syncing"?"animate-spin":""}),k==="syncing"?"Senkronize ediliyor...":k==="done"?"Senkronize edildi!":"Senkronize Et"]})]}),t.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-800 flex items-center gap-2 mb-2",children:[t.jsx(Gl,{size:15}),"Zorunlu Yaynla"]}),t.jsx("p",{className:"text-xs text-amber-600 mb-3",children:`Tm verileri Firestore'a yazar ve ak olan tm ekranlara "Sayfa Gncelleniyor" bildirimi gnderip sayfay yeniler. Senkronizasyon sorunu yaanyorsa kullann.`}),t.jsxs("button",{onClick:E,className:"px-4 py-2 text-sm font-medium text-white bg-amber-500 rounded-lg hover:bg-amber-600 transition-colors flex items-center gap-2",children:[t.jsx(Gl,{size:14}),"Tm Ekranlara Yaynla"]})]}),_&&t.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-800 flex items-center gap-2 mb-2",children:[t.jsx(nu,{size:15}),"Bulut Yedekleme (Firestore)"]}),t.jsx("p",{className:"text-xs text-amber-600 mb-2",children:`Verileriniz Firestore'a yedeklenir ve JSON olarak da indirilir. Her "Yaynla" ileminde otomatik yedek alnr.`}),Ve&&t.jsxs("p",{className:"text-xs text-amber-700 mb-3 font-medium",children:["Son yedek: ",Ve.toLocaleDateString("tr-TR")," ",Ve.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),Date.now()-Ve.getTime()>720*60*60*1e3&&t.jsx("span",{className:"text-red-600 font-bold ml-2",children:" 30 gn at!"})]}),!Ve&&t.jsx("p",{className:"text-xs text-red-600 font-bold mb-3",children:" Hi yedek alnmam!"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:P,className:"px-4 py-2 text-sm font-medium text-white bg-amber-500 rounded-lg hover:bg-amber-600 transition-colors flex items-center gap-2",children:[t.jsx(ia,{size:14}),"Yedek Al (JSON + Firestore)"]}),t.jsxs("button",{onClick:()=>{var re;return(re=document.getElementById("backup-restore-input"))==null?void 0:re.click()},className:"px-4 py-2 text-sm font-medium text-amber-700 bg-white border border-amber-300 rounded-lg hover:bg-amber-50 transition-colors flex items-center gap-2",children:[t.jsx(Gl,{size:14}),"Yedekten Geri Ykle"]})]})]}),t.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-red-800 flex items-center gap-2 mb-2",children:[t.jsx(Qn,{size:15}),"Tm Verileri Sfrla"]}),t.jsx("p",{className:"text-xs text-red-600 mb-3",children:"Tm aratrmac, konu ve proje verilerini balang haline dndrr. Ayarlar da varsaylana sfrlanr. Bu ilem geri alnamaz!"}),t.jsxs("button",{onClick:je,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 transition-colors flex items-center gap-2",children:[t.jsx(Qn,{size:14}),"Her eyi Sfrla"]})]})]}),Ne==="report"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-100",children:[t.jsxs("h3",{className:"text-sm font-bold text-indigo-800 flex items-center gap-2 mb-2",children:[t.jsx(su,{size:16}),"Ar-Ge Dashboard Akademik Raporu"]}),t.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Bu rapor, Ar-Ge Dashboard uygulamasnn gelitirilme srecini, kullanlan yapay zeka teknolojilerini, Ar-Ge birimi sorunlarna getirilen zmleri ve gelecek aratrma ynelimlerini akademik formatta aklamaktadr."}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsxs("a",{href:"/ArGe-Dashboard-Teknik-Rapor.pdf",download:!0,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 transition-colors flex items-center gap-2 no-underline",children:[t.jsx(ia,{size:14}),"PDF ndir"]}),t.jsxs("a",{href:"/ArGe-Dashboard-Teknik-Rapor.docx",download:!0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 no-underline",children:[t.jsx(ia,{size:14}),"Word ndir (.docx)"]}),t.jsxs("a",{href:"/ArGe-Dashboard-Teknik-Rapor.md",download:!0,className:"px-4 py-2 text-sm font-medium text-white bg-slate-600 rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2 no-underline",children:[t.jsx(ia,{size:14}),"Markdown ndir"]}),t.jsxs("button",{onClick:()=>{window.open("/ArGe-Dashboard-Teknik-Rapor.pdf","_blank")},className:"px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 border border-indigo-200",children:[t.jsx(cg,{size:14}),"PDF nizle"]})]})]}),t.jsx(YN,{})]})]}),t.jsxs("div",{className:"p-3.5 border-t border-slate-200 bg-slate-50 flex items-center justify-between flex-shrink-0",children:[t.jsxs("button",{onClick:Z,className:"px-4 py-2 text-xs font-medium text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 flex items-center gap-1.5",children:[t.jsx(Di,{size:12,className:"text-amber-500"}),"Ayarlar Varsaylana Sfrla"]}),t.jsx("button",{onClick:ee,className:"px-5 py-2 text-xs font-medium text-white bg-indigo-500 rounded-lg hover:bg-indigo-600",children:"Kapat"})]})]})]})},WN=({researchers:i,topics:e,projects:n,onClose:a})=>{const[o,d]=B.useState("score"),[h,p]=B.useState(""),v=B.useMemo(()=>h?i.filter(z=>h==="aof"?z.isAofMember:!z.isAofMember):i,[i,h]),b=B.useMemo(()=>{const z=(ne,Z)=>e.filter(ee=>ee.status==="active"&&(ee.researchers||[]).some(Q=>Q.researcherId===ne&&Q.role===Z)).length;return v.map(ne=>{const Z=e.filter(H=>(H.researchers||[]).some(Y=>Y.researcherId===ne.id)),ee=z(ne.id,"lead"),Q=z(ne.id,"unit_manager"),ye=z(ne.id,"responsible"),je=z(ne.id,"member"),O=z(ne.id,"advisor"),x=z(ne.id,"scholar"),A=Z.filter(H=>H.status==="completed").length,k=Z.filter(H=>H.status==="failed").length,_=[...e.flatMap(H=>H.tasks||[]),...n.flatMap(H=>H.tasks||[])].filter(H=>H.assignedTo===ne.id),P=_.filter(H=>H.status==="done").length;let ge=0;Z.filter(H=>{var Y,ue;return H.status==="completed"&&((ue=(Y=H.publishingIndex)==null?void 0:Y.types)==null?void 0:ue.length)>0}).forEach(H=>{H.publishingIndex.types.forEach(Y=>{const ue=(Sn||[]).find(w=>w.id===Y);ge+=ue?ue.coefficient:1})});const Ne=Z.filter(H=>H.status==="completed"&&n.some(Y=>(Y.topics||[]).includes(H.id))).length*(ku||5),we=ee*10+Q*9+ye*8+je*4+O*2+x*1+A*15+P*3-k*20;return{...ne,total:Z.length,leadCount:ee,unitManagerCount:Q,responsibleCount:ye,memberCount:je,advisorCount:O,scholarCount:x,completedCount:A,failedCount:k,tasksDone:P,tasksTotal:_.length,indexBonus:ge,projBonus:Ne,score:we+ge+Ne}}).filter(ne=>ne.total>0)},[v,e,n]),T=B.useMemo(()=>{const z=[...b];return o==="total"?z.sort((ne,Z)=>Z.total-ne.total):o==="lead"?z.sort((ne,Z)=>Z.leadCount-ne.leadCount):o==="unit_manager"?z.sort((ne,Z)=>Z.unitManagerCount-ne.unitManagerCount):o==="responsible"?z.sort((ne,Z)=>Z.responsibleCount-ne.responsibleCount):o==="member"?z.sort((ne,Z)=>Z.memberCount-ne.memberCount):o==="advisor"?z.sort((ne,Z)=>Z.advisorCount-ne.advisorCount):o==="scholar"?z.sort((ne,Z)=>Z.scholarCount-ne.scholarCount):o==="score"?z.sort((ne,Z)=>Z.score-ne.score):o==="completed"?z.sort((ne,Z)=>Z.completedCount-ne.completedCount):o==="indexBonus"?z.sort((ne,Z)=>Z.indexBonus-ne.indexBonus):o==="projBonus"&&z.sort((ne,Z)=>Z.projBonus-ne.projBonus),z},[b,o]),M="px-2 py-2.5 text-[10px] font-semibold uppercase tracking-wider text-center select-none leading-tight",V=M+" text-slate-400 hover:text-slate-600 cursor-pointer",X=M+" text-indigo-600 bg-indigo-50/50 cursor-pointer",oe=M+" text-slate-400",F=({tip:z})=>t.jsx("span",{title:z,className:"inline-flex items-center justify-center w-3.5 h-3.5 rounded-full bg-slate-200/70 text-slate-400 text-[8px] font-bold cursor-help hover:bg-slate-300 hover:text-slate-600 flex-shrink-0 ml-0.5 transition-colors",children:"i"});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:a}),t.jsxs("div",{className:`fixed inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2
        md:w-[1100px] md:max-h-[85vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden`,children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sl,{size:18,className:"text-amber-500"}),t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Leaderboard"}),t.jsxs(ct,{className:"bg-slate-100 text-slate-500",children:[T.length," aratrmac"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center border border-teal-200 rounded-lg overflow-hidden",children:[t.jsx("button",{onClick:()=>p(""),className:`px-2.5 py-1.5 text-xs font-medium transition-colors ${h?"bg-white text-slate-500 hover:bg-teal-50":"bg-teal-500 text-white"}`,children:"Tm"}),t.jsx("button",{onClick:()=>p("aof"),className:`px-2.5 py-1.5 text-xs font-medium transition-colors border-l border-teal-200 ${h==="aof"?"bg-teal-500 text-white":"bg-white text-teal-600 hover:bg-teal-50"}`,children:"AF yesi"}),t.jsx("button",{onClick:()=>p("other"),className:`px-2.5 py-1.5 text-xs font-medium transition-colors border-l border-teal-200 ${h==="other"?"bg-teal-500 text-white":"bg-white text-slate-500 hover:bg-teal-50"}`,children:"Dier"})]}),t.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Rr,{size:18})})]})]}),t.jsxs("div",{className:"flex-1 overflow-auto",children:[t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-2 py-2.5 text-[10px] font-semibold text-slate-400 uppercase tracking-wider text-left w-10",children:"#"}),t.jsx("th",{className:"px-2 py-2.5 text-[10px] font-semibold text-slate-400 uppercase tracking-wider text-left",children:"Aratrmac"}),t.jsx("th",{onClick:()=>d("total"),className:o==="total"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Toplam",t.jsx(F,{tip:"Aratrmacnn dahil olduu toplam konu says"})]})}),t.jsx("th",{onClick:()=>d("lead"),className:o==="lead"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Yrtc",t.jsx(F,{tip:"Aktif konularda Yrtc rol  Puan: 10"})]})}),t.jsx("th",{onClick:()=>d("unit_manager"),className:o==="unit_manager"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Birim S.",t.jsx(F,{tip:"Aktif konularda Birim Sorumlusu rol  Puan: 9"})]})}),t.jsx("th",{onClick:()=>d("responsible"),className:o==="responsible"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Sorumlu",t.jsx(F,{tip:"Aktif konularda Sorumlu rol  Puan: 8"})]})}),t.jsx("th",{onClick:()=>d("member"),className:o==="member"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Aratrmac",t.jsx(F,{tip:"Aktif konularda Aratrmac rol  Puan: 4"})]})}),t.jsx("th",{onClick:()=>d("advisor"),className:o==="advisor"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Danman",t.jsx(F,{tip:"Aktif konularda Danman rol  Puan: 2"})]})}),t.jsx("th",{onClick:()=>d("scholar"),className:o==="scholar"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Bursiyer",t.jsx(F,{tip:"Aktif konularda Bursiyer rol  Puan: 1"})]})}),t.jsx("th",{onClick:()=>d("completed"),className:o==="completed"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Biten",t.jsx(F,{tip:"Tamamlanan konu says  Puan: 15"})]})}),t.jsx("th",{className:oe,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Baarsz",t.jsx(F,{tip:"Dahil olduu Tamamlanamad durumundaki konu says  Puan: -20"})]})}),t.jsx("th",{className:oe,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Grev",t.jsx(F,{tip:"Tamamlanan / toplam atanm grev says  Her biten grev: 3 puan"})]})}),t.jsx("th",{onClick:()=>d("indexBonus"),className:o==="indexBonus"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Yayn",t.jsx(F,{tip:"Tamamlanm konulardaki yayn indeks katsaylar toplam"})]})}),t.jsx("th",{onClick:()=>d("projBonus"),className:o==="projBonus"?X:V,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Proje Pn.",t.jsx(F,{tip:"Tamamlanm ve projelendirilmi konu bana ek puan"})]})}),t.jsx("th",{onClick:()=>d("score"),className:`${o==="score"?X:V} border-l-2 border-slate-200`,children:t.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:["Puan",t.jsx(F,{tip:"Tm metriklerin arlkl toplam. Detaylar iin alttaki aklamaya baknz."})]})})]})}),t.jsx("tbody",{children:T.map((z,ne)=>t.jsxs("tr",{className:`border-b border-slate-50 hover:bg-slate-50 transition-colors ${ne<3?"bg-amber-50/20":""}`,children:[t.jsx("td",{className:"px-3 py-2.5 text-center",children:t.jsx("span",{className:`text-sm font-bold ${ne===0?"text-amber-500":ne===1?"text-slate-400":ne===2?"text-amber-700":"text-slate-300"}`,children:ne===0?"":ne===1?"":ne===2?"":ne+1})}),t.jsx("td",{className:"px-3 py-2.5",children:t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx(Vn,{name:z.name,color:z.color,size:"sm"}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("p",{className:"text-sm font-medium text-slate-800 truncate",children:[z.title?`${z.title} `:"",z.name]}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:z.unit||z.institution})]})]})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-bold text-slate-600 ${o==="total"?"bg-indigo-50/30":""}`,children:z.total}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-bold text-indigo-600 ${o==="lead"?"bg-indigo-50/30":""}`,children:z.leadCount||t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-semibold text-rose-600 ${o==="unit_manager"?"bg-indigo-50/30":""}`,children:z.unitManagerCount||t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-semibold text-orange-600 ${o==="responsible"?"bg-indigo-50/30":""}`,children:z.responsibleCount||t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-semibold text-emerald-600 ${o==="member"?"bg-indigo-50/30":""}`,children:z.memberCount||t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-medium text-purple-600 ${o==="advisor"?"bg-indigo-50/30":""}`,children:z.advisorCount||t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-medium text-cyan-600 ${o==="scholar"?"bg-indigo-50/30":""}`,children:z.scholarCount||t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-medium text-blue-600 ${o==="completed"?"bg-indigo-50/30":""}`,children:z.completedCount}),t.jsx("td",{className:"px-3 py-2.5 text-center",children:z.failedCount>0?t.jsx("span",{className:"text-sm font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded",children:z.failedCount}):t.jsx("span",{className:"text-sm text-slate-300",children:"0"})}),t.jsx("td",{className:"px-3 py-2.5 text-center text-sm text-slate-500",children:z.tasksTotal>0?t.jsxs("span",{children:[z.tasksDone,"/",z.tasksTotal]}):t.jsx("span",{className:"text-slate-300",children:"-"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-medium text-blue-600 ${o==="indexBonus"?"bg-indigo-50/30":""}`,children:z.indexBonus>0?t.jsxs("span",{children:["+",z.indexBonus]}):t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center text-sm font-medium text-violet-600 ${o==="projBonus"?"bg-indigo-50/30":""}`,children:z.projBonus>0?t.jsxs("span",{children:["+",z.projBonus]}):t.jsx("span",{className:"text-slate-300",children:"0"})}),t.jsx("td",{className:`px-3 py-2.5 text-center border-l-2 border-slate-200 ${o==="score"?"bg-indigo-50/30":""}`,children:t.jsx("span",{className:"text-sm font-bold text-amber-600",children:z.score})})]},z.id))})]}),T.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-12",children:"Henz aratrmac-konu eletirmesi yaplmam"})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex-shrink-0",children:[t.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Puan Hesaplama (yalnzca aktif almalar)"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1.5 text-xs text-slate-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Yrtc ",t.jsx("span",{className:"font-mono text-indigo-600",children:"10"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500"}),"Birim Sorumlusu ",t.jsx("span",{className:"font-mono text-rose-600",children:"9"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Sorumlu ",t.jsx("span",{className:"font-mono text-orange-600",children:"8"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Aratrmac ",t.jsx("span",{className:"font-mono text-emerald-600",children:"4"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Danman ",t.jsx("span",{className:"font-mono text-purple-600",children:"2"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Bursiyer ",t.jsx("span",{className:"font-mono text-cyan-600",children:"1"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Biten ",t.jsx("span",{className:"font-mono text-blue-600",children:"15"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"}),"Grev ",t.jsx("span",{className:"font-mono text-slate-600",children:"3"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:""}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"Baarsz ",t.jsx("span",{className:"font-mono text-red-600",children:"20"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Yayn ndeks ",t.jsx("span",{className:"font-mono text-blue-600",children:"katsay"})]}),t.jsx("span",{className:"font-bold text-slate-300",children:"+"}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"Proje Pn. ",t.jsxs("span",{className:"font-mono text-violet-600",children:["",ku||5]})]})]}),t.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Stun balklarna tklayarak sralama deitirebilirsiniz. Yayn = tamamlanm konulardaki indeks katsaylar toplam. Proje Pn. = tamamlanm ve projelendirilmi konu bana ek puan."})]})]})]})},Nu=["#6366f1","#10b981","#3b82f6","#f59e0b","#ec4899","#8b5cf6","#14b8a6","#f97316","#06b6d4","#a78bfa","#84cc16","#ef4444","#0ea5e9","#d946ef"],Gc=(i,e)=>Nu[e%Nu.length],Wr=({data:i,size:e=160})=>{const n=i.reduce((b,T)=>b+T.value,0);if(n===0)return t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Veri yok"});let a=0;const o=i.filter(b=>b.value>0).map(b=>{const T=a/n;a+=b.value;const M=a/n;return{...b,start:T,end:M}}),d=e/2-4,h=e/2,p=e/2,v=(b,T)=>{const M=2*Math.PI*b-Math.PI/2,V=2*Math.PI*T-Math.PI/2,X=T-b>.5?1:0;return`M ${h+d*Math.cos(M)} ${p+d*Math.sin(M)} A ${d} ${d} 0 ${X} 1 ${h+d*Math.cos(V)} ${p+d*Math.sin(V)} L ${h} ${p} Z`};return t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("svg",{width:e,height:e,children:o.length===1?t.jsx("circle",{cx:h,cy:p,r:d,fill:o[0].color}):o.map((b,T)=>t.jsx("path",{d:v(b.start,b.end),fill:b.color,stroke:"white",strokeWidth:"2"},T))}),t.jsx("div",{className:"space-y-1",children:i.filter(b=>b.value>0).map((b,T)=>t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:b.color}}),t.jsxs("span",{className:"text-slate-600",children:[b.label,": ",t.jsx("b",{children:b.value})," (",n>0?Math.round(b.value/n*100):0,"%)"]})]},T))})]})},Qr=({data:i,height:e=180})=>{if(!i.length)return t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Veri yok"});const n=Math.max(...i.map(d=>d.value),1),a=Math.min(40,Math.max(16,Math.floor(500/i.length)-8)),o=i.length*(a+8)+40;return t.jsx("div",{className:"overflow-x-auto",children:t.jsx("svg",{width:Math.max(o,300),height:e+40,className:"mx-auto",children:i.map((d,h)=>{const p=d.value/n*e,v=30+h*(a+8);return t.jsxs("g",{children:[t.jsx("rect",{x:v,y:e-p+10,width:a,height:p,fill:d.color||"#6366f1",rx:"3"}),t.jsx("text",{x:v+a/2,y:e-p+4,textAnchor:"middle",className:"text-[10px] fill-slate-600 font-medium",children:d.value}),t.jsx("text",{x:v+a/2,y:e+26,textAnchor:"middle",className:"text-[9px] fill-slate-400",transform:`rotate(-30 ${v+a/2} ${e+26})`,children:d.label})]},h)})})})},kh=({data:i,height:e=160,color:n="#6366f1"})=>{if(!i.length)return t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Veri yok"});const a=Math.max(...i.map(M=>M.value),1),o=Math.max(i.length*50,300),d={t:10,b:30,l:30,r:10},h=o-d.l-d.r,p=e-d.t-d.b,v=i.map((M,V)=>({x:d.l+(i.length>1?V/(i.length-1)*h:h/2),y:d.t+p-M.value/a*p})),b=v.map((M,V)=>`${V===0?"M":"L"} ${M.x} ${M.y}`).join(" "),T=`${b} L ${v[v.length-1].x} ${d.t+p} L ${v[0].x} ${d.t+p} Z`;return t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("svg",{width:o,height:e,children:[[0,.25,.5,.75,1].map(M=>t.jsx("line",{x1:d.l,y1:d.t+p*(1-M),x2:o-d.r,y2:d.t+p*(1-M),stroke:"#e2e8f0",strokeDasharray:"3,3"},M)),t.jsx("path",{d:T,fill:n,opacity:"0.1"}),t.jsx("path",{d:b,fill:"none",stroke:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),v.map((M,V)=>t.jsxs("g",{children:[t.jsx("circle",{cx:M.x,cy:M.y,r:"4",fill:"white",stroke:n,strokeWidth:"2"}),t.jsx("text",{x:M.x,y:M.y-10,textAnchor:"middle",className:"text-[10px] fill-slate-600 font-medium",children:i[V].value}),t.jsx("text",{x:M.x,y:d.t+p+16,textAnchor:"middle",className:"text-[9px] fill-slate-400",children:i[V].label})]},V))]})})},QN=({researchers:i,topics:e,projects:n,onClose:a})=>{const[o,d]=B.useState("summary"),[h,p]=B.useState(""),[v,b]=B.useState(""),[T,M]=B.useState(""),[V,X]=B.useState(""),[oe,F]=B.useState(""),z=B.useMemo(()=>{if(!oe)return null;const j=new Set;return i.forEach(S=>{(oe==="aof"?S.isAofMember:!S.isAofMember)&&j.add(S.id)}),j},[i,oe]),ne=B.useMemo(()=>{let j=e;return z&&(j=j.filter(S=>(S.researchers||[]).some($=>z.has($.researcherId)))),h&&(j=j.filter(S=>(S.researchers||[]).some($=>$.researcherId===h))),T&&(j=j.filter(S=>S.status===T)),V&&(j=j.filter(S=>S.projectType===V)),j},[e,h,T,V,z]),Z=B.useMemo(()=>{let j=n;if(z){const S=new Set(e.filter($=>($.researchers||[]).some(J=>z.has(J.researcherId))).map($=>$.id));j=j.filter($=>($.topics||[]).some(J=>S.has(J)))}if(h){const S=e.filter($=>($.researchers||[]).some(J=>J.researcherId===h)).map($=>$.id);j=j.filter($=>($.topics||[]).some(J=>S.includes(J)))}return T&&(j=j.filter(S=>S.status===T)),V&&(j=j.filter(S=>S.type===V)),j},[n,e,h,T,V,z]),ee=B.useMemo(()=>{const j=new Set;return[...e,...n].forEach(S=>{S.startDate&&j.add(S.startDate.slice(0,4)),S.endDate&&j.add(S.endDate.slice(0,4))}),[...j].sort()},[e,n]),Q=B.useMemo(()=>{const j=ne,S=Z,$={};Object.keys(Ot).forEach(ze=>{$[ze]=j.filter(be=>be.status===ze).length});const J={};Object.keys(Ot).forEach(ze=>{J[ze]=S.filter(be=>be.status===ze).length});const xe=S.reduce((ze,be)=>ze+(parseFloat(be.budget)||0),0),me=[...j,...S].flatMap(ze=>ze.tasks||[]),re=new Set;j.forEach(ze=>(ze.researchers||[]).forEach(be=>re.add(be.researcherId))),S.forEach(ze=>(ze.researchers||[]).forEach(be=>re.add(be.researcherId)));const _e=i.length,ve=i.filter(ze=>ze.isAofMember).length,qe=i.filter(ze=>ze.hasPIExperience).length,Be=i.filter(ze=>j.some(be=>(be.researchers||[]).some(Pe=>Pe.researcherId===ze.id))).length,C=_e-Be,ie=new Set;j.forEach(ze=>(ze.researchers||[]).filter(be=>be.isIdeaOwner).forEach(be=>ie.add(be.researcherId))),S.forEach(ze=>(ze.researchers||[]).filter(be=>be.isIdeaOwner).forEach(be=>ie.add(be.researcherId)));const fe=ie.size,Ke={};return j.filter(ze=>S.some(be=>(be.topics||[]).includes(ze.id))).forEach(ze=>{ze.projectType&&(Ke[ze.projectType]=(Ke[ze.projectType]||0)+1)}),{topicCount:j.length,projectCount:S.length,topicsByStatus:$,projectsByStatus:J,totalBudget:xe,totalTasks:me.length,doneTasks:me.filter(ze=>ze.status==="done").length,uniqueResearchers:re.size,totalResearchers:_e,aofMembers:ve,piExperienced:qe,withTopics:Be,withoutTopics:C,ideaOwners:fe,projectTypeDistribution:Ke}},[ne,Z,i]),ye=B.useMemo(()=>{const j={};return ne.forEach(S=>{if(S.startDate){const $=S.startDate.slice(0,7);j[$]=j[$]||{start:0,end:0},j[$].start++}if(S.endDate){const $=S.endDate.slice(0,7);j[$]=j[$]||{start:0,end:0},j[$].end++}}),Object.entries(j).sort(([S],[$])=>S.localeCompare($)).map(([S,$])=>({label:S.slice(2),start:$.start,end:$.end}))},[ne]),je=B.useMemo(()=>{const j={proposed:"#94a3b8",active:"#10b981",completed:"#3b82f6",failed:"#ef4444",archived:"#6b7280",planning:"#f59e0b",review:"#a855f7"};return Object.entries(Q.topicsByStatus).filter(([,S])=>S>0).map(([S,$])=>{var J;return{label:((J=Ot[S])==null?void 0:J.label)||S,value:$,color:j[S]||"#94a3b8"}})},[Q]),O=B.useMemo(()=>{const j={};return Z.forEach(S=>{if(S.startDate){const $=S.startDate.slice(0,7);j[$]=(j[$]||0)+1}}),Object.entries(j).sort(([S],[$])=>S.localeCompare($)).map(([S,$])=>({label:S.slice(2),value:$}))},[Z]),x=B.useMemo(()=>{const j={planning:"#f59e0b",active:"#10b981",review:"#a855f7",completed:"#3b82f6",failed:"#ef4444"};let S=Z;v&&(S=S.filter(J=>(J.startDate||"").startsWith(v)||(J.endDate||"").startsWith(v)));const $={};return S.forEach(J=>{$[J.status]=($[J.status]||0)+1}),Object.entries($).map(([J,xe])=>{var me;return{label:((me=Ot[J])==null?void 0:me.label)||J,value:xe,color:j[J]||"#94a3b8"}})},[Z,v]),A=B.useMemo(()=>{const j={BAP:"#6366f1",TBTAK:"#10b981",Horizon:"#3b82f6","Erasmus+":"#f59e0b",DIGITAL:"#ec4899","Dier Ulusal":"#8b5cf6","Dier Uluslararas":"#14b8a6",Dier:"#94a3b8"};let S=Z;v&&(S=S.filter(J=>(J.startDate||"").startsWith(v)||(J.endDate||"").startsWith(v)));const $={};return S.forEach(J=>{const xe=J.type||"Belirtilmemi";$[xe]=($[xe]||0)+1}),Object.entries($).map(([J,xe])=>({label:J,value:xe,color:j[J]||"#6366f1"}))},[Z,v]),[k,E]=B.useState(""),_=B.useMemo(()=>{if(!k)return null;const j=i.find(Be=>Be.id===k);if(!j)return null;const S=e.filter(Be=>(Be.researchers||[]).some(C=>C.researcherId===k)),$={proposed:0,active:0,completed:0};S.forEach(Be=>{$[Be.status]!==void 0&&$[Be.status]++});const J=new Set(S.map(Be=>Be.id)),xe=(n||[]).filter(Be=>(Be.researchers||[]).some(C=>C.researcherId===k)||(Be.topics||[]).some(C=>J.has(C))),me={proposed:0,planning:0,active:0,completed:0};xe.forEach(Be=>{me[Be.status]!==void 0&&me[Be.status]++});const re=(me.proposed||0)+(me.planning||0),_e=[...S,...xe].flatMap(Be=>Be.tasks||[]),ve=_e.filter(Be=>Be.status==="done").length,qe={};return S.forEach(Be=>{const C=Be.researchers.find(ie=>ie.researcherId===k);C!=null&&C.role&&(qe[C.role]=(qe[C.role]||0)+1)}),{person:j,myTopics:S,myTopicStatus:$,myProjects:xe,myProjectStatus:me,proposedProjects:re,allTasks:_e,doneTasks:ve,myRoleCounts:qe}},[k,i,e,n]),P=B.useMemo(()=>{const j=J=>!z||z.has(J),S=J=>{const xe=new Set;return e.filter(me=>me.status===J).forEach(me=>(me.researchers||[]).forEach(re=>{j(re.researcherId)&&xe.add(re.researcherId)})),xe.size},$=J=>{const xe=new Set;return n.filter(me=>me.status===J).forEach(me=>{(me.researchers||[]).forEach(re=>{j(re.researcherId)&&xe.add(re.researcherId)}),(me.topics||[]).forEach(re=>{const _e=e.find(ve=>ve.id===re);_e&&(_e.researchers||[]).forEach(ve=>{j(ve.researcherId)&&xe.add(ve.researcherId)})})}),xe.size};return{proposedTopicRes:S("proposed"),activeTopicRes:S("active"),completedTopicRes:S("completed"),proposedProjectRes:$("proposed")+$("planning"),activeProjectRes:$("active"),completedProjectRes:$("completed")}},[e,n,z]),ge=B.useMemo(()=>{const j=z?i.filter(re=>z.has(re.id)):i,S={},$=["Prof.Dr.","Do.Dr.","Dr.r.yesi","r.Gr.Dr.","Ar.Gr.Dr.","Ar.Gr.","Belirtilmemi"],J={"Prof.Dr.":"#6366f1","Do.Dr.":"#8b5cf6","Dr.r.yesi":"#3b82f6","r.Gr.Dr.":"#10b981","Ar.Gr.Dr.":"#14b8a6","Ar.Gr.":"#f59e0b",Belirtilmemi:"#94a3b8"};j.forEach(re=>{const _e=re.title&&re.title.trim()?re.title.trim():"Belirtilmemi";S[_e]=(S[_e]||0)+1});const xe=$.filter(re=>S[re]).map(re=>({title:re,count:S[re],color:J[re]||"#94a3b8"}));Object.keys(S).forEach(re=>{$.includes(re)||xe.push({title:re,count:S[re],color:"#94a3b8"})});const me=Math.max(...xe.map(re=>re.count),1);return{items:xe,max:me,total:j.length}},[i,z]),[Ve,Ne]=B.useState("year"),[we,H]=B.useState(""),[Y,ue]=B.useState(""),w=B.useMemo(()=>{const j=new Set;return[...e,...n].forEach(S=>{S.startDate&&j.add(S.startDate.slice(0,4)),S.endDate&&j.add(S.endDate.slice(0,4)),S.createdAt&&j.add(S.createdAt.slice(0,4))}),[...j].sort()},[e,n]),R=B.useMemo(()=>{if(Ve==="year"){const j={};return w.forEach(S=>{j[S]={proposedT:0,activeT:0,completedT:0,proposedP:0,activeP:0,completedP:0}}),e.forEach(S=>{const $=(S.startDate||S.createdAt||"").slice(0,4);!$||!j[$]||(S.status==="proposed"?j[$].proposedT++:S.status==="active"?j[$].activeT++:S.status==="completed"&&j[$].completedT++)}),n.forEach(S=>{const $=(S.startDate||S.createdAt||"").slice(0,4);!$||!j[$]||(S.status==="proposed"||S.status==="planning"?j[$].proposedP++:S.status==="active"?j[$].activeP++:S.status==="completed"&&j[$].completedP++)}),Object.entries(j).map(([S,$])=>({label:S,...$}))}else{const j=we||w[w.length-1]||new Date().getFullYear().toString(),S=["01","02","03","04","05","06","07","08","09","10","11","12"],$=["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],J={};return S.forEach((xe,me)=>{J[`${j}-${xe}`]={label:$[me],proposedT:0,activeT:0,completedT:0,proposedP:0,activeP:0,completedP:0}}),e.forEach(xe=>{const me=(xe.startDate||xe.createdAt||"").slice(0,7);J[me]&&(xe.status==="proposed"?J[me].proposedT++:xe.status==="active"?J[me].activeT++:xe.status==="completed"&&J[me].completedT++)}),n.forEach(xe=>{const me=(xe.startDate||xe.createdAt||"").slice(0,7);J[me]&&(xe.status==="proposed"||xe.status==="planning"?J[me].proposedP++:xe.status==="active"?J[me].activeP++:xe.status==="completed"&&J[me].completedP++)}),Object.values(J)}},[Ve,we,e,n,w]),K=[{key:"summary",label:"zet",icon:yo},{key:"researcherStats",label:"Aratrmac st.",icon:_n},{key:"personReport",label:"Kii Bazl Rapor",icon:au},{key:"timeStats",label:"Zaman statistikleri",icon:Wh},{key:"topics",label:"Konu Bazl",icon:Pt},{key:"projects",label:"Proje Bazl",icon:bt},{key:"publishingIndex",label:"Yayn ndeksleri",icon:ni},{key:"collaboration",label:"birlii",icon:_n}],q=(j,S,$,J)=>t.jsxs("div",{className:`${J} rounded-xl p-3 flex items-center gap-3`,children:[t.jsx("div",{className:"p-2 bg-white/60 rounded-lg",children:$}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:j}),t.jsx("p",{className:"text-lg font-bold text-slate-800",children:S})]})]});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:a}),t.jsxs("div",{className:"fixed inset-3 bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-indigo-100 rounded-xl",children:t.jsx(yo,{size:20,className:"text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"statistikler"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Konu ve proje istatistikleri, grafikler, zet veriler"})]})]}),t.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Rr,{size:18})})]}),t.jsxs("div",{className:"px-5 py-3 border-b border-slate-100 flex flex-wrap items-center gap-3 flex-shrink-0 bg-slate-50/50",children:[t.jsxs("select",{value:h,onChange:j=>p(j.target.value),className:"text-xs border border-slate-200 rounded-lg px-3 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none min-w-[180px]",children:[t.jsx("option",{value:"",children:"Tm Aratrmaclar"}),(z?i.filter(j=>z.has(j.id)):i).map(j=>t.jsxs("option",{value:j.id,children:[j.title?`${j.title} `:"",j.name]},j.id))]}),t.jsxs("select",{value:T,onChange:j=>M(j.target.value),className:"text-xs border border-slate-200 rounded-lg px-3 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:[t.jsx("option",{value:"",children:"Tm Durumlar"}),Object.entries(Ot).map(([j,S])=>t.jsx("option",{value:j,children:S.label},j))]}),t.jsxs("select",{value:V,onChange:j=>X(j.target.value),className:"text-xs border border-slate-200 rounded-lg px-3 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:[t.jsx("option",{value:"",children:"Tm Trler"}),Si.map(j=>t.jsx("option",{value:j,children:j},j))]}),t.jsxs("select",{value:v,onChange:j=>b(j.target.value),className:"text-xs border border-slate-200 rounded-lg px-3 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:[t.jsx("option",{value:"",children:"Tm Yllar"}),ee.map(j=>t.jsx("option",{value:j,children:j},j))]}),t.jsxs("div",{className:"flex items-center border border-teal-200 rounded-lg overflow-hidden",children:[t.jsx("button",{onClick:()=>F(""),className:`px-2.5 py-1.5 text-xs font-medium transition-colors ${oe?"bg-white text-slate-500 hover:bg-teal-50":"bg-teal-500 text-white"}`,children:"Tm"}),t.jsx("button",{onClick:()=>F("aof"),className:`px-2.5 py-1.5 text-xs font-medium transition-colors border-l border-teal-200 ${oe==="aof"?"bg-teal-500 text-white":"bg-white text-teal-600 hover:bg-teal-50"}`,children:"AF yesi"}),t.jsx("button",{onClick:()=>F("other"),className:`px-2.5 py-1.5 text-xs font-medium transition-colors border-l border-teal-200 ${oe==="other"?"bg-teal-500 text-white":"bg-white text-slate-500 hover:bg-teal-50"}`,children:"Dier"})]}),(h||T||V||v||oe)&&t.jsx("button",{onClick:()=>{p(""),M(""),X(""),b(""),F("")},className:"text-xs text-red-500 hover:text-red-700 px-2",children:"Filtreleri Temizle"})]}),t.jsx("div",{className:"flex border-b border-slate-100 px-5",children:K.map(j=>t.jsxs("button",{onClick:()=>d(j.key),className:`flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium border-b-2 transition-colors ${o===j.key?"border-indigo-500 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:[t.jsx(j.icon,{size:15}),j.label]},j.key))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-5",children:[o==="summary"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[q("Aratrmac",Q.uniqueResearchers,t.jsx(_n,{size:16,className:"text-indigo-500"}),"bg-indigo-50"),q("Toplam Konu",Q.topicCount,t.jsx(Pt,{size:16,className:"text-emerald-500"}),"bg-emerald-50"),q("Toplam Proje",Q.projectCount,t.jsx(bt,{size:16,className:"text-violet-500"}),"bg-violet-50"),q("Toplam Bte",`${Q.totalBudget.toLocaleString("tr-TR")}`,t.jsx(Tv,{size:16,className:"text-amber-500"}),"bg-amber-50")]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Konular"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsx(Pt,{size:16,className:"text-slate-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-slate-400",children:"nerilen Konu"}),t.jsx("p",{className:"text-lg font-bold text-slate-700",children:Q.topicsByStatus.proposed||0})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx(Pt,{size:16,className:"text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-emerald-500",children:"Aktif Konu"}),t.jsx("p",{className:"text-lg font-bold text-emerald-700",children:Q.topicsByStatus.active||0})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-blue-50 rounded-xl border border-blue-100",children:[t.jsx(Pt,{size:16,className:"text-blue-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-blue-500",children:"Tamamlanan Konu"}),t.jsx("p",{className:"text-lg font-bold text-blue-700",children:Q.topicsByStatus.completed||0})]})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Projeler"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx(bt,{size:16,className:"text-amber-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-amber-500",children:"nerilen Proje"}),t.jsx("p",{className:"text-lg font-bold text-amber-700",children:(Q.projectsByStatus.proposed||0)+(Q.projectsByStatus.planning||0)})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-violet-50 rounded-xl border border-violet-100",children:[t.jsx(bt,{size:16,className:"text-violet-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-violet-500",children:"Aktif Proje"}),t.jsx("p",{className:"text-lg font-bold text-violet-700",children:Q.projectsByStatus.active||0})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-teal-50 rounded-xl border border-teal-100",children:[t.jsx(bt,{size:16,className:"text-teal-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-teal-500",children:"Tamamlanan Proje"}),t.jsx("p",{className:"text-lg font-bold text-teal-700",children:Q.projectsByStatus.completed||0})]})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Aratrmaclar"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-indigo-50 rounded-xl border border-indigo-100",children:[t.jsx(_n,{size:16,className:"text-indigo-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-indigo-500",children:"Toplam Kii"}),t.jsx("p",{className:"text-lg font-bold text-indigo-700",children:Q.totalResearchers})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-teal-50 rounded-xl border border-teal-100",children:[t.jsx(_n,{size:16,className:"text-teal-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-teal-500",children:"AF yesi"}),t.jsx("p",{className:"text-lg font-bold text-teal-700",children:Q.aofMembers})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx(ni,{size:16,className:"text-amber-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-amber-500",children:"PI Deneyimli"}),t.jsx("p",{className:"text-lg font-bold text-amber-700",children:Q.piExperienced})]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx(_n,{size:16,className:"text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-emerald-500",children:"Konusu Olan"}),t.jsx("p",{className:"text-lg font-bold text-emerald-700",children:Q.withTopics})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsx(_n,{size:16,className:"text-slate-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-slate-400",children:"Konusu Olmayan"}),t.jsx("p",{className:"text-lg font-bold text-slate-700",children:Q.withoutTopics})]})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-yellow-50 rounded-xl border border-yellow-100",children:[t.jsx(Iv,{size:16,className:"text-yellow-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-yellow-500",children:"Fikir Sahibi"}),t.jsx("p",{className:"text-lg font-bold text-yellow-700",children:Q.ideaOwners})]})]})]})]}),Object.keys(Q.projectTypeDistribution).length>0&&(()=>{const j=Object.entries(Q.projectTypeDistribution).sort((J,xe)=>xe[1]-J[1]),S=Math.max(...j.map(J=>J[1]),1),$=j.reduce((J,xe)=>J+xe[1],0);return t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Proje Tr Dalm"}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("div",{className:"space-y-2",children:j.map(([J,xe],me)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-28 text-right flex-shrink-0 truncate",title:J,children:J}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(xe/S*100,12)}%`,backgroundColor:Gc(J,me)},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:xe})})})]},J))}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 text-right",children:["Toplam: ",$," projelendirilmi konu"]})]})]})})(),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Grevler"}),t.jsxs("div",{className:"flex items-center gap-3 bg-sky-50 rounded-xl p-4 border border-sky-100",children:[t.jsx(Xh,{size:18,className:"text-sky-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[t.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:[Q.doneTasks," / ",Q.totalTasks," tamamland"]}),t.jsxs("span",{className:"text-sm font-bold text-sky-600",children:[Q.totalTasks>0?Math.round(Q.doneTasks/Q.totalTasks*100):0,"%"]})]}),t.jsx("div",{className:"w-full bg-sky-100 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-emerald-500 h-2 rounded-full transition-all",style:{width:`${Q.totalTasks>0?Q.doneTasks/Q.totalTasks*100:0}%`}})})]})]})]}),ge.items.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Unvan Dalm"}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("div",{className:"space-y-2",children:ge.items.map(j=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-28 text-right flex-shrink-0",children:j.title}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(j.count/ge.max*100,12)}%`,backgroundColor:j.color},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:j.count})})})]},j.title))}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 text-right",children:["Toplam: ",ge.total," aratrmac"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(Pt,{size:14,className:"text-emerald-500"}),"Konu Durumu Dalm"]}),t.jsx(Wr,{data:je})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(bt,{size:14,className:"text-violet-500"}),"Proje Durumu Dalm"]}),t.jsx(Wr,{data:x})]})]})]}),o==="researcherStats"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Her durumdaki konu ve projelerde yer alan benzersiz (unique) aratrmac saylar."}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Konulardaki Aratrmaclar"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsx(Pt,{size:16,className:"text-slate-400 mx-auto mb-2"}),t.jsx("p",{className:"text-[10px] text-slate-400 mb-1",children:"nerilen Konu"}),t.jsx("p",{className:"text-2xl font-bold text-slate-700",children:P.proposedTopicRes}),t.jsx("p",{className:"text-[9px] text-slate-300 mt-0.5",children:"kii"})]}),t.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx(Pt,{size:16,className:"text-emerald-500 mx-auto mb-2"}),t.jsx("p",{className:"text-[10px] text-emerald-500 mb-1",children:"Aktif Konu"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:P.activeTopicRes}),t.jsx("p",{className:"text-[9px] text-emerald-300 mt-0.5",children:"kii"})]}),t.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100",children:[t.jsx(Pt,{size:16,className:"text-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-[10px] text-blue-500 mb-1",children:"Tamamlanan Konu"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:P.completedTopicRes}),t.jsx("p",{className:"text-[9px] text-blue-300 mt-0.5",children:"kii"})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Projelerdeki Aratrmaclar"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx(bt,{size:16,className:"text-amber-500 mx-auto mb-2"}),t.jsx("p",{className:"text-[10px] text-amber-500 mb-1",children:"nerilen Proje"}),t.jsx("p",{className:"text-2xl font-bold text-amber-700",children:P.proposedProjectRes}),t.jsx("p",{className:"text-[9px] text-amber-300 mt-0.5",children:"kii"})]}),t.jsxs("div",{className:"text-center p-4 bg-violet-50 rounded-xl border border-violet-100",children:[t.jsx(bt,{size:16,className:"text-violet-500 mx-auto mb-2"}),t.jsx("p",{className:"text-[10px] text-violet-500 mb-1",children:"Aktif Proje"}),t.jsx("p",{className:"text-2xl font-bold text-violet-700",children:P.activeProjectRes}),t.jsx("p",{className:"text-[9px] text-violet-300 mt-0.5",children:"kii"})]}),t.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-xl border border-teal-100",children:[t.jsx(bt,{size:16,className:"text-teal-500 mx-auto mb-2"}),t.jsx("p",{className:"text-[10px] text-teal-500 mb-1",children:"Tamamlanan Proje"}),t.jsx("p",{className:"text-2xl font-bold text-teal-700",children:P.completedProjectRes}),t.jsx("p",{className:"text-[9px] text-teal-300 mt-0.5",children:"kii"})]})]})]}),ge.items.length>0&&t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(vo,{size:14,className:"text-indigo-500"}),"Unvan Dalm"]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3",children:ge.items.map(j=>t.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border border-slate-100",children:[t.jsx("p",{className:"text-2xl font-bold",style:{color:j.color},children:j.count}),t.jsx("p",{className:"text-[10px] text-slate-500 mt-1 font-medium",children:j.title})]},j.title))}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 text-right",children:["Toplam: ",ge.total," aratrmac"]})]}),(()=>{const j={};(z?e.filter(me=>(me.researchers||[]).some(re=>z.has(re.researcherId))):e).filter(me=>n.some(re=>(re.topics||[]).includes(me.id))).forEach(me=>{me.projectType&&(j[me.projectType]=(j[me.projectType]||0)+1)});const $=Object.entries(j).sort((me,re)=>re[1]-me[1]);if($.length===0)return null;const J=Math.max(...$.map(me=>me[1]),1),xe=$.reduce((me,re)=>me+re[1],0);return t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(bt,{size:14,className:"text-indigo-500"}),"Proje Tr Dalm"]}),t.jsx("div",{className:"space-y-2",children:$.map(([me,re],_e)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-28 text-right flex-shrink-0 truncate",title:me,children:me}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(re/J*100,12)}%`,backgroundColor:Gc(me,_e)},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:re})})})]},me))}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 text-right",children:["Toplam: ",xe," projelendirilmi konu"]})]})})(),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Aratrmac Aktivite Tablosu"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsxs("thead",{children:[t.jsxs("tr",{className:"border-b border-slate-200",children:[t.jsx("th",{rowSpan:"2",className:"pb-2 font-semibold text-slate-500 text-left align-bottom",children:"Aratrmac"}),t.jsx("th",{colSpan:"3",className:"pb-1 font-semibold text-slate-400 text-center border-b border-slate-100 text-[10px] uppercase tracking-wider",children:"Konular"}),t.jsx("th",{colSpan:"3",className:"pb-1 font-semibold text-slate-400 text-center border-b border-slate-100 text-[10px] uppercase tracking-wider",children:"Projeler"}),t.jsx("th",{rowSpan:"2",className:"pb-2 font-semibold text-slate-500 text-center align-bottom",children:"Grev"})]}),t.jsxs("tr",{className:"border-b border-slate-200",children:[t.jsx("th",{className:"pb-1.5 pt-1 text-[9px] font-medium text-slate-400 text-center",children:"nerilen"}),t.jsx("th",{className:"pb-1.5 pt-1 text-[9px] font-medium text-emerald-500 text-center",children:"Aktif"}),t.jsx("th",{className:"pb-1.5 pt-1 text-[9px] font-medium text-blue-500 text-center",children:"Tamamlanan"}),t.jsx("th",{className:"pb-1.5 pt-1 text-[9px] font-medium text-amber-500 text-center",children:"nerilen"}),t.jsx("th",{className:"pb-1.5 pt-1 text-[9px] font-medium text-violet-500 text-center",children:"Aktif"}),t.jsx("th",{className:"pb-1.5 pt-1 text-[9px] font-medium text-teal-500 text-center",children:"Tamamlanan"})]})]}),t.jsx("tbody",{children:(z?i.filter(j=>z.has(j.id)):i).map(j=>{const S=e.filter(ie=>(ie.researchers||[]).some(fe=>fe.researcherId===j.id)),$=new Set(S.map(ie=>ie.id)),J=n.filter(ie=>(ie.researchers||[]).some(fe=>fe.researcherId===j.id)||(ie.topics||[]).some(fe=>$.has(fe))),xe=[...S,...J].flatMap(ie=>ie.tasks||[]),me=xe.filter(ie=>ie.status==="done").length,re=S.filter(ie=>ie.status==="proposed").length,_e=S.filter(ie=>ie.status==="active").length,ve=S.filter(ie=>ie.status==="completed").length,qe=J.filter(ie=>ie.status==="proposed"||ie.status==="planning").length,Be=J.filter(ie=>ie.status==="active").length,C=J.filter(ie=>ie.status==="completed").length;return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-white/50",children:[t.jsxs("td",{className:"py-1.5 font-medium text-slate-700 whitespace-nowrap",children:[j.title?`${j.title} `:"",j.name]}),t.jsx("td",{className:"text-center text-slate-500",children:re}),t.jsx("td",{className:"text-center text-emerald-600 font-medium",children:_e}),t.jsx("td",{className:"text-center text-blue-600 font-medium",children:ve}),t.jsx("td",{className:"text-center text-amber-500",children:qe}),t.jsx("td",{className:"text-center text-violet-600 font-medium",children:Be}),t.jsx("td",{className:"text-center text-teal-600 font-medium",children:C}),t.jsxs("td",{className:"text-center text-slate-500",children:[me,"/",xe.length]})]},j.id)})})]})})]})]}),o==="personReport"&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Aratrmac Sein:"}),t.jsxs("select",{value:k,onChange:j=>E(j.target.value),className:"text-sm border border-slate-200 rounded-lg px-3 py-2 bg-white focus:ring-2 focus:ring-indigo-200 outline-none min-w-[250px]",children:[t.jsx("option",{value:"",children:"-- Kii Sein --"}),(z?i.filter(j=>z.has(j.id)):i).map(j=>t.jsxs("option",{value:j.id,children:[j.title?`${j.title} `:"",j.name]},j.id))]})]}),!k&&t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(_n,{size:40,className:"mx-auto mb-3 text-slate-300"}),t.jsx("p",{className:"text-sm",children:"Kii bazl istatistikleri grmek iin yukardan bir aratrmac sein."})]}),_&&t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-4",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-lg",children:_.person.name[0]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white",children:[_.person.title?`${_.person.title} `:"",_.person.name]}),t.jsxs("p",{className:"text-sm text-white/70",children:[_.person.institution,_.person.unit?`  ${_.person.unit}`:""]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Konular"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsx(Pt,{size:14,className:"text-slate-400 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] text-slate-400",children:"nerilen"}),t.jsx("p",{className:"text-lg font-bold text-slate-700",children:_.myTopicStatus.proposed})]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-emerald-50 rounded-xl border border-emerald-100",children:[t.jsx(Pt,{size:14,className:"text-emerald-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] text-emerald-500",children:"Aktif"}),t.jsx("p",{className:"text-lg font-bold text-emerald-700",children:_.myTopicStatus.active})]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-blue-50 rounded-xl border border-blue-100",children:[t.jsx(Pt,{size:14,className:"text-blue-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] text-blue-500",children:"Tamamlanan"}),t.jsx("p",{className:"text-lg font-bold text-blue-700",children:_.myTopicStatus.completed})]})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Projeler"}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-amber-50 rounded-xl border border-amber-100",children:[t.jsx(bt,{size:14,className:"text-amber-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] text-amber-500",children:"nerilen"}),t.jsx("p",{className:"text-lg font-bold text-amber-700",children:_.proposedProjects})]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-violet-50 rounded-xl border border-violet-100",children:[t.jsx(bt,{size:14,className:"text-violet-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] text-violet-500",children:"Aktif"}),t.jsx("p",{className:"text-lg font-bold text-violet-700",children:_.myProjectStatus.active})]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-teal-50 rounded-xl border border-teal-100",children:[t.jsx(bt,{size:14,className:"text-teal-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] text-teal-500",children:"Tamamlanan"}),t.jsx("p",{className:"text-lg font-bold text-teal-700",children:_.myProjectStatus.completed})]})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Grevler"}),t.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-xl p-4 border border-slate-100",children:[t.jsx(Po,{size:18,className:"text-emerald-500 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[t.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:[_.doneTasks," / ",_.allTasks.length," tamamland"]}),t.jsxs("span",{className:"text-sm font-bold text-indigo-600",children:[_.allTasks.length>0?Math.round(_.doneTasks/_.allTasks.length*100):0,"%"]})]}),t.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-emerald-500 h-2 rounded-full transition-all",style:{width:`${_.allTasks.length>0?_.doneTasks/_.allTasks.length*100:0}%`}})})]})]})]}),(()=>{const j={};_.myTopics.filter(J=>n.some(xe=>(xe.topics||[]).includes(J.id))).forEach(J=>{J.projectType&&(j[J.projectType]=(j[J.projectType]||0)+1)});const S=Object.entries(j).sort((J,xe)=>xe[1]-J[1]);if(S.length===0)return null;const $=Math.max(...S.map(J=>J[1]),1);return t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Proje Tr Dalm"}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100 space-y-2",children:S.map(([J,xe],me)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-24 text-right flex-shrink-0 truncate",title:J,children:J}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(xe/$*100,15)}%`,backgroundColor:Gc(J,me)},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:xe})})})]},J))})]})})(),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Rol Dalm"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(Jt).map(([j,S])=>{const $=_.myRoleCounts[j]||0;return $===0?null:t.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg ${S.color} text-sm font-medium`,children:[t.jsx("span",{children:S.label}),t.jsx("span",{className:"font-bold",children:$})]},j)}),Object.keys(_.myRoleCounts).length===0&&t.jsx("span",{className:"text-sm text-slate-400 italic",children:"Atama yok"})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Konular (",_.myTopics.length,")"]}),_.myTopics.length>0?t.jsx("div",{className:"space-y-1.5",children:_.myTopics.map(j=>{var J,xe,me,re,_e;const S=(n||[]).find(ve=>(ve.topics||[]).includes(j.id)),$=j.researchers.find(ve=>ve.researcherId===k);return t.jsxs("div",{className:`flex items-center gap-2 rounded-lg p-2 border ${S?"bg-gradient-to-r from-violet-50 to-indigo-50 border-violet-200":"bg-white border-slate-100"}`,children:[t.jsx(ct,{className:(J=Ot[j.status])==null?void 0:J.color,children:(xe=Ot[j.status])==null?void 0:xe.label}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{className:"text-xs font-medium text-slate-700 truncate block",children:j.title}),S&&t.jsxs("span",{className:"inline-flex items-center gap-1 mt-0.5 px-1.5 py-0.5 rounded bg-violet-100 text-[10px] font-semibold text-violet-700",children:[t.jsx(bt,{size:9}),((me=S.title)==null?void 0:me.length)>35?S.title.slice(0,35)+"":S.title,S.projectType&&t.jsxs("span",{className:"text-violet-500 ml-1",children:["(",S.projectType,")"]})]})]}),($==null?void 0:$.role)&&t.jsx(ct,{className:(re=Jt[$.role])==null?void 0:re.color,children:(_e=Jt[$.role])==null?void 0:_e.label})]},j.id)})}):t.jsx("p",{className:"text-xs text-slate-400 text-center py-3",children:"Konu atanmam"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Projeleri (",_.myProjects.length,")"]}),_.myProjects.length>0?t.jsx("div",{className:"space-y-1.5",children:_.myProjects.map(j=>{var S,$;return t.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-slate-100",children:[t.jsx(ct,{className:(S=Ot[j.status])==null?void 0:S.color,children:($=Ot[j.status])==null?void 0:$.label}),t.jsx("span",{className:"text-xs font-medium text-slate-700 truncate flex-1",children:j.title}),(j.projectType||j.type)&&t.jsx(ct,{className:"bg-indigo-50 text-indigo-600",children:j.projectType||j.type})]},j.id)})}):t.jsx("p",{className:"text-xs text-slate-400 text-center py-3",children:"Proje atanmam"})]})]})]}),o==="timeStats"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-0.5",children:[t.jsx("button",{onClick:()=>Ne("year"),className:`px-4 py-1.5 text-xs font-medium rounded-md transition-colors ${Ve==="year"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Yl Bazl"}),t.jsx("button",{onClick:()=>Ne("month"),className:`px-4 py-1.5 text-xs font-medium rounded-md transition-colors ${Ve==="month"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Ay Bazl"})]}),Ve==="month"&&t.jsx("select",{value:we||w[w.length-1]||"",onChange:j=>H(j.target.value),className:"text-xs border border-slate-200 rounded-lg px-3 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:w.map(j=>t.jsx("option",{value:j,children:j},j))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Konu Zaman Dalm"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 mb-3 flex items-center gap-1.5",children:[t.jsx(Pt,{size:12,className:"text-slate-400"}),"nerilen Konu"]}),t.jsx(Qr,{data:R.map(j=>({label:j.label,value:j.proposedT,color:"#94a3b8"})),height:120})]}),t.jsxs("div",{className:"bg-emerald-50/50 rounded-xl p-4 border border-emerald-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-emerald-700 mb-3 flex items-center gap-1.5",children:[t.jsx(Pt,{size:12,className:"text-emerald-500"}),"Aktif Konu"]}),t.jsx(Qr,{data:R.map(j=>({label:j.label,value:j.activeT,color:"#10b981"})),height:120})]}),t.jsxs("div",{className:"bg-blue-50/50 rounded-xl p-4 border border-blue-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-blue-700 mb-3 flex items-center gap-1.5",children:[t.jsx(Pt,{size:12,className:"text-blue-500"}),"Tamamlanan Konu"]}),t.jsx(Qr,{data:R.map(j=>({label:j.label,value:j.completedT,color:"#3b82f6"})),height:120})]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Proje Zaman Dalm"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-amber-50/50 rounded-xl p-4 border border-amber-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-amber-700 mb-3 flex items-center gap-1.5",children:[t.jsx(bt,{size:12,className:"text-amber-500"}),"nerilen Proje"]}),t.jsx(Qr,{data:R.map(j=>({label:j.label,value:j.proposedP,color:"#f59e0b"})),height:120})]}),t.jsxs("div",{className:"bg-violet-50/50 rounded-xl p-4 border border-violet-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-violet-700 mb-3 flex items-center gap-1.5",children:[t.jsx(bt,{size:12,className:"text-violet-500"}),"Aktif Proje"]}),t.jsx(Qr,{data:R.map(j=>({label:j.label,value:j.activeP,color:"#8b5cf6"})),height:120})]}),t.jsxs("div",{className:"bg-teal-50/50 rounded-xl p-4 border border-teal-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-teal-700 mb-3 flex items-center gap-1.5",children:[t.jsx(bt,{size:12,className:"text-teal-500"}),"Tamamlanan Proje"]}),t.jsx(Qr,{data:R.map(j=>({label:j.label,value:j.completedP,color:"#14b8a6"})),height:120})]})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(sl,{size:14,className:"text-indigo-500"}),"Toplam Konu Trendi"]}),t.jsx(kh,{data:R.map(j=>({label:j.label,value:j.proposedT+j.activeT+j.completedT})),color:"#6366f1"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(sl,{size:14,className:"text-violet-500"}),"Toplam Proje Trendi"]}),t.jsx(kh,{data:R.map(j=>({label:j.label,value:j.proposedP+j.activeP+j.completedP})),color:"#8b5cf6"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Detay Tablosu"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left border-b border-slate-200",children:[t.jsx("th",{className:"pb-2 font-semibold text-slate-500",children:Ve==="year"?"Yl":"Ay"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-400 text-center",children:"n. Konu"}),t.jsx("th",{className:"pb-2 font-semibold text-emerald-500 text-center",children:"Aktif K."}),t.jsx("th",{className:"pb-2 font-semibold text-blue-500 text-center",children:"Tam. K."}),t.jsx("th",{className:"pb-2 font-semibold text-amber-500 text-center",children:"n. Proje"}),t.jsx("th",{className:"pb-2 font-semibold text-violet-500 text-center",children:"Aktif P."}),t.jsx("th",{className:"pb-2 font-semibold text-teal-500 text-center",children:"Tam. P."})]})}),t.jsx("tbody",{children:R.map((j,S)=>t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-white/50",children:[t.jsx("td",{className:"py-1.5 font-medium text-slate-700",children:j.label}),t.jsx("td",{className:"text-center",children:j.proposedT}),t.jsx("td",{className:"text-center text-emerald-600 font-medium",children:j.activeT}),t.jsx("td",{className:"text-center text-blue-600 font-medium",children:j.completedT}),t.jsx("td",{className:"text-center",children:j.proposedP}),t.jsx("td",{className:"text-center text-violet-600 font-medium",children:j.activeP}),t.jsx("td",{className:"text-center text-teal-600 font-medium",children:j.completedP})]},S))})]})})]})]}),o==="topics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Konu Durumu Dalm"}),t.jsx(Wr,{data:je,size:140})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Konularn Aylk Balang/Biti Dalm"}),ye.length>0?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:[t.jsx("span",{className:"w-3 h-1 bg-indigo-500 rounded"})," Balang"]}),t.jsx(Qr,{data:ye.map(j=>({label:j.label,value:j.start,color:"#6366f1"})),height:120})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:[t.jsx("span",{className:"w-3 h-1 bg-emerald-500 rounded"})," Biti"]}),t.jsx(Qr,{data:ye.map(j=>({label:j.label,value:j.end,color:"#10b981"})),height:120})]})]}):t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Tarih verisi bulunamad"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Konu Detay Tablosu"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left border-b border-slate-200",children:[t.jsx("th",{className:"pb-2 font-semibold text-slate-500",children:"Durum"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-500 text-center",children:"Say"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-500 text-center",children:"%"})]})}),t.jsx("tbody",{children:Object.entries(Q.topicsByStatus).filter(([,j])=>j>0).map(([j,S])=>{var $,J;return t.jsxs("tr",{className:"border-b border-slate-100",children:[t.jsx("td",{className:"py-1.5",children:t.jsx(ct,{className:($=Ot[j])==null?void 0:$.color,children:(J=Ot[j])==null?void 0:J.label})}),t.jsx("td",{className:"text-center font-medium",children:S}),t.jsxs("td",{className:"text-center text-slate-400",children:[Q.topicCount>0?Math.round(S/Q.topicCount*100):0,"%"]})]},j)})})]})})]}),(()=>{const j=ne,S={};j.filter(me=>Z.some(re=>(re.topics||[]).includes(me.id))).forEach(me=>{me.projectType&&(S[me.projectType]=(S[me.projectType]||0)+1)});const $=Object.entries(S).sort((me,re)=>re[1]-me[1]);if($.length===0)return null;const J=Math.max(...$.map(me=>me[1]),1),xe=$.reduce((me,re)=>me+re[1],0);return t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(bt,{size:14,className:"text-violet-500"}),"Proje Tr Dalm"]}),t.jsx("div",{className:"space-y-2",children:$.map(([me,re],_e)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-28 text-right flex-shrink-0 truncate",title:me,children:me}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(re/J*100,12)}%`,backgroundColor:Gc(me,_e)},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:re})})})]},me))}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 text-right",children:["Toplam: ",xe," projelendirilmi konu"]})]})})()]}),o==="projects"&&t.jsxs("div",{className:"space-y-6",children:[(()=>{const j=re=>[re.piCountry,...re.partnerCountries||[]].filter(Boolean).some(_e=>_e!=="Trkiye"),S=Z.filter(j),$={proposed:0,active:0,completed:0},J={proposed:0,active:0,completed:0};S.forEach(re=>{const _e=re.status==="planning"?"proposed":re.status||"proposed";$[_e]!==void 0&&$[_e]++}),Z.forEach(re=>{const _e=re.status==="planning"?"proposed":re.status||"proposed";J[_e]!==void 0&&J[_e]++});const xe=S.length,me=Z.length;return t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[t.jsxs("h3",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2 mb-3",children:[t.jsx(ps,{size:15,className:"text-blue-600"}),"Uluslararas Ortakl Projeler"]}),t.jsx("div",{className:"grid grid-cols-4 gap-3 mb-3",children:[{label:"Toplam",intl:xe,all:me,bg:"bg-slate-50",color:"text-slate-700",border:"border-slate-200"},{label:"nerilen",intl:$.proposed,all:J.proposed,bg:"bg-amber-50",color:"text-amber-700",border:"border-amber-200"},{label:"Aktif",intl:$.active,all:J.active,bg:"bg-blue-50",color:"text-blue-700",border:"border-blue-300"},{label:"Tamamlanan",intl:$.completed,all:J.completed,bg:"bg-emerald-50",color:"text-emerald-700",border:"border-emerald-200"}].map(re=>t.jsxs("div",{className:`${re.bg} rounded-xl p-3 border ${re.border} text-center`,children:[t.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:re.label}),t.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[t.jsx("span",{className:`text-xl font-bold ${re.color}`,children:re.intl}),t.jsxs("span",{className:"text-slate-400 text-xs",children:["/ ",re.all]})]}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[re.all>0?Math.round(re.intl/re.all*100):0,"% uluslararas"]})]},re.label))}),xe>0&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Uluslararas vs Ulusal (Pie)"}),t.jsx(Wr,{data:[{label:"Uluslararas",value:xe,color:"#3b82f6"},{label:"Ulusal",value:me-xe,color:"#e2e8f0"}],size:110})]}),t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Durum Bazl Karlatrma"}),t.jsx(Qr,{data:[{label:"nerilen (U)",value:$.proposed,color:"#f59e0b"},{label:"nerilen (T)",value:J.proposed,color:"#fde68a"},{label:"Aktif (U)",value:$.active,color:"#3b82f6"},{label:"Aktif (T)",value:J.active,color:"#93c5fd"},{label:"Tamamlanan (U)",value:$.completed,color:"#10b981"},{label:"Tamamlanan (T)",value:J.completed,color:"#6ee7b7"}],height:140})]})]})]})})(),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Proje Durumu ",v?`(${v})`:"(Tm)"]}),t.jsx(Wr,{data:x,size:140})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Proje Tr ",v?`(${v})`:"(Tm)"]}),t.jsx(Qr,{data:A,height:140})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Projelerin Aylk Balang Dalm (izgi Grafik)"}),t.jsx(kh,{data:O,color:"#8b5cf6"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Proje Detay Tablosu"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left border-b border-slate-200",children:[t.jsx("th",{className:"pb-2 font-semibold text-slate-500",children:"Durum"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-500 text-center",children:"Say"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-500 text-center",children:"%"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-500 text-right",children:"Bte ()"})]})}),t.jsx("tbody",{children:Object.entries(Q.projectsByStatus).filter(([,j])=>j>0).map(([j,S])=>{var $,J;return t.jsxs("tr",{className:"border-b border-slate-100",children:[t.jsx("td",{className:"py-1.5",children:t.jsx(ct,{className:($=Ot[j])==null?void 0:$.color,children:(J=Ot[j])==null?void 0:J.label})}),t.jsx("td",{className:"text-center font-medium",children:S}),t.jsxs("td",{className:"text-center text-slate-400",children:[Q.projectCount>0?Math.round(S/Q.projectCount*100):0,"%"]}),t.jsx("td",{className:"text-right font-medium",children:Z.filter(xe=>xe.status===j).reduce((xe,me)=>xe+(parseFloat(me.budget)||0),0).toLocaleString("tr-TR")})]},j)})})]})})]}),(()=>{const j=Z,S={},$={},J=new Set,xe={},me={},re=new Set;let _e=0;const ve={proposed:{},active:{},completed:{}},qe={proposed:{},active:{},completed:{}};j.forEach(Te=>{const rt=Te.status==="planning"?"proposed":Te.status||"proposed";Te.piCountry&&(S[Te.piCountry]=(S[Te.piCountry]||0)+1,J.add(Te.piCountry),_e++,ve[rt]&&(ve[rt][Te.piCountry]=(ve[rt][Te.piCountry]||0)+1)),(Te.partnerCountries||[]).forEach(gt=>{$[gt]=($[gt]||0)+1,J.add(gt)}),Te.piInstitution&&(xe[Te.piInstitution]=(xe[Te.piInstitution]||0)+1,re.add(Te.piInstitution),qe[rt]&&(qe[rt][Te.piInstitution]=(qe[rt][Te.piInstitution]||0)+1)),(Te.partnerInstitutions||[]).forEach(gt=>{me[gt]=(me[gt]||0)+1,re.add(gt)})});const Be=Object.entries(S).sort((Te,rt)=>rt[1]-Te[1]),C=Object.entries($).sort((Te,rt)=>rt[1]-Te[1]),ie=Object.entries(xe).sort((Te,rt)=>rt[1]-Te[1]),fe=Object.entries(me).sort((Te,rt)=>rt[1]-Te[1]),Ke=J.size>0,ze=re.size>0,be=ve.proposed,Pe=ve.active,Ue=ve.completed,De=qe.proposed,pe=qe.active,$e=qe.completed,Ee=(Te,rt)=>Object.entries(Te).sort((gt,ht)=>ht[1]-gt[1]).map(([gt,ht],tr)=>({label:gt,value:ht,color:rt[tr%rt.length]})),xt=["#6366f1","#8b5cf6","#a78bfa","#c4b5fd","#3b82f6","#60a5fa","#93c5fd","#06b6d4","#14b8a6","#10b981","#f59e0b","#ef4444","#ec4899","#f97316"],_t=["#0ea5e9","#0284c7","#0369a1","#1d4ed8","#4f46e5","#7c3aed","#9333ea","#c026d3","#db2777","#e11d48","#f97316","#84cc16","#14b8a6","#06b6d4"];return!Ke&&!ze?t.jsxs("div",{className:"text-center py-8 text-slate-400",children:[t.jsx(Nh,{size:32,className:"mx-auto mb-2 text-slate-300"}),t.jsx("p",{className:"text-sm",children:"Henz projelere lke/kurum bilgisi eklenmemi."}),t.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Proje detaylarndan yrtc ve ortak bilgilerini ekleyebilirsiniz."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[t.jsx(Nh,{size:14,className:"text-rose-500"}),"lke & Kurum Dalm"]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"bg-rose-50 rounded-xl p-3 border border-rose-100 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-rose-700",children:J.size}),t.jsx("p",{className:"text-[10px] text-rose-400 mt-0.5",children:"Tekil lke"})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-xl p-3 border border-indigo-100 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-indigo-700",children:_e}),t.jsx("p",{className:"text-[10px] text-indigo-400 mt-0.5",children:"lke Bilgili Proje"})]}),t.jsxs("div",{className:"bg-sky-50 rounded-xl p-3 border border-sky-100 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-sky-700",children:re.size}),t.jsx("p",{className:"text-[10px] text-sky-400 mt-0.5",children:"Tekil Kurum"})]}),t.jsxs("div",{className:"bg-violet-50 rounded-xl p-3 border border-violet-100 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-violet-700",children:Object.keys($).length}),t.jsx("p",{className:"text-[10px] text-violet-400 mt-0.5",children:"birlii lke"})]})]}),Ke&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 mb-3 flex items-center gap-1.5",children:[t.jsx(ps,{size:12,className:"text-indigo-500"}),"Yrtc lke Dalm (Tm)"]}),t.jsx(Wr,{data:Ee(S,xt),size:130})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 mb-3 flex items-center gap-1.5",children:[t.jsx(ps,{size:12,className:"text-indigo-500"}),"Yrtc lke (Bar)"]}),t.jsx(Qr,{data:Be.map(([Te,rt])=>({label:Te,value:rt,color:"#6366f1"})),height:Math.max(100,Be.length*26)})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"proposed",label:"nerilen Proje lke Dalm",data:be,color:"#f59e0b",bg:"bg-amber-50",border:"border-amber-100"},{key:"active",label:"Aktif Proje lke Dalm",data:Pe,color:"#3b82f6",bg:"bg-blue-50",border:"border-blue-100"},{key:"completed",label:"Tamamlanan Proje lke Dalm",data:Ue,color:"#10b981",bg:"bg-emerald-50",border:"border-emerald-100"}].map(Te=>{const rt=Object.entries(Te.data).sort((gt,ht)=>ht[1]-gt[1]);return t.jsxs("div",{className:`${Te.bg} rounded-xl p-4 border ${Te.border}`,children:[t.jsx("h4",{className:"text-[11px] font-semibold text-slate-600 mb-2",children:Te.label}),rt.length>0?t.jsx(Wr,{data:rt.map(([gt,ht],tr)=>({label:gt,value:ht,color:xt[tr%xt.length]})),size:110}):t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Veri yok"})]},Te.key)})}),C.length>0&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-violet-50 rounded-xl p-4 border border-violet-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 mb-3 flex items-center gap-1.5",children:[t.jsx(ps,{size:12,className:"text-violet-500"}),"Ortak lke (Pie)"]}),t.jsx(Wr,{data:Ee($,xt),size:130})]}),t.jsxs("div",{className:"bg-violet-50 rounded-xl p-4 border border-violet-100",children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 mb-3 flex items-center gap-1.5",children:[t.jsx(ps,{size:12,className:"text-violet-500"}),"Ortak lke (Bar)"]}),t.jsx(Qr,{data:C.map(([Te,rt])=>({label:Te,value:rt,color:"#8b5cf6"})),height:Math.max(100,C.length*26)})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-600 mb-3",children:"lke Detay Tablosu"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left border-b border-slate-200",children:[t.jsx("th",{className:"pb-2 font-semibold text-slate-500",children:"lke"}),t.jsx("th",{className:"pb-2 font-semibold text-amber-500 text-center",children:"nerilen"}),t.jsx("th",{className:"pb-2 font-semibold text-blue-500 text-center",children:"Aktif"}),t.jsx("th",{className:"pb-2 font-semibold text-emerald-500 text-center",children:"Tamamlanan"}),t.jsx("th",{className:"pb-2 font-semibold text-indigo-500 text-center",children:"Yrtc Top."}),t.jsx("th",{className:"pb-2 font-semibold text-violet-500 text-center",children:"Ortak"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-600 text-center",children:"Genel Top."})]})}),t.jsx("tbody",{children:[...J].sort((Te,rt)=>{const gt=(S[Te]||0)+($[Te]||0);return(S[rt]||0)+($[rt]||0)-gt}).map(Te=>t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-white/50",children:[t.jsx("td",{className:"py-1.5 font-medium text-slate-700",children:Te}),t.jsx("td",{className:"text-center text-amber-600",children:be[Te]||"-"}),t.jsx("td",{className:"text-center text-blue-600",children:Pe[Te]||"-"}),t.jsx("td",{className:"text-center text-emerald-600",children:Ue[Te]||"-"}),t.jsx("td",{className:"text-center font-semibold text-indigo-600",children:S[Te]||"-"}),t.jsx("td",{className:"text-center text-violet-600",children:$[Te]||"-"}),t.jsx("td",{className:"text-center font-bold text-slate-700",children:(S[Te]||0)+($[Te]||0)})]},Te))})]})})]})]}),ze&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"border-t border-slate-200 pt-4",children:t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2 mb-4",children:[t.jsx(Ti,{size:14,className:"text-sky-500"}),"Yrtc Kurum statistikleri"]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-600 mb-3",children:"Yrtc Kurum Dalm (Pie)"}),t.jsx(Wr,{data:Ee(xe,_t),size:130})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-600 mb-3",children:"Yrtc Kurum Dalm (Bar)"}),t.jsx(Qr,{data:ie.map(([Te,rt])=>({label:Te,value:rt,color:"#0ea5e9"})),height:Math.max(100,ie.length*26)})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"proposed",label:"nerilen Proje Kurum Dalm",data:De,bg:"bg-amber-50",border:"border-amber-100"},{key:"active",label:"Aktif Proje Kurum Dalm",data:pe,bg:"bg-blue-50",border:"border-blue-100"},{key:"completed",label:"Tamamlanan Proje Kurum Dalm",data:$e,bg:"bg-emerald-50",border:"border-emerald-100"}].map(Te=>{const rt=Object.entries(Te.data).sort((gt,ht)=>ht[1]-gt[1]);return t.jsxs("div",{className:`${Te.bg} rounded-xl p-4 border ${Te.border}`,children:[t.jsx("h4",{className:"text-[11px] font-semibold text-slate-600 mb-2",children:Te.label}),rt.length>0?t.jsx(Wr,{data:rt.map(([gt,ht],tr)=>({label:gt,value:ht,color:_t[tr%_t.length]})),size:110}):t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Veri yok"})]},Te.key)})}),fe.length>0&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-600 mb-3",children:"Ortak Kurum Dalm (Pie)"}),t.jsx(Wr,{data:Ee(me,_t),size:130})]}),t.jsxs("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-600 mb-3",children:"Ortak Kurum Dalm (Bar)"}),t.jsx(Qr,{data:fe.map(([Te,rt])=>({label:Te,value:rt,color:"#0284c7"})),height:Math.max(100,fe.length*26)})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsx("h4",{className:"text-xs font-semibold text-slate-600 mb-3",children:"Kurum Detay Tablosu"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left border-b border-slate-200",children:[t.jsx("th",{className:"pb-2 font-semibold text-slate-500",children:"Kurum"}),t.jsx("th",{className:"pb-2 font-semibold text-amber-500 text-center",children:"nerilen"}),t.jsx("th",{className:"pb-2 font-semibold text-blue-500 text-center",children:"Aktif"}),t.jsx("th",{className:"pb-2 font-semibold text-emerald-500 text-center",children:"Tamamlanan"}),t.jsx("th",{className:"pb-2 font-semibold text-sky-500 text-center",children:"Yrtc Top."}),t.jsx("th",{className:"pb-2 font-semibold text-cyan-500 text-center",children:"Ortak"}),t.jsx("th",{className:"pb-2 font-semibold text-slate-600 text-center",children:"Genel Top."})]})}),t.jsx("tbody",{children:[...re].sort((Te,rt)=>{const gt=(xe[Te]||0)+(me[Te]||0);return(xe[rt]||0)+(me[rt]||0)-gt}).map(Te=>t.jsxs("tr",{className:`border-b border-slate-100 hover:bg-white/50 cursor-pointer ${Y===Te?"bg-sky-50 ring-1 ring-sky-200":""}`,onClick:()=>ue(Y===Te?"":Te),children:[t.jsxs("td",{className:"py-1.5 font-medium text-slate-700",children:[Te," ",Y===Te&&t.jsx("span",{className:"text-sky-500 text-[10px]",children:"(seili)"})]}),t.jsx("td",{className:"text-center text-amber-600",children:De[Te]||"-"}),t.jsx("td",{className:"text-center text-blue-600",children:pe[Te]||"-"}),t.jsx("td",{className:"text-center text-emerald-600",children:$e[Te]||"-"}),t.jsx("td",{className:"text-center font-semibold text-sky-600",children:xe[Te]||"-"}),t.jsx("td",{className:"text-center text-cyan-600",children:me[Te]||"-"}),t.jsx("td",{className:"text-center font-bold text-slate-700",children:(xe[Te]||0)+(me[Te]||0)})]},Te))})]})})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2 mb-3",children:[t.jsx(Ti,{size:14,className:"text-teal-500"}),"Kurum Bazl Detay Raporu"]}),t.jsxs("select",{value:Y,onChange:Te=>ue(Te.target.value),className:"w-full text-sm border border-slate-200 rounded-lg px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-300",children:[t.jsx("option",{value:"",children:"Kurum sein..."}),[...re].sort((Te,rt)=>Te.localeCompare(rt,"tr")).map(Te=>t.jsxs("option",{value:Te,children:[Te," (",xe[Te]||0," yrtc, ",me[Te]||0," ortak)"]},Te))]}),Y&&(()=>{const Te=j.filter(Ze=>Ze.piInstitution===Y||(Ze.partnerInstitutions||[]).includes(Y)),rt={proposed:[],active:[],completed:[]};Te.forEach(Ze=>{const jt=Ze.status==="planning"?"proposed":Ze.status||"proposed";rt[jt]&&rt[jt].push(Ze)});const gt={},ht={proposed:{},active:{},completed:{}};Te.forEach(Ze=>{const jt=Ze.status==="planning"?"proposed":Ze.status||"proposed";Ze.piCountry&&(gt[Ze.piCountry]=(gt[Ze.piCountry]||0)+1,ht[jt]&&(ht[jt][Ze.piCountry]=(ht[jt][Ze.piCountry]||0)+1)),(Ze.partnerCountries||[]).forEach(Lt=>{gt[Lt]=(gt[Lt]||0)+1})});const tr={},Ht={proposed:{},active:{},completed:{}};Te.forEach(Ze=>{const jt=Ze.status==="planning"?"proposed":Ze.status||"proposed";(Ze.partnerInstitutions||[]).filter(Lt=>Lt!==Y).forEach(Lt=>{tr[Lt]=(tr[Lt]||0)+1,Ht[jt]&&(Ht[jt][Lt]=(Ht[jt][Lt]||0)+1)}),Ze.piInstitution&&Ze.piInstitution!==Y&&(tr[Ze.piInstitution]=(tr[Ze.piInstitution]||0)+1,Ht[jt]&&(Ht[jt][Ze.piInstitution]=(Ht[jt][Ze.piInstitution]||0)+1))});const es=Object.entries(gt).sort((Ze,jt)=>jt[1]-Ze[1]),An=Object.entries(tr).sort((Ze,jt)=>jt[1]-Ze[1]);return t.jsxs("div",{className:"space-y-4 bg-gradient-to-br from-sky-50 to-indigo-50 rounded-xl p-4 border border-sky-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Ti,{size:16,className:"text-sky-600"}),t.jsx("h4",{className:"text-sm font-bold text-sky-800",children:Y}),t.jsxs("span",{className:"text-xs text-sky-500 ml-auto",children:[Te.length," proje"]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsxs("div",{className:"bg-amber-50 rounded-lg p-2 border border-amber-100 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-amber-700",children:rt.proposed.length}),t.jsx("p",{className:"text-[10px] text-amber-500",children:"nerilen"})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-2 border border-blue-100 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-blue-700",children:rt.active.length}),t.jsx("p",{className:"text-[10px] text-blue-500",children:"Aktif"})]}),t.jsxs("div",{className:"bg-emerald-50 rounded-lg p-2 border border-emerald-100 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-emerald-700",children:rt.completed.length}),t.jsx("p",{className:"text-[10px] text-emerald-500",children:"Tamamlanan"})]})]}),es.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 flex items-center gap-1.5 mt-2",children:[t.jsx(ps,{size:12,className:"text-indigo-500"}),"lke Dalm"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Genel lke (Pie)"}),t.jsx(Wr,{data:Ee(gt,xt),size:100})]}),t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Genel lke (Bar)"}),t.jsx(Qr,{data:es.map(([Ze,jt])=>({label:Ze,value:jt,color:"#6366f1"})),height:Math.max(80,es.length*22)})]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"nerilen lke",data:ht.proposed,bg:"bg-amber-50/80",border:"border-amber-100"},{label:"Aktif lke",data:ht.active,bg:"bg-blue-50/80",border:"border-blue-100"},{label:"Tamamlanan lke",data:ht.completed,bg:"bg-emerald-50/80",border:"border-emerald-100"}].map(Ze=>{const jt=Object.entries(Ze.data).sort((Lt,qt)=>qt[1]-Lt[1]);return t.jsxs("div",{className:`${Ze.bg} rounded-lg p-2 border ${Ze.border}`,children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-600 mb-1",children:Ze.label}),jt.length>0?t.jsx(Wr,{data:jt.map(([Lt,qt],$r)=>({label:Lt,value:qt,color:xt[$r%xt.length]})),size:80}):t.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:""})]},Ze.label)})})]}),An.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("h4",{className:"text-xs font-semibold text-slate-600 flex items-center gap-1.5 mt-2",children:[t.jsx(Ti,{size:12,className:"text-cyan-500"}),"birlii Yaplan Kurumlar"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Genel Ortak Kurum (Pie)"}),t.jsx(Wr,{data:Ee(tr,_t),size:100})]}),t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Genel Ortak Kurum (Bar)"}),t.jsx(Qr,{data:An.map(([Ze,jt])=>({label:Ze,value:jt,color:"#0ea5e9"})),height:Math.max(80,An.length*22)})]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"nerilen Kurum",data:Ht.proposed,bg:"bg-amber-50/80",border:"border-amber-100"},{label:"Aktif Kurum",data:Ht.active,bg:"bg-blue-50/80",border:"border-blue-100"},{label:"Tamamlanan Kurum",data:Ht.completed,bg:"bg-emerald-50/80",border:"border-emerald-100"}].map(Ze=>{const jt=Object.entries(Ze.data).sort((Lt,qt)=>qt[1]-Lt[1]);return t.jsxs("div",{className:`${Ze.bg} rounded-lg p-2 border ${Ze.border}`,children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-600 mb-1",children:Ze.label}),jt.length>0?t.jsx(Wr,{data:jt.map(([Lt,qt],$r)=>({label:Lt,value:qt,color:_t[$r%_t.length]})),size:80}):t.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:""})]},Ze.label)})})]}),t.jsxs("div",{className:"bg-white/70 rounded-lg p-3",children:[t.jsx("p",{className:"text-[10px] font-medium text-slate-500 mb-2",children:"Proje Listesi"}),t.jsx("div",{className:"space-y-1",children:Te.map(Ze=>t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${Ze.status==="completed"?"bg-emerald-400":Ze.status==="active"?"bg-blue-400":"bg-amber-400"}`}),t.jsx("span",{className:"font-medium text-slate-700 truncate flex-1",children:Ze.title}),t.jsx("span",{className:"text-slate-400",children:Ze.piCountry||""})]},Ze.id))})]})]})})(),!Y&&t.jsxs("div",{className:"text-center py-6 text-slate-400",children:[t.jsx(Ti,{size:28,className:"mx-auto mb-2 text-slate-300"}),t.jsx("p",{className:"text-xs",children:"Yukardan bir kurum sein veya tablodaki bir kuruma tklayn."})]})]})]})]})})()]}),o==="publishingIndex"&&t.jsx("div",{className:"space-y-6",children:(()=>{const j=ne.filter(be=>{var Pe,Ue;return be.status==="completed"&&((Ue=(Pe=be.publishingIndex)==null?void 0:Pe.types)==null?void 0:Ue.length)>0}),S=j.length;if(S===0)return t.jsx("p",{className:"text-sm text-slate-400 text-center py-12",children:"Henz yayn indeksi girilmi tamamlanm konu yok."});const $={};j.forEach(be=>be.publishingIndex.types.forEach(Pe=>{$[Pe]=($[Pe]||0)+1}));const J=Object.entries($).sort((be,Pe)=>Pe[1]-be[1]),xe=Math.max(...J.map(be=>be[1]),1),me={};j.forEach(be=>{var Pe;(Pe=be.researchers)==null||Pe.forEach(Ue=>{be.publishingIndex.types.forEach(De=>{const pe=Ue.researcherId+"|"+De;me[pe]=(me[pe]||0)+1})})});const re={};Object.entries(me).forEach(([be,Pe])=>{const Ue=be.split("|")[0];re[Ue]=(re[Ue]||0)+Pe});const _e=Object.entries(re).sort((be,Pe)=>Pe[1]-be[1]).slice(0,15),ve={};j.forEach(be=>{var Pe;(Pe=be.researchers)==null||Pe.forEach(Ue=>{const De=i.find($e=>$e.id===Ue.researcherId),pe=(De==null?void 0:De.title)||"Belirtilmemi";be.publishingIndex.types.forEach(()=>{ve[pe]=(ve[pe]||0)+1})})});const qe=Object.entries(ve).sort((be,Pe)=>Pe[1]-be[1]),Be=Math.max(...qe.map(be=>be[1]),1),C=j.filter(be=>n.some(Pe=>(Pe.topics||[]).includes(be.id))).length,ie=S-C,fe={};j.forEach(be=>{const Pe=be.publishingIndex.date?be.publishingIndex.date.slice(0,4):be.completedDate?be.completedDate.slice(0,4):"Belirsiz";be.publishingIndex.types.forEach(Ue=>{fe[Pe]||(fe[Pe]={}),fe[Pe][Ue]=(fe[Pe][Ue]||0)+1})});const Ke=Object.keys(fe).sort(),ze=[...new Set(j.flatMap(be=>be.publishingIndex.types))];return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[q("Toplam Yayn",S,t.jsx(su,{size:16,className:"text-blue-500"}),"bg-blue-50"),q("Projelendirilmi",C,t.jsx(bt,{size:16,className:"text-violet-500"}),"bg-violet-50"),q("Bamsz",ie,t.jsx(Pt,{size:16,className:"text-emerald-500"}),"bg-emerald-50")]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"ndeks Tr Dalm"}),t.jsx("div",{className:"space-y-2",children:J.map(([be,Pe])=>{const Ue=(Sn||[]).find(De=>De.id===be);return Ue?t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-20 text-right flex-shrink-0",children:Ue.label}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(Pe/xe*100,12)}%`,backgroundColor:Ue.color},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:Pe})})})]},be):null})}),t.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 text-right",children:["Toplam: ",S," yayn"]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Kii Bazl Yayn Dalm"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left border-b border-slate-200",children:[t.jsx("th",{className:"pb-2 font-semibold text-slate-500",children:"Aratrmac"}),(Sn||[]).map(be=>t.jsx("th",{className:"pb-2 text-center font-semibold",style:{color:be.color},children:be.label},be.id)),t.jsx("th",{className:"pb-2 text-center font-semibold text-slate-700",children:"Toplam"})]})}),t.jsx("tbody",{children:_e.map(([be,Pe])=>{const Ue=i.find(De=>De.id===be);return Ue?t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-white/70",children:[t.jsxs("td",{className:"py-1.5 font-medium text-slate-700",children:[Ue.title?`${Ue.title} `:"",Ue.name]}),(Sn||[]).map(De=>{const pe=me[be+"|"+De.id]||0;return t.jsx("td",{className:"text-center",children:pe>0?t.jsx("span",{className:"font-medium",style:{color:De.color},children:pe}):t.jsx("span",{className:"text-slate-300",children:"-"})},De.id)}),t.jsx("td",{className:"text-center font-bold text-slate-700",children:Pe})]},be):null})})]})})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Unvan Bazl Yayn Dalm"}),t.jsx("div",{className:"space-y-2",children:qe.map(([be,Pe],Ue)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 w-32 text-right flex-shrink-0 truncate",children:be||"Belirtilmemi"}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-5 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(Pe/Be*100,12)}%`,backgroundColor:Nu[Ue%Nu.length]},children:t.jsx("span",{className:"text-[10px] font-bold text-white",children:Pe})})})]},be))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Projelendirme Durumu"}),t.jsx(Wr,{data:[{label:"Projelendirilmi",value:C,color:"#8b5cf6"},{label:"Bamsz",value:ie,color:"#94a3b8"}],size:140})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Yl Bazl Yayn Dalm"}),Ke.length>0?t.jsxs("div",{className:"space-y-2",children:[Ke.map(be=>{const Pe=Object.values(fe[be]).reduce((Ue,De)=>Ue+De,0);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600",children:be}),t.jsx("span",{className:"text-xs text-slate-400",children:Pe})]}),t.jsx("div",{className:"flex h-4 rounded-full overflow-hidden bg-slate-200",children:ze.map(Ue=>{const De=fe[be][Ue]||0;if(De===0)return null;const pe=(Sn||[]).find($e=>$e.id===Ue);return t.jsx("div",{className:"h-full",style:{width:`${De/Pe*100}%`,backgroundColor:(pe==null?void 0:pe.color)||"#94a3b8"},title:`${pe==null?void 0:pe.label}: ${De}`},Ue)})})]},be)}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ze.map(be=>{const Pe=(Sn||[]).find(Ue=>Ue.id===be);return Pe?t.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-slate-500",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:Pe.color}}),Pe.label]},be):null})})]}):t.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"Tarih verisi yok"})]})]})]})})()}),o==="collaboration"&&t.jsx("div",{className:"space-y-6",children:(()=>{const j=new Map,S=new Set;if(ne.forEach(_e=>{const ve=_e.researchers||[];ve.forEach(qe=>S.add(qe.researcherId));for(let qe=0;qe<ve.length;qe++)for(let Be=qe+1;Be<ve.length;Be++){const C=[ve[qe].researcherId,ve[Be].researcherId].sort().join("-");j.set(C,(j.get(C)||0)+1)}}),S.size===0)return t.jsx("p",{className:"text-sm text-slate-400 text-center py-12",children:"Henz ibirlii verisi yok."});const $=i.filter(_e=>S.has(_e.id)).sort((_e,ve)=>_e.name.localeCompare(ve.name,"tr")),J=Math.max(...j.values(),1),xe=[...j.values()].reduce((_e,ve)=>_e+ve,0),me=(_e,ve)=>{const qe=[_e,ve].sort().join("-");return j.get(qe)||0},re=[...j.entries()].sort((_e,ve)=>ve[1]-_e[1]).slice(0,10);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[q("Aratrmac",$.length,t.jsx(_n,{size:16,className:"text-indigo-500"}),"bg-indigo-50"),q("Toplam birlii",xe,t.jsx(ru,{size:16,className:"text-emerald-500"}),"bg-emerald-50"),q("Esiz ift",j.size,t.jsx(au,{size:16,className:"text-violet-500"}),"bg-violet-50")]}),re.length>0&&t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"En ok birlii Yapan iftler"}),t.jsx("div",{className:"space-y-1.5",children:re.map(([_e,ve])=>{const[qe,Be]=_e.split("-"),C=i.find(fe=>fe.id===qe),ie=i.find(fe=>fe.id===Be);return!C||!ie?null:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-1 w-60 flex-shrink-0",children:[t.jsx(Vn,{name:C.name,color:C.color,size:"xs"}),t.jsx("span",{className:"text-xs text-slate-600 truncate",children:C.name.split(" ").pop()}),t.jsx("span",{className:"text-[10px] text-slate-300",children:""}),t.jsx(Vn,{name:ie.name,color:ie.color,size:"xs"}),t.jsx("span",{className:"text-xs text-slate-600 truncate",children:ie.name.split(" ").pop()})]}),t.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:"h-full bg-indigo-500 rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${Math.max(ve/J*100,10)}%`},children:t.jsx("span",{className:"text-[9px] font-bold text-white",children:ve})})})]},_e)})})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"birlii Matrisi"}),t.jsx("p",{className:"text-[10px] text-slate-400 mb-3",children:"Saylar iki aratrmacnn birlikte alt konu saysn gsterir. Renk younluu ibirlii skln yanstr."}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"border-collapse text-[10px]",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-1.5 text-left bg-slate-100 border border-slate-200 sticky left-0 z-10 min-w-[100px]",children:"Aratrmac"}),$.map(_e=>t.jsx("th",{className:"p-1.5 text-center bg-slate-100 border border-slate-200 max-w-[50px] min-w-[40px]",title:_e.name,children:t.jsx("span",{className:"block truncate",children:_e.name.split(" ").pop().slice(0,4)})},_e.id))]})}),t.jsx("tbody",{children:$.map(_e=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-1.5 border border-slate-200 bg-slate-100 font-medium text-slate-700 truncate max-w-[100px] sticky left-0 z-10",title:_e.name,children:_e.name.split(" ").slice(-1)[0]}),$.map(ve=>{if(_e.id===ve.id)return t.jsx("td",{className:"p-1.5 border border-slate-200 bg-slate-300/30 text-center text-slate-400",children:""},ve.id);const qe=me(_e.id,ve.id),Be=qe>0?qe/J:0;return t.jsx("td",{className:"p-1.5 border border-slate-200 text-center font-medium",style:{backgroundColor:Be>0?`rgba(99, 102, 241, ${.15+Be*.65})`:"transparent",color:Be>.5?"white":qe>0?"#4338ca":"#cbd5e1"},title:`${_e.name}  ${ve.name}: ${qe} konu`,children:qe>0?qe:""},ve.id)})]},_e.id))})]})})]})]})})()})]})]})]})},XN=({researchers:i,topics:e,projects:n,onClose:a})=>{const[o,d]=B.useState("researchers"),h=[{key:"researchers",label:"Aratrmaclar",icon:_n,count:i.length},{key:"topics",label:"Konular",icon:Pt,count:e.length},{key:"projects",label:"Projeler",icon:bt,count:n.length}],p=(F,z,ne)=>{const ee=z.map(A=>A.label).join(";"),Q=F.map(A=>z.map(k=>{let E=typeof k.get=="function"?k.get(A):A[k.key]||"";return E=String(E).replace(/"/g,'""'),(String(E).includes(";")||String(E).includes('"')||String(E).includes(`
`))&&(E=`"${E}"`),E}).join(";")),ye="\uFEFF"+[ee,...Q].join(`
`),je=new Blob([ye],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(je),x=document.createElement("a");x.href=O,x.download=ne,x.click(),URL.revokeObjectURL(O)},M=o==="researchers"?[{label:"Ad Soyad",key:"name",get:F=>`${F.title||""} ${F.name}`.trim()},{label:"Kurum",key:"institution"},{label:"Birim",key:"unit"},{label:"Eitim Derecesi",key:"eduDegree"},{label:"Eitim Durumu",key:"eduStatus"},{label:"niversite",key:"eduUniversity"},{label:"Program",key:"eduProgram"},{label:"Aratrma Alanlar",get:F=>(F.researchAreas||[]).join(", ")},{label:"Diller",get:F=>(F.languages||[]).join(", ")},{label:"Aralar",get:F=>(F.tools||[]).join(", ")},{label:"PI Deneyimi",get:F=>F.hasPIExperience?"Evet":"Hayr"},{label:"E-posta",key:"email"},{label:"Telefon",key:"phone"},{label:"Konu Says",get:F=>e.filter(z=>(z.researchers||[]).some(ne=>ne.researcherId===F.id)).length}]:o==="topics"?[{label:"Balk",key:"title"},{label:"Durum",get:F=>{var z;return((z=Ot[F.status])==null?void 0:z.label)||F.status}},{label:"ncelik",get:F=>{var z;return((z=Zn[F.priority])==null?void 0:z.label)||F.priority}},{label:"Kategori",key:"category"},{label:"Proje Tr",key:"projectType"},{label:"Proje Tr Detay",key:"projectTypeDetail"},{label:"Ekip",get:F=>(F.researchers||[]).map(z=>{var Z;const ne=i.find(ee=>ee.id===z.researcherId);return ne?`${ne.name} (${((Z=Jt[z.role])==null?void 0:Z.label)||z.role}${z.isIdeaOwner?", Fikir Sahibi":""})`:""}).filter(Boolean).join(", ")},{label:"Fikir Sahibi",get:F=>(F.researchers||[]).filter(z=>z.isIdeaOwner).map(z=>{const ne=i.find(Z=>Z.id===z.researcherId);return ne?ne.name:""}).filter(Boolean).join(", ")||"-"},{label:"Balang",key:"startDate"},{label:"Biti",key:"endDate"},{label:"Hedef Dergi",key:"targetJournal"},{label:"Aratrma Yntemi",key:"researchMethod"},{label:"alma Linki",key:"workLink"},{label:"Projelendirilmi",get:F=>n.some(z=>(z.topics||[]).includes(F.id))?"Evet":"Hayr"},{label:"Grev lerlemesi",get:F=>{const z=F.tasks||[];return z.length>0?`${z.filter(ne=>ne.status==="done").length}/${z.length}`:"-"}}]:[{label:"Balk",key:"title"},{label:"Durum",get:F=>{var z;return((z=Ot[F.status])==null?void 0:z.label)||F.status}},{label:"ncelik",get:F=>{var z;return((z=Zn[F.priority])==null?void 0:z.label)||F.priority}},{label:"Proje Tr",key:"type"},{label:"Proje Tr Detay",key:"projectTypeDetail"},{label:"Fon Kayna",key:"fundingSource"},{label:"Bte ()",get:F=>F.budget?F.budget.toLocaleString("tr-TR"):""},{label:"Balang",key:"startDate"},{label:"Biti",key:"endDate"},{label:"Bal Konu Says",get:F=>(F.topics||[]).length},{label:"Bal Konular",get:F=>(F.topics||[]).map(z=>{var ne;return((ne=e.find(Z=>Z.id===z))==null?void 0:ne.title)||""}).filter(Boolean).join(", ")},{label:"alma Linki",key:"workLink"}],V=o==="researchers"?i:o==="topics"?e:n,X="px-3 py-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider text-left whitespace-nowrap bg-slate-50 border-b border-slate-200 sticky top-0 z-10",oe="px-3 py-2 text-sm text-slate-600 border-b border-slate-50 max-w-[200px] truncate";return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:a}),t.jsxs("div",{className:"fixed inset-4 md:inset-6 bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(hg,{size:18,className:"text-indigo-500"}),t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Tablo Grnm"}),t.jsx("div",{className:"flex gap-1 ml-2",children:h.map(F=>t.jsxs("button",{onClick:()=>d(F.key),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${o===F.key?"bg-indigo-100 text-indigo-700":"text-slate-500 hover:bg-slate-100"}`,children:[t.jsx(F.icon,{size:13}),F.label,t.jsxs("span",{className:"text-[10px] opacity-60",children:["(",F.count,")"]})]},F.key))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>p(V,M,`${o}_export.csv`),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors",children:[t.jsx(ia,{size:13}),"CSV ndir"]}),t.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Rr,{size:18})})]})]}),t.jsxs("div",{className:"flex-1 overflow-auto",children:[t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsx("tr",{children:M.map((F,z)=>t.jsx("th",{className:X,children:F.label},z))})}),t.jsx("tbody",{children:V.map((F,z)=>t.jsx("tr",{className:"hover:bg-slate-50 transition-colors",children:M.map((ne,Z)=>{const ee=typeof ne.get=="function"?ne.get(F):F[ne.key]||"";return t.jsx("td",{className:oe,title:String(ee),children:String(ee)},Z)})},F.id||z))})]}),V.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-12",children:"Veri bulunamad"})]}),t.jsxs("div",{className:"p-3 border-t border-slate-100 bg-slate-50 flex items-center justify-between text-xs text-slate-400 flex-shrink-0",children:[t.jsxs("span",{children:[V.length," kayt  ",M.length," stun"]}),t.jsx("span",{children:"CSV dosyas noktal virgl (;) ayrc ile UTF-8 BOM kodlamasnda indirilir."})]})]})]})},Yh=[{id:"ql1",label:"AF Web Sitesi",url:"https://www.anadolu.edu.tr/aof",icon:"globe"},{id:"ql2",label:"Ar-Ge Birimi",url:"https://www.anadolu.edu.tr/arge",icon:"building"},{id:"ql3",label:"e-Kamps",url:"https://ekampus.anadolu.edu.tr",icon:"globe"},{id:"ql4",label:"TBTAK",url:"https://www.tubitak.gov.tr",icon:"external"},{id:"ql5",label:"Erasmus+ Trkiye",url:"https://www.ua.gov.tr",icon:"external"}],JN={globe:ps,building:Ti,external:Pi,file:su},ZN=({links:i,onChange:e,onClose:n})=>{const[a,o]=B.useState(!1),[d,h]=B.useState({label:"",url:""}),p=()=>{if(!d.label.trim()||!d.url.trim())return;const b={id:`ql_${Date.now()}`,label:d.label.trim(),url:d.url.trim(),icon:"external"};e([...i,b]),h({label:"",url:""})},v=b=>{e(i.filter(T=>T.id!==b))};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-30",onClick:n}),t.jsxs("div",{className:"absolute top-full right-0 mt-2 w-[340px] bg-white rounded-xl shadow-2xl border border-slate-200 z-40 overflow-hidden",children:[t.jsxs("div",{className:"p-3 border-b border-slate-100 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qh,{size:16,className:"text-indigo-500"}),t.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Balantlar"})]}),t.jsx("button",{onClick:()=>o(!a),className:`p-1 rounded-lg transition-colors ${a?"bg-indigo-100 text-indigo-600":"hover:bg-slate-100 text-slate-400"}`,title:"Dzenle",children:t.jsx(Jh,{size:14})})]}),t.jsxs("div",{className:"max-h-[350px] overflow-y-auto p-2 space-y-1",children:[i.map(b=>{const T=JN[b.icon]||Pi;return t.jsxs("div",{className:"flex items-center gap-2 group",children:[t.jsxs("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center gap-2.5 p-2 rounded-lg hover:bg-indigo-50 transition-colors",children:[t.jsx(T,{size:15,className:"text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:b.label}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:b.url.replace(/^https?:\/\//,"").split("/")[0]})]}),t.jsx(Pi,{size:12,className:"text-slate-300 flex-shrink-0"})]}),a&&t.jsx("button",{onClick:()=>v(b.id),className:"p-1 text-slate-300 hover:text-red-400 flex-shrink-0",children:t.jsx(Rr,{size:14})})]},b.id)}),i.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"Henz balant eklenmemi"})]}),a&&t.jsxs("div",{className:"p-3 border-t border-slate-100 space-y-2",children:[t.jsx("input",{value:d.label,onChange:b=>h({...d,label:b.target.value}),placeholder:"Balant ad",className:"w-full text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-200"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:d.url,onChange:b=>h({...d,url:b.target.value}),placeholder:"https://...",onKeyDown:b=>b.key==="Enter"&&p(),className:"flex-1 text-sm border border-slate-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-200"}),t.jsx("button",{onClick:p,className:"px-3 py-1.5 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 text-sm font-medium",children:t.jsx(ti,{size:14})})]})]})]})]})},Io=i=>{if(!i)return null;const e=new Date;e.setHours(0,0,0,0);const n=new Date(i);n.setHours(0,0,0,0);const a=n-e,o=Math.ceil(a/(1e3*60*60*24));return o<0?{label:`${Math.abs(o)} gn gecikti`,color:"text-red-600",bg:"bg-red-50 border-red-200",urgency:0,days:o}:o===0?{label:"Bugn!",color:"text-red-700",bg:"bg-red-100 border-red-300",urgency:1,days:0}:o<=7?{label:`${o} gn kald`,color:"text-red-600",bg:"bg-red-50 border-red-200",urgency:2,days:o}:o<=14?{label:"2 hafta kald",color:"text-orange-600",bg:"bg-orange-50 border-orange-200",urgency:3,days:o}:o<=21?{label:"3 hafta kald",color:"text-amber-600",bg:"bg-amber-50 border-amber-200",urgency:4,days:o}:o<=28?{label:"4 hafta kald",color:"text-yellow-600",bg:"bg-yellow-50 border-yellow-200",urgency:5,days:o}:null},ew=({topics:i,projects:e,onClose:n})=>{const a=B.useMemo(()=>{const o=[];return i.forEach(d=>{if(d.status==="completed"||d.status==="archived")return;const h=Io(d.endDate);h&&o.push({...h,title:d.title,type:"Konu",date:d.endDate,icon:Pt,iconColor:"text-emerald-500"})}),e.forEach(d=>{if(d.status==="completed"||d.status==="archived")return;const h=Io(d.endDate);h&&o.push({...h,title:d.title,type:"Proje",date:d.endDate,icon:bt,iconColor:"text-violet-500"})}),o.sort((d,h)=>d.days-h.days),o},[i,e]);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-30",onClick:n}),t.jsxs("div",{className:"absolute top-full right-0 mt-2 w-[380px] bg-white rounded-xl shadow-2xl border border-slate-200 z-40 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center gap-2",children:[t.jsx(ig,{size:16,className:"text-amber-500"}),t.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Yaklaan Tarihler"}),t.jsx(ct,{className:"bg-slate-100 text-slate-500 ml-auto",children:a.length})]}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:a.length===0?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx(Po,{size:24,className:"text-emerald-400 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Yaklaan tarih yok"})]}):t.jsx("div",{className:"p-2 space-y-1.5",children:a.map((o,d)=>{const h=o.icon;return t.jsxs("div",{className:`flex items-center gap-3 p-2.5 rounded-lg border ${o.bg}`,children:[t.jsx(h,{size:16,className:o.iconColor+" flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:o.title}),t.jsxs("p",{className:"text-xs text-slate-400",children:[o.type,"  ",new Date(o.date).toLocaleDateString("tr-TR")]})]}),t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsx("p",{className:`text-xs font-bold ${o.color}`,children:o.label})})]},d)})})})]})]})},tw=({topics:i,projects:e,onClose:n})=>{const[a,o]=B.useState(()=>{const ee=new Date;return new Date(ee.getFullYear(),ee.getMonth(),1)}),d=a.getFullYear(),h=a.getMonth(),p=a.toLocaleDateString("tr-TR",{month:"long",year:"numeric"}),v=()=>o(new Date(d,h-1,1)),b=()=>o(new Date(d,h+1,1)),T=()=>{const ee=new Date;o(new Date(ee.getFullYear(),ee.getMonth(),1))},M=new Date(d,h+1,0).getDate(),V=(new Date(d,h,1).getDay()+6)%7,X=new Date;X.setHours(0,0,0,0);const oe=B.useMemo(()=>{const ee={},Q=(ye,je,O,x)=>{if(!ye)return;const A=new Date(ye);if(A.getFullYear()===d&&A.getMonth()===h){const k=A.getDate();ee[k]||(ee[k]=[]),ee[k].push({title:je,type:O,color:x})}};return i.forEach(ye=>{Q(ye.applicationDate,ye.title,"Bavuru","bg-slate-400"),Q(ye.startDate,ye.title,"Balang","bg-emerald-500"),Q(ye.endDate,ye.title,"Biti","bg-red-500")}),e.forEach(ye=>{Q(ye.startDate,ye.title,"Balang","bg-indigo-500"),Q(ye.endDate,ye.title,"Biti","bg-red-500")}),ee},[i,e,d,h]),F=["Pzt","Sal","ar","Per","Cum","Cmt","Paz"],z=[];for(let ee=0;ee<V;ee++)z.push(null);for(let ee=1;ee<=M;ee++)z.push(ee);const[ne,Z]=B.useState(null);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm",onClick:n}),t.jsxs("div",{className:`fixed inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2
        md:w-[640px] md:max-h-[85vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden`,children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Wh,{size:18,className:"text-indigo-500"}),t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Takvim"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:v,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-500",children:t.jsx(ql,{size:18})}),t.jsx("span",{className:"text-sm font-semibold text-slate-700 w-40 text-center capitalize",children:p}),t.jsx("button",{onClick:b,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-500",children:t.jsx(Wl,{size:18})}),t.jsx("button",{onClick:T,className:"ml-2 px-2.5 py-1 text-xs font-medium bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100",children:"Bugn"})]}),t.jsx("button",{onClick:n,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:t.jsx(Rr,{size:18})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[t.jsx("div",{className:"grid grid-cols-7 gap-px mb-1",children:F.map(ee=>t.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-1",children:ee},ee))}),t.jsx("div",{className:"grid grid-cols-7 gap-px bg-slate-100 rounded-lg overflow-hidden",children:z.map((ee,Q)=>{if(ee===null)return t.jsx("div",{className:"bg-slate-50 min-h-[72px]"},`e${Q}`);const ye=X.getFullYear()===d&&X.getMonth()===h&&X.getDate()===ee,je=oe[ee]||[],O=(()=>{const x=`${d}-${String(h+1).padStart(2,"0")}-${String(ee).padStart(2,"0")}`,A=Io(x);return je.some(k=>k.type==="Biti")?A:null})();return t.jsxs("div",{className:`bg-white min-h-[72px] p-1 relative cursor-default
                  ${ye?"ring-2 ring-inset ring-indigo-400":""}`,onMouseEnter:()=>je.length>0&&Z(ee),onMouseLeave:()=>Z(null),children:[t.jsx("span",{className:`text-xs font-medium inline-flex items-center justify-center w-5 h-5 rounded-full
                    ${ye?"bg-indigo-500 text-white":"text-slate-600"}`,children:ee}),t.jsxs("div",{className:"mt-0.5 space-y-0.5",children:[je.slice(0,3).map((x,A)=>t.jsxs("div",{className:"flex items-center gap-0.5",children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${x.color} flex-shrink-0`}),t.jsx("span",{className:"text-xs text-slate-600 truncate leading-tight",children:x.title.slice(0,12)})]},A)),je.length>3&&t.jsxs("span",{className:"text-xs text-slate-400",children:["+",je.length-3]})]}),ne===ee&&je.length>0&&t.jsxs("div",{className:"absolute z-30 bottom-full left-1/2 -translate-x-1/2 mb-1 bg-slate-800 text-white rounded-lg shadow-lg p-2 min-w-[180px]",children:[je.map((x,A)=>t.jsxs("div",{className:"flex items-center gap-1.5 py-0.5",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${x.color} flex-shrink-0`}),t.jsx("span",{className:"text-xs",children:x.title}),t.jsx("span",{className:"text-xs text-slate-400 ml-auto",children:x.type})]},A)),O&&t.jsx("div",{className:`text-xs font-bold mt-1 pt-1 border-t border-slate-600 ${O.days<=7?"text-red-400":"text-amber-400"}`,children:O.label})]})]},ee)})}),t.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-slate-100",children:[t.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"}),"Bavuru"]}),t.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Konu Balang"]}),t.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Proje Balang"]}),t.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"Biti"]})]})]})]})]})},rw=({researchers:i,topics:e,projects:n})=>{const[a,o]=B.useState(!1),[d,h]=B.useState(!1),[p,v]=B.useState([{role:"bot",text:"Merhaba! Ben Ar-Ge Asistan. Aadaki kategorilerden birini seerek balayabilirsiniz.",isWelcome:!0}]),[b,T]=B.useState(""),[M,V]=B.useState(!1),[X,oe]=B.useState(!1),F=B.useRef(null),z=B.useCallback(k=>{const E=k.toLowerCase().replace(/[?!.,]/g,"").trim(),_=(...w)=>w.some(R=>E.includes(R)),P=E.match(/\b(20\d{2})\b/),ge=P?P[1]:null,Ve=(w,R)=>w.filter(K=>(K.startDate||K.createdAt||"").startsWith(R)),Ne=(w,R)=>w.filter(K=>K.status===R).length,we=(w,R)=>w.filter(K=>(K.type||"").toLowerCase()===R.toLowerCase()).length,H=(w,R,K=3)=>{const q=w.sort((j,S)=>S.count-j.count).filter(j=>j.count>0);return q.length===0?"Bu kriterde sonu bulunamad.":q.slice(0,K).map((j,S)=>`${S+1}. ${j.name} (${j.count} ${R})`).join(`
`)};if(_("merhaba","selam","hey","gnaydn","iyi gnler","naslsn"))return"Merhaba! Size Ar-Ge verileri hakknda yardmc olabilirim. Ne sormak istersiniz?";if(_("zet","genel","dashboard","panel","durum ne","rapor ver")){const w=Ne(e,"active"),R=Ne(n,"active"),K=Ne(e,"completed"),q=Ne(n,"completed"),j=Ne(e,"proposed"),S=Ne(n,"proposed")+Ne(n,"planning"),$=n.reduce((xe,me)=>xe+(parseFloat(me.budget)||0),0),J=i.filter(xe=>xe.isAofMember).length;return`Dashboard zeti:
 ${i.length} aratrmac (${J} AF yesi)
 ${e.length} konu (${j} nerilen, ${w} aktif, ${K} tamamlanan)
 ${n.length} proje (${S} nerilen, ${R} aktif, ${q} tamamlanan)
 Toplam bte: ${$.toLocaleString("tr-TR")}`}if(_("ka")&&_("aratrmac","kii","ye","akademisyen"))return _("af")?`AF retim yesi olan ${i.filter(w=>w.isAofMember).length} aratrmac bulunmaktadr.`:_("prof")?`Sistemde ${i.filter(w=>(w.title||"").includes("Prof")).length} Prof.Dr. bulunmaktadr.`:_("do")?`Sistemde ${i.filter(w=>(w.title||"").includes("Do")).length} Do.Dr. bulunmaktadr.`:`Sistemde toplam ${i.length} aratrmac kaytldr.`;if(_("ka")&&_("konu","aratrma konusu","topic")){let w=e;return ge&&(w=Ve(w,ge)),_("aktif")?`${ge?ge+" ylnda ":""}${Ne(w,"active")} aktif konu bulunmaktadr.`:_("tamamla")?`${ge?ge+" ylnda ":""}${Ne(w,"completed")} tamamlanan konu bulunmaktadr.`:_("neril")?`${ge?ge+" ylnda ":""}${Ne(w,"proposed")} nerilen konu bulunmaktadr.`:`${ge?ge+" ylnda ":"Toplam "}${w.length} konu bulunmaktadr.`}if(_("ka")&&_("proje","project")){let w=n;return ge&&(w=Ve(w,ge)),_("bap")?`${ge?ge+"'den beri ":""}${we(w,"BAP")} BAP projesi bulunmaktadr.`:_("tbitak","tubitak")?`${ge?ge+"'den beri ":""}${we(w,"TBTAK")} TBTAK projesi bulunmaktadr.`:_("horizon")?`${ge?ge+"'den beri ":""}${we(w,"Horizon")} Horizon projesi bulunmaktadr.`:_("erasmus")?`${ge?ge+"'den beri ":""}${we(w,"Erasmus+")} Erasmus+ projesi bulunmaktadr.`:_("digital")?`${ge?ge+"'den beri ":""}${we(w,"DIGITAL")} DIGITAL projesi bulunmaktadr.`:_("uluslararas")?`${ge?ge+"'den beri ":""}${w.filter(R=>(R.partnerCountries||[]).length>0).length} uluslararas ortakl olan proje bulunmaktadr.`:_("aktif")?`${ge?ge+" ylnda ":""}${Ne(w,"active")} aktif proje bulunmaktadr.`:_("tamamla")?`${ge?ge+" ylnda ":""}${Ne(w,"completed")} tamamlanan proje bulunmaktadr.`:`${ge?ge+"'den beri ":"Toplam "}${w.length} proje bulunmaktadr.`}if(_("proje tr","proje dalm","tr dalm")){const w={};return n.forEach(K=>{const q=K.type||"Belirtilmemi";w[q]=(w[q]||0)+1}),`Proje Tr Dalm:
${Object.entries(w).sort((K,q)=>q[1]-K[1]).map(([K,q])=>` ${K}: ${q} proje`).join(`
`)}`}if(_("yayn","indeks","sci","ssci","scopus","ahci","esci","tr dizin","tr-dizin","publikasyon","yayn indeks")){const w=e.filter(S=>{var $,J;return S.status==="completed"&&((J=($=S.publishingIndex)==null?void 0:$.types)==null?void 0:J.length)>0});if(w.length===0)return"Henz yayn indeksi atanm tamamlanm konu bulunmamaktadr.";const R={};w.forEach(S=>(S.publishingIndex.types||[]).forEach($=>{R[$]=(R[$]||0)+1}));const K=Object.entries(R).sort((S,$)=>$[1]-S[1]).map(([S,$])=>{const J=(Sn||[]).find(xe=>xe.id===S);return` ${J?J.label:S}: ${$} yayn (${J?J.coefficient:"?"} puan)`}).join(`
`),q={};w.forEach(S=>(S.researchers||[]).forEach($=>{q[$.researcherId]=(q[$.researcherId]||0)+1}));const j=Object.entries(q).sort((S,$)=>$[1]-S[1]).slice(0,3).map(([S,$])=>{const J=i.find(xe=>xe.id===S);return J?`${J.title?J.title+" ":""}${J.name}: ${$} yayn`:null}).filter(Boolean).join(`
`);return` Yayn ndeks Dalm:
${K}

Toplam: ${w.length} yaynl konu

 En ok yayna sahip aratrmaclar:
${j||"Veri yok"}`}if(_("proje tr detay","proje trleri detay","tr detay")){const w={};return n.forEach(K=>{const q=K.type||"Belirtilmemi";w[q]||(w[q]={total:0,active:0,completed:0,proposed:0,budget:0}),w[q].total++,K.status==="active"&&w[q].active++,K.status==="completed"&&w[q].completed++,(K.status==="proposed"||K.status==="planning")&&w[q].proposed++,w[q].budget+=parseFloat(K.budget)||0}),` Proje Tr Detayl Dalm:
${Object.entries(w).sort((K,q)=>q[1].total-K[1].total).map(([K,q])=>` ${K}: ${q.total} proje (${q.active} aktif, ${q.completed} tamamlanan)  ${q.budget.toLocaleString("tr-TR")}`).join(`
`)}`}if(_("bap")){let w=n.filter(q=>(q.type||"").toLowerCase()==="bap");ge&&(w=Ve(w,ge));const R=w.filter(q=>q.status==="active").length,K=w.filter(q=>q.status==="completed").length;return`${ge?ge+"'den beri ":"Toplam "}${w.length} BAP projesi var (${R} aktif, ${K} tamamlanan).`}if(_("tbitak","tubitak")){let w=n.filter(R=>(R.type||"").toLowerCase().includes("tbitak"));return ge&&(w=Ve(w,ge)),`${ge?ge+"'den beri ":"Toplam "}${w.length} TBTAK projesi bulunmaktadr.`}if(_("en ok","en fazla")&&_("konu","topic")){const w=i.map(R=>({name:(R.title?R.title+" ":"")+R.name,count:e.filter(K=>(K.researchers||[]).some(q=>q.researcherId===R.id)).length}));return`En ok konuya sahip aratrmaclar:
${H(w,"konu",5)}`}if(_("en ok","en fazla")&&_("proje")){const w=i.map(R=>{const K=e.filter(j=>(j.researchers||[]).some(S=>S.researcherId===R.id)),q=new Set(K.map(j=>j.id));return{name:(R.title?R.title+" ":"")+R.name,count:n.filter(j=>(j.topics||[]).some(S=>q.has(S))).length}});return`En ok projeye sahip aratrmaclar:
${H(w,"proje",5)}`}if(_("en yksek","en byk")&&_("bte","butce")){const w=[...n].filter(K=>parseFloat(K.budget)>0).sort((K,q)=>parseFloat(q.budget)-parseFloat(K.budget));return w.length===0?"Btesi belirlenmi proje bulunamad.":`En yksek bteli projeler:
${w.slice(0,3).map((K,q)=>`${q+1}. ${K.title} (${parseFloat(K.budget).toLocaleString("tr-TR")})`).join(`
`)}`}if(_("bte","butce","toplam bte","mali","finansman")){let w=n;ge&&(w=Ve(w,ge));const R=w.reduce((j,S)=>j+(parseFloat(S.budget)||0),0),K=w.length>0?R/w.length:0,q=w.reduce((j,S)=>(parseFloat(S.budget)||0)>(parseFloat(j.budget)||0)?S:j,w[0]);return`${ge?ge+" yl ":""}Proje Bte zeti:
 Toplam: ${R.toLocaleString("tr-TR")}
 Ortalama: ${Math.round(K).toLocaleString("tr-TR")}
 Proje says: ${w.length}${q?`
 En yksek: `+q.title:""}`}if(_("unvan","nvan","akademik kadro","profesr","doent")){const w={};return i.forEach(K=>{const q=K.title&&K.title.trim()?K.title.trim():"Belirtilmemi";w[q]=(w[q]||0)+1}),`Unvan Dalm:
${Object.entries(w).sort((K,q)=>q[1]-K[1]).map(([K,q])=>` ${K}: ${q} kii`).join(`
`)}
Toplam: ${i.length} aratrmac`}if(_("kurum","birim","faklte","blm")){const w={};return i.forEach(K=>{const q=K.institution||"Belirtilmemi";w[q]=(w[q]||0)+1}),`Kurum Dalm:
${Object.entries(w).sort((K,q)=>q[1]-K[1]).map(([K,q])=>` ${K}: ${q} kii`).join(`
`)}`}if(_("af","akretim")){const w=i.filter(q=>q.isAofMember),R=i.filter(q=>!q.isAofMember),K=w.slice(0,5).map(q=>(q.title?q.title+" ":"")+q.name).join(", ");return`AF retim yesi: ${w.length} kii
Dier: ${R.length} kii

rnek AF yeleri: ${K}${w.length>5?" ve dierleri...":""}`}if(_("grev","task","yaplacak")){const w=[...e,...n].flatMap(j=>j.tasks||[]),R=w.filter(j=>j.status==="done").length,K=w.filter(j=>j.status==="todo").length,q=w.filter(j=>j.status==="in_progress").length;return`Grev zeti:
 Toplam: ${w.length} grev
 Tamamlanan: ${R}
 Devam eden: ${q}
 Bekleyen: ${K}
 Tamamlanma oran: %${w.length>0?Math.round(R/w.length*100):0}`}if(_("aktif"))return`Aktif durumda:
 ${Ne(e,"active")} konu
 ${Ne(n,"active")} proje`;if(_("tamamla","bitir","biten","tamamlanan"))return`Tamamlanan:
 ${Ne(e,"completed")} konu
 ${Ne(n,"completed")} proje`;if(_("nerilen","neri","bekleyen"))return`nerilen/Bekleyen:
 ${Ne(e,"proposed")} konu
 ${Ne(n,"proposed")+Ne(n,"planning")} proje`;if(_("baarsz","iptal","baarlamayan"))return`Baarsz/ptal:
 ${Ne(e,"failed")} konu
 ${Ne(n,"failed")} proje`;if(_("uluslararas","international","yabanc","lke","ortaklk")){const w=n.filter(K=>(K.partnerCountries||[]).length>0),R=new Set;return w.forEach(K=>(K.partnerCountries||[]).forEach(q=>R.add(q))),`Uluslararas Ortaklklar:
 ${w.length} uluslararas proje
 ${R.size} farkl lke${R.size>0?`
 lkeler: `+[...R].join(", "):""}`}if(_("rol","yrtc","sorumlu","lider")){const w={};return e.forEach(K=>(K.researchers||[]).forEach(q=>{q.role&&(w[q.role]=(w[q.role]||0)+1)})),`Konulardaki Rol Dalm:
${Object.entries(w).sort((K,q)=>q[1]-K[1]).map(([K,q])=>` ${K}: ${q} atama`).join(`
`)||"Rol atas bulunamad."}`}if(_("son eklenen","yeni","en son"))return`Son Eklenen eler:
${[...e,...n].filter(K=>K.createdAt).sort((K,q)=>(q.createdAt||"").localeCompare(K.createdAt||"")).slice(0,5).map((K,q)=>`${q+1}. ${K.title} (${K.createdAt||"?"})`).join(`
`)||"Tarih bilgisi olan e bulunamad."}`;if(_("karlatr","kyasla","fark"))return`Konu vs Proje Karlatrmas:

 Konular (${e.length}):
  Aktif: ${Ne(e,"active")} | Tamamlanan: ${Ne(e,"completed")} | nerilen: ${Ne(e,"proposed")}

 Projeler (${n.length}):
  Aktif: ${Ne(n,"active")} | Tamamlanan: ${Ne(n,"completed")} | nerilen: ${Ne(n,"proposed")+Ne(n,"planning")}`;if(_("verimlilik","performans","baar","oran")){const w=e.length>0?Math.round(Ne(e,"completed")/e.length*100):0,R=n.length>0?Math.round(Ne(n,"completed")/n.length*100):0,K=[...e,...n].flatMap(j=>j.tasks||[]),q=K.length>0?Math.round(K.filter(j=>j.status==="done").length/K.length*100):0;return`Verimlilik Metrikleri:
 Konu tamamlanma oran: %${w}
 Proje tamamlanma oran: %${R}
 Grev tamamlanma oran: %${q}
 Aratrmac bana ortalama konu: ${(e.length/Math.max(i.length,1)).toFixed(1)}`}if(_("yrtc deneyim","pi deneyim","proje yrt")){const w=i.filter(R=>R.hasPIExperience);return`Proje Yrtcl Deneyimi:
 Deneyimi olan: ${w.length} kii
 Deneyimi olmayan: ${i.length-w.length} kii`}const Y=i.find(w=>E.includes(w.name.toLowerCase().split(" ")[0])&&E.includes(w.name.toLowerCase().split(" ").pop()));if(Y){const w=e.filter(S=>(S.researchers||[]).some($=>$.researcherId===Y.id)),R=new Set(w.map(S=>S.id)),K=n.filter(S=>(S.topics||[]).some($=>R.has($))),q={};w.forEach(S=>{const $=(S.researchers||[]).find(J=>J.researcherId===Y.id);$!=null&&$.role&&(q[$.role]=(q[$.role]||0)+1)});const j=Object.entries(q).map(([S,$])=>`${S}: ${$}`).join(", ");return`${Y.title?Y.title+" ":""}${Y.name}:
 Kurum: ${Y.institution||"Belirtilmemi"}
 AF yesi: ${Y.isAofMember?"Evet":"Hayr"}
 PI Deneyimi: ${Y.hasPIExperience?"Var":"Yok"}
 ${w.length} konu, ${K.length} proje
 Aktif konu: ${w.filter(S=>S.status==="active").length}${j?`
 Roller: `+j:""}`}const ue=E.split(/\s+/).filter(w=>w.length>2);if(ue.length>0){const w=e.filter(j=>{const S=[j.title,j.description,j.category,...j.tags||[],j.projectType,j.projectTypeDetail,j.projectCall,j.targetJournal,j.requiredSkills,j.researchMethod].filter(Boolean).join(" ").toLowerCase();return ue.some($=>S.includes($))}),R=n.filter(j=>{const S=[j.title,j.description,j.type,...j.tags||[],...j.partnerCountries||[],j.piInstitution,j.piCountry].filter(Boolean).join(" ").toLowerCase();return ue.some($=>S.includes($))}),K=i.filter(j=>{const S=[j.name,j.title,j.institution,j.unit,...j.researchAreas||[],...j.languages||[],j.eduProgram,j.eduUniversity].filter(Boolean).join(" ").toLowerCase();return ue.some($=>S.includes($))}),q=[];if(w.length>0){const j=w.slice(0,5).map((S,$)=>{const J=S.status==="active"?"Aktif":S.status==="completed"?"Tamamland":S.status==="proposed"?"nerilen":S.status;return`  ${$+1}. ${S.title} [${J}]${S.category?" ("+S.category+")":""}`}).join(`
`);q.push(` Eleen Konular (${w.length}):
${j}${w.length>5?`
  ... ve `+(w.length-5)+" konu daha":""}`)}if(R.length>0){const j=R.slice(0,5).map((S,$)=>{const J=S.status==="active"?"Aktif":S.status==="completed"?"Tamamland":S.status==="proposed"?"nerilen":S.status;return`  ${$+1}. ${S.title} [${J}]${S.type?" - "+S.type:""}`}).join(`
`);q.push(` Eleen Projeler (${R.length}):
${j}${R.length>5?`
  ... ve `+(R.length-5)+" proje daha":""}`)}if(K.length>0){const j=K.slice(0,5).map((S,$)=>{const J=(S.researchAreas||[]).slice(0,3).join(", ");return`  ${$+1}. ${S.title?S.title+" ":""}${S.name}${J?" ("+J+")":""}`}).join(`
`);q.push(` Eleen Aratrmaclar (${K.length}):
${j}${K.length>5?`
  ... ve `+(K.length-5)+" kii daha":""}`)}if(q.length>0)return` "${k}" iin arama sonular:

${q.join(`

`)}`}return _("yardm","help","ne sor","neler sor","komut")?`Sorabileceiniz soru kategorileri:

 Genel: zet, durum, karlatrma
 Aratrmac: Ka kii, AF, unvan
 Konu: Ka konu, aktif/tamamlanan
 Proje: BAP/TBTAK, bte
 Yayn ndeksleri: SCI, SSCI, Scopus dalm
 Proje Trleri: Tr detaylar, bte dalm
 Uluslararas: Ortaklklar, lkeler
 Performans: Verimlilik, grevler
 Arama: Herhangi bir kelime yazn!

rnein: "yapay zeka", "SCI", "BAP", "Almanya" gibi kelimelerle arayabilirsiniz.`:`Tam eleme bulunamad. unlar deneyebilirsiniz:
 statistik sorgular: "Genel zet", "Bte", "Unvan dalm"
 Anahtar kelime aramas: "yapay zeka", "XR", "Horizon"
 Kii aramas: Aratrmac ad yazn

"Yardm" yazarak tm kategorileri grebilirsiniz.`},[i,e,n]),ne=B.useCallback(k=>{const _=k.toLowerCase().trim().split(/\s+/).filter(Y=>Y.length>2),P=e.filter(Y=>{const ue=[Y.title,Y.description,...Y.tags||[],Y.category,Y.projectType].filter(Boolean).join(" ").toLowerCase();return _.some(w=>ue.includes(w))}).map(Y=>{const ue={active:"Aktif",completed:"Tamamland",proposed:"nerilen",planning:"Planlama",failed:"Baarsz"};return{title:Y.title,status:ue[Y.status]||Y.status,category:Y.category||"",id:Y.id}}),ge=i.filter(Y=>{const ue=(Y.researchAreas||[]).join(" ").toLowerCase(),w=[Y.name,Y.institution,Y.unit,Y.eduProgram].filter(Boolean).join(" ").toLowerCase();return _.some(R=>ue.includes(R)||w.includes(R))}),Ve={};P.forEach(Y=>{const ue=e.find(w=>w.id===Y.id);ue&&(ue.researchers||[]).forEach(w=>{Ve[w.researcherId]||(Ve[w.researcherId]={roles:{},count:0}),Ve[w.researcherId].count++;const R=w.role||"ye";Ve[w.researcherId].roles[R]=(Ve[w.researcherId].roles[R]||0)+1})});const Ne=Object.entries(Ve).sort((Y,ue)=>ue[1].count-Y[1].count).map(([Y,ue])=>({...i.find(w=>w.id===Y),_topicCount:ue.count,_roles:ue.roles})).filter(Y=>Y.id&&!ge.find(ue=>ue.id===Y.id));let we=` "${k}" iin analiz sonular:
`;P.length>0?(we+=`
 Benzer/lgili Konular (${P.length}):
`,P.slice(0,6).forEach((Y,ue)=>{const w=Y.status==="Aktif"?"":Y.status==="Tamamland"?"":Y.status==="nerilen"?"":"";we+=`  ${w} ${Y.title}
     [${Y.status}]${Y.category?"  "+Y.category:""}
`}),P.length>6&&(we+=`  ... ve ${P.length-6} konu daha
`)):we+=`
 Bu alanda henz kaytl konu yok  yeni bir alan olabilir!
`,ge.length>0||Ne.length>0?(we+=`
 nerilen Aratrmaclar:
`,ge.length>0&&(we+=`
   Aratrma alan eleenler:
`,ge.slice(0,5).forEach((Y,ue)=>{const w=(Y.researchAreas||[]).slice(0,3).join(", ");we+=`  ${ue+1}. ${Y.title?Y.title+" ":""}${Y.name}
     ${w}
`})),Ne.length>0&&(we+=`
   Benzer konularda grev alanlar:
`,Ne.slice(0,5).forEach((Y,ue)=>{const w=Object.entries(Y._roles||{}).map(([R,K])=>R==="lead"?"Lider":R==="responsible"?"Sorumlu":R==="member"?"ye":R).join(", ");we+=`  ${ue+1}. ${Y.title?Y.title+" ":""}${Y.name} (${Y._topicCount} konu  ${w})
`}))):we+=`
 Bu alanda eleen aratrmac bulunamad.
`;const H=P.filter(Y=>Y.status==="Aktif"||Y.status==="nerilen").length;return we+=`
 neri: `,H>3?we+=`Bu alanda ${H} aktif/nerilen konu var. Mevcut bir konuya dahil olmay dnebilirsiniz.`:P.length>0?we+="Mevcut konularla sinerji oluturulabilir. Yeni bir konu olarak eklemek ister misiniz?":we+="Yeni ve zgn bir alan! Konu olarak eklenmesi nerilir.",we},[i,e]),Z=B.useCallback(k=>{const _=k.toLowerCase().trim().split(/\s+/).filter(R=>R.length>2),P=i.map(R=>{const K=(R.researchAreas||[]).join(" ").toLowerCase(),q=_.reduce((j,S)=>j+(K.includes(S)?2:0),0);return{...R,_score:q,_matchType:"area"}}).filter(R=>R._score>0).sort((R,K)=>K._score-R._score),ge=e.filter(R=>{const K=[R.title,R.description,...R.tags||[],R.category,R.projectType].filter(Boolean).join(" ").toLowerCase();return _.some(q=>K.includes(q))}),Ve={};ge.forEach(R=>{(R.researchers||[]).forEach(K=>{Ve[K.researcherId]||(Ve[K.researcherId]={topics:[],roles:{}}),Ve[K.researcherId].topics.push(R.title);const q=K.role||"member";Ve[K.researcherId].roles[q]=(Ve[K.researcherId].roles[q]||0)+1})});const Ne=Object.entries(Ve).map(([R,K])=>({...i.find(q=>q.id===R),_topics:K.topics,_roles:K.roles,_topicCount:K.topics.length})).filter(R=>R.id).sort((R,K)=>K._topicCount-R._topicCount),we=n.filter(R=>{const K=[R.name,R.type,R.status,R.description,R.fundingSource].filter(Boolean).join(" ").toLowerCase();return _.some(q=>K.includes(q))}),H={};we.forEach(R=>{(R.researchers||[]).forEach(K=>{H[K.researcherId]||(H[K.researcherId]={projects:[],roles:{}}),H[K.researcherId].projects.push(R.name);const q=K.role||"member";H[K.researcherId].roles[q]=(H[K.researcherId].roles[q]||0)+1})});const Y=Object.entries(H).map(([R,K])=>({...i.find(q=>q.id===R),_projects:K.projects,_projRoles:K.roles,_projCount:K.projects.length})).filter(R=>R.id).sort((R,K)=>K._projCount-R._projCount);let ue=` "${k}" iin uygun aratrmac analizi:
`;const w=new Set;if(P.length>0&&(ue+=`
 Aratrma Alan Eleenler (${P.length}):
`,P.slice(0,5).forEach((R,K)=>{const q=(R.researchAreas||[]).slice(0,4).join(", ");ue+=`  ${K+1}. ${R.title?R.title+" ":""}${R.name}
      ${q}
`,R.institution&&(ue+=`      ${R.institution}
`),w.add(R.id)})),Ne.length>0&&(ue+=`
 lgili Konularda Grev Alanlar (${Ne.length}):
`,Ne.filter(R=>!w.has(R.id)).slice(0,5).forEach((R,K)=>{const q=Object.entries(R._roles||{}).map(([j,S])=>j==="lead"?"Lider("+S+")":j==="responsible"?"Sorumlu("+S+")":j==="member"?"ye("+S+")":j+"("+S+")").join(", ");ue+=`  ${K+1}. ${R.title?R.title+" ":""}${R.name}  ${R._topicCount} konu  ${q}
`,w.add(R.id)})),Y.length>0&&(ue+=`
 lgili Projelerde Yer Alanlar (${Y.length}):
`,Y.filter(R=>!w.has(R.id)).slice(0,4).forEach((R,K)=>{const q=Object.entries(R._projRoles||{}).map(([j,S])=>j==="lead"?"Yrtc("+S+")":j==="responsible"?"Sorumlu("+S+")":j==="member"?"ye("+S+")":j+"("+S+")").join(", ");ue+=`  ${K+1}. ${R.title?R.title+" ":""}${R.name}  ${R._projCount} proje  ${q}
`,w.add(R.id)})),w.size===0)ue+=`
 Bu anahtar kelimelerle eleen aratrmac bulunamad.
`,ue+=" Daha genel terimler deneyin veya aratrma alanlarn kontrol edin.";else{const R=w.size;if(ue+=`
 Toplam ${R} benzersiz aratrmac bulundu.`,P.length>0&&Ne.length>0){const K=P.filter(q=>Ne.find(j=>j.id===q.id));K.length>0&&(ue+=`
 ${K.length} aratrmac hem alan hem konu elemesi gsteriyor  gl adaylar!`)}}return ue},[i,e,n]),ee=B.useCallback(k=>{const E=k.toLowerCase();return E.includes("zet")||E.includes("genel")||E.includes("dashboard")?["Bte detaylar","Unvan dalm","Aktif projeler"]:E.includes("bap")?["TBTAK projeleri","Toplam bte","Proje tr dalm"]:E.includes("tbitak")||E.includes("tubitak")?["BAP projeleri","Horizon projeleri","Bte karlatrmas"]:E.includes("horizon")||E.includes("erasmus")||E.includes("uluslararas")?["Ortaklk lkeleri","Proje tr dalm","Toplam bte"]:E.includes("bte")||E.includes("butce")||E.includes("mali")?["En yksek bteli proje","Proje tr dalm","Verimlilik metrikleri"]:E.includes("unvan")||E.includes("nvan")||E.includes("profesr")||E.includes("doent")?["Kurum dalm","AF yeleri","Aratrmac says"]:E.includes("kurum")||E.includes("birim")||E.includes("faklte")?["Unvan dalm","AF yeleri","Genel zet"]:E.includes("aratrmac")||E.includes("kii")||E.includes("akademisyen")?["Unvan dalm","En ok konusu olan","AF yeleri"]:E.includes("konu")&&!E.includes("proje")?["Aktif konular","En ok konusu olan","Konu-proje karlatrmas"]:E.includes("proje")&&!E.includes("bap")&&!E.includes("tbitak")?["BAP projeleri","Bte detaylar","Uluslararas projeler"]:E.includes("aktif")?["Tamamlanan projeler","nerilen projeler","Verimlilik metrikleri"]:E.includes("tamamla")||E.includes("bitir")||E.includes("biten")?["Aktif durumda olanlar","Verimlilik metrikleri","Grev zeti"]:E.includes("grev")||E.includes("task")?["Verimlilik metrikleri","Aktif projeler","Genel zet"]:E.includes("verimlilik")||E.includes("performans")||E.includes("baar")?["Grev zeti","Tamamlanan projeler","Karlatrma"]:E.includes("af")||E.includes("akretim")?["Unvan dalm","Kurum dalm","Genel zet"]:E.includes("rol")||E.includes("yrtc")?["PI deneyimi olanlar","En ok projesi olan","Unvan dalm"]:E.includes("son eklenen")||E.includes("yeni")?["Genel zet","Aktif projeler","Grev zeti"]:E.includes("karlatr")||E.includes("kyasla")?["Verimlilik metrikleri","Bte detaylar","Grev zeti"]:E.includes("yapay zeka")||E.includes("ai")||E.includes("llm")?["uzaktan eitim","XR konular","Proje tr dalm"]:E.includes("xr")||E.includes("vr")||E.includes("ar ")?["yapay zeka","STEM konular","Erasmus+ projeleri"]:E.includes("uzaktan")||E.includes("eitim")||E.includes("retim")?["yapay zeka","e-Kamps","Aratrmac says"]:E.includes("horizon")||E.includes("erasmus")?["Uluslararas projeler","BAP projeleri","Toplam bte"]:E.includes("yayn")||E.includes("indeks")||E.includes("sci")||E.includes("ssci")||E.includes("scopus")||E.includes("publikasyon")?["Yayn indeks dalm","Proje tr dalm","Verimlilik metrikleri"]:E.includes("proje tr detay")||E.includes("proje trleri")?["BAP projeleri","TBTAK projeleri","Yayn indeks dalm"]:["Genel zet","yapay zeka","Yardm"]},[]),Q=B.useCallback(()=>{if(!b.trim())return;const k=b.trim();T(""),v(E=>[...E,{role:"user",text:k}]),M?(V(!1),setTimeout(()=>{const E=ne(k);v(_=>[..._,{role:"bot",text:E,suggestions:["Genel zet","Baka konu ner","Uygun aratrmac ner","Yardm"]}])},400)):X?(oe(!1),setTimeout(()=>{const E=Z(k);v(_=>[..._,{role:"bot",text:E,suggestions:["Genel zet","Baka aratrmac ara","Yeni konu ner","Yardm"]}])},400)):setTimeout(()=>{const E=z(k),_=ee(k);v(P=>[...P,{role:"bot",text:E,suggestions:_}])},300)},[b,z,M,X,ne,Z,ee]);B.useEffect(()=>{F.current&&(F.current.scrollTop=F.current.scrollHeight)},[p]);const ye=B.useMemo(()=>{const k={},E=[{pattern:/yapay\s*zeka|\bai\b|\byz\b|llm|byk dil model|agentic ai|retken yapay/i,label:"Yapay Zeka / AI"},{pattern:/\bxr\b|\bvr\b|\bar\b|sanal gereklik|artrlm gereklik/i,label:"XR / VR / AR"},{pattern:/uzaktan\s*(eitim|retim|ren)|ak.*ret|akretim/i,label:"Uzaktan Eitim"},{pattern:/e.kamps|e-kamps|lms|renme analitik/i,label:"e-Kamps / LMS"},{pattern:/mikro.yeterli|mikro.kredi/i,label:"Mikro-yeterlik"},{pattern:/oyunlatr|gamif/i,label:"Oyunlatrma"},{pattern:/stem/i,label:"STEM"},{pattern:/retim tasarm/i,label:"retim Tasarm"},{pattern:/veri\s*(analiz|grsel)|data/i,label:"Veri Analizi"},{pattern:/destek\s*(hizmet|sistem)|dropout|uyar sistemi/i,label:"renci Destek"},{pattern:/erasmus|horizon|avrupa birlii|\bab\b|jean monnet/i,label:"AB / Uluslararas"},{pattern:/infografik|video|podcast|medya/i,label:"Medya / erik"},{pattern:/kalite|akreditasyon/i,label:"Kalite"},{pattern:/tercih|rehberlik|kayt/i,label:"renci Rehberlik"}],_=[...e.map(H=>[H.title,H.description,...H.tags||[]].filter(Boolean).join(" ")),...n.map(H=>[H.title,H.description,...H.tags||[]].filter(Boolean).join(" "))];E.forEach(H=>{const Y=_.filter(ue=>H.pattern.test(ue)).length;Y>0&&(k[H.label]=(k[H.label]||0)+Y)});const P={};i.forEach(H=>(H.researchAreas||[]).forEach(Y=>{P[Y]=(P[Y]||0)+1}));const ge=Object.entries(P).sort((H,Y)=>Y[1]-H[1]).slice(0,6).map(([H])=>H),Ve={};n.forEach(H=>(H.partnerCountries||[]).forEach(Y=>{Ve[Y]=(Ve[Y]||0)+1}));const Ne=Object.entries(Ve).sort((H,Y)=>Y[1]-H[1]).slice(0,4).map(([H])=>H);return{themes:Object.entries(k).sort((H,Y)=>Y[1]-H[1]).slice(0,8).map(([H])=>H),areas:ge,countries:Ne}},[i,e,n]),je=B.useMemo(()=>{const k=[{label:"zet",emoji:"",subs:["Genel zet","Durum dalm","Konu-proje karlatrmas"]},{label:"Aratrmaclar",emoji:"",subs:["Aratrmac says","Unvan dalm","AF yeleri","Kurum dalm"]},{label:"Konular",emoji:"",subs:["Ka konu var?","Aktif konular","En ok konusu olan"]},{label:"Projeler",emoji:"",subs:["Proje tr dalm","BAP projeleri","TBTAK projeleri","Uluslararas projeler","Toplam bte"]},{label:"Performans",emoji:"",subs:["Verimlilik metrikleri","Grev zeti","Rol dalm","PI deneyimi olanlar"]},{label:"Yayn ndeksleri",emoji:"",subs:["Yayn indeks dalm","SCI yaynlar","SSCI yaynlar","Scopus yaynlar"]},{label:"Proje Trleri",emoji:"",subs:["Proje tr dalm","Proje tr detaylar","BAP projeleri","TBTAK projeleri"]}];return ye.themes.length>0&&k.push({label:"Temalar",emoji:"",subs:ye.themes.slice(0,4)}),ye.areas.length>0&&k.push({label:"Aratrma Alanlar",emoji:"",subs:ye.areas.slice(0,4)}),ye.countries.length>0&&k.push({label:"lkeler",emoji:"",subs:ye.countries.slice(0,4)}),k},[ye]),O=["from-indigo-600 to-violet-500","from-violet-500 to-purple-500","from-purple-500 to-indigo-500","from-indigo-500 to-blue-500","from-blue-500 to-indigo-400","from-violet-500 to-blue-500","from-purple-500 to-violet-400","from-indigo-500 to-violet-400"],x=["from-indigo-50 to-violet-50 text-indigo-600 border-indigo-200 hover:from-indigo-100 hover:to-violet-100","from-violet-50 to-purple-50 text-violet-600 border-violet-200 hover:from-violet-100 hover:to-purple-100","from-purple-50 to-indigo-50 text-purple-600 border-purple-200 hover:from-purple-100 hover:to-indigo-100","from-indigo-50 to-blue-50 text-indigo-600 border-indigo-200 hover:from-indigo-100 hover:to-blue-100","from-blue-50 to-indigo-50 text-blue-600 border-blue-200 hover:from-blue-100 hover:to-indigo-100","from-violet-50 to-blue-50 text-violet-600 border-violet-200 hover:from-violet-100 hover:to-blue-100","from-purple-50 to-violet-50 text-purple-600 border-purple-200 hover:from-purple-100 hover:to-violet-100","from-indigo-50 to-violet-50 text-indigo-600 border-indigo-200 hover:from-indigo-100 hover:to-violet-100"],A=B.useCallback(k=>{v(E=>[...E,{role:"user",text:k}]),setTimeout(()=>{const E=z(k),_=ee(k);v(P=>[...P,{role:"bot",text:E,suggestions:_}])},300)},[z,ee]);return a?t.jsxs("div",{className:d?"fixed inset-4 z-40 bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col overflow-hidden":"fixed bottom-5 right-5 z-40 w-[340px] bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col overflow-hidden",style:d?{}:{height:"min(580px, calc(100vh - 40px))"},children:[t.jsxs("div",{className:"bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 p-3.5 flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx("div",{className:`bg-white/20 rounded-xl flex items-center justify-center ${d?"w-11 h-11":"w-9 h-9"}`,children:t.jsx(Hf,{size:d?24:20,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:`font-bold text-white ${d?"text-base":"text-sm"}`,children:"Ar-Ge Asistan"}),t.jsx("p",{className:`text-white/70 ${d?"text-xs":"text-[10px]"}`,children:"Akll veri sorgu asistan"})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[p.length>1&&t.jsx("button",{onClick:()=>v([{role:"bot",text:"Merhaba! Ben Ar-Ge Asistan. Aadaki kategorilerden birini seerek balayabilirsiniz.",isWelcome:!0}]),className:"p-1.5 rounded-lg hover:bg-white/20 text-white/60 hover:text-white transition-colors",title:"Grmeyi temizle",children:t.jsx(Qn,{size:14})}),t.jsx("button",{onClick:()=>h(!d),className:"p-1.5 rounded-lg hover:bg-white/20 text-white/60 hover:text-white transition-colors",title:d?"Klt":"Tam Ekran",children:d?t.jsx(qc,{size:14}):t.jsx(Yc,{size:14})}),t.jsx("button",{onClick:()=>{o(!1),h(!1)},className:"p-1.5 rounded-lg hover:bg-white/20 text-white/80 hover:text-white transition-colors",children:t.jsx(Rr,{size:16})})]})]}),t.jsx("div",{ref:F,className:`flex-1 overflow-y-auto space-y-3 ${d?"p-5":"p-3"}`,children:p.map((k,E)=>t.jsxs("div",{children:[t.jsx("div",{className:`flex ${k.role==="user"?"justify-end":"justify-start"}`,children:t.jsx("div",{className:`${d?"max-w-[70%]":"max-w-[85%]"} rounded-2xl ${d?"px-5 py-3.5":"px-3.5 py-2.5"} ${k.role==="user"?"bg-indigo-500 text-white rounded-br-md":"bg-slate-100 text-slate-700 rounded-bl-md"}`,children:t.jsx("p",{className:`leading-relaxed whitespace-pre-line ${d?"text-sm":"text-xs"}`,children:k.text})})}),k.isWelcome&&E===p.length-1&&t.jsxs("div",{className:"mt-3 space-y-2 bg-gradient-to-b from-slate-50/50 to-white rounded-xl p-2 -mx-1",children:[t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>{V(!0),v(_=>[..._,{role:"bot",text:` Yeni bir aratrma konusu mu dnyorsunuz? Harika!

Ltfen almak istediiniz konuyu veya anahtar kelimeleri yazn.

rnein: "yapay zeka ve uzaktan eitim", "XR tabanl retim", "renme analitikleri" gibi...`}])},className:`w-full text-left font-semibold bg-gradient-to-r from-violet-600 to-indigo-500 text-white rounded-xl hover:from-violet-700 hover:to-indigo-600 transition-all flex items-center gap-2 shadow-lg shadow-indigo-200/50 hover:shadow-xl hover:shadow-indigo-300/50 hover:scale-[1.02] ${d?"px-4 py-3.5 text-sm":"px-3 py-2.5 text-[11px]"}`,children:[t.jsx("span",{children:""})," Yeni Aratrma Konusu ner"]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1 ml-2",children:["Yapay Zeka & Eitim","XR / AR","renme Analitikleri"].map((_,P)=>t.jsx("button",{onClick:()=>{V(!0),v(ge=>[...ge,{role:"bot",text:` "${_}" alannda yeni bir konu mu dnyorsunuz? Harika!

Bu alandaki spesifik aratrma fikrinizi veya anahtar kelimeleri yazn...`}])},className:`bg-gradient-to-r from-violet-50 to-indigo-50 text-violet-600 border-violet-200 hover:from-violet-100 hover:to-indigo-100 rounded-full transition-all border hover:shadow-sm ${d?"px-3 py-1 text-xs":"px-2 py-0.5 text-[9px]"}`,children:_},P))})]}),t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>{oe(!0),v(_=>[..._,{role:"bot",text:` Belirli bir alan veya konu iin uygun aratrmac m aryorsunuz?

Ltfen aratrma alan, konu veya anahtar kelimeleri yazn.

rnein: "yapay zeka", "uzaktan eitim", "veri analitii" gibi...`}])},className:`w-full text-left font-semibold bg-gradient-to-r from-violet-600 to-indigo-500 text-white rounded-xl hover:from-violet-700 hover:to-indigo-600 transition-all flex items-center gap-2 shadow-lg shadow-indigo-200/50 hover:shadow-xl hover:shadow-indigo-300/50 hover:scale-[1.02] ${d?"px-4 py-3.5 text-sm":"px-3 py-2.5 text-[11px]"}`,children:[t.jsx("span",{children:""})," Uygun Aratrmac ner"]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1 ml-2",children:["Proje Yrtcs","Veri Analisti","Alan Uzman"].map((_,P)=>t.jsx("button",{onClick:()=>{oe(!0),v(ge=>[...ge,{role:"bot",text:` "${_}" rolne uygun aratrmac m aryorsunuz?

Bu role uygun spesifik alan veya anahtar kelimeleri yazn...`}])},className:`bg-gradient-to-r from-violet-50 to-indigo-50 text-violet-600 border-violet-200 hover:from-violet-100 hover:to-indigo-100 rounded-full transition-all border hover:shadow-sm ${d?"px-3 py-1 text-xs":"px-2 py-0.5 text-[9px]"}`,children:_},P))})]}),je.map((_,P)=>t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>_.subs.length>0&&A(_.subs[0]),className:`w-full text-left font-semibold bg-gradient-to-r ${O[P%O.length]} text-white rounded-xl hover:brightness-110 transition-all flex items-center gap-2 shadow-md shadow-indigo-100/40 hover:shadow-lg hover:scale-[1.01] ${d?"px-4 py-3 text-sm":"px-3 py-2 text-[11px]"}`,children:[t.jsx("span",{children:_.emoji})," ",_.label," ",t.jsx("span",{className:"ml-auto text-[9px] text-white/60",children:_.subs.length})]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1 ml-2",children:_.subs.map((ge,Ve)=>t.jsx("button",{onClick:()=>A(ge),className:`bg-gradient-to-r ${x[P%x.length]} rounded-full transition-all border hover:shadow-sm ${d?"px-3 py-1 text-xs":"px-2 py-0.5 text-[9px]"}`,children:ge},Ve))})]},P)),"              "]}),k.role==="bot"&&!k.isWelcome&&k.suggestions&&E===p.length-1&&t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2 ml-1",children:k.suggestions.map((_,P)=>t.jsx("button",{onClick:()=>{_==="Baka konu ner"||_==="Yeni konu ner"?(V(!0),v(ge=>[...ge,{role:"user",text:_},{role:"bot",text:"Baka bir konu iin anahtar kelimeleri yazn..."}])):_==="Baka aratrmac ara"||_==="Uygun aratrmac ner"?(oe(!0),v(ge=>[...ge,{role:"user",text:_},{role:"bot",text:"Aratrmac aramak iin anahtar kelimeleri yazn..."}])):(v(ge=>[...ge,{role:"user",text:_}]),setTimeout(()=>{const ge=z(_),Ve=ee(_);v(Ne=>[...Ne,{role:"bot",text:ge,suggestions:Ve}])},300))},className:`bg-gradient-to-r from-violet-50 to-indigo-50 text-indigo-600 rounded-full hover:from-violet-100 hover:to-indigo-100 transition-all border border-indigo-200/60 cursor-pointer hover:shadow-sm ${d?"px-3.5 py-1.5 text-xs":"px-2.5 py-1 text-[10px]"}`,children:_},P))})]},E))}),t.jsx("div",{className:`border-t border-slate-100 flex-shrink-0 ${d?"p-4":"p-3"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{value:b,onChange:k=>T(k.target.value),onKeyDown:k=>{k.key==="Enter"&&Q()},placeholder:M?"Konu veya anahtar kelime yazn...":X?"Aratrma alan veya konu yazn...":"Bir soru sorun...",className:`flex-1 border border-slate-200 rounded-xl bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 outline-none transition-all ${d?"text-base px-4 py-3":"text-sm px-3.5 py-2.5"}`}),t.jsx("button",{onClick:Q,className:`bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors flex-shrink-0 disabled:opacity-40 ${d?"p-3":"p-2.5"}`,disabled:!b.trim(),children:t.jsx(Vv,{size:d?20:16})})]})})]}):t.jsxs("div",{className:"fixed bottom-5 right-5 z-40 flex items-end gap-3",children:[t.jsxs("div",{onClick:()=>o(!0),className:"relative bg-gradient-to-br from-indigo-50 via-violet-50 to-purple-50 rounded-2xl shadow-lg shadow-indigo-100/50 border border-indigo-200/60 px-4 py-3 max-w-[220px] cursor-pointer hover:shadow-xl hover:border-indigo-300 transition-all",style:{animation:"fadeIn 0.6s ease-out"},children:[t.jsx("style",{children:"@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"}),t.jsx("p",{className:"text-xs text-indigo-700 font-medium leading-relaxed",children:"Merhaba, ben Ar-Ge Asistan! Nasl yardmc olabilirim?"}),t.jsx("div",{className:"absolute bottom-3 -right-2 w-3 h-3 bg-violet-50 border-r border-b border-indigo-200 rotate-[-45deg]"})]}),t.jsxs("button",{onClick:()=>o(!0),className:"w-14 h-14 bg-gradient-to-br from-violet-600 via-purple-500 to-indigo-500 text-white rounded-full shadow-lg shadow-indigo-200/50 hover:shadow-xl hover:shadow-indigo-300/50 hover:scale-105 transition-all flex items-center justify-center flex-shrink-0",title:"Ar-Ge Asistan",children:[t.jsx(Hf,{size:24}),t.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-emerald-400 rounded-full border-2 border-white animate-pulse"})]})]})};function nw({role:i,user:e,onLogout:n}){const a=i==="master",o=i==="admin"||a,d=i==="editor",h=o||d,[p,v]=B.useState(!1),b=B.useRef(null),T=B.useRef(Date.now()+"_"+Math.random().toString(36).slice(2)),M=B.useMemo(()=>[{bg:"bg-blue-500",ring:"ring-blue-400",text:"text-blue-600",light:"bg-blue-50",border:"border-blue-400"},{bg:"bg-emerald-500",ring:"ring-emerald-400",text:"text-emerald-600",light:"bg-emerald-50",border:"border-emerald-400"},{bg:"bg-orange-500",ring:"ring-orange-400",text:"text-orange-600",light:"bg-orange-50",border:"border-orange-400"},{bg:"bg-pink-500",ring:"ring-pink-400",text:"text-pink-600",light:"bg-pink-50",border:"border-pink-400"},{bg:"bg-cyan-500",ring:"ring-cyan-400",text:"text-cyan-600",light:"bg-cyan-50",border:"border-cyan-400"},{bg:"bg-amber-500",ring:"ring-amber-400",text:"text-amber-600",light:"bg-amber-50",border:"border-amber-400"}],[]),[V,X]=B.useState({});B.useRef(null);const oe=B.useRef({section:null,editingId:null,editingType:null}),F=B.useCallback((D,G,ae)=>{oe.current={section:D,editingId:G,editingType:ae};const de={};de[T.current]={username:(e==null?void 0:e.username)||"unknown",displayName:(e==null?void 0:e.displayName)||"Kullanc",role:i,section:D||null,editingId:G||null,editingType:ae||null,lastSeen:Date.now()},lr(Mt(Vt,"arge","_presence"),de,{merge:!0}).catch(Se=>console.error("[PRESENCE] Gncelleme hatas:",Se))},[e,i]),z=B.useRef(!1),[ne,Z]=B.useState("connecting"),ee=B.useRef({}),Q=B.useCallback((D,G)=>{if(!z.current){console.log("[SYNC] firestoreReady=false, yazma atland:",D);return}const ae=JSON.stringify(G);ee.current[D]!==ae&&(ee.current[D]=ae,console.log("[SYNC] Firestore'a yazlyor:",D),Gt("saving"),Zs(lr(Mt(Vt,"arge",D),{items:G,updatedAt:Date.now()}),8e3,"setDoc:"+D).then(()=>{console.log("[SYNC] Yazma baarl:",D),Fn(new Date),Gt("saved"),setTimeout(()=>Gt("idle"),2e3)}).catch(de=>{console.error("[SYNC] YAZMA HATASI:",D,de.message),Gt("idle"),ht({type:"error",message:"Kayt hatas: "+de.message})}))},[]),ye=B.useCallback((D,G)=>{if(!z.current){console.log("[SYNC] firestoreReady=false, config yazma atland:",D);return}const ae=JSON.stringify(G);ee.current[D]!==ae&&(ee.current[D]=ae,console.log("[SYNC] Config yazlyor:",D),Gt("saving"),Zs(lr(Mt(Vt,"arge",D),{data:G,updatedAt:Date.now()}),8e3,"setDoc:"+D).then(()=>{console.log("[SYNC] Config yazma baarl:",D),Fn(new Date),Gt("saved"),setTimeout(()=>Gt("idle"),2e3)}).catch(de=>{console.error("[SYNC] CONFIG YAZMA HATASI:",D,de.message),Gt("idle")}))},[]),[je,O]=B.useState(vh),[x,A]=B.useState(bh),[k,E]=B.useState(jh),[_,P]=B.useState(""),[ge,Ve]=B.useState(""),[Ne,we]=B.useState(""),[H,Y]=B.useState(""),[ue,w]=B.useState(""),[R,K]=B.useState(""),[q,j]=B.useState(""),[S,$]=B.useState(null),[J,xe]=B.useState(!1),[me,re]=B.useState(!1),[_e,ve]=B.useState(!1),[qe,Be]=B.useState(!1),[C,ie]=B.useState({unit:"",degree:"",status:"",hasPIExp:"",areaSearch:""}),[fe,Ke]=B.useState({projectType:"",category:"",researchMethod:"",hasProject:"",roleFilter:""}),[ze,be]=B.useState({type:"",fundingSource:"",budgetMin:"",budgetMax:""}),[Pe,Ue]=B.useState(null),[De,pe]=B.useState(null),[$e,Ee]=B.useState(null),[xt,_t]=B.useState(null),[Te,rt]=B.useState(null),[gt,ht]=B.useState(null),[tr,Ht]=B.useState(!1),[es,An]=B.useState(!1),[Ze,jt]=B.useState(!1),[Lt,qt]=B.useState(!1),[$r,Ds]=B.useState(!1),[On,li]=B.useState(!1),[gs,Rs]=B.useState(!1),[or,hn]=B.useState(Yh),[Ct,Jr]=B.useState(so),[rr,Br]=B.useState(ro),[Er,Zr]=B.useState(no),[nr,mn]=B.useState(to),[pn,en]=B.useState(lo),[tn,mr]=B.useState(io),[Sr,pr]=B.useState(ao),[ts,Ln]=B.useState(oo),[Cn,In]=B.useState(oa),[Fi,$i]=B.useState(!1),[zs,wt]=B.useState("idle"),[oi,Fn]=B.useState(null),[fn,Gt]=B.useState("idle"),[gn,Bi]=B.useState(null),[Ms,rn]=B.useState(!1);B.useEffect(()=>{if(!a)return;const D=Kc(Mt(Vt,"arge","_backup_meta"),G=>{if(G.exists()){const ae=G.data();ae.lastBackupAt&&Bi(new Date(ae.lastBackupAt))}},()=>{});return()=>D()},[a]);const Vs=B.useCallback(async D=>{try{const G={researchers:je,topics:x,projects:k,quickLinks:or,cfg_roles:Ct,cfg_statuses:rr,cfg_priorities:Er,cfg_ptypes:nr,cfg_categories:pn,cfg_degrees:tn,cfg_edustatus:Sr,cfg_indexTypes:ts,cfg_projectTypeCoeff:Cn},ae=Date.now(),Se="backup_"+new Date(ae).toISOString().slice(0,10)+"_"+ae;return await Zs(lr(Mt(Vt,"arge_backups",Se),{data:G,createdAt:ae,trigger:D,createdBy:(e==null?void 0:e.displayName)||"Bilinmeyen"}),15e3,"backup:"+Se),await lr(Mt(Vt,"arge","_backup_meta"),{lastBackupAt:ae,lastBackupId:Se,lastBackupBy:(e==null?void 0:e.displayName)||"Bilinmeyen",trigger:D}),Bi(new Date(ae)),console.log("[BACKUP]  Yedek kaydedildi:",Se),Se}catch(G){throw console.error("[BACKUP]  Yedekleme hatas:",G.message),G}},[je,x,k,or,Ct,rr,Er,nr,pn,tn,Sr,e]),vr=B.useCallback(async()=>{try{ht({type:"info",message:"Yedek hazrlanyor..."}),await Vs("manual");const D={_meta:{exportedAt:new Date().toISOString(),exportedBy:(e==null?void 0:e.displayName)||"Bilinmeyen",version:"1.0",projectId:"arge-dashboard"},researchers:je,topics:x,projects:k,quickLinks:or,cfg_roles:Ct,cfg_statuses:rr,cfg_priorities:Er,cfg_ptypes:nr,cfg_categories:pn,cfg_degrees:tn,cfg_edustatus:Sr},G=JSON.stringify(D,null,2),ae=new Blob([G],{type:"application/json"}),de=URL.createObjectURL(ae),Se=document.createElement("a");Se.href=de,Se.download="arge-backup-"+new Date().toISOString().slice(0,10)+".json",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),URL.revokeObjectURL(de),ht({type:"success",message:" Yedek indirildi ve Firestore'a da kaydedildi!"})}catch(D){ht({type:"error",message:"Yedekleme hatas: "+D.message})}},[Vs,je,x,k,or,Ct,rr,Er,nr,pn,tn,Sr,ts,Cn,e]),ci=B.useCallback(D=>{const G=new FileReader;G.onload=ae=>{try{const de=JSON.parse(ae.target.result);de.researchers&&O(de.researchers),de.topics&&A(de.topics),de.projects&&E(de.projects),de.quickLinks&&hn(de.quickLinks),de.cfg_roles&&Jr(de.cfg_roles),de.cfg_statuses&&Br(de.cfg_statuses),de.cfg_priorities&&Zr(de.cfg_priorities),de.cfg_ptypes&&mn(de.cfg_ptypes),de.cfg_categories&&en(de.cfg_categories),de.cfg_degrees&&mr(de.cfg_degrees),de.cfg_edustatus&&pr(de.cfg_edustatus),de.cfg_indexTypes&&Ln(de.cfg_indexTypes),de.cfg_projectTypeCoeff!==void 0&&In(de.cfg_projectTypeCoeff),ht({type:"success",message:" Veriler yedeten geri yklendi! Firestore'a kaydediliyor..."})}catch(de){ht({type:"error",message:"Geersiz yedek dosyas: "+de.message})}},G.readAsText(D)},[]),va=B.useCallback(async()=>{const D="_conn_test",G=Date.now();console.log("[TEST] Balant testi balyor..."),ht({type:"info",message:"Firestore balant testi yaplyor (8 saniye)..."});try{await Zs(lr(Mt(Vt,"arge",D),{v:G,by:(e==null?void 0:e.displayName)||"?"}),8e3,"test yazma"),console.log("[TEST] Yazma OK:",G);const ae=await Zs(yh(Mt(Vt,"arge",D)),8e3,"test okuma");ae.exists()&&ae.data().v===G?(console.log("[TEST]  Okuma OK  Firestore balants ALIIYOR"),ht({type:"success",message:" Firestore balants alyor!"}),Z("ready"),z.current=!0):(console.error("[TEST]  Okuma baarsz  yazlan deer okunamad"),ht({type:"error",message:" Firestore okuma baarsz!"}))}catch(ae){console.error("[TEST]  BAARISIZ:",ae.message),Z("error"),ae.message.includes("TIMEOUT")?ht({type:"error",message:" Firestore YANIT VERMYOR! Gvenlik kurallarn kontrol edin. (Firebase Console  Firestore  Rules)"}):ht({type:"error",message:" Firestore hatas: "+ae.message})}},[e]),Ui=B.useCallback(async()=>{wt("syncing");try{const D=[{id:"researchers",setter:O,isConfig:!1},{id:"topics",setter:A,isConfig:!1},{id:"projects",setter:E,isConfig:!1},{id:"quicklinks",setter:hn,isConfig:!1},{id:"cfg_roles",setter:Jr,isConfig:!0},{id:"cfg_statuses",setter:Br,isConfig:!0},{id:"cfg_priorities",setter:Zr,isConfig:!0},{id:"cfg_ptypes",setter:mn,isConfig:!0},{id:"cfg_categories",setter:en,isConfig:!0},{id:"cfg_degrees",setter:mr,isConfig:!0},{id:"cfg_edustatus",setter:pr,isConfig:!0}];for(const{id:G,setter:ae,isConfig:de}of D){const Se=await Zs(yh(Mt(Vt,"arge",G)),8e3,"getDoc:"+G);if(Se.exists()){const He=Se.data(),Fe=de?He.data:He.items;Fe!==void 0&&(ee.current[G]=JSON.stringify(Fe),ae(Fe))}}wt("done"),ht({type:"success",message:"Veriler senkronize edildi!"}),setTimeout(()=>wt("idle"),2e3)}catch(D){console.error("[SYNC] Senkronizasyon hatas:",D.message),wt("idle"),D.message.includes("TIMEOUT")?ht({type:"error",message:" Firestore yant vermiyor! Gvenlik kurallarn kontrol edin."}):ht({type:"error",message:"Senkronizasyon hatas: "+D.message})}},[]),Os=B.useCallback(async()=>{wt("syncing");try{await Zs(Promise.all([lr(Mt(Vt,"arge","researchers"),{items:je,updatedAt:Date.now()}),lr(Mt(Vt,"arge","topics"),{items:x,updatedAt:Date.now()}),lr(Mt(Vt,"arge","projects"),{items:k,updatedAt:Date.now()}),lr(Mt(Vt,"arge","quicklinks"),{items:or,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_roles"),{data:Ct,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_statuses"),{data:rr,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_priorities"),{data:Er,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_ptypes"),{data:nr,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_categories"),{data:pn,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_degrees"),{data:tn,updatedAt:Date.now()}),lr(Mt(Vt,"arge","cfg_edustatus"),{data:Sr,updatedAt:Date.now()})]),15e3,"forcePublish"),await Zs(lr(Mt(Vt,"arge","_force_reload"),{tabId:T.current,user:(e==null?void 0:e.displayName)||"Admin",timestamp:Date.now()}),8e3,"forceReload"),wt("done"),Fn(new Date),setTimeout(()=>wt("idle"),3e3),Vs("auto_publish").catch(()=>{})}catch(D){wt("idle"),ht({type:"error",message:"Yaynlama hatas: "+D.message})}},[je,x,k,or,Ct,rr,Er,nr,pn,tn,Sr,e,Vs]);b.current=Os,B.useEffect(()=>{const D=setInterval(async()=>{if(!z.current){console.log("[AUTO-SYNC] firestoreReady=false, atlanyor");return}try{const G=[{id:"researchers",setter:O,isConfig:!1},{id:"topics",setter:A,isConfig:!1},{id:"projects",setter:E,isConfig:!1},{id:"quicklinks",setter:hn,isConfig:!1},{id:"cfg_roles",setter:Jr,isConfig:!0},{id:"cfg_statuses",setter:Br,isConfig:!0},{id:"cfg_priorities",setter:Zr,isConfig:!0},{id:"cfg_ptypes",setter:mn,isConfig:!0},{id:"cfg_categories",setter:en,isConfig:!0},{id:"cfg_degrees",setter:mr,isConfig:!0},{id:"cfg_edustatus",setter:pr,isConfig:!0}];let ae=0;for(const{id:de,setter:Se,isConfig:He}of G){const Fe=await Zs(yh(Mt(Vt,"arge",de)),8e3,"autoSync:"+de);if(Fe.exists()){const Le=Fe.data(),it=He?Le.data:Le.items;if(it!==void 0){const nt=JSON.stringify(it);ee.current[de]!==nt&&(ee.current[de]=nt,ae++,Se(it))}}}ae>0&&console.log("[AUTO-SYNC] "+ae+" dokman gncellendi")}catch(G){console.error("[AUTO-SYNC] HATA:",G)}},5e3);return()=>clearInterval(D)},[]),B.useEffect(()=>{const D=setInterval(async()=>{if(z.current)try{b.current&&(Gt("saving"),await b.current(),Fn(new Date),Gt("saved"),setTimeout(()=>Gt("idle"),2e3))}catch(G){console.warn("Auto-save error:",G)}},3e5);return()=>clearInterval(D)},[]),B.useEffect(()=>{const D=[],G=new Set,ae=st=>{G.has(st)||(G.add(st),console.log("[SYNC] Doc hazr:",st,"("+G.size+"/13)"),G.size>=13&&(z.current=!0,Z("ready"),console.log("[SYNC]  Firestore HAZIR  tm dokmanlar yklendi")))},de=(st,mt,Wt,ir)=>{const Ft=Kc(Mt(Vt,"arge",st),as=>{if(as.exists()){const on=as.data(),Ur=ir?on.data:on.items;if(Ur!==void 0){const Bs=JSON.stringify(Ur);ee.current[st]!==Bs&&(ee.current[st]=Bs,mt(Ur),console.log("[SYNC] onSnapshot gncelleme:",st))}}else{console.log("[SYNC] Dokman yok, varsaylan yazlyor:",st);const on=ir?{data:Wt,updatedAt:Date.now()}:{items:Wt,updatedAt:Date.now()};ee.current[st]=JSON.stringify(Wt),lr(Mt(Vt,"arge",st),on).catch(()=>{})}ae(st)},as=>{console.error("[SYNC]  Dinleme HATASI:",st,as),Z("error"),ae(st)});D.push(Ft)},Se=setTimeout(()=>{z.current||(console.warn("[SYNC]  5s timeout  firestoreReady zorlanyor ("+G.size+"/13 hazr)"),z.current=!0,Z(G.size>0?"ready":"error"))},5e3);de("researchers",O,vh,!1),de("topics",A,bh,!1),de("projects",E,jh,!1),de("quicklinks",hn,Yh,!1),de("cfg_roles",Jr,so,!0),de("cfg_statuses",Br,ro,!0),de("cfg_priorities",Zr,no,!0),de("cfg_ptypes",mn,to,!0),de("cfg_categories",en,lo,!0),de("cfg_degrees",mr,io,!0),de("cfg_edustatus",pr,ao,!0),de("cfg_indexTypes",Ln,oo,!1),de("cfg_projectTypeCoeff",In,oa,!0);const He=Kc(Mt(Vt,"arge","_force_reload"),st=>{if(st.exists()){const mt=st.data();Date.now()-(mt.timestamp||0)<1e4&&mt.tabId!==T.current&&(v(!0),setTimeout(()=>window.location.reload(),2e3))}}),Fe={};Fe[T.current]={username:(e==null?void 0:e.username)||"unknown",displayName:(e==null?void 0:e.displayName)||"Kullanc",role:i,section:null,editingId:null,editingType:null,lastSeen:Date.now()},lr(Mt(Vt,"arge","_presence"),Fe,{merge:!0}).then(()=>console.log("[PRESENCE] lk presence yazld")).catch(st=>console.error("[PRESENCE] lk yazma HATASI:",st));const Le=setInterval(()=>{const st={};st[T.current]={username:(e==null?void 0:e.username)||"unknown",displayName:(e==null?void 0:e.displayName)||"Kullanc",role:i,section:oe.current.section,editingId:oe.current.editingId,editingType:oe.current.editingType,lastSeen:Date.now()},lr(Mt(Vt,"arge","_presence"),st,{merge:!0}).catch(mt=>console.error("[PRESENCE] Heartbeat hatas:",mt))},2e4),it=Kc(Mt(Vt,"arge","_presence"),st=>{if(!st.exists()){console.log("[PRESENCE] _presence dokman yok");return}const mt=st.data(),Wt=Date.now(),ir={},Ft=Object.keys(mt).length;Object.entries(mt).forEach(([on,Ur])=>{!Ur||!Ur.lastSeen||Wt-Ur.lastSeen>6e4||on!==T.current&&(ir[on]=Ur)});const as=Object.keys(ir).length;console.log("[PRESENCE] Toplam kayt:",Ft,"| Aktif dier kullanc:",as,as>0?Object.values(ir).map(on=>on.displayName):""),X(ir)},st=>{console.error("[PRESENCE] Dinleme HATASI:",st)}),nt=()=>{const st={};st[T.current]={lastSeen:0},lr(Mt(Vt,"arge","_presence"),st,{merge:!0}).catch(()=>{})};return window.addEventListener("beforeunload",nt),()=>{D.forEach(st=>st()),He(),it(),clearInterval(Le),clearTimeout(Se),window.removeEventListener("beforeunload",nt),nt()}},[]),B.useEffect(()=>{Q("researchers",je)},[je,Q]),B.useEffect(()=>{Q("topics",x)},[x,Q]),B.useEffect(()=>{Q("projects",k)},[k,Q]),B.useEffect(()=>{Q("quicklinks",or)},[or,Q]),B.useEffect(()=>{ye("cfg_roles",Ct)},[Ct,ye]),B.useEffect(()=>{ye("cfg_statuses",rr)},[rr,ye]),B.useEffect(()=>{ye("cfg_priorities",Er)},[Er,ye]),B.useEffect(()=>{ye("cfg_ptypes",nr)},[nr,ye]),B.useEffect(()=>{ye("cfg_categories",pn)},[pn,ye]),B.useEffect(()=>{Q("cfg_indexTypes",ts)},[ts,Q]),B.useEffect(()=>{ye("cfg_projectTypeCoeff",Cn)},[Cn,ye]),B.useEffect(()=>{ye("cfg_degrees",tn)},[tn,ye]),B.useEffect(()=>{ye("cfg_edustatus",Sr)},[Sr,ye]),B.useEffect(()=>{Pe&&De?F(De==="topic"?"topics":"projects",Pe.id,De):$e?F("researchers",$e.id,"researcher"):F(null,null,null)},[Pe,De,$e,F]);const $n=B.useMemo(()=>{const D={},G={};let ae=0;return Object.values(V).forEach(de=>{de.editingId&&(G[de.username]||(G[de.username]=M[ae%M.length],ae++),D[de.editingId]={displayName:de.displayName,role:de.role,username:de.username,color:G[de.username]})}),D},[V,M]),nn=B.useMemo(()=>{const D={};let G=0;return Object.values(V).forEach(ae=>{(!D[ae.username]||ae.lastSeen>D[ae.username].lastSeen)&&(D[ae.username]||G++,D[ae.username]={...ae,color:M[(G-1)%M.length]})}),Object.values(D)},[V,M]);Jt=Ct,Ot=rr,Zn=Er,Si=nr,Gh=pn,go=tn,xo=Sr,Sn=ts,ku=Cn;const sr=(D,G="success")=>{ht({message:D,type:G}),setTimeout(()=>ht(null),3e3)},fl=(D,G,ae)=>{const de=x.find(Se=>Se.id===D);if(de!=null&&de.researchers.some(Se=>Se.researcherId===G)){sr("Bu aratrmac zaten bu konuya atanm","warning");return}_t({topicId:D,researcherId:G,position:{x:(ae==null?void 0:ae.clientX)||window.innerWidth/2,y:(ae==null?void 0:ae.clientY)||window.innerHeight/2}})},rs=D=>{if(!xt)return;const G={researcherId:xt.researcherId,role:D};A(Se=>Se.map(He=>He.id===xt.topicId?{...He,researchers:[...He.researchers,G]}:He));const ae=k.find(Se=>(Se.topics||[]).includes(xt.topicId));ae&&((ae.researchers||[]).some(He=>He.researcherId===xt.researcherId)||E(He=>He.map(Fe=>Fe.id===ae.id?{...Fe,researchers:[...Fe.researchers||[],G]}:Fe)));const de=je.find(Se=>Se.id===xt.researcherId);sr(`${de==null?void 0:de.name} konuya ${Jt[D].label} olarak atand`),_t(null)},sn=(D,G)=>{const ae=k.find(He=>He.id===D);if(!ae)return;if((ae.topics||[]).includes(G)){sr("Bu konu zaten bu projeye ekli","warning");return}const de=x.find(He=>He.id===G),Se=(de==null?void 0:de.researchers)||[];E(He=>He.map(Fe=>{if(Fe.id!==D)return Fe;const Le=new Set((Fe.researchers||[]).map(nt=>nt.researcherId)),it=Se.filter(nt=>!Le.has(nt.researcherId));return{...Fe,topics:[...Fe.topics||[],G],researchers:[...Fe.researchers||[],...it]}})),sr(`"${de==null?void 0:de.title}" projeye eklendi`)},Ls=D=>{const G=x.find(Se=>Se.id===D);if(!G)return;if(k.some(Se=>(Se.topics||[]).includes(D))){sr("Bu konu zaten bir projeye bal","warning");return}const de={id:`p_${Date.now()}`,title:G.title,description:G.description||"",type:G.projectType||"",projectTypeDetail:G.projectTypeDetail||"",status:"planning",priority:G.priority||"medium",startDate:G.startDate||"",endDate:G.endDate||"",budget:0,fundingSource:"",workLink:G.workLink||"",topics:[D],tasks:[],researchers:[...G.researchers||[]]};E(Se=>[...Se,de]),Y(""),w(""),sr(`"${G.title}" konusundan yeni proje oluturuldu`)},ns=D=>{const G=k.find(ae=>ae.id===D);G&&confirm(`"${G.title}" projesi iptal edilecek ve tm konular projelendirilmemi olacak. Emin misiniz?`)&&(E(ae=>ae.filter(de=>de.id!==D)),sr(`"${G.title}" projesi iptal edildi, konular serbest brakld`,"warning"),(Pe==null?void 0:Pe.id)===D&&(Ue(null),pe(null)))},xs=D=>{const G=x.find(Se=>Se.id===D);if(!G)return;const ae=k.find(Se=>(Se.topics||[]).includes(D));if(ae&&(ae.topics||[]).filter(He=>He!==D).length===0){alert(`"${G.title}" konusu silinemez!

"${ae.title}" projesinin tek konusu budur. Bir projenin en az bir konusu olmak zorundadr.

nce projeyi iptal edin, ardndan konuyu silebilirsiniz.
(Proje kartnda  "Projeyi ptal Et" butonu)`);return}let de=`"${G.title}" konusu kalc olarak silinecek.`;if(ae&&(de+=`

 Bu konu "${ae.title}" projesiyle ilikilidir. Konu projeden de karlacaktr.`),de+=`

Bu ilem geri alnamaz. Devam etmek istiyor musunuz?`,!!confirm(de)){if(ae){const Se=(ae.topics||[]).filter(Le=>Le!==D),He=new Set((G.researchers||[]).map(Le=>Le.researcherId)),Fe=new Set;Se.forEach(Le=>{const it=x.find(nt=>nt.id===Le);it&&(it.researchers||[]).forEach(nt=>Fe.add(nt.researcherId))}),E(Le=>Le.map(it=>{if(it.id!==ae.id)return it;const nt=(it.researchers||[]).filter(st=>!He.has(st.researcherId)||Fe.has(st.researcherId));return{...it,topics:Se,researchers:nt}}))}A(Se=>Se.filter(He=>He.id!==D)),sr(`"${G.title}" konusu silindi`,"warning"),(Pe==null?void 0:Pe.id)===D&&(Ue(null),pe(null))}},Rt=D=>{const G=je.find(He=>He.id===D);if(!G)return;const ae=x.filter(He=>(He.researchers||[]).some(Fe=>Fe.researcherId===D)),de=k.filter(He=>(He.researchers||[]).some(Fe=>Fe.researcherId===D));let Se=`"${G.title?G.title+" ":""}${G.name}" kiisi kalc olarak silinecek.`;(ae.length>0||de.length>0)&&(Se+=`

 DKKAT: Bu kii u anda;`,ae.length>0&&(Se+=`
 ${ae.length} konuda (${ae.slice(0,3).map(He=>He.title).join(", ")}${ae.length>3?"...":""})`),de.length>0&&(Se+=`
 ${de.length} projede (${de.slice(0,3).map(He=>He.title).join(", ")}${de.length>3?"...":""})`),Se+=`

grev almaktadr. Silinirse TM konulardan ve projelerden de kaldrlacaktr!`),Se+=`

Bu ilem geri alnamaz. Devam etmek istiyor musunuz?`,confirm(Se)&&(ae.length>0&&A(He=>He.map(Fe=>({...Fe,researchers:(Fe.researchers||[]).filter(Le=>Le.researcherId!==D)}))),de.length>0&&E(He=>He.map(Fe=>({...Fe,researchers:(Fe.researchers||[]).filter(Le=>Le.researcherId!==D)}))),O(He=>He.filter(Fe=>Fe.id!==D)),sr(`"${G.name}" silindi ve tm atamalardan kaldrld`,"warning"),($e==null?void 0:$e.id)===D&&Ee(null))},ss=D=>{const G=k.find(Se=>(Se.topics||[]).includes(D));if(!G)return;const ae=x.find(Se=>Se.id===D),de=(G.topics||[]).filter(Se=>Se!==D);if(de.length===0){alert(`"${ae==null?void 0:ae.title}" projeden karlamaz!

"${G.title}" projesinin tek konusu budur. Bir projenin en az bir konusu olmak zorundadr.

nce projeyi iptal edin, ardndan konuyu bamsz kullanabilirsiniz.
(Proje kartnda  "Projeyi ptal Et" butonu)`);return}else{const Se=new Set(((ae==null?void 0:ae.researchers)||[]).map(Fe=>Fe.researcherId)),He=new Set;de.forEach(Fe=>{const Le=x.find(it=>it.id===Fe);Le&&(Le.researchers||[]).forEach(it=>He.add(it.researcherId))}),E(Fe=>Fe.map(Le=>{if(Le.id!==G.id)return Le;const it=(Le.researchers||[]).filter(nt=>!Se.has(nt.researcherId)||He.has(nt.researcherId));return{...Le,topics:de,researchers:it}})),sr(`"${ae==null?void 0:ae.title}" projeden karld`)}},kt=D=>{if(De==="topic"){A(Fe=>Fe.map(Le=>Le.id===D.id?D:Le));const G=x.find(Fe=>Fe.id===D.id),ae=new Set(((G==null?void 0:G.researchers)||[]).map(Fe=>Fe.researcherId)),de=new Set((D.researchers||[]).map(Fe=>Fe.researcherId)),Se=new Set([...ae].filter(Fe=>!de.has(Fe))),He=(D.researchers||[]).filter(Fe=>!ae.has(Fe.researcherId));E(Fe=>Fe.map(Le=>{if(!(Le.topics||[]).includes(D.id))return Le;const it=new Set;(Le.topics||[]).filter(mt=>mt!==D.id).forEach(mt=>{const Wt=x.find(ir=>ir.id===mt);Wt&&(Wt.researchers||[]).forEach(ir=>it.add(ir.researcherId))});let nt=(Le.researchers||[]).filter(mt=>!!(!Se.has(mt.researcherId)||it.has(mt.researcherId)));nt=nt.map(mt=>{const Wt=(D.researchers||[]).find(ir=>ir.researcherId===mt.researcherId);return Wt?{...mt,role:Wt.role,isIdeaOwner:Wt.isIdeaOwner||!1}:mt});const st=new Set(nt.map(mt=>mt.researcherId));return He.forEach(mt=>{st.has(mt.researcherId)||nt.push({...mt})}),{...Le,researchers:nt}}))}else E(G=>G.map(ae=>ae.id===D.id?D:ae)),A(G=>G.map(ae=>{if(!(D.topics||[]).includes(ae.id))return ae;const de=(ae.researchers||[]).map(Se=>{const He=(D.researchers||[]).find(Fe=>Fe.researcherId===Se.researcherId);return He?{...Se,isIdeaOwner:He.isIdeaOwner||!1,role:He.role}:Se});return{...ae,researchers:de}}));Ue(D)},ys=D=>{O(G=>G.map(ae=>ae.id===D.id?D:ae)),Ee(D)},ba=(D,G)=>{D==="researcher"?O(ae=>[...ae,G]):D==="topic"?A(ae=>[...ae,G]):E(ae=>[...ae,G]),sr(`${D==="researcher"?"Aratrmac":D==="topic"?"Konu":"Proje"} eklendi`)},ui=B.useMemo(()=>[...new Set(je.map(D=>D.institution).filter(Boolean))],[je]),Fs=B.useCallback(D=>x.filter(G=>G.researchers.some(ae=>ae.researcherId===D)&&G.status!=="completed"&&G.status!=="failed").length,[x]),xn=B.useMemo(()=>{if(!_)return{researcherIds:null,topicIds:null,projectIds:null};const D=_.toLowerCase(),G=new Set(je.filter(Le=>Le.name.toLowerCase().includes(D)||Le.researchAreas.some(it=>it.toLowerCase().includes(D))||(Le.institution||"").toLowerCase().includes(D)).map(Le=>Le.id)),ae=new Set(x.filter(Le=>Le.title.toLowerCase().includes(D)||(Le.description||"").toLowerCase().includes(D)).map(Le=>Le.id)),de=new Set(k.filter(Le=>Le.title.toLowerCase().includes(D)||(Le.description||"").toLowerCase().includes(D)).map(Le=>Le.id)),Se=new Set(ae),He=new Set(de),Fe=new Set(G);return G.forEach(Le=>{x.forEach(it=>{(it.researchers||[]).some(nt=>nt.researcherId===Le)&&Se.add(it.id)}),k.forEach(it=>{(it.researchers||[]).some(nt=>nt.researcherId===Le)&&He.add(it.id),(it.topics||[]).some(nt=>{const st=x.find(mt=>mt.id===nt);return st&&(st.researchers||[]).some(mt=>mt.researcherId===Le)})&&He.add(it.id)})}),ae.forEach(Le=>{const it=x.find(nt=>nt.id===Le);it&&(it.researchers||[]).forEach(nt=>Fe.add(nt.researcherId)),k.forEach(nt=>{(nt.topics||[]).includes(Le)&&He.add(nt.id)})}),de.forEach(Le=>{const it=k.find(nt=>nt.id===Le);it&&((it.topics||[]).forEach(nt=>{Se.add(nt);const st=x.find(mt=>mt.id===nt);st&&(st.researchers||[]).forEach(mt=>Fe.add(mt.researcherId))}),(it.researchers||[]).forEach(nt=>Fe.add(nt.researcherId)))}),{researcherIds:Fe,topicIds:Se,projectIds:He}},[_,je,x,k]),$s=B.useMemo(()=>{const D=je.filter(ae=>!(_&&xn.researcherIds&&!xn.researcherIds.has(ae.id)||R&&ae.institution!==R||q==="aof"&&!ae.isAofMember||q==="other"&&ae.isAofMember||C.unit&&!(ae.unit||"").toLowerCase().includes(C.unit.toLowerCase())||C.degree&&ae.eduDegree!==C.degree||C.status&&ae.eduStatus!==C.status||C.hasPIExp==="yes"&&!ae.hasPIExperience||C.hasPIExp==="no"&&ae.hasPIExperience||C.areaSearch&&!ae.researchAreas.some(de=>de.toLowerCase().includes(C.areaSearch.toLowerCase()))));return D.some(ae=>Fs(ae.id)>0)?D.sort((ae,de)=>Fs(de.id)-Fs(ae.id)):D},[je,x,_,xn,R,q,C,Fs]),Bn=B.useMemo(()=>{const D=q?new Set(je.filter(Se=>q==="aof"?Se.isAofMember:!Se.isAofMember).map(Se=>Se.id)):null,G=Se=>!D||D.has(Se),ae=Se=>{const He=new Set;return x.filter(Fe=>Fe.status===Se).forEach(Fe=>(Fe.researchers||[]).forEach(Le=>{G(Le.researcherId)&&He.add(Le.researcherId)})),He.size},de=Se=>{const He=new Set;return k.filter(Fe=>Fe.status===Se).forEach(Fe=>{(Fe.researchers||[]).forEach(Le=>{G(Le.researcherId)&&He.add(Le.researcherId)}),(Fe.topics||[]).forEach(Le=>{const it=x.find(nt=>nt.id===Le);it&&(it.researchers||[]).forEach(nt=>{G(nt.researcherId)&&He.add(nt.researcherId)})})}),He.size};return{proposedTopicRes:ae("proposed"),activeTopicRes:ae("active"),completedTopicRes:ae("completed"),proposedProjectRes:de("proposed")+de("planning"),activeProjectRes:de("active"),completedProjectRes:de("completed")}},[x,k,je,q]),an={critical:0,high:1,medium:2,low:3},cr=B.useMemo(()=>x.filter(G=>!(_&&xn.topicIds&&!xn.topicIds.has(G.id)||ge&&G.status!==ge||Ne&&G.priority!==Ne||fe.projectType&&G.projectType!==fe.projectType||fe.category&&G.category!==fe.category||fe.researchMethod&&!(G.researchMethod||"").toLowerCase().includes(fe.researchMethod.toLowerCase())||fe.hasProject==="yes"&&!k.some(ae=>(ae.topics||[]).includes(G.id))||fe.hasProject==="no"&&k.some(ae=>(ae.topics||[]).includes(G.id))||fe.roleFilter&&!(G.researchers||[]).some(ae=>ae.role===fe.roleFilter))).sort((G,ae)=>{const de=k.some(Le=>(Le.topics||[]).includes(G.id))?1:0,Se=k.some(Le=>(Le.topics||[]).includes(ae.id))?1:0;if(de!==Se)return de-Se;const He=Hc[G.status]??3,Fe=Hc[ae.status]??3;return He!==Fe?He-Fe:(an[G.priority]??2)-(an[ae.priority]??2)}),[x,k,_,xn,ge,Ne,fe]),ln=B.useMemo(()=>k.filter(G=>!(_&&xn.projectIds&&!xn.projectIds.has(G.id)||H&&G.status!==H||ue&&G.priority!==ue||ze.type&&G.type!==ze.type||ze.fundingSource&&!(G.fundingSource||"").toLowerCase().includes(ze.fundingSource.toLowerCase())||ze.budgetMin&&(G.budget||0)<Number(ze.budgetMin)||ze.budgetMax&&(G.budget||0)>Number(ze.budgetMax))).sort((G,ae)=>{const de=Hc[G.status]??3,Se=Hc[ae.status]??3;return de!==Se?de-Se:(an[G.priority]??2)-(an[ae.priority]??2)}),[k,_,xn,H,ue,ze]),ur=B.useMemo(()=>{const D=[...x.flatMap(G=>G.tasks||[]),...k.flatMap(G=>G.tasks||[])];return{researchers:je.length,proposedTopics:x.filter(G=>G.status==="proposed").length,activeTopics:x.filter(G=>G.status==="active").length,completedTopics:x.filter(G=>G.status==="completed").length,proposedProjects:k.filter(G=>G.status==="planning"||G.status==="proposed").length,activeProjects:k.filter(G=>G.status==="active").length,completedProjects:k.filter(G=>G.status==="completed").length,totalTasks:D.length,completedTasks:D.filter(G=>G.status==="done").length,inProgressTasks:D.filter(G=>G.status==="in_progress").length}},[$s,x,k]),is=B.useMemo(()=>{let D=0;return x.forEach(G=>{G.status!=="completed"&&G.status!=="archived"&&Io(G.endDate)&&D++}),k.forEach(G=>{G.status!=="completed"&&G.status!=="archived"&&Io(G.endDate)&&D++}),D},[x,k]);return t.jsxs("div",{className:"h-screen flex flex-col bg-slate-50 overflow-hidden",children:[t.jsxs("header",{className:"bg-white border-b border-slate-200 px-5 py-3 flex items-center justify-between flex-shrink-0 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:t.jsx(co,{size:18,className:"text-white"})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-base font-bold text-slate-800 leading-tight",children:["Anadolu niversitesi ",t.jsx("span",{className:"text-slate-400 font-normal",children:"|"})," Akretim Fakltesi"]}),t.jsx("p",{className:"text-xs text-slate-400",children:"Ar-Ge Akademik Aratrma & Proje Ynetimi"})]})]}),t.jsx("div",{className:"flex-1 max-w-md mx-6",children:t.jsxs("div",{className:"relative",children:[t.jsx(Mv,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{value:_,onChange:D=>P(D.target.value),placeholder:"Ara... (ilikili konu, proje ve kiileri de gsterir)",className:"w-full pl-9 pr-4 py-2 text-sm border border-slate-200 rounded-xl bg-slate-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 transition-all"}),_&&t.jsx("button",{onClick:()=>P(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500",children:t.jsx(Rr,{size:14})})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>{Ht(!tr),An(!1)},className:`p-2 rounded-lg transition-colors ${tr?"bg-amber-100 text-amber-600":"hover:bg-slate-100 text-slate-500"}`,title:"Yaklaan Tarihler",children:[t.jsx(ig,{size:18}),is>0&&t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4.5 h-4.5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center min-w-[18px] h-[18px] leading-none",children:is})]}),tr&&t.jsx(ew,{topics:x,projects:k,onClose:()=>Ht(!1)})]}),t.jsx("button",{onClick:()=>{An(!0),Ht(!1)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",title:"Takvim",children:t.jsx(Wh,{size:18})}),t.jsx("button",{onClick:()=>{Ds(!0),Ht(!1)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",title:"Tablo Grnm & Da Aktar",children:t.jsx(hg,{size:18})}),t.jsx("button",{onClick:()=>{li(!0),Ht(!1)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",title:"statistikler",children:t.jsx(yo,{size:18})}),t.jsx("button",{onClick:()=>{jt(!0),Ht(!1)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",title:"Leaderboard",children:t.jsx(sl,{size:18})}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>{qt(!Lt),Ht(!1)},className:`p-2 rounded-lg transition-colors ${Lt?"bg-indigo-100 text-indigo-600":"hover:bg-slate-100 text-slate-500"}`,title:"Balantlar",children:t.jsx(Qh,{size:18})}),Lt&&t.jsx(ZN,{links:or,onChange:hn,onClose:()=>qt(!1)})]}),t.jsxs("button",{onClick:va,className:`flex items-center gap-1 px-2 py-1 rounded-lg text-[10px] font-medium cursor-pointer transition-all hover:shadow-sm ${ne==="connecting"?"bg-yellow-50 text-yellow-600 animate-pulse hover:bg-yellow-100":ne==="error"?"bg-red-50 text-red-600 hover:bg-red-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,title:"Tklayn: Firestore balant testi yaplr",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${ne==="connecting"?"bg-yellow-400":ne==="error"?"bg-red-400":"bg-emerald-400"}`}),ne==="connecting"?"Balanyor...":ne==="error"?"Hata! (Test Et)":"Bal"]}),h&&fn!=="idle"&&t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg text-[10px] font-medium transition-all ${fn==="saving"?"bg-amber-50 text-amber-600":"bg-emerald-50 text-emerald-600"}`,children:[t.jsx(Gf,{size:12,className:fn==="saving"?"animate-pulse":""}),fn==="saving"?"Kaydediliyor...":"Kaydedildi"]}),h&&oi&&fn==="idle"&&t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-[10px] text-slate-400",title:`Son kayt: ${oi.toLocaleTimeString("tr-TR")}`,children:[t.jsx(Gf,{size:11}),oi.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]}),h&&t.jsx("button",{onClick:Ui,disabled:zs==="syncing",className:`p-2 rounded-lg transition-all ${zs==="done"?"bg-emerald-100 text-emerald-600":zs==="syncing"?"bg-indigo-100 text-indigo-600":"hover:bg-slate-100 text-slate-500"}`,title:"Senkronize Et",children:t.jsx(iu,{size:18,className:zs==="syncing"?"animate-spin":""})}),a&&t.jsxs("div",{className:"relative group",children:[t.jsx("button",{onClick:vr,className:"p-2 rounded-lg hover:bg-amber-50 text-slate-500 hover:text-amber-600 transition-colors",title:gn?`Son yedek: ${gn.toLocaleDateString("tr-TR")} ${gn.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:"Yedek al (JSON + Firestore)",children:t.jsx(nu,{size:18})}),t.jsx("input",{type:"file",accept:".json",id:"backup-restore-input",className:"hidden",onChange:D=>{D.target.files[0]&&ci(D.target.files[0]),D.target.value=""}})]}),o&&t.jsx("button",{onClick:()=>{$i(!0),Ht(!1)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",title:"Ayarlar",children:t.jsx(wu,{size:18})}),nn.length>0&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("div",{className:"flex -space-x-2",children:[nn.slice(0,4).map((D,G)=>t.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold text-white ${D.color.bg} ring-2 ring-white shadow-sm`,title:`${D.displayName} (${D.role==="master"?"Master":D.role==="admin"?"Ynetici":D.role==="editor"?"Editr":"Grntleyici"})${D.editingId?"  dzenliyor":"  evrimii"}`,children:(D.displayName||"?")[0]},D.username)),nn.length>4&&t.jsxs("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold text-slate-600 bg-slate-200 ring-2 ring-white",children:["+",nn.length-4]})]}),t.jsxs("span",{className:"text-[10px] text-slate-400 ml-1",children:[nn.length," evrimii"]})]}),nn.length>0&&t.jsx("div",{className:"w-px h-6 bg-slate-200"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-xs font-medium text-slate-700",children:(e==null?void 0:e.displayName)||"Kullanc"})}),t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold text-xs ${a?"bg-red-100 text-red-600 ring-2 ring-red-300":o?"bg-emerald-100 text-emerald-600 ring-2 ring-emerald-300":d?"bg-violet-100 text-violet-600 ring-2 ring-violet-300":"bg-indigo-100 text-indigo-600"}`,children:((e==null?void 0:e.displayName)||"K")[0]}),t.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors",title:"k Yap",children:t.jsx(Rv,{size:16})})]})]})]}),p&&t.jsx("div",{className:"fixed inset-0 z-[60] bg-gradient-to-br from-indigo-900/90 to-purple-900/90 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 text-center space-y-4",children:[t.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx(iu,{size:32,className:"text-indigo-500 animate-spin"})}),t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Sayfa Gncelleniyor"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Ynetici verileri yaynlad. Sayfa yeniden ykleniyor..."})]})}),a&&!Ms&&(gn===null||Date.now()-gn.getTime()>720*60*60*1e3)&&t.jsxs("div",{className:"bg-red-600 text-white px-5 py-3 flex items-center justify-between flex-shrink-0 shadow-md",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Di,{size:20,className:"text-yellow-300 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold",children:"Yedekleme Uyars!"}),t.jsx("p",{className:"text-xs text-red-100",children:gn===null?"Hi yedek alnmam! Veri kaybn nlemek iin hemen yedek aln.":`Son yedek ${Math.floor((Date.now()-gn.getTime())/(1440*60*1e3))} gn nce alnd. 30 gn atnz!`})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.jsxs("button",{onClick:vr,className:"px-4 py-1.5 bg-white text-red-600 text-xs font-bold rounded-lg hover:bg-red-50 transition-colors flex items-center gap-1.5",children:[t.jsx(nu,{size:14})," Hemen Yedekle"]}),t.jsx("button",{onClick:()=>rn(!0),className:"p-1 hover:bg-red-500 rounded transition-colors",title:"Kapat",children:t.jsx(Rr,{size:16})})]})]}),t.jsxs("div",{className:"bg-white border-b border-slate-200 px-5 py-2.5 flex items-center gap-3 flex-shrink-0 overflow-x-auto",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-lg",children:[t.jsx(_n,{size:14,className:"text-indigo-500"}),t.jsx("span",{className:"text-xs text-slate-500",children:"Aratrmac"}),t.jsx("span",{className:"text-sm font-bold text-indigo-700",children:ur.researchers})]}),t.jsx("div",{className:"w-px h-6 bg-slate-200"}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 rounded-lg",children:[t.jsx(Pt,{size:12,className:"text-slate-400"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"nerilen Konu"}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:ur.proposedTopics})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-emerald-50 rounded-lg",children:[t.jsx(Pt,{size:12,className:"text-emerald-500"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"Aktif Konu"}),t.jsx("span",{className:"text-xs font-bold text-emerald-700",children:ur.activeTopics})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-blue-50 rounded-lg",children:[t.jsx(Pt,{size:12,className:"text-blue-500"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"Tamamlanan Konu"}),t.jsx("span",{className:"text-xs font-bold text-blue-700",children:ur.completedTopics})]}),t.jsx("div",{className:"w-px h-6 bg-slate-200"}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-amber-50 rounded-lg",children:[t.jsx(bt,{size:12,className:"text-amber-500"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"nerilen Proje"}),t.jsx("span",{className:"text-xs font-bold text-amber-700",children:ur.proposedProjects})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-violet-50 rounded-lg",children:[t.jsx(bt,{size:12,className:"text-violet-500"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"Aktif Proje"}),t.jsx("span",{className:"text-xs font-bold text-violet-700",children:ur.activeProjects})]}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-teal-50 rounded-lg",children:[t.jsx(bt,{size:12,className:"text-teal-500"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"Tamamlanan Proje"}),t.jsx("span",{className:"text-xs font-bold text-teal-700",children:ur.completedProjects})]}),t.jsx("div",{className:"w-px h-6 bg-slate-200"}),t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-sky-50 rounded-lg",children:[t.jsx(Xh,{size:12,className:"text-sky-500"}),t.jsx("span",{className:"text-[11px] text-slate-500",children:"Grevler"}),t.jsxs("span",{className:"text-xs font-bold text-sky-700",children:[ur.completedTasks,"/",ur.totalTasks]})]})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[(!S||S==="researchers")&&t.jsxs("div",{className:`${S==="researchers"?"flex-1":"w-1/3"} min-w-0 border-r border-slate-200 flex flex-col bg-white/50 transition-all`,children:[t.jsxs("div",{className:"p-3 border-b border-slate-100 space-y-2 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:`font-bold text-slate-700 flex items-center gap-1.5 ${S==="researchers"?"text-base":"text-sm"}`,children:[t.jsx(_n,{size:S==="researchers"?18:15,className:"text-indigo-500"}),"Aratrmaclar",t.jsx(ct,{className:"bg-slate-100 text-slate-500 ml-1",children:$s.length})]}),t.jsxs("button",{onClick:()=>re(!me),className:"flex items-center gap-1 mt-1 text-[10px] font-medium text-indigo-500 hover:text-indigo-700 transition-colors",children:[t.jsx(yo,{size:11}),t.jsx("span",{children:"Aratrmac statistikleri"}),t.jsx(ag,{size:10,className:`transition-transform ${me?"rotate-180":""}`})]}),me&&t.jsxs("div",{className:"mt-1.5 bg-gradient-to-br from-slate-50 to-indigo-50/30 rounded-lg p-2 border border-slate-100 space-y-1.5",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[t.jsxs("div",{className:"text-center p-1.5 bg-white rounded border border-slate-100",children:[t.jsx("p",{className:"text-[9px] text-slate-400 mb-0.5",children:"nerilen Konu"}),t.jsx("p",{className:"text-sm font-bold text-slate-600",children:Bn.proposedTopicRes}),t.jsx("p",{className:"text-[8px] text-slate-300",children:"kii"})]}),t.jsxs("div",{className:"text-center p-1.5 bg-emerald-50 rounded border border-emerald-100",children:[t.jsx("p",{className:"text-[9px] text-emerald-500 mb-0.5",children:"Aktif Konu"}),t.jsx("p",{className:"text-sm font-bold text-emerald-600",children:Bn.activeTopicRes}),t.jsx("p",{className:"text-[8px] text-emerald-300",children:"kii"})]}),t.jsxs("div",{className:"text-center p-1.5 bg-blue-50 rounded border border-blue-100",children:[t.jsx("p",{className:"text-[9px] text-blue-500 mb-0.5",children:"Tamamlanan Konu"}),t.jsx("p",{className:"text-sm font-bold text-blue-600",children:Bn.completedTopicRes}),t.jsx("p",{className:"text-[8px] text-blue-300",children:"kii"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[t.jsxs("div",{className:"text-center p-1.5 bg-white rounded border border-slate-100",children:[t.jsx("p",{className:"text-[9px] text-slate-400 mb-0.5",children:"nerilen Proje"}),t.jsx("p",{className:"text-sm font-bold text-amber-600",children:Bn.proposedProjectRes}),t.jsx("p",{className:"text-[8px] text-slate-300",children:"kii"})]}),t.jsxs("div",{className:"text-center p-1.5 bg-violet-50 rounded border border-violet-100",children:[t.jsx("p",{className:"text-[9px] text-violet-500 mb-0.5",children:"Aktif Proje"}),t.jsx("p",{className:"text-sm font-bold text-violet-600",children:Bn.activeProjectRes}),t.jsx("p",{className:"text-[8px] text-violet-300",children:"kii"})]}),t.jsxs("div",{className:"text-center p-1.5 bg-blue-50 rounded border border-blue-100",children:[t.jsx("p",{className:"text-[9px] text-blue-500 mb-0.5",children:"Tamamlanan Proje"}),t.jsx("p",{className:"text-sm font-bold text-blue-600",children:Bn.completedProjectRes}),t.jsx("p",{className:"text-[8px] text-blue-300",children:"kii"})]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>$(S==="researchers"?null:"researchers"),className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400 transition-colors",title:S==="researchers"?"Normal Grnm":"Tam Ekran",children:S==="researchers"?t.jsx(qc,{size:14}):t.jsx(Yc,{size:14})}),t.jsx("button",{onClick:()=>xe(!J),className:`p-1.5 rounded-lg transition-colors ${J?"bg-indigo-100 text-indigo-600":"hover:bg-slate-100 text-slate-400"}`,title:"Detayl Filtre",children:t.jsx(Hl,{size:14})}),h&&t.jsx("button",{onClick:()=>rt("researcher"),className:"p-1.5 rounded-lg hover:bg-indigo-50 text-indigo-500 transition-colors",title:"Yeni Aratrmac",children:t.jsx(ti,{size:16})})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx(Yl,{label:"Kurum",icon:Ti,options:ui.map(D=>({value:D,label:D.length>20?D.slice(0,20)+"...":D})),value:R,onChange:K}),t.jsxs("div",{className:"flex items-center border border-teal-200 rounded-lg overflow-hidden",children:[t.jsx("button",{onClick:()=>j(""),className:`px-2 py-1 text-[10px] font-medium transition-colors ${q?"bg-white text-slate-500 hover:bg-teal-50":"bg-teal-500 text-white"}`,children:"Tm"}),t.jsx("button",{onClick:()=>j("aof"),className:`px-2 py-1 text-[10px] font-medium transition-colors border-l border-teal-200 ${q==="aof"?"bg-teal-500 text-white":"bg-white text-teal-600 hover:bg-teal-50"}`,children:"AF"}),t.jsx("button",{onClick:()=>j("other"),className:`px-2 py-1 text-[10px] font-medium transition-colors border-l border-teal-200 ${q==="other"?"bg-teal-500 text-white":"bg-white text-slate-500 hover:bg-teal-50"}`,children:"Dier"})]})]}),J&&t.jsxs("div",{className:"bg-indigo-50/50 rounded-lg p-2.5 space-y-2 border border-indigo-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-wider",children:"Detayl Filtre"}),t.jsx("button",{onClick:()=>ie({unit:"",degree:"",status:"",hasPIExp:"",areaSearch:""}),className:"text-[10px] text-slate-400 hover:text-red-500",children:"Temizle"})]}),t.jsx("input",{value:C.unit,onChange:D=>ie({...C,unit:D.target.value}),placeholder:"Birim ara...",className:"w-full text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 focus:border-indigo-300 outline-none"}),t.jsx("input",{value:C.areaSearch,onChange:D=>ie({...C,areaSearch:D.target.value}),placeholder:"Aratrma alan ara...",className:"w-full text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 focus:border-indigo-300 outline-none"}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[t.jsxs("select",{value:C.degree,onChange:D=>ie({...C,degree:D.target.value}),className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:[t.jsx("option",{value:"",children:"Derece"}),go.map(D=>t.jsx("option",{value:D,children:D},D))]}),t.jsxs("select",{value:C.status,onChange:D=>ie({...C,status:D.target.value}),className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:[t.jsx("option",{value:"",children:"Et. Durumu"}),xo.map(D=>t.jsx("option",{value:D,children:D},D))]})]}),t.jsxs("select",{value:C.hasPIExp,onChange:D=>ie({...C,hasPIExp:D.target.value}),className:"w-full text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-indigo-200 outline-none",children:[t.jsx("option",{value:"",children:"PI Deneyimi"}),t.jsx("option",{value:"yes",children:"Var"}),t.jsx("option",{value:"no",children:"Yok"})]})]})]}),t.jsx("div",{className:`flex-1 overflow-y-auto ${S==="researchers"?"p-4":"p-3"}`,children:t.jsxs("div",{className:S==="researchers"?"grid grid-cols-2 xl:grid-cols-3 gap-3":"space-y-2",children:[$s.map(D=>t.jsx($N,{researcher:D,isAdmin:h,topics:x,projects:k,onClick:Ee,maximized:S==="researchers",editingBy:$n[D.id]},D.id)),$s.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Aratrmac bulunamad"})]})})]}),(!S||S==="topics")&&t.jsxs("div",{className:`${S==="topics"?"flex-1":"w-1/3"} min-w-0 border-r border-slate-200 flex flex-col bg-white/30 transition-all`,children:[t.jsxs("div",{className:"p-3 border-b border-slate-100 space-y-2 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:`font-bold text-slate-700 flex items-center gap-1.5 ${S==="topics"?"text-base":"text-sm"}`,children:[t.jsx(Pt,{size:S==="topics"?18:15,className:"text-emerald-500"}),"Konular",t.jsx(ct,{className:"bg-slate-100 text-slate-500 ml-1",children:cr.length})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>$(S==="topics"?null:"topics"),className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400 transition-colors",title:S==="topics"?"Normal Grnm":"Tam Ekran",children:S==="topics"?t.jsx(qc,{size:14}):t.jsx(Yc,{size:14})}),t.jsx("button",{onClick:()=>ve(!_e),className:`p-1.5 rounded-lg transition-colors ${_e?"bg-emerald-100 text-emerald-600":"hover:bg-slate-100 text-slate-400"}`,title:"Detayl Filtre",children:t.jsx(Hl,{size:14})}),h&&t.jsx("button",{onClick:()=>rt("topic"),className:"p-1.5 rounded-lg hover:bg-emerald-50 text-emerald-500 transition-colors",title:"Yeni Konu",children:t.jsx(ti,{size:16})})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Yl,{label:"Durum",icon:Hl,options:[{value:"proposed",label:"nerilen",dot:"bg-slate-400"},{value:"active",label:"Aktif",dot:"bg-emerald-500"},{value:"completed",label:"Tamamland",dot:"bg-blue-500"},{value:"failed",label:"Tamamlanamad",dot:"bg-red-500"}],value:ge,onChange:Ve}),t.jsx(Yl,{label:"ncelik",icon:co,options:[{value:"low",label:"Dk"},{value:"medium",label:"Orta"},{value:"high",label:"Yksek"},{value:"critical",label:"Kritik"}],value:Ne,onChange:we})]}),_e&&t.jsxs("div",{className:"bg-emerald-50/50 rounded-lg p-2.5 space-y-2 border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-wider",children:"Detayl Filtre"}),t.jsx("button",{onClick:()=>Ke({projectType:"",category:"",researchMethod:"",hasProject:"",roleFilter:""}),className:"text-[10px] text-slate-400 hover:text-red-500",children:"Temizle"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[t.jsxs("select",{value:fe.projectType,onChange:D=>Ke({...fe,projectType:D.target.value}),className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-emerald-200 outline-none",children:[t.jsx("option",{value:"",children:"Proje Tr"}),Si.map(D=>t.jsx("option",{value:D,children:D},D))]}),t.jsxs("select",{value:fe.category,onChange:D=>Ke({...fe,category:D.target.value}),className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-emerald-200 outline-none",children:[t.jsx("option",{value:"",children:"Kategori"}),[...new Set(x.map(D=>D.category).filter(Boolean))].map(D=>t.jsx("option",{value:D,children:D},D))]})]}),t.jsx("input",{value:fe.researchMethod,onChange:D=>Ke({...fe,researchMethod:D.target.value}),placeholder:"Aratrma yntemi ara...",className:"w-full text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-emerald-200 focus:border-emerald-300 outline-none"}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[t.jsxs("select",{value:fe.hasProject,onChange:D=>Ke({...fe,hasProject:D.target.value}),className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-emerald-200 outline-none",children:[t.jsx("option",{value:"",children:"Proje Durumu"}),t.jsx("option",{value:"yes",children:"Projelendirilmi"}),t.jsx("option",{value:"no",children:"Projelendirilmemi"})]}),t.jsxs("select",{value:fe.roleFilter,onChange:D=>Ke({...fe,roleFilter:D.target.value}),className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-emerald-200 outline-none",children:[t.jsx("option",{value:"",children:"Rol Filtresi"}),Object.entries(Jt).map(([D,G])=>t.jsx("option",{value:D,children:G.label},D))]})]})]})]}),t.jsx("div",{className:`flex-1 overflow-y-auto ${S==="topics"?"p-4":"p-3"}`,children:t.jsxs("div",{className:S==="topics"?"grid grid-cols-2 xl:grid-cols-3 gap-3":"space-y-2",children:[cr.map(D=>t.jsx(UN,{topic:D,allResearchers:je,isAdmin:h,projects:k,allTopics:x,onRemoveFromProject:ss,onDrop:fl,onClick:G=>{Ue(G),pe("topic")},maximized:S==="topics",editingBy:$n[D.id]},D.id)),cr.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Konu bulunamad"})]})})]}),(!S||S==="projects")&&t.jsxs("div",{className:`${S==="projects"?"flex-1":"w-1/3"} min-w-0 flex flex-col transition-all`,children:[t.jsxs("div",{className:"p-3 border-b border-slate-100 space-y-2 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:`font-bold text-slate-700 flex items-center gap-1.5 ${S==="projects"?"text-base":"text-sm"}`,children:[t.jsx(bt,{size:S==="projects"?18:15,className:"text-violet-500"}),"Projeler",t.jsx(ct,{className:"bg-slate-100 text-slate-500 ml-1",children:ln.length})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>$(S==="projects"?null:"projects"),className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400 transition-colors",title:S==="projects"?"Normal Grnm":"Tam Ekran",children:S==="projects"?t.jsx(qc,{size:14}):t.jsx(Yc,{size:14})}),t.jsx("button",{onClick:()=>Be(!qe),className:`p-1.5 rounded-lg transition-colors ${qe?"bg-violet-100 text-violet-600":"hover:bg-slate-100 text-slate-400"}`,title:"Detayl Filtre",children:t.jsx(Hl,{size:14})}),h&&t.jsx("button",{onClick:()=>rt("project"),className:"p-1.5 rounded-lg hover:bg-violet-50 text-violet-500 transition-colors",title:"Yeni Proje",children:t.jsx(ti,{size:16})})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Yl,{label:"Durum",icon:Hl,options:[{value:"planning",label:"lem Yaplyor",dot:"bg-amber-500"},{value:"active",label:"Aktif",dot:"bg-emerald-500"},{value:"review",label:"nceleme",dot:"bg-purple-500"},{value:"completed",label:"Tamamland",dot:"bg-blue-500"},{value:"failed",label:"Tamamlanamad",dot:"bg-red-500"}],value:H,onChange:Y}),t.jsx(Yl,{label:"ncelik",icon:co,options:[{value:"low",label:"Dk"},{value:"medium",label:"Orta"},{value:"high",label:"Yksek"},{value:"critical",label:"Kritik"}],value:ue,onChange:w})]}),qe&&t.jsxs("div",{className:"bg-violet-50/50 rounded-lg p-2.5 space-y-2 border border-violet-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-violet-600 uppercase tracking-wider",children:"Detayl Filtre"}),t.jsx("button",{onClick:()=>be({type:"",fundingSource:"",budgetMin:"",budgetMax:""}),className:"text-[10px] text-slate-400 hover:text-red-500",children:"Temizle"})]}),t.jsxs("select",{value:ze.type,onChange:D=>be({...ze,type:D.target.value}),className:"w-full text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-violet-200 outline-none",children:[t.jsx("option",{value:"",children:"Proje Tr"}),Si.map(D=>t.jsx("option",{value:D,children:D},D))]}),t.jsx("input",{value:ze.fundingSource,onChange:D=>be({...ze,fundingSource:D.target.value}),placeholder:"Fon kayna ara...",className:"w-full text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-violet-200 focus:border-violet-300 outline-none"}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[t.jsx("input",{type:"number",value:ze.budgetMin,onChange:D=>be({...ze,budgetMin:D.target.value}),placeholder:"Min bte ()",className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-violet-200 outline-none"}),t.jsx("input",{type:"number",value:ze.budgetMax,onChange:D=>be({...ze,budgetMax:D.target.value}),placeholder:"Max bte ()",className:"text-xs border border-slate-200 rounded px-2 py-1.5 bg-white focus:ring-1 focus:ring-violet-200 outline-none"})]})]})]}),t.jsxs("div",{className:`flex-1 overflow-y-auto transition-colors duration-200 ${S==="projects"?"p-4":"p-3"} ${gs?"bg-violet-50 ring-2 ring-inset ring-violet-300 rounded-lg":""}`,onDragOver:D=>{D.preventDefault(),D.dataTransfer.types&&Rs(!0)},onDragLeave:D=>{D.currentTarget.contains(D.relatedTarget)||Rs(!1)},onDrop:D=>{if(!o)return;D.preventDefault(),Rs(!1);const G=D.dataTransfer.getData("type"),ae=D.dataTransfer.getData("id");G==="topic"&&Ls(ae)},children:[t.jsxs("div",{className:S==="projects"?"grid grid-cols-2 xl:grid-cols-3 gap-3":"space-y-2",children:[ln.map(D=>t.jsx(KN,{project:D,topics:x,allResearchers:je,isAdmin:h,onDrop:sn,onCancelProject:ns,onClick:G=>{Ue(G),pe("project")},maximized:S==="projects",editingBy:$n[D.id]},D.id)),ln.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Proje bulunamad"})]}),gs&&t.jsxs("div",{className:"border-2 border-dashed border-violet-400 rounded-xl p-4 text-center animate-slide-up",children:[t.jsx(bt,{size:24,className:"text-violet-400 mx-auto mb-1"}),t.jsx("p",{className:"text-sm font-medium text-violet-600",children:"Konuyu buraya brakarak yeni proje olutur"}),t.jsx("p",{className:"text-xs text-violet-400 mt-0.5",children:"Konu bilgileri projeye aktarlacak"})]})]})]})]}),xt&&t.jsx(ON,{position:xt.position,onSelect:rs,onCancel:()=>_t(null)}),$e&&t.jsx(BN,{researcher:$e,topics:x,projects:k,allResearchers:je,isAdmin:h,onClose:()=>Ee(null),onUpdate:ys,onDeleteResearcher:Rt,onSelectTopic:D=>{Ee(null),Ue(D),pe("topic")},editingBy:$n[$e.id]}),Pe&&t.jsx(HN,{item:Pe,type:De,allResearchers:je,topics:x,projects:k,isAdmin:h,onClose:()=>{Ue(null),pe(null)},onUpdate:kt,onRemoveFromProject:ss,onCancelProject:ns,onDeleteTopic:xs,onSelectResearcher:D=>{Ue(null),pe(null),Ee(D)},onSelectTopic:D=>{Ue(D),pe("topic")},editingBy:$n[Pe.id]}),Te&&h&&t.jsx(GN,{type:Te,allTopics:x,projects:k,allResearchers:je,onAdd:D=>ba(Te,D),onClose:()=>rt(null)}),es&&t.jsx(tw,{topics:x,projects:k,onClose:()=>An(!1)}),Ze&&t.jsx(WN,{researchers:je,topics:x,projects:k,onClose:()=>jt(!1)}),$r&&t.jsx(XN,{researchers:je,topics:x,projects:k,onClose:()=>Ds(!1)}),On&&t.jsx(QN,{researchers:je,topics:x,projects:k,onClose:()=>li(!1)}),t.jsx(rw,{researchers:je,topics:x,projects:k}),Fi&&o&&t.jsx(qN,{roleConfig:Jt,onRoleConfigChange:Jr,statusConfig:Ot,onStatusConfigChange:Br,priorityConfig:Zn,onPriorityConfigChange:Zr,projectTypeOptions:Si,onProjectTypeOptionsChange:mn,categoryOptions:Gh,onCategoryOptionsChange:en,eduDegreeOptions:go,onEduDegreeOptionsChange:mr,eduStatusOptions:xo,onEduStatusOptionsChange:pr,indexTypesConfig:Sn,onIndexTypesConfigChange:Ln,projectTypeCoeffConfig:ku,onProjectTypeCoeffChange:In,quickLinks:or,onQuickLinksChange:hn,onResetDefaults:()=>{confirm("Tm ayarlar varsaylana sfrlamak istediinize emin misiniz?")&&(Jr(so),Br(ro),Zr(no),mn(to),en(lo),mr(io),pr(ao),Ln(oo),In(oa))},onExportData:()=>{const D={version:1,exportDate:new Date().toISOString(),researchers:je,topics:x,projects:k,quickLinks:or,config:{roles:Ct,statuses:rr,priorities:Er,projectTypes:nr,categories:pn,eduDegrees:tn,eduStatuses:Sr,indexTypes:ts,projectTypeCoeff:Cn}},G=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),ae=URL.createObjectURL(G),de=document.createElement("a");de.href=ae,de.download=`arge-dashboard-veri-${new Date().toISOString().slice(0,10)}.json`,de.click(),URL.revokeObjectURL(ae),sr("Veriler da aktarld!")},onImportData:D=>{var G,ae,de;if(!D.researchers||!D.topics){alert("Geersiz veri dosyas!");return}confirm(`Bu dosyada ${((G=D.researchers)==null?void 0:G.length)||0} aratrmac, ${((ae=D.topics)==null?void 0:ae.length)||0} konu, ${((de=D.projects)==null?void 0:de.length)||0} proje var.

Mevcut tm veriler bu dosyadakiyle deitirilecek. Devam etmek istiyor musunuz?`)&&(O(D.researchers||[]),A(D.topics||[]),E(D.projects||[]),D.quickLinks&&hn(D.quickLinks),D.config&&(D.config.roles&&Jr(D.config.roles),D.config.statuses&&Br(D.config.statuses),D.config.priorities&&Zr(D.config.priorities),D.config.projectTypes&&mn(D.config.projectTypes),D.config.categories&&en(D.config.categories),D.config.eduDegrees&&mr(D.config.eduDegrees),D.config.eduStatuses&&pr(D.config.eduStatuses),D.config.indexTypes&&Ln(D.config.indexTypes),D.config.projectTypeCoeff!==void 0&&In(D.config.projectTypeCoeff)),sr(`Veriler ie aktarld: ${D.researchers.length} aratrmac, ${D.topics.length} konu, ${(D.projects||[]).length} proje`))},onResetAllData:()=>{confirm(` DKKAT: Tm aratrmaclar, konular, projeler ve ayarlar balang haline dndrlecek.

Bu ilem geri alnamaz! Devam etmek istiyor musunuz?`)&&(O(vh),A(bh),E(jh),hn([]),Jr(so),Br(ro),Zr(no),mn(to),en(lo),mr(io),pr(ao),Ln(oo),In(oa),sr("Tm veriler sfrland","warning"))},onForceSync:Ui,syncStatus:zs,onForcePublish:Os,isMaster:a,onBackupDownload:vr,onBackupRestore:ci,lastBackupAt:gn,onClose:()=>$i(!1)}),gt&&t.jsx(FN,{message:gt.message,type:gt.type,onClose:()=>ht(null)}),t.jsxs("footer",{className:"bg-slate-100 border-t border-slate-200 px-5 py-1.5 flex flex-col items-center gap-0.5 text-[10px] text-slate-400 flex-shrink-0 select-none",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{children:" SE, 2026"}),t.jsx("span",{className:"text-slate-300",children:"|"}),t.jsx("span",{children:"Bu uygulama, Anadolu niversitesi Akretim Fakltesi Ar-Ge birimi ii bilgi amal olup izinsiz kullanlamaz."})]}),t.jsx("div",{className:"text-[9px] text-slate-300",children:"Son Sistem Gncellemesi: 1 Mart 2026, 10:50"})]}),t.jsx("style",{children:`
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      `})]})}function sw(){const{user:i,logout:e,loading:n}=ng();return n?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-10 h-10 border-3 border-indigo-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-400",children:"Ykleniyor..."})]})}):i?t.jsx(nw,{role:i.role,user:i,onLogout:e}):t.jsx($v,{})}function iw(){return t.jsx(kv,{children:t.jsx(sw,{})})}vv.createRoot(document.getElementById("root")).render(t.jsx(hv.StrictMode,{children:t.jsx(iw,{})}));
